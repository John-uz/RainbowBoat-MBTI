(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function G0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var B0={exports:{}},pl={},O0={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tr=Symbol.for("react.element"),fT=Symbol.for("react.portal"),pT=Symbol.for("react.fragment"),hT=Symbol.for("react.strict_mode"),mT=Symbol.for("react.profiler"),gT=Symbol.for("react.provider"),yT=Symbol.for("react.context"),vT=Symbol.for("react.forward_ref"),xT=Symbol.for("react.suspense"),ST=Symbol.for("react.memo"),TT=Symbol.for("react.lazy"),Pf=Symbol.iterator;function ET(e){return e===null||typeof e!="object"?null:(e=Pf&&e[Pf]||e["@@iterator"],typeof e=="function"?e:null)}var H0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z0=Object.assign,$0={};function ci(e,t,n){this.props=e,this.context=t,this.refs=$0,this.updater=n||H0}ci.prototype.isReactComponent={};ci.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ci.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function q0(){}q0.prototype=ci.prototype;function Ac(e,t,n){this.props=e,this.context=t,this.refs=$0,this.updater=n||H0}var kc=Ac.prototype=new q0;kc.constructor=Ac;z0(kc,ci.prototype);kc.isPureReactComponent=!0;var Rf=Array.isArray,J0=Object.prototype.hasOwnProperty,Pc={current:null},j0={key:!0,ref:!0,__self:!0,__source:!0};function W0(e,t,n){var o,i={},r=null,s=null;if(t!=null)for(o in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(r=""+t.key),t)J0.call(t,o)&&!j0.hasOwnProperty(o)&&(i[o]=t[o]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(o in a=e.defaultProps,a)i[o]===void 0&&(i[o]=a[o]);return{$$typeof:Tr,type:e,key:r,ref:s,props:i,_owner:Pc.current}}function wT(e,t){return{$$typeof:Tr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tr}function CT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Mf=/\/+/g;function Kl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?CT(""+e.key):t.toString(36)}function ss(e,t,n,o,i){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Tr:case fT:s=!0}}if(s)return s=e,i=i(s),e=o===""?"."+Kl(s,0):o,Rf(i)?(n="",e!=null&&(n=e.replace(Mf,"$&/")+"/"),ss(i,t,n,"",function(u){return u})):i!=null&&(Rc(i)&&(i=wT(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Mf,"$&/")+"/")+e)),t.push(i)),1;if(s=0,o=o===""?".":o+":",Rf(e))for(var a=0;a<e.length;a++){r=e[a];var l=o+Kl(r,a);s+=ss(r,t,n,l,i)}else if(l=ET(e),typeof l=="function")for(e=l.call(e),a=0;!(r=e.next()).done;)r=r.value,l=o+Kl(r,a++),s+=ss(r,t,n,l,i);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Rr(e,t,n){if(e==null)return e;var o=[],i=0;return ss(e,o,"","",function(r){return t.call(n,r,i++)}),o}function IT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},ls={transition:null},NT={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:ls,ReactCurrentOwner:Pc};function K0(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Rr,forEach:function(e,t,n){Rr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rr(e,function(){t++}),t},toArray:function(e){return Rr(e,function(t){return t})||[]},only:function(e){if(!Rc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=ci;re.Fragment=pT;re.Profiler=mT;re.PureComponent=Ac;re.StrictMode=hT;re.Suspense=xT;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NT;re.act=K0;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=z0({},e.props),i=e.key,r=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,s=Pc.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)J0.call(t,l)&&!j0.hasOwnProperty(l)&&(o[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];o.children=a}return{$$typeof:Tr,type:e.type,key:i,ref:r,props:o,_owner:s}};re.createContext=function(e){return e={$$typeof:yT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gT,_context:e},e.Consumer=e};re.createElement=W0;re.createFactory=function(e){var t=W0.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:vT,render:e}};re.isValidElement=Rc;re.lazy=function(e){return{$$typeof:TT,_payload:{_status:-1,_result:e},_init:IT}};re.memo=function(e,t){return{$$typeof:ST,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=ls.transition;ls.transition={};try{e()}finally{ls.transition=t}};re.unstable_act=K0;re.useCallback=function(e,t){return ot.current.useCallback(e,t)};re.useContext=function(e){return ot.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};re.useEffect=function(e,t){return ot.current.useEffect(e,t)};re.useId=function(){return ot.current.useId()};re.useImperativeHandle=function(e,t,n){return ot.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return ot.current.useMemo(e,t)};re.useReducer=function(e,t,n){return ot.current.useReducer(e,t,n)};re.useRef=function(e){return ot.current.useRef(e)};re.useState=function(e){return ot.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return ot.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return ot.current.useTransition()};re.version="18.3.1";O0.exports=re;var k=O0.exports;const Ae=G0(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T=k,AT=Symbol.for("react.element"),kT=Symbol.for("react.fragment"),PT=Object.prototype.hasOwnProperty,RT=_T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MT={key:!0,ref:!0,__self:!0,__source:!0};function Y0(e,t,n){var o,i={},r=null,s=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(s=t.ref);for(o in t)PT.call(t,o)&&!MT.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)i[o]===void 0&&(i[o]=t[o]);return{$$typeof:AT,type:e,key:r,ref:s,props:i,_owner:RT.current}}pl.Fragment=kT;pl.jsx=Y0;pl.jsxs=Y0;B0.exports=pl;var m=B0.exports,Ga={},X0={exports:{}},yt={},Q0={exports:{}},Z0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,O){var $=D.length;D.push(O);e:for(;0<$;){var se=$-1>>>1,V=D[se];if(0<i(V,O))D[se]=O,D[$]=V,$=se;else break e}}function n(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var O=D[0],$=D.pop();if($!==O){D[0]=$;e:for(var se=0,V=D.length,J=V>>>1;se<J;){var te=2*(se+1)-1,H=D[te],Y=te+1,ce=D[Y];if(0>i(H,$))Y<V&&0>i(ce,H)?(D[se]=ce,D[Y]=$,se=Y):(D[se]=H,D[te]=$,se=te);else if(Y<V&&0>i(ce,$))D[se]=ce,D[Y]=$,se=Y;else break e}}return O}function i(D,O){var $=D.sortIndex-O.sortIndex;return $!==0?$:D.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],d=1,h=null,p=3,g=!1,v=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var O=n(u);O!==null;){if(O.callback===null)o(u);else if(O.startTime<=D)o(u),O.sortIndex=O.expirationTime,t(l,O);else break;O=n(u)}}function w(D){if(T=!1,x(D),!v)if(n(l)!==null)v=!0,de(I);else{var O=n(u);O!==null&&Z(w,O.startTime-D)}}function I(D,O){v=!1,T&&(T=!1,S(_),_=-1),g=!0;var $=p;try{for(x(O),h=n(l);h!==null&&(!(h.expirationTime>O)||D&&!B());){var se=h.callback;if(typeof se=="function"){h.callback=null,p=h.priorityLevel;var V=se(h.expirationTime<=O);O=e.unstable_now(),typeof V=="function"?h.callback=V:h===n(l)&&o(l),x(O)}else o(l);h=n(l)}if(h!==null)var J=!0;else{var te=n(u);te!==null&&Z(w,te.startTime-O),J=!1}return J}finally{h=null,p=$,g=!1}}var C=!1,N=null,_=-1,M=5,b=-1;function B(){return!(e.unstable_now()-b<M)}function ne(){if(N!==null){var D=e.unstable_now();b=D;var O=!0;try{O=N(!0,D)}finally{O?Q():(C=!1,N=null)}}else C=!1}var Q;if(typeof y=="function")Q=function(){y(ne)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,pe=oe.port2;oe.port1.onmessage=ne,Q=function(){pe.postMessage(null)}}else Q=function(){E(ne,0)};function de(D){N=D,C||(C=!0,Q())}function Z(D,O){_=E(function(){D(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,de(I))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var $=p;p=O;try{return D()}finally{p=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=p;p=D;try{return O()}finally{p=$}},e.unstable_scheduleCallback=function(D,O,$){var se=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?se+$:se):$=se,D){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=$+V,D={id:d++,callback:O,priorityLevel:D,startTime:$,expirationTime:V,sortIndex:-1},$>se?(D.sortIndex=$,t(u,D),n(l)===null&&D===n(u)&&(T?(S(_),_=-1):T=!0,Z(w,$-se))):(D.sortIndex=V,t(l,D),v||g||(v=!0,de(I))),D},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(D){var O=p;return function(){var $=p;p=O;try{return D.apply(this,arguments)}finally{p=$}}}})(Z0);Q0.exports=Z0;var bT=Q0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT=k,gt=bT;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eg=new Set,Qi={};function yo(e,t){ei(e,t),ei(e+"Capture",t)}function ei(e,t){for(Qi[e]=t,e=0;e<t.length;e++)eg.add(t[e])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=Object.prototype.hasOwnProperty,LT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bf={},Df={};function FT(e){return Ba.call(Df,e)?!0:Ba.call(bf,e)?!1:LT.test(e)?Df[e]=!0:(bf[e]=!0,!1)}function UT(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function VT(e,t,n,o){if(t===null||typeof t>"u"||UT(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function it(e,t,n,o,i,r,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=s}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$e[e]=new it(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$e[t]=new it(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$e[e]=new it(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$e[e]=new it(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$e[e]=new it(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$e[e]=new it(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$e[e]=new it(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$e[e]=new it(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$e[e]=new it(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mc=/[\-:]([a-z])/g;function bc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mc,bc);$e[t]=new it(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mc,bc);$e[t]=new it(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mc,bc);$e[t]=new it(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$e[e]=new it(e,1,!1,e.toLowerCase(),null,!1,!1)});$e.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$e[e]=new it(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dc(e,t,n,o){var i=$e.hasOwnProperty(t)?$e[t]:null;(i!==null?i.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(VT(t,n,i,o)&&(n=null),o||i===null?FT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,o=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var mn=DT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mr=Symbol.for("react.element"),wo=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),Lc=Symbol.for("react.strict_mode"),Oa=Symbol.for("react.profiler"),tg=Symbol.for("react.provider"),ng=Symbol.for("react.context"),Fc=Symbol.for("react.forward_ref"),Ha=Symbol.for("react.suspense"),za=Symbol.for("react.suspense_list"),Uc=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),og=Symbol.for("react.offscreen"),Lf=Symbol.iterator;function Ti(e){return e===null||typeof e!="object"?null:(e=Lf&&e[Lf]||e["@@iterator"],typeof e=="function"?e:null)}var we=Object.assign,Yl;function Mi(e){if(Yl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yl=t&&t[1]||""}return`
`+Yl+e}var Xl=!1;function Ql(e,t){if(!e||Xl)return"";Xl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var o=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){o=u}e.call(t.prototype)}else{try{throw Error()}catch(u){o=u}e()}}catch(u){if(u&&o&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=o.stack.split(`
`),s=i.length-1,a=r.length-1;1<=s&&0<=a&&i[s]!==r[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==r[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==r[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{Xl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mi(e):""}function GT(e){switch(e.tag){case 5:return Mi(e.type);case 16:return Mi("Lazy");case 13:return Mi("Suspense");case 19:return Mi("SuspenseList");case 0:case 2:case 15:return e=Ql(e.type,!1),e;case 11:return e=Ql(e.type.render,!1),e;case 1:return e=Ql(e.type,!0),e;default:return""}}function $a(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Co:return"Fragment";case wo:return"Portal";case Oa:return"Profiler";case Lc:return"StrictMode";case Ha:return"Suspense";case za:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ng:return(e.displayName||"Context")+".Consumer";case tg:return(e._context.displayName||"Context")+".Provider";case Fc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uc:return t=e.displayName||null,t!==null?t:$a(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return $a(e(t))}catch{}}return null}function BT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $a(t);case 8:return t===Lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ig(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function OT(e){var t=ig(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){o=""+s,r.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function br(e){e._valueTracker||(e._valueTracker=OT(e))}function rg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=ig(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function Ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qa(e,t){var n=t.checked;return we({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ff(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=Vn(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sg(e,t){t=t.checked,t!=null&&Dc(e,"checked",t,!1)}function Ja(e,t){sg(e,t);var n=Vn(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ja(e,t.type,n):t.hasOwnProperty("defaultValue")&&ja(e,t.type,Vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ja(e,t,n){(t!=="number"||Ns(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var bi=Array.isArray;function zo(e,t,n,o){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&o&&(e[n].defaultSelected=!0)}else{for(n=""+Vn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,o&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Wa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return we({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(bi(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vn(n)}}function lg(e,t){var n=Vn(t.value),o=Vn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function Gf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ag(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ka(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ag(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dr,ug=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dr=Dr||document.createElement("div"),Dr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HT=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(e){HT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vi[t]=Vi[e]})});function cg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vi.hasOwnProperty(e)&&Vi[e]?(""+t).trim():t+"px"}function dg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,i=cg(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,i):e[n]=i}}var zT=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ya(e,t){if(t){if(zT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function Xa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa=null;function Vc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Za=null,$o=null,qo=null;function Bf(e){if(e=Cr(e)){if(typeof Za!="function")throw Error(L(280));var t=e.stateNode;t&&(t=vl(t),Za(e.stateNode,e.type,t))}}function fg(e){$o?qo?qo.push(e):qo=[e]:$o=e}function pg(){if($o){var e=$o,t=qo;if(qo=$o=null,Bf(e),t)for(e=0;e<t.length;e++)Bf(t[e])}}function hg(e,t){return e(t)}function mg(){}var Zl=!1;function gg(e,t,n){if(Zl)return e(t,n);Zl=!0;try{return hg(e,t,n)}finally{Zl=!1,($o!==null||qo!==null)&&(mg(),pg())}}function er(e,t){var n=e.stateNode;if(n===null)return null;var o=vl(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var eu=!1;if(an)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){eu=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{eu=!1}function $T(e,t,n,o,i,r,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Gi=!1,_s=null,As=!1,tu=null,qT={onError:function(e){Gi=!0,_s=e}};function JT(e,t,n,o,i,r,s,a,l){Gi=!1,_s=null,$T.apply(qT,arguments)}function jT(e,t,n,o,i,r,s,a,l){if(JT.apply(this,arguments),Gi){if(Gi){var u=_s;Gi=!1,_s=null}else throw Error(L(198));As||(As=!0,tu=u)}}function vo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Of(e){if(vo(e)!==e)throw Error(L(188))}function WT(e){var t=e.alternate;if(!t){if(t=vo(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,o=t;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(o=i.return,o!==null){n=o;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return Of(i),e;if(r===o)return Of(i),t;r=r.sibling}throw Error(L(188))}if(n.return!==o.return)n=i,o=r;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,o=r;break}if(a===o){s=!0,o=i,n=r;break}a=a.sibling}if(!s){for(a=r.child;a;){if(a===n){s=!0,n=r,o=i;break}if(a===o){s=!0,o=r,n=i;break}a=a.sibling}if(!s)throw Error(L(189))}}if(n.alternate!==o)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function vg(e){return e=WT(e),e!==null?xg(e):null}function xg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xg(e);if(t!==null)return t;e=e.sibling}return null}var Sg=gt.unstable_scheduleCallback,Hf=gt.unstable_cancelCallback,KT=gt.unstable_shouldYield,YT=gt.unstable_requestPaint,ke=gt.unstable_now,XT=gt.unstable_getCurrentPriorityLevel,Gc=gt.unstable_ImmediatePriority,Tg=gt.unstable_UserBlockingPriority,ks=gt.unstable_NormalPriority,QT=gt.unstable_LowPriority,Eg=gt.unstable_IdlePriority,hl=null,Qt=null;function ZT(e){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(hl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:n1,e1=Math.log,t1=Math.LN2;function n1(e){return e>>>=0,e===0?32:31-(e1(e)/t1|0)|0}var Lr=64,Fr=4194304;function Di(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ps(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,i=e.suspendedLanes,r=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?o=Di(a):(r&=s,r!==0&&(o=Di(r)))}else s=n&~i,s!==0?o=Di(s):r!==0&&(o=Di(r));if(o===0)return 0;if(t!==0&&t!==o&&!(t&i)&&(i=o&-o,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-Ot(t),i=1<<n,o|=e[n],t&=~i;return o}function o1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i1(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes;0<r;){var s=31-Ot(r),a=1<<s,l=i[s];l===-1?(!(a&n)||a&o)&&(i[s]=o1(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}}function nu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wg(){var e=Lr;return Lr<<=1,!(Lr&4194240)&&(Lr=64),e}function ea(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Er(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ot(t),e[t]=n}function r1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ot(n),r=1<<i;t[i]=0,o[i]=-1,e[i]=-1,n&=~r}}function Bc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-Ot(n),i=1<<o;i&t|e[o]&t&&(e[o]|=t),n&=~i}}var fe=0;function Cg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ig,Oc,Ng,_g,Ag,ou=!1,Ur=[],Pn=null,Rn=null,Mn=null,tr=new Map,nr=new Map,In=[],s1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zf(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":tr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nr.delete(t.pointerId)}}function wi(e,t,n,o,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Cr(t),t!==null&&Oc(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function l1(e,t,n,o,i){switch(t){case"focusin":return Pn=wi(Pn,e,t,n,o,i),!0;case"dragenter":return Rn=wi(Rn,e,t,n,o,i),!0;case"mouseover":return Mn=wi(Mn,e,t,n,o,i),!0;case"pointerover":var r=i.pointerId;return tr.set(r,wi(tr.get(r)||null,e,t,n,o,i)),!0;case"gotpointercapture":return r=i.pointerId,nr.set(r,wi(nr.get(r)||null,e,t,n,o,i)),!0}return!1}function kg(e){var t=eo(e.target);if(t!==null){var n=vo(t);if(n!==null){if(t=n.tag,t===13){if(t=yg(n),t!==null){e.blockedOn=t,Ag(e.priority,function(){Ng(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function as(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=iu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Qa=o,n.target.dispatchEvent(o),Qa=null}else return t=Cr(n),t!==null&&Oc(t),e.blockedOn=n,!1;t.shift()}return!0}function $f(e,t,n){as(e)&&n.delete(t)}function a1(){ou=!1,Pn!==null&&as(Pn)&&(Pn=null),Rn!==null&&as(Rn)&&(Rn=null),Mn!==null&&as(Mn)&&(Mn=null),tr.forEach($f),nr.forEach($f)}function Ci(e,t){e.blockedOn===t&&(e.blockedOn=null,ou||(ou=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,a1)))}function or(e){function t(i){return Ci(i,e)}if(0<Ur.length){Ci(Ur[0],e);for(var n=1;n<Ur.length;n++){var o=Ur[n];o.blockedOn===e&&(o.blockedOn=null)}}for(Pn!==null&&Ci(Pn,e),Rn!==null&&Ci(Rn,e),Mn!==null&&Ci(Mn,e),tr.forEach(t),nr.forEach(t),n=0;n<In.length;n++)o=In[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<In.length&&(n=In[0],n.blockedOn===null);)kg(n),n.blockedOn===null&&In.shift()}var Jo=mn.ReactCurrentBatchConfig,Rs=!0;function u1(e,t,n,o){var i=fe,r=Jo.transition;Jo.transition=null;try{fe=1,Hc(e,t,n,o)}finally{fe=i,Jo.transition=r}}function c1(e,t,n,o){var i=fe,r=Jo.transition;Jo.transition=null;try{fe=4,Hc(e,t,n,o)}finally{fe=i,Jo.transition=r}}function Hc(e,t,n,o){if(Rs){var i=iu(e,t,n,o);if(i===null)ca(e,t,o,Ms,n),zf(e,o);else if(l1(i,e,t,n,o))o.stopPropagation();else if(zf(e,o),t&4&&-1<s1.indexOf(e)){for(;i!==null;){var r=Cr(i);if(r!==null&&Ig(r),r=iu(e,t,n,o),r===null&&ca(e,t,o,Ms,n),r===i)break;i=r}i!==null&&o.stopPropagation()}else ca(e,t,o,null,n)}}var Ms=null;function iu(e,t,n,o){if(Ms=null,e=Vc(o),e=eo(e),e!==null)if(t=vo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ms=e,null}function Pg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XT()){case Gc:return 1;case Tg:return 4;case ks:case QT:return 16;case Eg:return 536870912;default:return 16}default:return 16}}var _n=null,zc=null,us=null;function Rg(){if(us)return us;var e,t=zc,n=t.length,o,i="value"in _n?_n.value:_n.textContent,r=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(o=1;o<=s&&t[n-o]===i[r-o];o++);return us=i.slice(e,1<o?1-o:void 0)}function cs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vr(){return!0}function qf(){return!1}function vt(e){function t(n,o,i,r,s){this._reactName=n,this._targetInst=i,this.type=o,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Vr:qf,this.isPropagationStopped=qf,this}return we(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),t}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$c=vt(di),wr=we({},di,{view:0,detail:0}),d1=vt(wr),ta,na,Ii,ml=we({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ii&&(Ii&&e.type==="mousemove"?(ta=e.screenX-Ii.screenX,na=e.screenY-Ii.screenY):na=ta=0,Ii=e),ta)},movementY:function(e){return"movementY"in e?e.movementY:na}}),Jf=vt(ml),f1=we({},ml,{dataTransfer:0}),p1=vt(f1),h1=we({},wr,{relatedTarget:0}),oa=vt(h1),m1=we({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),g1=vt(m1),y1=we({},di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),v1=vt(y1),x1=we({},di,{data:0}),jf=vt(x1),S1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=E1[e])?!!t[e]:!1}function qc(){return w1}var C1=we({},wr,{key:function(e){if(e.key){var t=S1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qc,charCode:function(e){return e.type==="keypress"?cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),I1=vt(C1),N1=we({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=vt(N1),_1=we({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qc}),A1=vt(_1),k1=we({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),P1=vt(k1),R1=we({},ml,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),M1=vt(R1),b1=[9,13,27,32],Jc=an&&"CompositionEvent"in window,Bi=null;an&&"documentMode"in document&&(Bi=document.documentMode);var D1=an&&"TextEvent"in window&&!Bi,Mg=an&&(!Jc||Bi&&8<Bi&&11>=Bi),Kf=" ",Yf=!1;function bg(e,t){switch(e){case"keyup":return b1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Io=!1;function L1(e,t){switch(e){case"compositionend":return Dg(t);case"keypress":return t.which!==32?null:(Yf=!0,Kf);case"textInput":return e=t.data,e===Kf&&Yf?null:e;default:return null}}function F1(e,t){if(Io)return e==="compositionend"||!Jc&&bg(e,t)?(e=Rg(),us=zc=_n=null,Io=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mg&&t.locale!=="ko"?null:t.data;default:return null}}var U1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!U1[e.type]:t==="textarea"}function Lg(e,t,n,o){fg(o),t=bs(t,"onChange"),0<t.length&&(n=new $c("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Oi=null,ir=null;function V1(e){Jg(e,0)}function gl(e){var t=Ao(e);if(rg(t))return e}function G1(e,t){if(e==="change")return t}var Fg=!1;if(an){var ia;if(an){var ra="oninput"in document;if(!ra){var Qf=document.createElement("div");Qf.setAttribute("oninput","return;"),ra=typeof Qf.oninput=="function"}ia=ra}else ia=!1;Fg=ia&&(!document.documentMode||9<document.documentMode)}function Zf(){Oi&&(Oi.detachEvent("onpropertychange",Ug),ir=Oi=null)}function Ug(e){if(e.propertyName==="value"&&gl(ir)){var t=[];Lg(t,ir,e,Vc(e)),gg(V1,t)}}function B1(e,t,n){e==="focusin"?(Zf(),Oi=t,ir=n,Oi.attachEvent("onpropertychange",Ug)):e==="focusout"&&Zf()}function O1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl(ir)}function H1(e,t){if(e==="click")return gl(t)}function z1(e,t){if(e==="input"||e==="change")return gl(t)}function $1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:$1;function rr(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var i=n[o];if(!Ba.call(t,i)||!qt(e[i],t[i]))return!1}return!0}function ep(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tp(e,t){var n=ep(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ep(n)}}function Vg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gg(){for(var e=window,t=Ns();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ns(e.document)}return t}function jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function q1(e){var t=Gg(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vg(n.ownerDocument.documentElement,n)){if(o!==null&&jc(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,r=Math.min(o.start,i);o=o.end===void 0?r:Math.min(o.end,i),!e.extend&&r>o&&(i=o,o=r,r=i),i=tp(n,r);var s=tp(n,o);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),r>o?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var J1=an&&"documentMode"in document&&11>=document.documentMode,No=null,ru=null,Hi=null,su=!1;function np(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;su||No==null||No!==Ns(o)||(o=No,"selectionStart"in o&&jc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Hi&&rr(Hi,o)||(Hi=o,o=bs(ru,"onSelect"),0<o.length&&(t=new $c("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=No)))}function Gr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _o={animationend:Gr("Animation","AnimationEnd"),animationiteration:Gr("Animation","AnimationIteration"),animationstart:Gr("Animation","AnimationStart"),transitionend:Gr("Transition","TransitionEnd")},sa={},Bg={};an&&(Bg=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function yl(e){if(sa[e])return sa[e];if(!_o[e])return e;var t=_o[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bg)return sa[e]=t[n];return e}var Og=yl("animationend"),Hg=yl("animationiteration"),zg=yl("animationstart"),$g=yl("transitionend"),qg=new Map,op="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(e,t){qg.set(e,t),yo(t,[e])}for(var la=0;la<op.length;la++){var aa=op[la],j1=aa.toLowerCase(),W1=aa[0].toUpperCase()+aa.slice(1);Hn(j1,"on"+W1)}Hn(Og,"onAnimationEnd");Hn(Hg,"onAnimationIteration");Hn(zg,"onAnimationStart");Hn("dblclick","onDoubleClick");Hn("focusin","onFocus");Hn("focusout","onBlur");Hn($g,"onTransitionEnd");ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function ip(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,jT(o,t,void 0,e),e.currentTarget=null}function Jg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],i=o.event;o=o.listeners;e:{var r=void 0;if(t)for(var s=o.length-1;0<=s;s--){var a=o[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break e;ip(i,a,u),r=l}else for(s=0;s<o.length;s++){if(a=o[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break e;ip(i,a,u),r=l}}}if(As)throw e=tu,As=!1,tu=null,e}function ge(e,t){var n=t[du];n===void 0&&(n=t[du]=new Set);var o=e+"__bubble";n.has(o)||(jg(t,e,2,!1),n.add(o))}function ua(e,t,n){var o=0;t&&(o|=4),jg(n,e,o,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function sr(e){if(!e[Br]){e[Br]=!0,eg.forEach(function(n){n!=="selectionchange"&&(K1.has(n)||ua(n,!1,e),ua(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Br]||(t[Br]=!0,ua("selectionchange",!1,t))}}function jg(e,t,n,o){switch(Pg(t)){case 1:var i=u1;break;case 4:i=c1;break;default:i=Hc}n=i.bind(null,t,n,e),i=void 0,!eu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),o?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ca(e,t,n,o,i){var r=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var a=o.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=o.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=eo(a),s===null)return;if(l=s.tag,l===5||l===6){o=r=s;continue e}a=a.parentNode}}o=o.return}gg(function(){var u=r,d=Vc(n),h=[];e:{var p=qg.get(e);if(p!==void 0){var g=$c,v=e;switch(e){case"keypress":if(cs(n)===0)break e;case"keydown":case"keyup":g=I1;break;case"focusin":v="focus",g=oa;break;case"focusout":v="blur",g=oa;break;case"beforeblur":case"afterblur":g=oa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=p1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=A1;break;case Og:case Hg:case zg:g=g1;break;case $g:g=P1;break;case"scroll":g=d1;break;case"wheel":g=M1;break;case"copy":case"cut":case"paste":g=v1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Wf}var T=(t&4)!==0,E=!T&&e==="scroll",S=T?p!==null?p+"Capture":null:p;T=[];for(var y=u,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,S!==null&&(w=er(y,S),w!=null&&T.push(lr(y,w,x)))),E)break;y=y.return}0<T.length&&(p=new g(p,v,null,n,d),h.push({event:p,listeners:T}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&n!==Qa&&(v=n.relatedTarget||n.fromElement)&&(eo(v)||v[un]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?eo(v):null,v!==null&&(E=vo(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(T=Jf,w="onMouseLeave",S="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(T=Wf,w="onPointerLeave",S="onPointerEnter",y="pointer"),E=g==null?p:Ao(g),x=v==null?p:Ao(v),p=new T(w,y+"leave",g,n,d),p.target=E,p.relatedTarget=x,w=null,eo(d)===u&&(T=new T(S,y+"enter",v,n,d),T.target=x,T.relatedTarget=E,w=T),E=w,g&&v)t:{for(T=g,S=v,y=0,x=T;x;x=So(x))y++;for(x=0,w=S;w;w=So(w))x++;for(;0<y-x;)T=So(T),y--;for(;0<x-y;)S=So(S),x--;for(;y--;){if(T===S||S!==null&&T===S.alternate)break t;T=So(T),S=So(S)}T=null}else T=null;g!==null&&rp(h,p,g,T,!1),v!==null&&E!==null&&rp(h,E,v,T,!0)}}e:{if(p=u?Ao(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var I=G1;else if(Xf(p))if(Fg)I=z1;else{I=O1;var C=B1}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=H1);if(I&&(I=I(e,u))){Lg(h,I,n,d);break e}C&&C(e,p,u),e==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&ja(p,"number",p.value)}switch(C=u?Ao(u):window,e){case"focusin":(Xf(C)||C.contentEditable==="true")&&(No=C,ru=u,Hi=null);break;case"focusout":Hi=ru=No=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,np(h,n,d);break;case"selectionchange":if(J1)break;case"keydown":case"keyup":np(h,n,d)}var N;if(Jc)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Io?bg(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Mg&&n.locale!=="ko"&&(Io||_!=="onCompositionStart"?_==="onCompositionEnd"&&Io&&(N=Rg()):(_n=d,zc="value"in _n?_n.value:_n.textContent,Io=!0)),C=bs(u,_),0<C.length&&(_=new jf(_,e,null,n,d),h.push({event:_,listeners:C}),N?_.data=N:(N=Dg(n),N!==null&&(_.data=N)))),(N=D1?L1(e,n):F1(e,n))&&(u=bs(u,"onBeforeInput"),0<u.length&&(d=new jf("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=N))}Jg(h,t)})}function lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bs(e,t){for(var n=t+"Capture",o=[];e!==null;){var i=e,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=er(e,n),r!=null&&o.unshift(lr(e,r,i)),r=er(e,t),r!=null&&o.push(lr(e,r,i))),e=e.return}return o}function So(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rp(e,t,n,o,i){for(var r=t._reactName,s=[];n!==null&&n!==o;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===o)break;a.tag===5&&u!==null&&(a=u,i?(l=er(n,r),l!=null&&s.unshift(lr(n,l,a))):i||(l=er(n,r),l!=null&&s.push(lr(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Y1=/\r\n?/g,X1=/\u0000|\uFFFD/g;function sp(e){return(typeof e=="string"?e:""+e).replace(Y1,`
`).replace(X1,"")}function Or(e,t,n){if(t=sp(t),sp(e)!==t&&n)throw Error(L(425))}function Ds(){}var lu=null,au=null;function uu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cu=typeof setTimeout=="function"?setTimeout:void 0,Q1=typeof clearTimeout=="function"?clearTimeout:void 0,lp=typeof Promise=="function"?Promise:void 0,Z1=typeof queueMicrotask=="function"?queueMicrotask:typeof lp<"u"?function(e){return lp.resolve(null).then(e).catch(eE)}:cu;function eE(e){setTimeout(function(){throw e})}function da(e,t){var n=t,o=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(o===0){e.removeChild(i),or(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=i}while(n);or(t)}function bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ap(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),Kt="__reactFiber$"+fi,ar="__reactProps$"+fi,un="__reactContainer$"+fi,du="__reactEvents$"+fi,tE="__reactListeners$"+fi,nE="__reactHandles$"+fi;function eo(e){var t=e[Kt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[un]||n[Kt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ap(e);e!==null;){if(n=e[Kt])return n;e=ap(e)}return t}e=n,n=e.parentNode}return null}function Cr(e){return e=e[Kt]||e[un],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ao(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function vl(e){return e[ar]||null}var fu=[],ko=-1;function zn(e){return{current:e}}function ye(e){0>ko||(e.current=fu[ko],fu[ko]=null,ko--)}function me(e,t){ko++,fu[ko]=e.current,e.current=t}var Gn={},Xe=zn(Gn),at=zn(!1),co=Gn;function ti(e,t){var n=e.type.contextTypes;if(!n)return Gn;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in n)i[r]=t[r];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ut(e){return e=e.childContextTypes,e!=null}function Ls(){ye(at),ye(Xe)}function up(e,t,n){if(Xe.current!==Gn)throw Error(L(168));me(Xe,t),me(at,n)}function Wg(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var i in o)if(!(i in t))throw Error(L(108,BT(e)||"Unknown",i));return we({},n,o)}function Fs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gn,co=Xe.current,me(Xe,e),me(at,at.current),!0}function cp(e,t,n){var o=e.stateNode;if(!o)throw Error(L(169));n?(e=Wg(e,t,co),o.__reactInternalMemoizedMergedChildContext=e,ye(at),ye(Xe),me(Xe,e)):ye(at),me(at,n)}var on=null,xl=!1,fa=!1;function Kg(e){on===null?on=[e]:on.push(e)}function oE(e){xl=!0,Kg(e)}function $n(){if(!fa&&on!==null){fa=!0;var e=0,t=fe;try{var n=on;for(fe=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}on=null,xl=!1}catch(i){throw on!==null&&(on=on.slice(e+1)),Sg(Gc,$n),i}finally{fe=t,fa=!1}}return null}var Po=[],Ro=0,Us=null,Vs=0,Et=[],wt=0,fo=null,rn=1,sn="";function Kn(e,t){Po[Ro++]=Vs,Po[Ro++]=Us,Us=e,Vs=t}function Yg(e,t,n){Et[wt++]=rn,Et[wt++]=sn,Et[wt++]=fo,fo=e;var o=rn;e=sn;var i=32-Ot(o)-1;o&=~(1<<i),n+=1;var r=32-Ot(t)+i;if(30<r){var s=i-i%5;r=(o&(1<<s)-1).toString(32),o>>=s,i-=s,rn=1<<32-Ot(t)+i|n<<i|o,sn=r+e}else rn=1<<r|n<<i|o,sn=e}function Wc(e){e.return!==null&&(Kn(e,1),Yg(e,1,0))}function Kc(e){for(;e===Us;)Us=Po[--Ro],Po[Ro]=null,Vs=Po[--Ro],Po[Ro]=null;for(;e===fo;)fo=Et[--wt],Et[wt]=null,sn=Et[--wt],Et[wt]=null,rn=Et[--wt],Et[wt]=null}var mt=null,ht=null,ve=!1,Bt=null;function Xg(e,t){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function dp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mt=e,ht=bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mt=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fo!==null?{id:rn,overflow:sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,mt=e,ht=null,!0):!1;default:return!1}}function pu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hu(e){if(ve){var t=ht;if(t){var n=t;if(!dp(e,t)){if(pu(e))throw Error(L(418));t=bn(n.nextSibling);var o=mt;t&&dp(e,t)?Xg(o,n):(e.flags=e.flags&-4097|2,ve=!1,mt=e)}}else{if(pu(e))throw Error(L(418));e.flags=e.flags&-4097|2,ve=!1,mt=e}}}function fp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mt=e}function Hr(e){if(e!==mt)return!1;if(!ve)return fp(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uu(e.type,e.memoizedProps)),t&&(t=ht)){if(pu(e))throw Qg(),Error(L(418));for(;t;)Xg(e,t),t=bn(t.nextSibling)}if(fp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ht=bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=mt?bn(e.stateNode.nextSibling):null;return!0}function Qg(){for(var e=ht;e;)e=bn(e.nextSibling)}function ni(){ht=mt=null,ve=!1}function Yc(e){Bt===null?Bt=[e]:Bt.push(e)}var iE=mn.ReactCurrentBatchConfig;function Ni(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var o=n.stateNode}if(!o)throw Error(L(147,e));var i=o,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(s){var a=i.refs;s===null?delete a[r]:a[r]=s},t._stringRef=r,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function zr(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pp(e){var t=e._init;return t(e._payload)}function Zg(e){function t(S,y){if(e){var x=S.deletions;x===null?(S.deletions=[y],S.flags|=16):x.push(y)}}function n(S,y){if(!e)return null;for(;y!==null;)t(S,y),y=y.sibling;return null}function o(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function i(S,y){return S=Un(S,y),S.index=0,S.sibling=null,S}function r(S,y,x){return S.index=x,e?(x=S.alternate,x!==null?(x=x.index,x<y?(S.flags|=2,y):x):(S.flags|=2,y)):(S.flags|=1048576,y)}function s(S){return e&&S.alternate===null&&(S.flags|=2),S}function a(S,y,x,w){return y===null||y.tag!==6?(y=xa(x,S.mode,w),y.return=S,y):(y=i(y,x),y.return=S,y)}function l(S,y,x,w){var I=x.type;return I===Co?d(S,y,x.props.children,w,x.key):y!==null&&(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===wn&&pp(I)===y.type)?(w=i(y,x.props),w.ref=Ni(S,y,x),w.return=S,w):(w=ys(x.type,x.key,x.props,null,S.mode,w),w.ref=Ni(S,y,x),w.return=S,w)}function u(S,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Sa(x,S.mode,w),y.return=S,y):(y=i(y,x.children||[]),y.return=S,y)}function d(S,y,x,w,I){return y===null||y.tag!==7?(y=so(x,S.mode,w,I),y.return=S,y):(y=i(y,x),y.return=S,y)}function h(S,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xa(""+y,S.mode,x),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Mr:return x=ys(y.type,y.key,y.props,null,S.mode,x),x.ref=Ni(S,null,y),x.return=S,x;case wo:return y=Sa(y,S.mode,x),y.return=S,y;case wn:var w=y._init;return h(S,w(y._payload),x)}if(bi(y)||Ti(y))return y=so(y,S.mode,x,null),y.return=S,y;zr(S,y)}return null}function p(S,y,x,w){var I=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return I!==null?null:a(S,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mr:return x.key===I?l(S,y,x,w):null;case wo:return x.key===I?u(S,y,x,w):null;case wn:return I=x._init,p(S,y,I(x._payload),w)}if(bi(x)||Ti(x))return I!==null?null:d(S,y,x,w,null);zr(S,x)}return null}function g(S,y,x,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return S=S.get(x)||null,a(y,S,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mr:return S=S.get(w.key===null?x:w.key)||null,l(y,S,w,I);case wo:return S=S.get(w.key===null?x:w.key)||null,u(y,S,w,I);case wn:var C=w._init;return g(S,y,x,C(w._payload),I)}if(bi(w)||Ti(w))return S=S.get(x)||null,d(y,S,w,I,null);zr(y,w)}return null}function v(S,y,x,w){for(var I=null,C=null,N=y,_=y=0,M=null;N!==null&&_<x.length;_++){N.index>_?(M=N,N=null):M=N.sibling;var b=p(S,N,x[_],w);if(b===null){N===null&&(N=M);break}e&&N&&b.alternate===null&&t(S,N),y=r(b,y,_),C===null?I=b:C.sibling=b,C=b,N=M}if(_===x.length)return n(S,N),ve&&Kn(S,_),I;if(N===null){for(;_<x.length;_++)N=h(S,x[_],w),N!==null&&(y=r(N,y,_),C===null?I=N:C.sibling=N,C=N);return ve&&Kn(S,_),I}for(N=o(S,N);_<x.length;_++)M=g(N,S,_,x[_],w),M!==null&&(e&&M.alternate!==null&&N.delete(M.key===null?_:M.key),y=r(M,y,_),C===null?I=M:C.sibling=M,C=M);return e&&N.forEach(function(B){return t(S,B)}),ve&&Kn(S,_),I}function T(S,y,x,w){var I=Ti(x);if(typeof I!="function")throw Error(L(150));if(x=I.call(x),x==null)throw Error(L(151));for(var C=I=null,N=y,_=y=0,M=null,b=x.next();N!==null&&!b.done;_++,b=x.next()){N.index>_?(M=N,N=null):M=N.sibling;var B=p(S,N,b.value,w);if(B===null){N===null&&(N=M);break}e&&N&&B.alternate===null&&t(S,N),y=r(B,y,_),C===null?I=B:C.sibling=B,C=B,N=M}if(b.done)return n(S,N),ve&&Kn(S,_),I;if(N===null){for(;!b.done;_++,b=x.next())b=h(S,b.value,w),b!==null&&(y=r(b,y,_),C===null?I=b:C.sibling=b,C=b);return ve&&Kn(S,_),I}for(N=o(S,N);!b.done;_++,b=x.next())b=g(N,S,_,b.value,w),b!==null&&(e&&b.alternate!==null&&N.delete(b.key===null?_:b.key),y=r(b,y,_),C===null?I=b:C.sibling=b,C=b);return e&&N.forEach(function(ne){return t(S,ne)}),ve&&Kn(S,_),I}function E(S,y,x,w){if(typeof x=="object"&&x!==null&&x.type===Co&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Mr:e:{for(var I=x.key,C=y;C!==null;){if(C.key===I){if(I=x.type,I===Co){if(C.tag===7){n(S,C.sibling),y=i(C,x.props.children),y.return=S,S=y;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===wn&&pp(I)===C.type){n(S,C.sibling),y=i(C,x.props),y.ref=Ni(S,C,x),y.return=S,S=y;break e}n(S,C);break}else t(S,C);C=C.sibling}x.type===Co?(y=so(x.props.children,S.mode,w,x.key),y.return=S,S=y):(w=ys(x.type,x.key,x.props,null,S.mode,w),w.ref=Ni(S,y,x),w.return=S,S=w)}return s(S);case wo:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(S,y.sibling),y=i(y,x.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else t(S,y);y=y.sibling}y=Sa(x,S.mode,w),y.return=S,S=y}return s(S);case wn:return C=x._init,E(S,y,C(x._payload),w)}if(bi(x))return v(S,y,x,w);if(Ti(x))return T(S,y,x,w);zr(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(S,y.sibling),y=i(y,x),y.return=S,S=y):(n(S,y),y=xa(x,S.mode,w),y.return=S,S=y),s(S)):n(S,y)}return E}var oi=Zg(!0),ey=Zg(!1),Gs=zn(null),Bs=null,Mo=null,Xc=null;function Qc(){Xc=Mo=Bs=null}function Zc(e){var t=Gs.current;ye(Gs),e._currentValue=t}function mu(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function jo(e,t){Bs=e,Xc=Mo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(st=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(Xc!==e)if(e={context:e,memoizedValue:t,next:null},Mo===null){if(Bs===null)throw Error(L(308));Mo=e,Bs.dependencies={lanes:0,firstContext:e}}else Mo=Mo.next=e;return t}var to=null;function ed(e){to===null?to=[e]:to.push(e)}function ty(e,t,n,o){var i=t.interleaved;return i===null?(n.next=n,ed(t)):(n.next=i.next,i.next=n),t.interleaved=n,cn(e,o)}function cn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cn=!1;function td(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ny(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ln(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Dn(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,ae&2){var i=o.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),o.pending=t,cn(e,n)}return i=o.interleaved,i===null?(t.next=t,ed(o)):(t.next=i.next,i.next=t),o.interleaved=t,cn(e,n)}function ds(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Bc(e,n)}}function hp(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?i=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?i=r=t:r=r.next=t}else i=r=t;n={baseState:o.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Os(e,t,n,o){var i=e.updateQueue;Cn=!1;var r=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?r=u:s.next=u,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(r!==null){var h=i.baseState;s=0,d=u=l=null,a=r;do{var p=a.lane,g=a.eventTime;if((o&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,T=a;switch(p=t,g=n,T.tag){case 1:if(v=T.payload,typeof v=="function"){h=v.call(g,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,p=typeof v=="function"?v.call(g,h,p):v,p==null)break e;h=we({},h,p);break e;case 2:Cn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);ho|=s,e.lanes=s,e.memoizedState=h}}function mp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],i=o.callback;if(i!==null){if(o.callback=null,o=n,typeof i!="function")throw Error(L(191,i));i.call(o)}}}var Ir={},Zt=zn(Ir),ur=zn(Ir),cr=zn(Ir);function no(e){if(e===Ir)throw Error(L(174));return e}function nd(e,t){switch(me(cr,t),me(ur,e),me(Zt,Ir),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ka(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ka(t,e)}ye(Zt),me(Zt,t)}function ii(){ye(Zt),ye(ur),ye(cr)}function oy(e){no(cr.current);var t=no(Zt.current),n=Ka(t,e.type);t!==n&&(me(ur,e),me(Zt,n))}function od(e){ur.current===e&&(ye(Zt),ye(ur))}var Se=zn(0);function Hs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pa=[];function id(){for(var e=0;e<pa.length;e++)pa[e]._workInProgressVersionPrimary=null;pa.length=0}var fs=mn.ReactCurrentDispatcher,ha=mn.ReactCurrentBatchConfig,po=0,Ee=null,De=null,Ue=null,zs=!1,zi=!1,dr=0,rE=0;function Je(){throw Error(L(321))}function rd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qt(e[n],t[n]))return!1;return!0}function sd(e,t,n,o,i,r){if(po=r,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=e===null||e.memoizedState===null?uE:cE,e=n(o,i),zi){r=0;do{if(zi=!1,dr=0,25<=r)throw Error(L(301));r+=1,Ue=De=null,t.updateQueue=null,fs.current=dE,e=n(o,i)}while(zi)}if(fs.current=$s,t=De!==null&&De.next!==null,po=0,Ue=De=Ee=null,zs=!1,t)throw Error(L(300));return e}function ld(){var e=dr!==0;return dr=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ee.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Pt(){if(De===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=Ue===null?Ee.memoizedState:Ue.next;if(t!==null)Ue=t,De=e;else{if(e===null)throw Error(L(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Ue===null?Ee.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function fr(e,t){return typeof t=="function"?t(e):t}function ma(e){var t=Pt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var o=De,i=o.baseQueue,r=n.pending;if(r!==null){if(i!==null){var s=i.next;i.next=r.next,r.next=s}o.baseQueue=i=r,n.pending=null}if(i!==null){r=i.next,o=o.baseState;var a=s=null,l=null,u=r;do{var d=u.lane;if((po&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),o=u.hasEagerState?u.eagerState:e(o,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,s=o):l=l.next=h,Ee.lanes|=d,ho|=d}u=u.next}while(u!==null&&u!==r);l===null?s=o:l.next=a,qt(o,t.memoizedState)||(st=!0),t.memoizedState=o,t.baseState=s,t.baseQueue=l,n.lastRenderedState=o}if(e=n.interleaved,e!==null){i=e;do r=i.lane,Ee.lanes|=r,ho|=r,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ga(e){var t=Pt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var o=n.dispatch,i=n.pending,r=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do r=e(r,s.action),s=s.next;while(s!==i);qt(r,t.memoizedState)||(st=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,o]}function iy(){}function ry(e,t){var n=Ee,o=Pt(),i=t(),r=!qt(o.memoizedState,i);if(r&&(o.memoizedState=i,st=!0),o=o.queue,ad(ay.bind(null,n,o,e),[e]),o.getSnapshot!==t||r||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,pr(9,ly.bind(null,n,o,i,t),void 0,null),Ve===null)throw Error(L(349));po&30||sy(n,t,i)}return i}function sy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ly(e,t,n,o){t.value=n,t.getSnapshot=o,uy(t)&&cy(e)}function ay(e,t,n){return n(function(){uy(t)&&cy(e)})}function uy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qt(e,n)}catch{return!0}}function cy(e){var t=cn(e,1);t!==null&&Ht(t,e,1,-1)}function gp(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:e},t.queue=e,e=e.dispatch=aE.bind(null,Ee,e),[t.memoizedState,e]}function pr(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function dy(){return Pt().memoizedState}function ps(e,t,n,o){var i=Wt();Ee.flags|=e,i.memoizedState=pr(1|t,n,void 0,o===void 0?null:o)}function Sl(e,t,n,o){var i=Pt();o=o===void 0?null:o;var r=void 0;if(De!==null){var s=De.memoizedState;if(r=s.destroy,o!==null&&rd(o,s.deps)){i.memoizedState=pr(t,n,r,o);return}}Ee.flags|=e,i.memoizedState=pr(1|t,n,r,o)}function yp(e,t){return ps(8390656,8,e,t)}function ad(e,t){return Sl(2048,8,e,t)}function fy(e,t){return Sl(4,2,e,t)}function py(e,t){return Sl(4,4,e,t)}function hy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function my(e,t,n){return n=n!=null?n.concat([e]):null,Sl(4,4,hy.bind(null,t,e),n)}function ud(){}function gy(e,t){var n=Pt();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&rd(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function yy(e,t){var n=Pt();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&rd(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function vy(e,t,n){return po&21?(qt(n,t)||(n=wg(),Ee.lanes|=n,ho|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=n)}function sE(e,t){var n=fe;fe=n!==0&&4>n?n:4,e(!0);var o=ha.transition;ha.transition={};try{e(!1),t()}finally{fe=n,ha.transition=o}}function xy(){return Pt().memoizedState}function lE(e,t,n){var o=Fn(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Sy(e))Ty(t,n);else if(n=ty(e,t,n,o),n!==null){var i=tt();Ht(n,e,o,i),Ey(n,t,o)}}function aE(e,t,n){var o=Fn(e),i={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sy(e))Ty(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var s=t.lastRenderedState,a=r(s,n);if(i.hasEagerState=!0,i.eagerState=a,qt(a,s)){var l=t.interleaved;l===null?(i.next=i,ed(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=ty(e,t,i,o),n!==null&&(i=tt(),Ht(n,e,o,i),Ey(n,t,o))}}function Sy(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function Ty(e,t){zi=zs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ey(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Bc(e,n)}}var $s={readContext:kt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},uE={readContext:kt,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:yp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ps(4194308,4,hy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return ps(4,2,e,t)},useMemo:function(e,t){var n=Wt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Wt();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=lE.bind(null,Ee,e),[o.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:gp,useDebugValue:ud,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=gp(!1),t=e[0];return e=sE.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=Ee,i=Wt();if(ve){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Ve===null)throw Error(L(349));po&30||sy(o,t,n)}i.memoizedState=n;var r={value:n,getSnapshot:t};return i.queue=r,yp(ay.bind(null,o,r,e),[e]),o.flags|=2048,pr(9,ly.bind(null,o,r,n,t),void 0,null),n},useId:function(){var e=Wt(),t=Ve.identifierPrefix;if(ve){var n=sn,o=rn;n=(o&~(1<<32-Ot(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=dr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cE={readContext:kt,useCallback:gy,useContext:kt,useEffect:ad,useImperativeHandle:my,useInsertionEffect:fy,useLayoutEffect:py,useMemo:yy,useReducer:ma,useRef:dy,useState:function(){return ma(fr)},useDebugValue:ud,useDeferredValue:function(e){var t=Pt();return vy(t,De.memoizedState,e)},useTransition:function(){var e=ma(fr)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:iy,useSyncExternalStore:ry,useId:xy,unstable_isNewReconciler:!1},dE={readContext:kt,useCallback:gy,useContext:kt,useEffect:ad,useImperativeHandle:my,useInsertionEffect:fy,useLayoutEffect:py,useMemo:yy,useReducer:ga,useRef:dy,useState:function(){return ga(fr)},useDebugValue:ud,useDeferredValue:function(e){var t=Pt();return De===null?t.memoizedState=e:vy(t,De.memoizedState,e)},useTransition:function(){var e=ga(fr)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:iy,useSyncExternalStore:ry,useId:xy,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=we({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gu(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:we({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tl={isMounted:function(e){return(e=e._reactInternals)?vo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=tt(),i=Fn(e),r=ln(o,i);r.payload=t,n!=null&&(r.callback=n),t=Dn(e,r,i),t!==null&&(Ht(t,e,i,o),ds(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=tt(),i=Fn(e),r=ln(o,i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Dn(e,r,i),t!==null&&(Ht(t,e,i,o),ds(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tt(),o=Fn(e),i=ln(n,o);i.tag=2,t!=null&&(i.callback=t),t=Dn(e,i,o),t!==null&&(Ht(t,e,o,n),ds(t,e,o))}};function vp(e,t,n,o,i,r,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,r,s):t.prototype&&t.prototype.isPureReactComponent?!rr(n,o)||!rr(i,r):!0}function wy(e,t,n){var o=!1,i=Gn,r=t.contextType;return typeof r=="object"&&r!==null?r=kt(r):(i=ut(t)?co:Xe.current,o=t.contextTypes,r=(o=o!=null)?ti(e,i):Gn),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tl,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),t}function xp(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&Tl.enqueueReplaceState(t,t.state,null)}function yu(e,t,n,o){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},td(e);var r=t.contextType;typeof r=="object"&&r!==null?i.context=kt(r):(r=ut(t)?co:Xe.current,i.context=ti(e,r)),i.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(gu(e,t,r,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Tl.enqueueReplaceState(i,i.state,null),Os(e,n,i,o),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ri(e,t){try{var n="",o=t;do n+=GT(o),o=o.return;while(o);var i=n}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:i,digest:null}}function ya(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fE=typeof WeakMap=="function"?WeakMap:Map;function Cy(e,t,n){n=ln(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Js||(Js=!0,Au=o),vu(e,t)},n}function Iy(e,t,n){n=ln(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var i=t.value;n.payload=function(){return o(i)},n.callback=function(){vu(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){vu(e,t),typeof o!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Sp(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new fE;var i=new Set;o.set(t,i)}else i=o.get(t),i===void 0&&(i=new Set,o.set(t,i));i.has(n)||(i.add(n),e=NE.bind(null,e,t,n),t.then(e,e))}function Tp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ep(e,t,n,o,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ln(-1,1),t.tag=2,Dn(n,t,1))),n.lanes|=1),e)}var pE=mn.ReactCurrentOwner,st=!1;function Ze(e,t,n,o){t.child=e===null?ey(t,null,n,o):oi(t,e.child,n,o)}function wp(e,t,n,o,i){n=n.render;var r=t.ref;return jo(t,i),o=sd(e,t,n,o,r,i),n=ld(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,dn(e,t,i)):(ve&&n&&Wc(t),t.flags|=1,Ze(e,t,o,i),t.child)}function Cp(e,t,n,o,i){if(e===null){var r=n.type;return typeof r=="function"&&!yd(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,Ny(e,t,r,o,i)):(e=ys(n.type,null,o,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&i)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:rr,n(s,o)&&e.ref===t.ref)return dn(e,t,i)}return t.flags|=1,e=Un(r,o),e.ref=t.ref,e.return=t,t.child=e}function Ny(e,t,n,o,i){if(e!==null){var r=e.memoizedProps;if(rr(r,o)&&e.ref===t.ref)if(st=!1,t.pendingProps=o=r,(e.lanes&i)!==0)e.flags&131072&&(st=!0);else return t.lanes=e.lanes,dn(e,t,i)}return xu(e,t,n,o,i)}function _y(e,t,n){var o=t.pendingProps,i=o.children,r=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Do,pt),pt|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(Do,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=r!==null?r.baseLanes:n,me(Do,pt),pt|=o}else r!==null?(o=r.baseLanes|n,t.memoizedState=null):o=n,me(Do,pt),pt|=o;return Ze(e,t,i,n),t.child}function Ay(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xu(e,t,n,o,i){var r=ut(n)?co:Xe.current;return r=ti(t,r),jo(t,i),n=sd(e,t,n,o,r,i),o=ld(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,dn(e,t,i)):(ve&&o&&Wc(t),t.flags|=1,Ze(e,t,n,i),t.child)}function Ip(e,t,n,o,i){if(ut(n)){var r=!0;Fs(t)}else r=!1;if(jo(t,i),t.stateNode===null)hs(e,t),wy(t,n,o),yu(t,n,o,i),o=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=kt(u):(u=ut(n)?co:Xe.current,u=ti(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==o||l!==u)&&xp(t,s,o,u),Cn=!1;var p=t.memoizedState;s.state=p,Os(t,o,s,i),l=t.memoizedState,a!==o||p!==l||at.current||Cn?(typeof d=="function"&&(gu(t,n,d,o),l=t.memoizedState),(a=Cn||vp(t,n,a,o,p,l,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=l),s.props=o,s.state=l,s.context=u,o=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,ny(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ut(t.type,a),s.props=u,h=t.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=kt(l):(l=ut(n)?co:Xe.current,l=ti(t,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==l)&&xp(t,s,o,l),Cn=!1,p=t.memoizedState,s.state=p,Os(t,o,s,i);var v=t.memoizedState;a!==h||p!==v||at.current||Cn?(typeof g=="function"&&(gu(t,n,g,o),v=t.memoizedState),(u=Cn||vp(t,n,u,o,p,v,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=v),s.props=o,s.state=v,s.context=l,o=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),o=!1)}return Su(e,t,n,o,r,i)}function Su(e,t,n,o,i,r){Ay(e,t);var s=(t.flags&128)!==0;if(!o&&!s)return i&&cp(t,n,!1),dn(e,t,r);o=t.stateNode,pE.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&s?(t.child=oi(t,e.child,null,r),t.child=oi(t,null,a,r)):Ze(e,t,a,r),t.memoizedState=o.state,i&&cp(t,n,!0),t.child}function ky(e){var t=e.stateNode;t.pendingContext?up(e,t.pendingContext,t.pendingContext!==t.context):t.context&&up(e,t.context,!1),nd(e,t.containerInfo)}function Np(e,t,n,o,i){return ni(),Yc(i),t.flags|=256,Ze(e,t,n,o),t.child}var Tu={dehydrated:null,treeContext:null,retryLane:0};function Eu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Py(e,t,n){var o=t.pendingProps,i=Se.current,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),me(Se,i&1),e===null)return hu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=o.children,e=o.fallback,r?(o=t.mode,r=t.child,s={mode:"hidden",children:s},!(o&1)&&r!==null?(r.childLanes=0,r.pendingProps=s):r=Cl(s,o,0,null),e=so(e,o,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Eu(n),t.memoizedState=Tu,e):cd(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hE(e,t,s,o,a,i,n);if(r){r=o.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:o.children};return!(s&1)&&t.child!==i?(o=t.child,o.childLanes=0,o.pendingProps=l,t.deletions=null):(o=Un(i,l),o.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=Un(a,r):(r=so(r,s,n,null),r.flags|=2),r.return=t,o.return=t,o.sibling=r,t.child=o,o=r,r=t.child,s=e.child.memoizedState,s=s===null?Eu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},r.memoizedState=s,r.childLanes=e.childLanes&~n,t.memoizedState=Tu,o}return r=e.child,e=r.sibling,o=Un(r,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function cd(e,t){return t=Cl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $r(e,t,n,o){return o!==null&&Yc(o),oi(t,e.child,null,n),e=cd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hE(e,t,n,o,i,r,s){if(n)return t.flags&256?(t.flags&=-257,o=ya(Error(L(422))),$r(e,t,s,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=o.fallback,i=t.mode,o=Cl({mode:"visible",children:o.children},i,0,null),r=so(r,i,s,null),r.flags|=2,o.return=t,r.return=t,o.sibling=r,t.child=o,t.mode&1&&oi(t,e.child,null,s),t.child.memoizedState=Eu(s),t.memoizedState=Tu,r);if(!(t.mode&1))return $r(e,t,s,null);if(i.data==="$!"){if(o=i.nextSibling&&i.nextSibling.dataset,o)var a=o.dgst;return o=a,r=Error(L(419)),o=ya(r,o,void 0),$r(e,t,s,o)}if(a=(s&e.childLanes)!==0,st||a){if(o=Ve,o!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(o.suspendedLanes|s)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,cn(e,i),Ht(o,e,i,-1))}return gd(),o=ya(Error(L(421))),$r(e,t,s,o)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=_E.bind(null,e),i._reactRetry=t,null):(e=r.treeContext,ht=bn(i.nextSibling),mt=t,ve=!0,Bt=null,e!==null&&(Et[wt++]=rn,Et[wt++]=sn,Et[wt++]=fo,rn=e.id,sn=e.overflow,fo=t),t=cd(t,o.children),t.flags|=4096,t)}function _p(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),mu(e.return,t,n)}function va(e,t,n,o,i){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=n,r.tailMode=i)}function Ry(e,t,n){var o=t.pendingProps,i=o.revealOrder,r=o.tail;if(Ze(e,t,o.children,n),o=Se.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_p(e,n,t);else if(e.tag===19)_p(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(me(Se,o),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Hs(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),va(t,!1,i,n,r);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Hs(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}va(t,!0,n,null,r);break;case"together":va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ho|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mE(e,t,n){switch(t.tag){case 3:ky(t),ni();break;case 5:oy(t);break;case 1:ut(t.type)&&Fs(t);break;case 4:nd(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,i=t.memoizedProps.value;me(Gs,o._currentValue),o._currentValue=i;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(me(Se,Se.current&1),t.flags|=128,null):n&t.child.childLanes?Py(e,t,n):(me(Se,Se.current&1),e=dn(e,t,n),e!==null?e.sibling:null);me(Se,Se.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return Ry(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(Se,Se.current),o)break;return null;case 22:case 23:return t.lanes=0,_y(e,t,n)}return dn(e,t,n)}var My,wu,by,Dy;My=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wu=function(){};by=function(e,t,n,o){var i=e.memoizedProps;if(i!==o){e=t.stateNode,no(Zt.current);var r=null;switch(n){case"input":i=qa(e,i),o=qa(e,o),r=[];break;case"select":i=we({},i,{value:void 0}),o=we({},o,{value:void 0}),r=[];break;case"textarea":i=Wa(e,i),o=Wa(e,o),r=[];break;default:typeof i.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Ds)}Ya(n,o);var s;n=null;for(u in i)if(!o.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qi.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in o){var l=o[u];if(a=i!=null?i[u]:void 0,o.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(r||(r=[]),r.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ge("scroll",e),r||a===l||(r=[])):(r=r||[]).push(u,l))}n&&(r=r||[]).push("style",n);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};Dy=function(e,t,n,o){n!==o&&(t.flags|=4)};function _i(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags&14680064,o|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags,o|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function gE(e,t,n){var o=t.pendingProps;switch(Kc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return ut(t.type)&&Ls(),je(t),null;case 3:return o=t.stateNode,ii(),ye(at),ye(Xe),id(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Hr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bt!==null&&(Ru(Bt),Bt=null))),wu(e,t),je(t),null;case 5:od(t);var i=no(cr.current);if(n=t.type,e!==null&&t.stateNode!=null)by(e,t,n,o,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(L(166));return je(t),null}if(e=no(Zt.current),Hr(t)){o=t.stateNode,n=t.type;var r=t.memoizedProps;switch(o[Kt]=t,o[ar]=r,e=(t.mode&1)!==0,n){case"dialog":ge("cancel",o),ge("close",o);break;case"iframe":case"object":case"embed":ge("load",o);break;case"video":case"audio":for(i=0;i<Li.length;i++)ge(Li[i],o);break;case"source":ge("error",o);break;case"img":case"image":case"link":ge("error",o),ge("load",o);break;case"details":ge("toggle",o);break;case"input":Ff(o,r),ge("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!r.multiple},ge("invalid",o);break;case"textarea":Vf(o,r),ge("invalid",o)}Ya(n,r),i=null;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];s==="children"?typeof a=="string"?o.textContent!==a&&(r.suppressHydrationWarning!==!0&&Or(o.textContent,a,e),i=["children",a]):typeof a=="number"&&o.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Or(o.textContent,a,e),i=["children",""+a]):Qi.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ge("scroll",o)}switch(n){case"input":br(o),Uf(o,r,!0);break;case"textarea":br(o),Gf(o);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(o.onclick=Ds)}o=i,t.updateQueue=o,o!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ag(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=s.createElement(n,{is:o.is}):(e=s.createElement(n),n==="select"&&(s=e,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):e=s.createElementNS(e,n),e[Kt]=t,e[ar]=o,My(e,t,!1,!1),t.stateNode=e;e:{switch(s=Xa(n,o),n){case"dialog":ge("cancel",e),ge("close",e),i=o;break;case"iframe":case"object":case"embed":ge("load",e),i=o;break;case"video":case"audio":for(i=0;i<Li.length;i++)ge(Li[i],e);i=o;break;case"source":ge("error",e),i=o;break;case"img":case"image":case"link":ge("error",e),ge("load",e),i=o;break;case"details":ge("toggle",e),i=o;break;case"input":Ff(e,o),i=qa(e,o),ge("invalid",e);break;case"option":i=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},i=we({},o,{value:void 0}),ge("invalid",e);break;case"textarea":Vf(e,o),i=Wa(e,o),ge("invalid",e);break;default:i=o}Ya(n,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?dg(e,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ug(e,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zi(e,l):typeof l=="number"&&Zi(e,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Qi.hasOwnProperty(r)?l!=null&&r==="onScroll"&&ge("scroll",e):l!=null&&Dc(e,r,l,s))}switch(n){case"input":br(e),Uf(e,o,!1);break;case"textarea":br(e),Gf(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Vn(o.value));break;case"select":e.multiple=!!o.multiple,r=o.value,r!=null?zo(e,!!o.multiple,r,!1):o.defaultValue!=null&&zo(e,!!o.multiple,o.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ds)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)Dy(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(L(166));if(n=no(cr.current),no(Zt.current),Hr(t)){if(o=t.stateNode,n=t.memoizedProps,o[Kt]=t,(r=o.nodeValue!==n)&&(e=mt,e!==null))switch(e.tag){case 3:Or(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Or(o.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Kt]=t,t.stateNode=o}return je(t),null;case 13:if(ye(Se),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&ht!==null&&t.mode&1&&!(t.flags&128))Qg(),ni(),t.flags|=98560,r=!1;else if(r=Hr(t),o!==null&&o.dehydrated!==null){if(e===null){if(!r)throw Error(L(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[Kt]=t}else ni(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),r=!1}else Bt!==null&&(Ru(Bt),Bt=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?Le===0&&(Le=3):gd())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return ii(),wu(e,t),e===null&&sr(t.stateNode.containerInfo),je(t),null;case 10:return Zc(t.type._context),je(t),null;case 17:return ut(t.type)&&Ls(),je(t),null;case 19:if(ye(Se),r=t.memoizedState,r===null)return je(t),null;if(o=(t.flags&128)!==0,s=r.rendering,s===null)if(o)_i(r,!1);else{if(Le!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Hs(e),s!==null){for(t.flags|=128,_i(r,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)r=n,e=o,r.flags&=14680066,s=r.alternate,s===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,r.type=s.type,e=s.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return me(Se,Se.current&1|2),t.child}e=e.sibling}r.tail!==null&&ke()>si&&(t.flags|=128,o=!0,_i(r,!1),t.lanes=4194304)}else{if(!o)if(e=Hs(s),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_i(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!ve)return je(t),null}else 2*ke()-r.renderingStartTime>si&&n!==1073741824&&(t.flags|=128,o=!0,_i(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(n=r.last,n!==null?n.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=ke(),t.sibling=null,n=Se.current,me(Se,o?n&1|2:n&1),t):(je(t),null);case 22:case 23:return md(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?pt&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function yE(e,t){switch(Kc(t),t.tag){case 1:return ut(t.type)&&Ls(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ii(),ye(at),ye(Xe),id(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return od(t),null;case 13:if(ye(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(Se),null;case 4:return ii(),null;case 10:return Zc(t.type._context),null;case 22:case 23:return md(),null;case 24:return null;default:return null}}var qr=!1,We=!1,vE=typeof WeakSet=="function"?WeakSet:Set,G=null;function bo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){_e(e,t,o)}else n.current=null}function Cu(e,t,n){try{n()}catch(o){_e(e,t,o)}}var Ap=!1;function xE(e,t){if(lu=Rs,e=Gg(),jc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var i=o.anchorOffset,r=o.focusNode;o=o.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==r||o!==0&&h.nodeType!==3||(l=s+o),h.nodeType===3&&(s+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===e)break t;if(p===n&&++u===i&&(a=s),p===r&&++d===o&&(l=s),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(au={focusedElem:e,selectionRange:n},Rs=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var T=v.memoizedProps,E=v.memoizedState,S=t.stateNode,y=S.getSnapshotBeforeUpdate(t.elementType===t.type?T:Ut(t.type,T),E);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(w){_e(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return v=Ap,Ap=!1,v}function $i(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var i=o=o.next;do{if((i.tag&e)===e){var r=i.destroy;i.destroy=void 0,r!==void 0&&Cu(t,n,r)}i=i.next}while(i!==o)}}function El(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function Iu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ly(e){var t=e.alternate;t!==null&&(e.alternate=null,Ly(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kt],delete t[ar],delete t[du],delete t[tE],delete t[nE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fy(e){return e.tag===5||e.tag===3||e.tag===4}function kp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nu(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ds));else if(o!==4&&(e=e.child,e!==null))for(Nu(e,t,n),e=e.sibling;e!==null;)Nu(e,t,n),e=e.sibling}function _u(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(_u(e,t,n),e=e.sibling;e!==null;)_u(e,t,n),e=e.sibling}var Oe=null,Vt=!1;function Tn(e,t,n){for(n=n.child;n!==null;)Uy(e,t,n),n=n.sibling}function Uy(e,t,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(hl,n)}catch{}switch(n.tag){case 5:We||bo(n,t);case 6:var o=Oe,i=Vt;Oe=null,Tn(e,t,n),Oe=o,Vt=i,Oe!==null&&(Vt?(e=Oe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(Vt?(e=Oe,n=n.stateNode,e.nodeType===8?da(e.parentNode,n):e.nodeType===1&&da(e,n),or(e)):da(Oe,n.stateNode));break;case 4:o=Oe,i=Vt,Oe=n.stateNode.containerInfo,Vt=!0,Tn(e,t,n),Oe=o,Vt=i;break;case 0:case 11:case 14:case 15:if(!We&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){i=o=o.next;do{var r=i,s=r.destroy;r=r.tag,s!==void 0&&(r&2||r&4)&&Cu(n,t,s),i=i.next}while(i!==o)}Tn(e,t,n);break;case 1:if(!We&&(bo(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(a){_e(n,t,a)}Tn(e,t,n);break;case 21:Tn(e,t,n);break;case 22:n.mode&1?(We=(o=We)||n.memoizedState!==null,Tn(e,t,n),We=o):Tn(e,t,n);break;default:Tn(e,t,n)}}function Pp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vE),t.forEach(function(o){var i=AE.bind(null,e,o);n.has(o)||(n.add(o),o.then(i,i))})}}function Dt(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var i=n[o];try{var r=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Oe=a.stateNode,Vt=!1;break e;case 3:Oe=a.stateNode.containerInfo,Vt=!0;break e;case 4:Oe=a.stateNode.containerInfo,Vt=!0;break e}a=a.return}if(Oe===null)throw Error(L(160));Uy(r,s,i),Oe=null,Vt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){_e(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vy(t,e),t=t.sibling}function Vy(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dt(t,e),jt(e),o&4){try{$i(3,e,e.return),El(3,e)}catch(T){_e(e,e.return,T)}try{$i(5,e,e.return)}catch(T){_e(e,e.return,T)}}break;case 1:Dt(t,e),jt(e),o&512&&n!==null&&bo(n,n.return);break;case 5:if(Dt(t,e),jt(e),o&512&&n!==null&&bo(n,n.return),e.flags&32){var i=e.stateNode;try{Zi(i,"")}catch(T){_e(e,e.return,T)}}if(o&4&&(i=e.stateNode,i!=null)){var r=e.memoizedProps,s=n!==null?n.memoizedProps:r,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&sg(i,r),Xa(a,s);var u=Xa(a,r);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];d==="style"?dg(i,h):d==="dangerouslySetInnerHTML"?ug(i,h):d==="children"?Zi(i,h):Dc(i,d,h,u)}switch(a){case"input":Ja(i,r);break;case"textarea":lg(i,r);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?zo(i,!!r.multiple,g,!1):p!==!!r.multiple&&(r.defaultValue!=null?zo(i,!!r.multiple,r.defaultValue,!0):zo(i,!!r.multiple,r.multiple?[]:"",!1))}i[ar]=r}catch(T){_e(e,e.return,T)}}break;case 6:if(Dt(t,e),jt(e),o&4){if(e.stateNode===null)throw Error(L(162));i=e.stateNode,r=e.memoizedProps;try{i.nodeValue=r}catch(T){_e(e,e.return,T)}}break;case 3:if(Dt(t,e),jt(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{or(t.containerInfo)}catch(T){_e(e,e.return,T)}break;case 4:Dt(t,e),jt(e);break;case 13:Dt(t,e),jt(e),i=e.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(pd=ke())),o&4&&Pp(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(We=(u=We)||d,Dt(t,e),We=u):Dt(t,e),jt(e),o&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(G=e,d=e.child;d!==null;){for(h=G=d;G!==null;){switch(p=G,g=p.child,p.tag){case 0:case 11:case 14:case 15:$i(4,p,p.return);break;case 1:bo(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){o=p,n=p.return;try{t=o,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(T){_e(o,n,T)}}break;case 5:bo(p,p.return);break;case 22:if(p.memoizedState!==null){Mp(h);continue}}g!==null?(g.return=p,G=g):Mp(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cg("display",s))}catch(T){_e(e,e.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(T){_e(e,e.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dt(t,e),jt(e),o&4&&Pp(e);break;case 21:break;default:Dt(t,e),jt(e)}}function jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Fy(n)){var o=n;break e}n=n.return}throw Error(L(160))}switch(o.tag){case 5:var i=o.stateNode;o.flags&32&&(Zi(i,""),o.flags&=-33);var r=kp(e);_u(e,r,i);break;case 3:case 4:var s=o.stateNode.containerInfo,a=kp(e);Nu(e,a,s);break;default:throw Error(L(161))}}catch(l){_e(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function SE(e,t,n){G=e,Gy(e)}function Gy(e,t,n){for(var o=(e.mode&1)!==0;G!==null;){var i=G,r=i.child;if(i.tag===22&&o){var s=i.memoizedState!==null||qr;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||We;a=qr;var u=We;if(qr=s,(We=l)&&!u)for(G=i;G!==null;)s=G,l=s.child,s.tag===22&&s.memoizedState!==null?bp(i):l!==null?(l.return=s,G=l):bp(i);for(;r!==null;)G=r,Gy(r),r=r.sibling;G=i,qr=a,We=u}Rp(e)}else i.subtreeFlags&8772&&r!==null?(r.return=i,G=r):Rp(e)}}function Rp(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:We||El(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!We)if(n===null)o.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ut(t.type,n.memoizedProps);o.componentDidUpdate(i,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&mp(t,r,o);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}mp(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&or(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}We||t.flags&512&&Iu(t)}catch(p){_e(t,t.return,p)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function Mp(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function bp(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{El(4,t)}catch(l){_e(t,n,l)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var i=t.return;try{o.componentDidMount()}catch(l){_e(t,i,l)}}var r=t.return;try{Iu(t)}catch(l){_e(t,r,l)}break;case 5:var s=t.return;try{Iu(t)}catch(l){_e(t,s,l)}}}catch(l){_e(t,t.return,l)}if(t===e){G=null;break}var a=t.sibling;if(a!==null){a.return=t.return,G=a;break}G=t.return}}var TE=Math.ceil,qs=mn.ReactCurrentDispatcher,dd=mn.ReactCurrentOwner,Nt=mn.ReactCurrentBatchConfig,ae=0,Ve=null,Re=null,ze=0,pt=0,Do=zn(0),Le=0,hr=null,ho=0,wl=0,fd=0,qi=null,rt=null,pd=0,si=1/0,nn=null,Js=!1,Au=null,Ln=null,Jr=!1,An=null,js=0,Ji=0,ku=null,ms=-1,gs=0;function tt(){return ae&6?ke():ms!==-1?ms:ms=ke()}function Fn(e){return e.mode&1?ae&2&&ze!==0?ze&-ze:iE.transition!==null?(gs===0&&(gs=wg()),gs):(e=fe,e!==0||(e=window.event,e=e===void 0?16:Pg(e.type)),e):1}function Ht(e,t,n,o){if(50<Ji)throw Ji=0,ku=null,Error(L(185));Er(e,n,o),(!(ae&2)||e!==Ve)&&(e===Ve&&(!(ae&2)&&(wl|=n),Le===4&&Nn(e,ze)),ct(e,o),n===1&&ae===0&&!(t.mode&1)&&(si=ke()+500,xl&&$n()))}function ct(e,t){var n=e.callbackNode;i1(e,t);var o=Ps(e,e===Ve?ze:0);if(o===0)n!==null&&Hf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&Hf(n),t===1)e.tag===0?oE(Dp.bind(null,e)):Kg(Dp.bind(null,e)),Z1(function(){!(ae&6)&&$n()}),n=null;else{switch(Cg(o)){case 1:n=Gc;break;case 4:n=Tg;break;case 16:n=ks;break;case 536870912:n=Eg;break;default:n=ks}n=jy(n,By.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function By(e,t){if(ms=-1,gs=0,ae&6)throw Error(L(327));var n=e.callbackNode;if(Wo()&&e.callbackNode!==n)return null;var o=Ps(e,e===Ve?ze:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Ws(e,o);else{t=o;var i=ae;ae|=2;var r=Hy();(Ve!==e||ze!==t)&&(nn=null,si=ke()+500,ro(e,t));do try{CE();break}catch(a){Oy(e,a)}while(!0);Qc(),qs.current=r,ae=i,Re!==null?t=0:(Ve=null,ze=0,t=Le)}if(t!==0){if(t===2&&(i=nu(e),i!==0&&(o=i,t=Pu(e,i))),t===1)throw n=hr,ro(e,0),Nn(e,o),ct(e,ke()),n;if(t===6)Nn(e,o);else{if(i=e.current.alternate,!(o&30)&&!EE(i)&&(t=Ws(e,o),t===2&&(r=nu(e),r!==0&&(o=r,t=Pu(e,r))),t===1))throw n=hr,ro(e,0),Nn(e,o),ct(e,ke()),n;switch(e.finishedWork=i,e.finishedLanes=o,t){case 0:case 1:throw Error(L(345));case 2:Yn(e,rt,nn);break;case 3:if(Nn(e,o),(o&130023424)===o&&(t=pd+500-ke(),10<t)){if(Ps(e,0)!==0)break;if(i=e.suspendedLanes,(i&o)!==o){tt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=cu(Yn.bind(null,e,rt,nn),t);break}Yn(e,rt,nn);break;case 4:if(Nn(e,o),(o&4194240)===o)break;for(t=e.eventTimes,i=-1;0<o;){var s=31-Ot(o);r=1<<s,s=t[s],s>i&&(i=s),o&=~r}if(o=i,o=ke()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*TE(o/1960))-o,10<o){e.timeoutHandle=cu(Yn.bind(null,e,rt,nn),o);break}Yn(e,rt,nn);break;case 5:Yn(e,rt,nn);break;default:throw Error(L(329))}}}return ct(e,ke()),e.callbackNode===n?By.bind(null,e):null}function Pu(e,t){var n=qi;return e.current.memoizedState.isDehydrated&&(ro(e,t).flags|=256),e=Ws(e,t),e!==2&&(t=rt,rt=n,t!==null&&Ru(t)),e}function Ru(e){rt===null?rt=e:rt.push.apply(rt,e)}function EE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var i=n[o],r=i.getSnapshot;i=i.value;try{if(!qt(r(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nn(e,t){for(t&=~fd,t&=~wl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ot(t),o=1<<n;e[n]=-1,t&=~o}}function Dp(e){if(ae&6)throw Error(L(327));Wo();var t=Ps(e,0);if(!(t&1))return ct(e,ke()),null;var n=Ws(e,t);if(e.tag!==0&&n===2){var o=nu(e);o!==0&&(t=o,n=Pu(e,o))}if(n===1)throw n=hr,ro(e,0),Nn(e,t),ct(e,ke()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yn(e,rt,nn),ct(e,ke()),null}function hd(e,t){var n=ae;ae|=1;try{return e(t)}finally{ae=n,ae===0&&(si=ke()+500,xl&&$n())}}function mo(e){An!==null&&An.tag===0&&!(ae&6)&&Wo();var t=ae;ae|=1;var n=Nt.transition,o=fe;try{if(Nt.transition=null,fe=1,e)return e()}finally{fe=o,Nt.transition=n,ae=t,!(ae&6)&&$n()}}function md(){pt=Do.current,ye(Do)}function ro(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Q1(n)),Re!==null)for(n=Re.return;n!==null;){var o=n;switch(Kc(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Ls();break;case 3:ii(),ye(at),ye(Xe),id();break;case 5:od(o);break;case 4:ii();break;case 13:ye(Se);break;case 19:ye(Se);break;case 10:Zc(o.type._context);break;case 22:case 23:md()}n=n.return}if(Ve=e,Re=e=Un(e.current,null),ze=pt=t,Le=0,hr=null,fd=wl=ho=0,rt=qi=null,to!==null){for(t=0;t<to.length;t++)if(n=to[t],o=n.interleaved,o!==null){n.interleaved=null;var i=o.next,r=n.pending;if(r!==null){var s=r.next;r.next=i,o.next=s}n.pending=o}to=null}return e}function Oy(e,t){do{var n=Re;try{if(Qc(),fs.current=$s,zs){for(var o=Ee.memoizedState;o!==null;){var i=o.queue;i!==null&&(i.pending=null),o=o.next}zs=!1}if(po=0,Ue=De=Ee=null,zi=!1,dr=0,dd.current=null,n===null||n.return===null){Le=1,hr=t,Re=null;break}e:{var r=e,s=n.return,a=n,l=t;if(t=ze,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Tp(s);if(g!==null){g.flags&=-257,Ep(g,s,a,r,t),g.mode&1&&Sp(r,u,t),t=g,l=u;var v=t.updateQueue;if(v===null){var T=new Set;T.add(l),t.updateQueue=T}else v.add(l);break e}else{if(!(t&1)){Sp(r,u,t),gd();break e}l=Error(L(426))}}else if(ve&&a.mode&1){var E=Tp(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Ep(E,s,a,r,t),Yc(ri(l,a));break e}}r=l=ri(l,a),Le!==4&&(Le=2),qi===null?qi=[r]:qi.push(r),r=s;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var S=Cy(r,l,t);hp(r,S);break e;case 1:a=l;var y=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ln===null||!Ln.has(x)))){r.flags|=65536,t&=-t,r.lanes|=t;var w=Iy(r,a,t);hp(r,w);break e}}r=r.return}while(r!==null)}$y(n)}catch(I){t=I,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function Hy(){var e=qs.current;return qs.current=$s,e===null?$s:e}function gd(){(Le===0||Le===3||Le===2)&&(Le=4),Ve===null||!(ho&268435455)&&!(wl&268435455)||Nn(Ve,ze)}function Ws(e,t){var n=ae;ae|=2;var o=Hy();(Ve!==e||ze!==t)&&(nn=null,ro(e,t));do try{wE();break}catch(i){Oy(e,i)}while(!0);if(Qc(),ae=n,qs.current=o,Re!==null)throw Error(L(261));return Ve=null,ze=0,Le}function wE(){for(;Re!==null;)zy(Re)}function CE(){for(;Re!==null&&!KT();)zy(Re)}function zy(e){var t=Jy(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?$y(e):Re=t,dd.current=null}function $y(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yE(n,t),n!==null){n.flags&=32767,Re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Le=6,Re=null;return}}else if(n=gE(n,t,pt),n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Le===0&&(Le=5)}function Yn(e,t,n){var o=fe,i=Nt.transition;try{Nt.transition=null,fe=1,IE(e,t,n,o)}finally{Nt.transition=i,fe=o}return null}function IE(e,t,n,o){do Wo();while(An!==null);if(ae&6)throw Error(L(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(r1(e,r),e===Ve&&(Re=Ve=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jr||(Jr=!0,jy(ks,function(){return Wo(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Nt.transition,Nt.transition=null;var s=fe;fe=1;var a=ae;ae|=4,dd.current=null,xE(e,n),Vy(n,e),q1(au),Rs=!!lu,au=lu=null,e.current=n,SE(n),YT(),ae=a,fe=s,Nt.transition=r}else e.current=n;if(Jr&&(Jr=!1,An=e,js=i),r=e.pendingLanes,r===0&&(Ln=null),ZT(n.stateNode),ct(e,ke()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],o(i.value,{componentStack:i.stack,digest:i.digest});if(Js)throw Js=!1,e=Au,Au=null,e;return js&1&&e.tag!==0&&Wo(),r=e.pendingLanes,r&1?e===ku?Ji++:(Ji=0,ku=e):Ji=0,$n(),null}function Wo(){if(An!==null){var e=Cg(js),t=Nt.transition,n=fe;try{if(Nt.transition=null,fe=16>e?16:e,An===null)var o=!1;else{if(e=An,An=null,js=0,ae&6)throw Error(L(331));var i=ae;for(ae|=4,G=e.current;G!==null;){var r=G,s=r.child;if(G.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:$i(8,d,r)}var h=d.child;if(h!==null)h.return=d,G=h;else for(;G!==null;){d=G;var p=d.sibling,g=d.return;if(Ly(d),d===u){G=null;break}if(p!==null){p.return=g,G=p;break}G=g}}}var v=r.alternate;if(v!==null){var T=v.child;if(T!==null){v.child=null;do{var E=T.sibling;T.sibling=null,T=E}while(T!==null)}}G=r}}if(r.subtreeFlags&2064&&s!==null)s.return=r,G=s;else e:for(;G!==null;){if(r=G,r.flags&2048)switch(r.tag){case 0:case 11:case 15:$i(9,r,r.return)}var S=r.sibling;if(S!==null){S.return=r.return,G=S;break e}G=r.return}}var y=e.current;for(G=y;G!==null;){s=G;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,G=x;else e:for(s=y;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:El(9,a)}}catch(I){_e(a,a.return,I)}if(a===s){G=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,G=w;break e}G=a.return}}if(ae=i,$n(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(hl,e)}catch{}o=!0}return o}finally{fe=n,Nt.transition=t}}return!1}function Lp(e,t,n){t=ri(n,t),t=Cy(e,t,1),e=Dn(e,t,1),t=tt(),e!==null&&(Er(e,1,t),ct(e,t))}function _e(e,t,n){if(e.tag===3)Lp(e,e,n);else for(;t!==null;){if(t.tag===3){Lp(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ln===null||!Ln.has(o))){e=ri(n,e),e=Iy(t,e,1),t=Dn(t,e,1),e=tt(),t!==null&&(Er(t,1,e),ct(t,e));break}}t=t.return}}function NE(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&n,Ve===e&&(ze&n)===n&&(Le===4||Le===3&&(ze&130023424)===ze&&500>ke()-pd?ro(e,0):fd|=n),ct(e,t)}function qy(e,t){t===0&&(e.mode&1?(t=Fr,Fr<<=1,!(Fr&130023424)&&(Fr=4194304)):t=1);var n=tt();e=cn(e,t),e!==null&&(Er(e,t,n),ct(e,n))}function _E(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qy(e,n)}function AE(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(L(314))}o!==null&&o.delete(t),qy(e,n)}var Jy;Jy=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||at.current)st=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return st=!1,mE(e,t,n);st=!!(e.flags&131072)}else st=!1,ve&&t.flags&1048576&&Yg(t,Vs,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;hs(e,t),e=t.pendingProps;var i=ti(t,Xe.current);jo(t,n),i=sd(null,t,o,e,i,n);var r=ld();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(o)?(r=!0,Fs(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,td(t),i.updater=Tl,t.stateNode=i,i._reactInternals=t,yu(t,o,e,n),t=Su(null,t,o,!0,r,n)):(t.tag=0,ve&&r&&Wc(t),Ze(null,t,i,n),t=t.child),t;case 16:o=t.elementType;e:{switch(hs(e,t),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=PE(o),e=Ut(o,e),i){case 0:t=xu(null,t,o,e,n);break e;case 1:t=Ip(null,t,o,e,n);break e;case 11:t=wp(null,t,o,e,n);break e;case 14:t=Cp(null,t,o,Ut(o.type,e),n);break e}throw Error(L(306,o,""))}return t;case 0:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Ut(o,i),xu(e,t,o,i,n);case 1:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Ut(o,i),Ip(e,t,o,i,n);case 3:e:{if(ky(t),e===null)throw Error(L(387));o=t.pendingProps,r=t.memoizedState,i=r.element,ny(e,t),Os(t,o,null,n);var s=t.memoizedState;if(o=s.element,r.isDehydrated)if(r={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=ri(Error(L(423)),t),t=Np(e,t,o,n,i);break e}else if(o!==i){i=ri(Error(L(424)),t),t=Np(e,t,o,n,i);break e}else for(ht=bn(t.stateNode.containerInfo.firstChild),mt=t,ve=!0,Bt=null,n=ey(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ni(),o===i){t=dn(e,t,n);break e}Ze(e,t,o,n)}t=t.child}return t;case 5:return oy(t),e===null&&hu(t),o=t.type,i=t.pendingProps,r=e!==null?e.memoizedProps:null,s=i.children,uu(o,i)?s=null:r!==null&&uu(o,r)&&(t.flags|=32),Ay(e,t),Ze(e,t,s,n),t.child;case 6:return e===null&&hu(t),null;case 13:return Py(e,t,n);case 4:return nd(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=oi(t,null,o,n):Ze(e,t,o,n),t.child;case 11:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Ut(o,i),wp(e,t,o,i,n);case 7:return Ze(e,t,t.pendingProps,n),t.child;case 8:return Ze(e,t,t.pendingProps.children,n),t.child;case 12:return Ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,i=t.pendingProps,r=t.memoizedProps,s=i.value,me(Gs,o._currentValue),o._currentValue=s,r!==null)if(qt(r.value,s)){if(r.children===i.children&&!at.current){t=dn(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){s=r.child;for(var l=a.firstContext;l!==null;){if(l.context===o){if(r.tag===1){l=ln(-1,n&-n),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),mu(r.return,n,t),a.lanes|=n;break}l=l.next}}else if(r.tag===10)s=r.type===t.type?null:r.child;else if(r.tag===18){if(s=r.return,s===null)throw Error(L(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),mu(s,n,t),s=r.sibling}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===t){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}Ze(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps.children,jo(t,n),i=kt(i),o=o(i),t.flags|=1,Ze(e,t,o,n),t.child;case 14:return o=t.type,i=Ut(o,t.pendingProps),i=Ut(o.type,i),Cp(e,t,o,i,n);case 15:return Ny(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Ut(o,i),hs(e,t),t.tag=1,ut(o)?(e=!0,Fs(t)):e=!1,jo(t,n),wy(t,o,i),yu(t,o,i,n),Su(null,t,o,!0,e,n);case 19:return Ry(e,t,n);case 22:return _y(e,t,n)}throw Error(L(156,t.tag))};function jy(e,t){return Sg(e,t)}function kE(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,n,o){return new kE(e,t,n,o)}function yd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PE(e){if(typeof e=="function")return yd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fc)return 11;if(e===Uc)return 14}return 2}function Un(e,t){var n=e.alternate;return n===null?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ys(e,t,n,o,i,r){var s=2;if(o=e,typeof e=="function")yd(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Co:return so(n.children,i,r,t);case Lc:s=8,i|=8;break;case Oa:return e=Ct(12,n,t,i|2),e.elementType=Oa,e.lanes=r,e;case Ha:return e=Ct(13,n,t,i),e.elementType=Ha,e.lanes=r,e;case za:return e=Ct(19,n,t,i),e.elementType=za,e.lanes=r,e;case og:return Cl(n,i,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tg:s=10;break e;case ng:s=9;break e;case Fc:s=11;break e;case Uc:s=14;break e;case wn:s=16,o=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=Ct(s,n,t,i),t.elementType=e,t.type=o,t.lanes=r,t}function so(e,t,n,o){return e=Ct(7,e,o,t),e.lanes=n,e}function Cl(e,t,n,o){return e=Ct(22,e,o,t),e.elementType=og,e.lanes=n,e.stateNode={isHidden:!1},e}function xa(e,t,n){return e=Ct(6,e,null,t),e.lanes=n,e}function Sa(e,t,n){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function RE(e,t,n,o,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=o,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vd(e,t,n,o,i,r,s,a,l){return e=new RE(e,t,n,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Ct(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},td(r),e}function ME(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function Wy(e){if(!e)return Gn;e=e._reactInternals;e:{if(vo(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(ut(n))return Wg(e,n,t)}return t}function Ky(e,t,n,o,i,r,s,a,l){return e=vd(n,o,!0,e,i,r,s,a,l),e.context=Wy(null),n=e.current,o=tt(),i=Fn(n),r=ln(o,i),r.callback=t??null,Dn(n,r,i),e.current.lanes=i,Er(e,i,o),ct(e,o),e}function Il(e,t,n,o){var i=t.current,r=tt(),s=Fn(i);return n=Wy(n),t.context===null?t.context=n:t.pendingContext=n,t=ln(r,s),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Dn(i,t,s),e!==null&&(Ht(e,i,s,r),ds(e,i,s)),s}function Ks(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xd(e,t){Fp(e,t),(e=e.alternate)&&Fp(e,t)}function bE(){return null}var Yy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sd(e){this._internalRoot=e}Nl.prototype.render=Sd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));Il(e,t,null,null)};Nl.prototype.unmount=Sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mo(function(){Il(null,e,null,null)}),t[un]=null}};function Nl(e){this._internalRoot=e}Nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=_g();e={blockedOn:null,target:e,priority:t};for(var n=0;n<In.length&&t!==0&&t<In[n].priority;n++);In.splice(n,0,e),n===0&&kg(e)}};function Td(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Up(){}function DE(e,t,n,o,i){if(i){if(typeof o=="function"){var r=o;o=function(){var u=Ks(s);r.call(u)}}var s=Ky(t,o,e,0,null,!1,!1,"",Up);return e._reactRootContainer=s,e[un]=s.current,sr(e.nodeType===8?e.parentNode:e),mo(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof o=="function"){var a=o;o=function(){var u=Ks(l);a.call(u)}}var l=vd(e,0,!1,null,null,!1,!1,"",Up);return e._reactRootContainer=l,e[un]=l.current,sr(e.nodeType===8?e.parentNode:e),mo(function(){Il(t,l,n,o)}),l}function Al(e,t,n,o,i){var r=n._reactRootContainer;if(r){var s=r;if(typeof i=="function"){var a=i;i=function(){var l=Ks(s);a.call(l)}}Il(t,s,e,i)}else s=DE(n,t,e,i,o);return Ks(s)}Ig=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Di(t.pendingLanes);n!==0&&(Bc(t,n|1),ct(t,ke()),!(ae&6)&&(si=ke()+500,$n()))}break;case 13:mo(function(){var o=cn(e,1);if(o!==null){var i=tt();Ht(o,e,1,i)}}),xd(e,1)}};Oc=function(e){if(e.tag===13){var t=cn(e,134217728);if(t!==null){var n=tt();Ht(t,e,134217728,n)}xd(e,134217728)}};Ng=function(e){if(e.tag===13){var t=Fn(e),n=cn(e,t);if(n!==null){var o=tt();Ht(n,e,t,o)}xd(e,t)}};_g=function(){return fe};Ag=function(e,t){var n=fe;try{return fe=e,t()}finally{fe=n}};Za=function(e,t,n){switch(t){case"input":if(Ja(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var i=vl(o);if(!i)throw Error(L(90));rg(o),Ja(o,i)}}}break;case"textarea":lg(e,n);break;case"select":t=n.value,t!=null&&zo(e,!!n.multiple,t,!1)}};hg=hd;mg=mo;var LE={usingClientEntryPoint:!1,Events:[Cr,Ao,vl,fg,pg,hd]},Ai={findFiberByHostInstance:eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FE={bundleType:Ai.bundleType,version:Ai.version,rendererPackageName:Ai.rendererPackageName,rendererConfig:Ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vg(e),e===null?null:e.stateNode},findFiberByHostInstance:Ai.findFiberByHostInstance||bE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jr.isDisabled&&jr.supportsFiber)try{hl=jr.inject(FE),Qt=jr}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LE;yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Td(t))throw Error(L(200));return ME(e,t,null,n)};yt.createRoot=function(e,t){if(!Td(e))throw Error(L(299));var n=!1,o="",i=Yy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=vd(e,1,!1,null,null,n,!1,o,i),e[un]=t.current,sr(e.nodeType===8?e.parentNode:e),new Sd(t)};yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=vg(t),e=e===null?null:e.stateNode,e};yt.flushSync=function(e){return mo(e)};yt.hydrate=function(e,t,n){if(!_l(t))throw Error(L(200));return Al(null,e,t,!0,n)};yt.hydrateRoot=function(e,t,n){if(!Td(e))throw Error(L(405));var o=n!=null&&n.hydratedSources||null,i=!1,r="",s=Yy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Ky(t,null,e,1,n??null,i,!1,r,s),e[un]=t.current,sr(e),o)for(e=0;e<o.length;e++)n=o[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Nl(t)};yt.render=function(e,t,n){if(!_l(t))throw Error(L(200));return Al(null,e,t,!1,n)};yt.unmountComponentAtNode=function(e){if(!_l(e))throw Error(L(40));return e._reactRootContainer?(mo(function(){Al(null,null,e,!1,function(){e._reactRootContainer=null,e[un]=null})}),!0):!1};yt.unstable_batchedUpdates=hd;yt.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!_l(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return Al(e,t,n,!1,o)};yt.version="18.3.1-next-f1338f8080-20240426";function Xy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xy)}catch(e){console.error(e)}}Xy(),X0.exports=yt;var UE=X0.exports,Vp=UE;Ga.createRoot=Vp.createRoot,Ga.hydrateRoot=Vp.hydrateRoot;var Ie=(e=>(e.MBTI_16="MBTI_16",e.JUNG_8="JUNG_8",e))(Ie||{});const Ko={standard:{name:"",multiplier:1,icon:"",color:"bg-emerald-600/90 border-emerald-400"},truth:{name:"",multiplier:1.2,icon:"",color:"bg-sky-600/90 border-sky-400"},dare:{name:"",multiplier:1.2,icon:"",color:"bg-amber-600/90 border-amber-400"},deep:{name:"",multiplier:1.5,icon:"",color:"bg-indigo-600/90 border-indigo-400"}},Ys=["INTJ","INTP","ENTJ","ENTP","INFJ","INFP","ENFJ","ENFP","ISTJ","ISFJ","ESTJ","ESFJ","ISTP","ISFP","ESTP","ESFP"],Xt={" (NT)":{types:["INTJ","INTP","ENTJ","ENTP"],color:"bg-purple-100 dark:bg-purple-900/40 border-purple-200 dark:border-purple-500/50 text-purple-800 dark:text-purple-200",hexColor:"#a855f7"}," (NF)":{types:["INFJ","INFP","ENFJ","ENFP"],color:"bg-green-100 dark:bg-green-900/40 border-green-200 dark:border-green-500/50 text-green-800 dark:text-green-200",hexColor:"#22c55e"}," (SJ)":{types:["ISTJ","ISFJ","ESTJ","ESFJ"],color:"bg-blue-100 dark:bg-blue-900/40 border-blue-200 dark:border-blue-500/50 text-blue-800 dark:text-blue-200",hexColor:"#3b82f6"}," (SP)":{types:["ISTP","ISFP","ESTP","ESFP"],color:"bg-amber-100 dark:bg-yellow-900/40 border-amber-200 dark:border-yellow-500/50 text-amber-800 dark:text-yellow-200",hexColor:"#eab308"}},Mu={INTJ:"",INTP:"",ENTJ:"",ENTP:"",INFJ:"",INFP:"",ENFJ:"",ENFP:"",ISTJ:"",ISFJ:"",ESTJ:"",ESFJ:"",ISTP:"",ISFP:"",ESTP:"",ESFP:"",Hub:""},VE={INTJ:["",""],INTP:["",""],ENTJ:["",""],ENTP:["",""],INFJ:["",""],INFP:["",""],ENFJ:["",""],ENFP:["",""],ISTJ:["",""],ISFJ:["",""],ESTJ:["",""],ESFJ:["",""],ISTP:["",""],ISFP:["",""],ESTP:["",""],ESFP:["",""]},vs={INTJ:["Ni","Te","Fi","Se","Ne","Ti","Fe","Si"],INTP:["Ti","Ne","Si","Fe","Te","Ni","Se","Fi"],ENTJ:["Te","Ni","Se","Fi","Ti","Ne","Si","Fe"],ENTP:["Ne","Ti","Fe","Si","Ni","Te","Fi","Se"],INFJ:["Ni","Fe","Ti","Se","Ne","Fi","Te","Si"],INFP:["Fi","Ne","Si","Te","Fe","Ni","Se","Ti"],ENFJ:["Fe","Ni","Se","Ti","Fi","Ne","Si","Te"],ENFP:["Ne","Fi","Te","Si","Ni","Fe","Ti","Se"],ISTJ:["Si","Te","Fi","Ne","Se","Ti","Fe","Ni"],ISFJ:["Si","Fe","Ti","Ne","Se","Fi","Te","Ni"],ESTJ:["Te","Si","Ne","Fi","Ti","Se","Ni","Fe"],ESFJ:["Fe","Si","Ne","Ti","Fi","Se","Ni","Te"],ISTP:["Ti","Se","Ni","Fe","Te","Si","Ne","Fi"],ISFP:["Fi","Se","Ni","Te","Fe","Si","Ne","Ti"],ESTP:["Se","Ti","Fe","Ni","Si","Te","Fi","Ne"],ESFP:["Se","Fi","Te","Ni","Si","Fe","Ti","Ne"]},bu=[{id:"Te",name:"",color:"#3b82f6",desc:"",textColor:"text-blue-100",borderColor:"border-blue-500",bgColor:"bg-blue-600"},{id:"Ti",name:"",color:"#0ea5e9",desc:"",textColor:"text-sky-100",borderColor:"border-sky-500",bgColor:"bg-sky-600"},{id:"Fe",name:"",color:"#ec4899",desc:"",textColor:"text-pink-100",borderColor:"border-pink-500",bgColor:"bg-pink-600"},{id:"Fi",name:"",color:"#f43f5e",desc:"",textColor:"text-rose-100",borderColor:"border-rose-500",bgColor:"bg-rose-600"},{id:"Se",name:"",color:"#eab308",desc:"",textColor:"text-yellow-100",borderColor:"border-yellow-500",bgColor:"bg-yellow-600"},{id:"Si",name:"",color:"#f97316",desc:"",textColor:"text-orange-100",borderColor:"border-orange-500",bgColor:"bg-orange-600"},{id:"Ne",name:"",color:"#a855f7",desc:"",textColor:"text-purple-100",borderColor:"border-purple-500",bgColor:"bg-purple-600"},{id:"Ni",name:"",color:"#6366f1",desc:"",textColor:"text-indigo-100",borderColor:"border-indigo-500",bgColor:"bg-indigo-600"},{id:"?",name:"",color:"#ffffff",desc:"",textColor:"text-slate-900",borderColor:"border-white",bgColor:"bg-white"}],GE=(e,t)=>[{q:1,r:0},{q:-1,r:0},{q:0,r:1},{q:0,r:-1}].map(o=>t.find(i=>i.q===e.q+o.q&&i.r===e.r+o.r)).filter(o=>o!==void 0),BE=(e,t)=>[{q:1,r:0},{q:-1,r:0},{q:0,r:1},{q:0,r:-1},{q:1,r:-1},{q:-1,r:1}].map(o=>t.find(i=>i.q===e.q+o.q&&i.r===e.r+o.r)).filter(o=>o!==void 0);var OE={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let HE,zE;function $E(){return{geminiUrl:HE,vertexUrl:zE}}function qE(e,t,n,o){var i,r;if(!(e!=null&&e.baseUrl)){const s=$E();return t?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(r=s.geminiUrl)!==null&&r!==void 0?r:o}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gn{}function U(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(o,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];return r!=null?String(r):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(e,t,n){for(let r=0;r<t.length-1;r++){const s=t[r];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[a])){const l=e[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];f(d,t.slice(r+1),n[u])}else for(const u of l)f(u,t.slice(r+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in e||(e[a]=[{}]);const l=e[a];f(l[0],t.slice(r+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const o=t[t.length-1],i=e[o];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[o]=n}function c(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let o=0;o<t.length;o++){if(typeof e!="object"||e===null)return n;const i=t[o];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in e){const s=e[r];return Array.isArray(s)?s.map(a=>c(a,t.slice(o+1),n)):n}else return n}else e=e[i]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function JE(e,t){for(const[n,o]of Object.entries(t)){const i=n.split("."),r=o.split("."),s=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&r.length>a)for(let l=a;l<r.length;l++){const u=r[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}Du(e,i,r,0,s)}}function Du(e,t,n,o,i){if(o>=t.length||typeof e!="object"||e===null)return;const r=t[o];if(r.endsWith("[]")){const s=r.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(const l of a[s])Du(l,t,n,o+1,i)}else if(r==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const s=e,a=Object.keys(s).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of a)l[u]=s[u];for(const[u,d]of Object.entries(l)){const h=[];for(const p of n.slice(o))p==="*"?h.push(u):h.push(p);f(s,h,d)}for(const u of a)delete s[u]}}else{const s=e;r in s&&Du(s[r],t,n,o+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ed(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jE(e){const t={},n=c(e,["operationName"]);n!=null&&f(t,["operationName"],n);const o=c(e,["resourceName"]);return o!=null&&f(t,["_url","resourceName"],o),t}function WE(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["metadata"]);o!=null&&f(t,["metadata"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],YE(s)),t}function KE(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["metadata"]);o!=null&&f(t,["metadata"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],XE(s)),t}function YE(e){const t={},n=c(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>QE(s))),f(t,["generatedVideos"],r)}const o=c(e,["raiMediaFilteredCount"]);o!=null&&f(t,["raiMediaFilteredCount"],o);const i=c(e,["raiMediaFilteredReasons"]);return i!=null&&f(t,["raiMediaFilteredReasons"],i),t}function XE(e){const t={},n=c(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>ZE(s))),f(t,["generatedVideos"],r)}const o=c(e,["raiMediaFilteredCount"]);o!=null&&f(t,["raiMediaFilteredCount"],o);const i=c(e,["raiMediaFilteredReasons"]);return i!=null&&f(t,["raiMediaFilteredReasons"],i),t}function QE(e){const t={},n=c(e,["video"]);return n!=null&&f(t,["video"],rw(n)),t}function ZE(e){const t={},n=c(e,["_self"]);return n!=null&&f(t,["video"],sw(n)),t}function ew(e){const t={},n=c(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function tw(e){const t={},n=c(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function nw(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["metadata"]);o!=null&&f(t,["metadata"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],ow(s)),t}function ow(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["parent"]);o!=null&&f(t,["parent"],o);const i=c(e,["documentName"]);return i!=null&&f(t,["documentName"],i),t}function Qy(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["metadata"]);o!=null&&f(t,["metadata"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],iw(s)),t}function iw(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["parent"]);o!=null&&f(t,["parent"],o);const i=c(e,["documentName"]);return i!=null&&f(t,["documentName"],i),t}function rw(e){const t={},n=c(e,["uri"]);n!=null&&f(t,["uri"],n);const o=c(e,["encodedVideo"]);o!=null&&f(t,["videoBytes"],Ed(o));const i=c(e,["encoding"]);return i!=null&&f(t,["mimeType"],i),t}function sw(e){const t={},n=c(e,["gcsUri"]);n!=null&&f(t,["uri"],n);const o=c(e,["bytesBase64Encoded"]);o!=null&&f(t,["videoBytes"],Ed(o));const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gp;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gp||(Gp={}));var Bp;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Bp||(Bp={}));var Op;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Op||(Op={}));var kn;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(kn||(kn={}));var Hp;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Hp||(Hp={}));var zp;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zp||(zp={}));var $p;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})($p||($p={}));var qp;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(qp||(qp={}));var Jp;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Jp||(Jp={}));var jp;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(jp||(jp={}));var Wp;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Wp||(Wp={}));var Kp;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Kp||(Kp={}));var Yp;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Yp||(Yp={}));var Xp;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(Xp||(Xp={}));var Qp;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Qp||(Qp={}));var Zp;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Zp||(Zp={}));var eh;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(eh||(eh={}));var th;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(th||(th={}));var nh;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nh||(nh={}));var Xs;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Xs||(Xs={}));var oh;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(oh||(oh={}));var ih;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ih||(ih={}));var rh;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(rh||(rh={}));var Lu;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lu||(Lu={}));var sh;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(sh||(sh={}));var lh;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(lh||(lh={}));var ah;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(ah||(ah={}));var uh;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(uh||(uh={}));var ch;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ch||(ch={}));var dh;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(dh||(dh={}));var fh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(fh||(fh={}));var ph;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(ph||(ph={}));var hh;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(hh||(hh={}));var mh;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(mh||(mh={}));var gh;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gh||(gh={}));var yh;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yh||(yh={}));var vh;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vh||(vh={}));var xh;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xh||(xh={}));var Sh;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Sh||(Sh={}));var Th;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Th||(Th={}));var Eh;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Eh||(Eh={}));var wh;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(wh||(wh={}));var Ch;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ch||(Ch={}));var Ih;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Ih||(Ih={}));var Nh;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Nh||(Nh={}));var _h;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(_h||(_h={}));var Ah;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ah||(Ah={}));var kh;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(kh||(kh={}));var Ph;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ph||(Ph={}));var Rh;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Rh||(Rh={}));var Mh;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Mh||(Mh={}));var bh;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(bh||(bh={}));var Dh;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Dh||(Dh={}));var Lh;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Lh||(Lh={}));var Fh;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Fh||(Fh={}));var Lo;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Lo||(Lo={}));class Fu{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class ki{get text(){var t,n,o,i,r,s,a,l;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const p of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,u+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var t,n,o,i,r,s,a,l;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,n,o,i,r,s,a,l;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,n,o,i,r,s,a,l,u;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,n,o,i,r,s,a,l,u;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class Uh{}class Vh{}class lw{}class aw{}class uw{}class cw{}class Gh{}class Bh{}class Oh{}class dw{}class Qs{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Qs;let i;const r=t;return n?i=KE(r):i=WE(r),Object.assign(o,i),o}}class Hh{}class zh{}class $h{}class qh{}class fw{}class pw{}class hw{}class wd{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new wd,r=nw(t);return Object.assign(o,r),o}}class mw{}class gw{}class yw{}class Jh{}class vw{get text(){var t,n,o;let i="",r=!1;const s=[];for(const a of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?i:void 0}get data(){var t,n,o;let i="";const r=[];for(const s of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&r.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class xw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Cd{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Cd,r=Qy(t);return Object.assign(o,r),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ue(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Zy(e,t){const n=ue(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function ev(e){return Array.isArray(e)?e.map(t=>Zs(t)):[Zs(e)]}function Zs(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function tv(e){const t=Zs(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function nv(e){const t=Zs(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function jh(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function ov(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>jh(t)):[jh(e)]}function Uu(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Wh(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Kh(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Ke(e){if(e==null)throw new Error("ContentUnion is required");return Uu(e)?e:{role:"user",parts:ov(e)}}function Id(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=Ke(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=Ke(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Ke(n)):[Ke(t)]}function _t(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Wh(e)||Kh(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ke(e)]}const t=[],n=[],o=Uu(e[0]);for(const i of e){const r=Uu(i);if(r!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(i);else{if(Wh(i)||Kh(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return o||t.push({role:"user",parts:ov(n)}),t}function Sw(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>o!=="null");if(n.length===1)t.type=Object.values(kn).includes(n[0].toUpperCase())?n[0].toUpperCase():kn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(kn).includes(o.toUpperCase())?o.toUpperCase():kn.TYPE_UNSPECIFIED})}}function Yo(e){const t={},n=["items"],o=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=e.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,e=r[1]):r[1].type==="null"&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&Sw(e.type,t);for(const[s,a]of Object.entries(e))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(kn).includes(a.toUpperCase())?a.toUpperCase():kn.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=Yo(a);else if(o.includes(s)){const l=[];for(const u of a){if(u.type=="null"){t.nullable=!0;continue}l.push(Yo(u))}t[s]=l}else if(i.includes(s)){const l={};for(const[u,d]of Object.entries(a))l[u]=Yo(d);t[s]=l}else{if(s==="additionalProperties")continue;t[s]=a}return t}function Nd(e){return Yo(e)}function _d(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Ad(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function pi(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Yo(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Yo(t.response));return e}function hi(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Tw(e,t,n,o=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}function yn(e,t){if(typeof t!="string")throw new Error("name must be a string");return Tw(e,t,"cachedContents")}function iv(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function qn(e){return Ed(e)}function Ew(e){return e!=null&&typeof e=="object"&&"name"in e}function ww(e){return e!=null&&typeof e=="object"&&"video"in e}function Cw(e){return e!=null&&typeof e=="object"&&"uri"in e}function rv(e){var t;let n;if(Ew(e)&&(n=e.name),!(Cw(e)&&(n=e.uri,n===void 0))&&!(ww(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function sv(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function lv(e){for(const t of["models","tunedModels","publisherModels"])if(Iw(e,t))return e[t];return[]}function Iw(e,t){return e!==null&&typeof e=="object"&&t in e}function Nw(e,t={}){const n=e,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function _w(e,t={}){const n=[],o=new Set;for(const i of e){const r=i.name;if(o.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);o.add(r);const s=Nw(i,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function av(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Aw(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function uv(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return e;let r=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function mi(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function cv(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kw(e){const t={},n=c(e,["responsesFile"]);n!=null&&f(t,["fileName"],n);const o=c(e,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>uC(s))),f(t,["inlinedResponses"],r)}const i=c(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["inlinedEmbedContentResponses"],r)}return t}function Pw(e){const t={},n=c(e,["predictionsFormat"]);n!=null&&f(t,["format"],n);const o=c(e,["gcsDestination","outputUriPrefix"]);o!=null&&f(t,["gcsUri"],o);const i=c(e,["bigqueryDestination","outputUri"]);return i!=null&&f(t,["bigqueryUri"],i),t}function Rw(e){const t={},n=c(e,["format"]);n!=null&&f(t,["predictionsFormat"],n);const o=c(e,["gcsUri"]);o!=null&&f(t,["gcsDestination","outputUriPrefix"],o);const i=c(e,["bigqueryUri"]);if(i!=null&&f(t,["bigqueryDestination","outputUri"],i),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function xs(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["metadata","displayName"]);o!=null&&f(t,["displayName"],o);const i=c(e,["metadata","state"]);i!=null&&f(t,["state"],cv(i));const r=c(e,["metadata","createTime"]);r!=null&&f(t,["createTime"],r);const s=c(e,["metadata","endTime"]);s!=null&&f(t,["endTime"],s);const a=c(e,["metadata","updateTime"]);a!=null&&f(t,["updateTime"],a);const l=c(e,["metadata","model"]);l!=null&&f(t,["model"],l);const u=c(e,["metadata","output"]);return u!=null&&f(t,["dest"],kw(uv(u))),t}function Vu(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["displayName"]);o!=null&&f(t,["displayName"],o);const i=c(e,["state"]);i!=null&&f(t,["state"],cv(i));const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["createTime"]);s!=null&&f(t,["createTime"],s);const a=c(e,["startTime"]);a!=null&&f(t,["startTime"],a);const l=c(e,["endTime"]);l!=null&&f(t,["endTime"],l);const u=c(e,["updateTime"]);u!=null&&f(t,["updateTime"],u);const d=c(e,["model"]);d!=null&&f(t,["model"],d);const h=c(e,["inputConfig"]);h!=null&&f(t,["src"],Mw(h));const p=c(e,["outputConfig"]);p!=null&&f(t,["dest"],Pw(uv(p)));const g=c(e,["completionStats"]);return g!=null&&f(t,["completionStats"],g),t}function Mw(e){const t={},n=c(e,["instancesFormat"]);n!=null&&f(t,["format"],n);const o=c(e,["gcsSource","uris"]);o!=null&&f(t,["gcsUri"],o);const i=c(e,["bigquerySource","inputUri"]);return i!=null&&f(t,["bigqueryUri"],i),t}function bw(e,t){const n={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=c(t,["fileName"]);o!=null&&f(n,["fileName"],o);const i=c(t,["inlinedRequests"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>aC(e,s))),f(n,["requests","requests"],r)}return n}function Dw(e){const t={},n=c(e,["format"]);n!=null&&f(t,["instancesFormat"],n);const o=c(e,["gcsUri"]);o!=null&&f(t,["gcsSource","uris"],o);const i=c(e,["bigqueryUri"]);if(i!=null&&f(t,["bigquerySource","inputUri"],i),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Lw(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Fw(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],mi(e,o)),n}function Uw(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],mi(e,o)),n}function Vw(e){const t={},n=c(e,["content"]);n!=null&&f(t,["content"],n);const o=c(e,["citationMetadata"]);o!=null&&f(t,["citationMetadata"],Gw(o));const i=c(e,["tokenCount"]);i!=null&&f(t,["tokenCount"],i);const r=c(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);const s=c(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);const a=c(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);const l=c(e,["index"]);l!=null&&f(t,["index"],l);const u=c(e,["logprobsResult"]);u!=null&&f(t,["logprobsResult"],u);const d=c(e,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>g)),f(t,["safetyRatings"],p)}const h=c(e,["urlContextMetadata"]);return h!=null&&f(t,["urlContextMetadata"],h),t}function Gw(e){const t={},n=c(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),f(t,["citations"],o)}return t}function dv(e){const t={},n=c(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>gC(r))),f(t,["parts"],i)}const o=c(e,["role"]);return o!=null&&f(t,["role"],o),t}function Bw(e,t){const n={},o=c(e,["displayName"]);if(t!==void 0&&o!=null&&f(t,["batch","displayName"],o),c(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Ow(e,t){const n={},o=c(e,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);const i=c(e,["dest"]);return t!==void 0&&i!=null&&f(t,["outputConfig"],Rw(Aw(i))),n}function Yh(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["src"]);i!=null&&f(n,["batch","inputConfig"],bw(e,av(e,i)));const r=c(t,["config"]);return r!=null&&Bw(r,n),n}function Hw(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["model"],ue(e,o));const i=c(t,["src"]);i!=null&&f(n,["inputConfig"],Dw(av(e,i)));const r=c(t,["config"]);return r!=null&&Ow(r,n),n}function zw(e,t){const n={},o=c(e,["displayName"]);return t!==void 0&&o!=null&&f(t,["batch","displayName"],o),n}function $w(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["src"]);i!=null&&f(n,["batch","inputConfig"],Xw(e,i));const r=c(t,["config"]);return r!=null&&zw(r,n),n}function qw(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],mi(e,o)),n}function Jw(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],mi(e,o)),n}function jw(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["name"]);o!=null&&f(t,["name"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);return r!=null&&f(t,["error"],r),t}function Ww(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["name"]);o!=null&&f(t,["name"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);return r!=null&&f(t,["error"],r),t}function Kw(e,t){const n={},o=c(t,["contents"]);if(o!=null){let r=Id(e,o);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["requests[]","request","content"],r)}const i=c(t,["config"]);return i!=null&&(f(n,["_self"],Yw(i,n)),JE(n,{"requests[].*":"requests[].request.*"})),n}function Yw(e,t){const n={},o=c(e,["taskType"]);t!==void 0&&o!=null&&f(t,["requests[]","taskType"],o);const i=c(e,["title"]);t!==void 0&&i!=null&&f(t,["requests[]","title"],i);const r=c(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Xw(e,t){const n={},o=c(t,["fileName"]);o!=null&&f(n,["file_name"],o);const i=c(t,["inlinedRequests"]);return i!=null&&f(n,["requests"],Kw(e,i)),n}function Qw(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Zw(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const o=c(e,["args"]);o!=null&&f(t,["args"],o);const i=c(e,["name"]);if(i!=null&&f(t,["name"],i),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function eC(e){const t={},n=c(e,["mode"]);n!=null&&f(t,["mode"],n);const o=c(e,["allowedFunctionNames"]);if(o!=null&&f(t,["allowedFunctionNames"],o),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function tC(e,t,n){const o={},i=c(t,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],dv(Ke(i)));const r=c(t,["temperature"]);r!=null&&f(o,["temperature"],r);const s=c(t,["topP"]);s!=null&&f(o,["topP"],s);const a=c(t,["topK"]);a!=null&&f(o,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(o,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(o,["maxOutputTokens"],u);const d=c(t,["stopSequences"]);d!=null&&f(o,["stopSequences"],d);const h=c(t,["responseLogprobs"]);h!=null&&f(o,["responseLogprobs"],h);const p=c(t,["logprobs"]);p!=null&&f(o,["logprobs"],p);const g=c(t,["presencePenalty"]);g!=null&&f(o,["presencePenalty"],g);const v=c(t,["frequencyPenalty"]);v!=null&&f(o,["frequencyPenalty"],v);const T=c(t,["seed"]);T!=null&&f(o,["seed"],T);const E=c(t,["responseMimeType"]);E!=null&&f(o,["responseMimeType"],E);const S=c(t,["responseSchema"]);S!=null&&f(o,["responseSchema"],Nd(S));const y=c(t,["responseJsonSchema"]);if(y!=null&&f(o,["responseJsonSchema"],y),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=c(t,["safetySettings"]);if(n!==void 0&&x!=null){let Q=x;Array.isArray(Q)&&(Q=Q.map(oe=>yC(oe))),f(n,["safetySettings"],Q)}const w=c(t,["tools"]);if(n!==void 0&&w!=null){let Q=hi(w);Array.isArray(Q)&&(Q=Q.map(oe=>xC(pi(oe)))),f(n,["tools"],Q)}const I=c(t,["toolConfig"]);if(n!==void 0&&I!=null&&f(n,["toolConfig"],vC(I)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(t,["cachedContent"]);n!==void 0&&C!=null&&f(n,["cachedContent"],yn(e,C));const N=c(t,["responseModalities"]);N!=null&&f(o,["responseModalities"],N);const _=c(t,["mediaResolution"]);_!=null&&f(o,["mediaResolution"],_);const M=c(t,["speechConfig"]);if(M!=null&&f(o,["speechConfig"],_d(M)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=c(t,["thinkingConfig"]);b!=null&&f(o,["thinkingConfig"],b);const B=c(t,["imageConfig"]);B!=null&&f(o,["imageConfig"],lC(B));const ne=c(t,["enableEnhancedCivicAnswers"]);return ne!=null&&f(o,["enableEnhancedCivicAnswers"],ne),o}function nC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["candidates"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Vw(u))),f(t,["candidates"],l)}const i=c(e,["modelVersion"]);i!=null&&f(t,["modelVersion"],i);const r=c(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);const s=c(e,["responseId"]);s!=null&&f(t,["responseId"],s);const a=c(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function oC(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],mi(e,o)),n}function iC(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],mi(e,o)),n}function rC(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function sC(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function lC(e){const t={},n=c(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const o=c(e,["imageSize"]);if(o!=null&&f(t,["imageSize"],o),c(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function aC(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["request","model"],ue(e,o));const i=c(t,["contents"]);if(i!=null){let a=_t(i);Array.isArray(a)&&(a=a.map(l=>dv(l))),f(n,["request","contents"],a)}const r=c(t,["metadata"]);r!=null&&f(n,["metadata"],r);const s=c(t,["config"]);return s!=null&&f(n,["request","generationConfig"],tC(e,s,c(n,["request"],{}))),n}function uC(e){const t={},n=c(e,["response"]);n!=null&&f(t,["response"],nC(n));const o=c(e,["error"]);return o!=null&&f(t,["error"],o),t}function cC(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const i=c(e,["pageToken"]);if(t!==void 0&&i!=null&&f(t,["_query","pageToken"],i),c(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function dC(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const i=c(e,["pageToken"]);t!==void 0&&i!=null&&f(t,["_query","pageToken"],i);const r=c(e,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),n}function fC(e){const t={},n=c(e,["config"]);return n!=null&&cC(n,t),t}function pC(e){const t={},n=c(e,["config"]);return n!=null&&dC(n,t),t}function hC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["operations"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>xs(s))),f(t,["batchJobs"],r)}return t}function mC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["batchPredictionJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Vu(s))),f(t,["batchJobs"],r)}return t}function gC(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const o=c(e,["codeExecutionResult"]);o!=null&&f(t,["codeExecutionResult"],o);const i=c(e,["executableCode"]);i!=null&&f(t,["executableCode"],i);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],Qw(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],Zw(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],Lw(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const h=c(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=c(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function yC(e){const t={},n=c(e,["category"]);if(n!=null&&f(t,["category"],n),c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(e,["threshold"]);return o!=null&&f(t,["threshold"],o),t}function vC(e){const t={},n=c(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],eC(n));const o=c(e,["retrievalConfig"]);return o!=null&&f(t,["retrievalConfig"],o),t}function xC(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const i=c(e,["computerUse"]);i!=null&&f(t,["computerUse"],i);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],rC(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],sC(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fn;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(fn||(fn={}));class xo{constructor(t,n,o,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,i)}init(t,n,o){var i,r;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SC extends gn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new xo(fn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Yh(this.apiClient,t),o=n._url,i=U("{model}:batchGenerateContent",o),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const d of l){const h=Object.assign({},d);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=p,h.request=g}u.push(h)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},i=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${i}`),o.dest===void 0){const r=this.getGcsUri(t),s=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?o.dest=`${r.slice(0,-6)}/dest`:o.dest=`${r}_dest_${i}`;else if(s)o.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Hw(this.apiClient,t);return a=U("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Vu(d))}else{const u=Yh(this.apiClient,t);return a=U("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>xs(d))}}async createEmbeddingsInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$w(this.apiClient,t);return r=U("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>xs(l))}}async get(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=iC(this.apiClient,t);return a=U("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Vu(d))}else{const u=oC(this.apiClient,t);return a=U("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>xs(d))}}async cancel(t){var n,o,i,r;let s="",a={};if(this.apiClient.isVertexAI()){const l=Uw(this.apiClient,t);s=U("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const l=Fw(this.apiClient,t);s=U("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=pC(t);return a=U("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=mC(d),p=new Jh;return Object.assign(p,h),p})}else{const u=fC(t);return a=U("batches",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=hC(d),p=new Jh;return Object.assign(p,h),p})}}async delete(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Jw(this.apiClient,t);return a=U("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>Ww(d))}else{const u=qw(this.apiClient,t);return a=U("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>jw(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TC(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Xh(e){const t={},n=c(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>$C(r))),f(t,["parts"],i)}const o=c(e,["role"]);return o!=null&&f(t,["role"],o),t}function EC(e,t){const n={},o=c(e,["ttl"]);t!==void 0&&o!=null&&f(t,["ttl"],o);const i=c(e,["expireTime"]);t!==void 0&&i!=null&&f(t,["expireTime"],i);const r=c(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const s=c(e,["contents"]);if(t!==void 0&&s!=null){let d=_t(s);Array.isArray(d)&&(d=d.map(h=>Xh(h))),f(t,["contents"],d)}const a=c(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Xh(Ke(a)));const l=c(e,["tools"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>JC(h))),f(t,["tools"],d)}const u=c(e,["toolConfig"]);if(t!==void 0&&u!=null&&f(t,["toolConfig"],qC(u)),c(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function wC(e,t){const n={},o=c(e,["ttl"]);t!==void 0&&o!=null&&f(t,["ttl"],o);const i=c(e,["expireTime"]);t!==void 0&&i!=null&&f(t,["expireTime"],i);const r=c(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const s=c(e,["contents"]);if(t!==void 0&&s!=null){let h=_t(s);Array.isArray(h)&&(h=h.map(p=>p)),f(t,["contents"],h)}const a=c(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Ke(a));const l=c(e,["tools"]);if(t!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>jC(p))),f(t,["tools"],h)}const u=c(e,["toolConfig"]);t!==void 0&&u!=null&&f(t,["toolConfig"],u);const d=c(e,["kmsKeyName"]);return t!==void 0&&d!=null&&f(t,["encryption_spec","kmsKeyName"],d),n}function CC(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["model"],Zy(e,o));const i=c(t,["config"]);return i!=null&&EC(i,n),n}function IC(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["model"],Zy(e,o));const i=c(t,["config"]);return i!=null&&wC(i,n),n}function NC(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],yn(e,o)),n}function _C(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],yn(e,o)),n}function AC(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function kC(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function PC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function RC(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const o=c(e,["args"]);o!=null&&f(t,["args"],o);const i=c(e,["name"]);if(i!=null&&f(t,["name"],i),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function MC(e){const t={},n=c(e,["mode"]);n!=null&&f(t,["mode"],n);const o=c(e,["allowedFunctionNames"]);if(o!=null&&f(t,["allowedFunctionNames"],o),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function bC(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&f(t,["description"],n);const o=c(e,["name"]);o!=null&&f(t,["name"],o);const i=c(e,["parameters"]);i!=null&&f(t,["parameters"],i);const r=c(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const s=c(e,["response"]);s!=null&&f(t,["response"],s);const a=c(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function DC(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],yn(e,o)),n}function LC(e,t){const n={},o=c(t,["name"]);return o!=null&&f(n,["_url","name"],yn(e,o)),n}function FC(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function UC(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function VC(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const i=c(e,["pageToken"]);return t!==void 0&&i!=null&&f(t,["_query","pageToken"],i),n}function GC(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const i=c(e,["pageToken"]);return t!==void 0&&i!=null&&f(t,["_query","pageToken"],i),n}function BC(e){const t={},n=c(e,["config"]);return n!=null&&VC(n,t),t}function OC(e){const t={},n=c(e,["config"]);return n!=null&&GC(n,t),t}function HC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function zC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function $C(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const o=c(e,["codeExecutionResult"]);o!=null&&f(t,["codeExecutionResult"],o);const i=c(e,["executableCode"]);i!=null&&f(t,["executableCode"],i);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],PC(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],RC(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],TC(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const h=c(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=c(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function qC(e){const t={},n=c(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],MC(n));const o=c(e,["retrievalConfig"]);return o!=null&&f(t,["retrievalConfig"],o),t}function JC(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const i=c(e,["computerUse"]);i!=null&&f(t,["computerUse"],i);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],FC(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],UC(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function jC(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>bC(p))),f(t,["functionDeclarations"],h)}const o=c(e,["retrieval"]);o!=null&&f(t,["retrieval"],o);const i=c(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const r=c(e,["computerUse"]);if(r!=null&&f(t,["computerUse"],r),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(e,["codeExecution"]);s!=null&&f(t,["codeExecution"],s);const a=c(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const l=c(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],l);const u=c(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=c(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function WC(e,t){const n={},o=c(e,["ttl"]);t!==void 0&&o!=null&&f(t,["ttl"],o);const i=c(e,["expireTime"]);return t!==void 0&&i!=null&&f(t,["expireTime"],i),n}function KC(e,t){const n={},o=c(e,["ttl"]);t!==void 0&&o!=null&&f(t,["ttl"],o);const i=c(e,["expireTime"]);return t!==void 0&&i!=null&&f(t,["expireTime"],i),n}function YC(e,t){const n={},o=c(t,["name"]);o!=null&&f(n,["_url","name"],yn(e,o));const i=c(t,["config"]);return i!=null&&WC(i,n),n}function XC(e,t){const n={},o=c(t,["name"]);o!=null&&f(n,["_url","name"],yn(e,o));const i=c(t,["config"]);return i!=null&&KC(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QC extends gn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new xo(fn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=IC(this.apiClient,t);return a=U("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{const u=CC(this.apiClient,t);return a=U("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=LC(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{const u=DC(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=_C(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=kC(d),p=new $h;return Object.assign(p,h),p})}else{const u=NC(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=AC(d),p=new $h;return Object.assign(p,h),p})}}async update(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=XC(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{const u=YC(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async listInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=OC(t);return a=U("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=zC(d),p=new qh;return Object.assign(p,h),p})}else{const u=BC(t);return a=U("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=HC(d),p=new qh;return Object.assign(p,h),p})}}}function el(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n}function Qh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(e){return this instanceof X?(this.v=e,this):new X(e)}function zt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){o[g]&&(i[g]=function(T){return new Promise(function(E,S){r.push([g,T,E,S])>1||l(g,T)})},v&&(i[g]=v(i[g])))}function l(g,v){try{u(o[g](v))}catch(T){p(r[0][3],T)}}function u(g){g.value instanceof X?Promise.resolve(g.value.v).then(d,h):p(r[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function p(g,v){g(v),r.shift(),r.length&&l(r[0][0],r[0][1])}}function $t(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Qh=="function"?Qh(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(r){n[r]=e[r]&&function(s){return new Promise(function(a,l){s=e[r](s),i(a,l,s.done,s.value)})}}function i(r,s,a,l){Promise.resolve(l).then(function(u){r({value:u,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZC(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:fv(n)}function fv(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function eI(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Zh(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let o=0;for(;o<n;)if(e[o].role==="user")t.push(e[o]),o++;else{const i=[];let r=!0;for(;o<n&&e[o].role==="model";)i.push(e[o]),r&&!fv(e[o])&&(r=!1),o++;r?t.push(...i):t.pop()}return t}class tI{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new nI(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class nI{constructor(t,n,o,i={},r=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=i,this.history=r,this.sendPromise=Promise.resolve(),eI(r)}async sendMessage(t){var n;await this.sendPromise;const o=Ke(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,s,a;const l=await i,u=(s=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(a=d.slice(h))!==null&&a!==void 0?a:[]);const g=u?[u]:[];this.recordHistory(o,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var n;await this.sendPromise;const o=Ke(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const r=await i;return this.processStreamResponse(r,o)}getHistory(t=!1){const n=t?Zh(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return zt(this,arguments,function*(){var i,r,s,a,l,u;const d=[];try{for(var h=!0,p=$t(t),g;g=yield X(p.next()),i=g.done,!i;h=!0){a=g.value,h=!1;const v=a;if(ZC(v)){const T=(u=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;T!==void 0&&d.push(T)}yield yield X(v)}}catch(v){r={error:v}}finally{try{!h&&!i&&(s=p.return)&&(yield X(s.call(p)))}finally{if(r)throw r.error}}this.recordHistory(n,d)})}recordHistory(t,n,o){let i=[];n.length>0&&n.every(r=>r.role!==void 0)?i=n:i.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Zh(o)):this.history.push(t),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kl extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,kl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oI(e){const t={},n=c(e,["file"]);return n!=null&&f(t,["file"],n),t}function iI(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function rI(e){const t={},n=c(e,["name"]);return n!=null&&f(t,["_url","file"],rv(n)),t}function sI(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function lI(e){const t={},n=c(e,["name"]);return n!=null&&f(t,["_url","file"],rv(n)),t}function aI(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const i=c(e,["pageToken"]);return t!==void 0&&i!=null&&f(t,["_query","pageToken"],i),n}function uI(e){const t={},n=c(e,["config"]);return n!=null&&aI(n,t),t}function cI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["files"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dI extends gn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new xo(fn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uI(t);return r=U("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=cI(l),d=new mw;return Object.assign(d,u),d})}}async createInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=oI(t);return r=U("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>{const u=iI(l),d=new gw;return Object.assign(d,u),d})}}async get(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lI(t);return r=U("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rI(t);return r=U("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=sI(l),d=new yw;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ss(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function fI(e){const t={},n=c(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>AI(r))),f(t,["parts"],i)}const o=c(e,["role"]);return o!=null&&f(t,["role"],o),t}function pI(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function hI(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const o=c(e,["args"]);o!=null&&f(t,["args"],o);const i=c(e,["name"]);if(i!=null&&f(t,["name"],i),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function mI(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&f(t,["description"],n);const o=c(e,["name"]);o!=null&&f(t,["name"],o);const i=c(e,["parameters"]);i!=null&&f(t,["parameters"],i);const r=c(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const s=c(e,["response"]);s!=null&&f(t,["response"],s);const a=c(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function gI(e){const t={},n=c(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);const o=c(e,["responseJsonSchema"]);o!=null&&f(t,["responseJsonSchema"],o);const i=c(e,["audioTimestamp"]);i!=null&&f(t,["audioTimestamp"],i);const r=c(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);const s=c(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);const a=c(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);const l=c(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(t,["maxOutputTokens"],u);const d=c(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);const h=c(e,["presencePenalty"]);h!=null&&f(t,["presencePenalty"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(t,["responseLogprobs"],p);const g=c(e,["responseMimeType"]);g!=null&&f(t,["responseMimeType"],g);const v=c(e,["responseModalities"]);v!=null&&f(t,["responseModalities"],v);const T=c(e,["responseSchema"]);T!=null&&f(t,["responseSchema"],T);const E=c(e,["routingConfig"]);E!=null&&f(t,["routingConfig"],E);const S=c(e,["seed"]);S!=null&&f(t,["seed"],S);const y=c(e,["speechConfig"]);y!=null&&f(t,["speechConfig"],y);const x=c(e,["stopSequences"]);x!=null&&f(t,["stopSequences"],x);const w=c(e,["temperature"]);w!=null&&f(t,["temperature"],w);const I=c(e,["thinkingConfig"]);I!=null&&f(t,["thinkingConfig"],I);const C=c(e,["topK"]);C!=null&&f(t,["topK"],C);const N=c(e,["topP"]);if(N!=null&&f(t,["topP"],N),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function yI(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function vI(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function xI(e,t){const n={},o=c(e,["generationConfig"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig"],o);const i=c(e,["responseModalities"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig","responseModalities"],i);const r=c(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const s=c(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);const a=c(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=c(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const h=c(e,["speechConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","speechConfig"],Ad(h));const p=c(e,["thinkingConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","thinkingConfig"],p);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],fI(Ke(v)));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let C=hi(T);Array.isArray(C)&&(C=C.map(N=>PI(pi(N)))),f(t,["setup","tools"],C)}const E=c(e,["sessionResumption"]);t!==void 0&&E!=null&&f(t,["setup","sessionResumption"],kI(E));const S=c(e,["inputAudioTranscription"]);t!==void 0&&S!=null&&f(t,["setup","inputAudioTranscription"],S);const y=c(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","outputAudioTranscription"],y);const x=c(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&f(t,["setup","realtimeInputConfig"],x);const w=c(e,["contextWindowCompression"]);t!==void 0&&w!=null&&f(t,["setup","contextWindowCompression"],w);const I=c(e,["proactivity"]);if(t!==void 0&&I!=null&&f(t,["setup","proactivity"],I),c(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function SI(e,t){const n={},o=c(e,["generationConfig"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig"],gI(o));const i=c(e,["responseModalities"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig","responseModalities"],i);const r=c(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const s=c(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);const a=c(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=c(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const h=c(e,["speechConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","speechConfig"],Ad(h));const p=c(e,["thinkingConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","thinkingConfig"],p);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],Ke(v));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let N=hi(T);Array.isArray(N)&&(N=N.map(_=>RI(pi(_)))),f(t,["setup","tools"],N)}const E=c(e,["sessionResumption"]);t!==void 0&&E!=null&&f(t,["setup","sessionResumption"],E);const S=c(e,["inputAudioTranscription"]);t!==void 0&&S!=null&&f(t,["setup","inputAudioTranscription"],S);const y=c(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","outputAudioTranscription"],y);const x=c(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&f(t,["setup","realtimeInputConfig"],x);const w=c(e,["contextWindowCompression"]);t!==void 0&&w!=null&&f(t,["setup","contextWindowCompression"],w);const I=c(e,["proactivity"]);t!==void 0&&I!=null&&f(t,["setup","proactivity"],I);const C=c(e,["explicitVadSignal"]);return t!==void 0&&C!=null&&f(t,["setup","explicitVadSignal"],C),n}function TI(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["setup","model"],ue(e,o));const i=c(t,["config"]);return i!=null&&f(n,["config"],xI(i,n)),n}function EI(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["setup","model"],ue(e,o));const i=c(t,["config"]);return i!=null&&f(n,["config"],SI(i,n)),n}function wI(e){const t={},n=c(e,["musicGenerationConfig"]);return n!=null&&f(t,["musicGenerationConfig"],n),t}function CI(e){const t={},n=c(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),f(t,["weightedPrompts"],o)}return t}function II(e){const t={},n=c(e,["media"]);if(n!=null){let u=ev(n);Array.isArray(u)&&(u=u.map(d=>Ss(d))),f(t,["mediaChunks"],u)}const o=c(e,["audio"]);o!=null&&f(t,["audio"],Ss(nv(o)));const i=c(e,["audioStreamEnd"]);i!=null&&f(t,["audioStreamEnd"],i);const r=c(e,["video"]);r!=null&&f(t,["video"],Ss(tv(r)));const s=c(e,["text"]);s!=null&&f(t,["text"],s);const a=c(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);const l=c(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function NI(e){const t={},n=c(e,["media"]);if(n!=null){let u=ev(n);Array.isArray(u)&&(u=u.map(d=>d)),f(t,["mediaChunks"],u)}const o=c(e,["audio"]);o!=null&&f(t,["audio"],nv(o));const i=c(e,["audioStreamEnd"]);i!=null&&f(t,["audioStreamEnd"],i);const r=c(e,["video"]);r!=null&&f(t,["video"],tv(r));const s=c(e,["text"]);s!=null&&f(t,["text"],s);const a=c(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);const l=c(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function _I(e){const t={},n=c(e,["setupComplete"]);n!=null&&f(t,["setupComplete"],n);const o=c(e,["serverContent"]);o!=null&&f(t,["serverContent"],o);const i=c(e,["toolCall"]);i!=null&&f(t,["toolCall"],i);const r=c(e,["toolCallCancellation"]);r!=null&&f(t,["toolCallCancellation"],r);const s=c(e,["usageMetadata"]);s!=null&&f(t,["usageMetadata"],MI(s));const a=c(e,["goAway"]);a!=null&&f(t,["goAway"],a);const l=c(e,["sessionResumptionUpdate"]);l!=null&&f(t,["sessionResumptionUpdate"],l);const u=c(e,["voiceActivityDetectionSignal"]);return u!=null&&f(t,["voiceActivityDetectionSignal"],u),t}function AI(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const o=c(e,["codeExecutionResult"]);o!=null&&f(t,["codeExecutionResult"],o);const i=c(e,["executableCode"]);i!=null&&f(t,["executableCode"],i);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],pI(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],hI(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],Ss(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const h=c(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=c(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function kI(e){const t={},n=c(e,["handle"]);if(n!=null&&f(t,["handle"],n),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function PI(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const i=c(e,["computerUse"]);i!=null&&f(t,["computerUse"],i);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],yI(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],vI(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function RI(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>mI(p))),f(t,["functionDeclarations"],h)}const o=c(e,["retrieval"]);o!=null&&f(t,["retrieval"],o);const i=c(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const r=c(e,["computerUse"]);if(r!=null&&f(t,["computerUse"],r),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(e,["codeExecution"]);s!=null&&f(t,["codeExecution"],s);const a=c(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const l=c(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],l);const u=c(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=c(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function MI(e){const t={},n=c(e,["promptTokenCount"]);n!=null&&f(t,["promptTokenCount"],n);const o=c(e,["cachedContentTokenCount"]);o!=null&&f(t,["cachedContentTokenCount"],o);const i=c(e,["candidatesTokenCount"]);i!=null&&f(t,["responseTokenCount"],i);const r=c(e,["toolUsePromptTokenCount"]);r!=null&&f(t,["toolUsePromptTokenCount"],r);const s=c(e,["thoughtsTokenCount"]);s!=null&&f(t,["thoughtsTokenCount"],s);const a=c(e,["totalTokenCount"]);a!=null&&f(t,["totalTokenCount"],a);const l=c(e,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["promptTokensDetails"],g)}const u=c(e,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["cacheTokensDetails"],g)}const d=c(e,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["responseTokensDetails"],g)}const h=c(e,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["toolUsePromptTokensDetails"],g)}const p=c(e,["trafficType"]);return p!=null&&f(t,["trafficType"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bI(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function DI(e){const t={},n=c(e,["content"]);n!=null&&f(t,["content"],n);const o=c(e,["citationMetadata"]);o!=null&&f(t,["citationMetadata"],LI(o));const i=c(e,["tokenCount"]);i!=null&&f(t,["tokenCount"],i);const r=c(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);const s=c(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);const a=c(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);const l=c(e,["index"]);l!=null&&f(t,["index"],l);const u=c(e,["logprobsResult"]);u!=null&&f(t,["logprobsResult"],u);const d=c(e,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>g)),f(t,["safetyRatings"],p)}const h=c(e,["urlContextMetadata"]);return h!=null&&f(t,["urlContextMetadata"],h),t}function LI(e){const t={},n=c(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),f(t,["citations"],o)}return t}function FI(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["contents"]);if(i!=null){let r=_t(i);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["contents"],r)}return n}function UI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["tokensInfo"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),f(t,["tokensInfo"],i)}return t}function VI(e){const t={},n=c(e,["values"]);n!=null&&f(t,["values"],n);const o=c(e,["statistics"]);return o!=null&&f(t,["statistics"],GI(o)),t}function GI(e){const t={},n=c(e,["truncated"]);n!=null&&f(t,["truncated"],n);const o=c(e,["token_count"]);return o!=null&&f(t,["tokenCount"],o),t}function Pl(e){const t={},n=c(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>WN(r))),f(t,["parts"],i)}const o=c(e,["role"]);return o!=null&&f(t,["role"],o),t}function BI(e){const t={},n=c(e,["controlType"]);n!=null&&f(t,["controlType"],n);const o=c(e,["enableControlImageComputation"]);return o!=null&&f(t,["computeControl"],o),t}function OI(e){const t={};if(c(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function HI(e,t){const n={},o=c(e,["systemInstruction"]);t!==void 0&&o!=null&&f(t,["systemInstruction"],Ke(o));const i=c(e,["tools"]);if(t!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>gv(a))),f(t,["tools"],s)}const r=c(e,["generationConfig"]);return t!==void 0&&r!=null&&f(t,["generationConfig"],bN(r)),n}function zI(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["contents"]);if(i!=null){let s=_t(i);Array.isArray(s)&&(s=s.map(a=>Pl(a))),f(n,["contents"],s)}const r=c(t,["config"]);return r!=null&&OI(r),n}function $I(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["contents"]);if(i!=null){let s=_t(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const r=c(t,["config"]);return r!=null&&HI(r,n),n}function qI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["totalTokens"]);o!=null&&f(t,["totalTokens"],o);const i=c(e,["cachedContentTokenCount"]);return i!=null&&f(t,["cachedContentTokenCount"],i),t}function JI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["totalTokens"]);return o!=null&&f(t,["totalTokens"],o),t}function jI(e,t){const n={},o=c(t,["model"]);return o!=null&&f(n,["_url","name"],ue(e,o)),n}function WI(e,t){const n={},o=c(t,["model"]);return o!=null&&f(n,["_url","name"],ue(e,o)),n}function KI(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function YI(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function XI(e,t){const n={},o=c(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);const i=c(e,["negativePrompt"]);t!==void 0&&i!=null&&f(t,["parameters","negativePrompt"],i);const r=c(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const s=c(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);const a=c(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);const l=c(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);const u=c(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&f(t,["parameters","safetySetting"],u);const d=c(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const h=c(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&f(t,["parameters","includeSafetyAttributes"],h);const p=c(e,["includeRaiReason"]);t!==void 0&&p!=null&&f(t,["parameters","includeRaiReason"],p);const g=c(e,["language"]);t!==void 0&&g!=null&&f(t,["parameters","language"],g);const v=c(e,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const T=c(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T);const E=c(e,["addWatermark"]);t!==void 0&&E!=null&&f(t,["parameters","addWatermark"],E);const S=c(e,["labels"]);t!==void 0&&S!=null&&f(t,["labels"],S);const y=c(e,["editMode"]);t!==void 0&&y!=null&&f(t,["parameters","editMode"],y);const x=c(e,["baseSteps"]);return t!==void 0&&x!=null&&f(t,["parameters","editConfig","baseSteps"],x),n}function QI(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const r=c(t,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>e_(l))),f(n,["instances[0]","referenceImages"],a)}const s=c(t,["config"]);return s!=null&&XI(s,n),n}function ZI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>Rl(r))),f(t,["generatedImages"],i)}return t}function eN(e,t){const n={},o=c(e,["taskType"]);t!==void 0&&o!=null&&f(t,["requests[]","taskType"],o);const i=c(e,["title"]);t!==void 0&&i!=null&&f(t,["requests[]","title"],i);const r=c(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tN(e,t){const n={},o=c(e,["taskType"]);t!==void 0&&o!=null&&f(t,["instances[]","task_type"],o);const i=c(e,["title"]);t!==void 0&&i!=null&&f(t,["instances[]","title"],i);const r=c(e,["outputDimensionality"]);t!==void 0&&r!=null&&f(t,["parameters","outputDimensionality"],r);const s=c(e,["mimeType"]);t!==void 0&&s!=null&&f(t,["instances[]","mimeType"],s);const a=c(e,["autoTruncate"]);return t!==void 0&&a!=null&&f(t,["parameters","autoTruncate"],a),n}function nN(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["contents"]);if(i!=null){let a=Id(e,i);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const r=c(t,["config"]);r!=null&&eN(r,n);const s=c(t,["model"]);return s!==void 0&&f(n,["requests[]","model"],ue(e,s)),n}function oN(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["contents"]);if(i!=null){let s=Id(e,i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}const r=c(t,["config"]);return r!=null&&tN(r,n),n}function iN(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["embeddings"],r)}const i=c(e,["metadata"]);return i!=null&&f(t,["metadata"],i),t}function rN(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["predictions[]","embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>VI(s))),f(t,["embeddings"],r)}const i=c(e,["metadata"]);return i!=null&&f(t,["metadata"],i),t}function sN(e){const t={},n=c(e,["endpoint"]);n!=null&&f(t,["name"],n);const o=c(e,["deployedModelId"]);return o!=null&&f(t,["deployedModelId"],o),t}function lN(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function aN(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const o=c(e,["args"]);o!=null&&f(t,["args"],o);const i=c(e,["name"]);if(i!=null&&f(t,["name"],i),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function uN(e){const t={},n=c(e,["mode"]);n!=null&&f(t,["mode"],n);const o=c(e,["allowedFunctionNames"]);if(o!=null&&f(t,["allowedFunctionNames"],o),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function cN(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&f(t,["description"],n);const o=c(e,["name"]);o!=null&&f(t,["name"],o);const i=c(e,["parameters"]);i!=null&&f(t,["parameters"],i);const r=c(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const s=c(e,["response"]);s!=null&&f(t,["response"],s);const a=c(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function dN(e,t,n){const o={},i=c(t,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],Pl(Ke(i)));const r=c(t,["temperature"]);r!=null&&f(o,["temperature"],r);const s=c(t,["topP"]);s!=null&&f(o,["topP"],s);const a=c(t,["topK"]);a!=null&&f(o,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(o,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(o,["maxOutputTokens"],u);const d=c(t,["stopSequences"]);d!=null&&f(o,["stopSequences"],d);const h=c(t,["responseLogprobs"]);h!=null&&f(o,["responseLogprobs"],h);const p=c(t,["logprobs"]);p!=null&&f(o,["logprobs"],p);const g=c(t,["presencePenalty"]);g!=null&&f(o,["presencePenalty"],g);const v=c(t,["frequencyPenalty"]);v!=null&&f(o,["frequencyPenalty"],v);const T=c(t,["seed"]);T!=null&&f(o,["seed"],T);const E=c(t,["responseMimeType"]);E!=null&&f(o,["responseMimeType"],E);const S=c(t,["responseSchema"]);S!=null&&f(o,["responseSchema"],Nd(S));const y=c(t,["responseJsonSchema"]);if(y!=null&&f(o,["responseJsonSchema"],y),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=c(t,["safetySettings"]);if(n!==void 0&&x!=null){let Q=x;Array.isArray(Q)&&(Q=Q.map(oe=>t_(oe))),f(n,["safetySettings"],Q)}const w=c(t,["tools"]);if(n!==void 0&&w!=null){let Q=hi(w);Array.isArray(Q)&&(Q=Q.map(oe=>a_(pi(oe)))),f(n,["tools"],Q)}const I=c(t,["toolConfig"]);if(n!==void 0&&I!=null&&f(n,["toolConfig"],l_(I)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(t,["cachedContent"]);n!==void 0&&C!=null&&f(n,["cachedContent"],yn(e,C));const N=c(t,["responseModalities"]);N!=null&&f(o,["responseModalities"],N);const _=c(t,["mediaResolution"]);_!=null&&f(o,["mediaResolution"],_);const M=c(t,["speechConfig"]);if(M!=null&&f(o,["speechConfig"],_d(M)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=c(t,["thinkingConfig"]);b!=null&&f(o,["thinkingConfig"],b);const B=c(t,["imageConfig"]);B!=null&&f(o,["imageConfig"],VN(B));const ne=c(t,["enableEnhancedCivicAnswers"]);return ne!=null&&f(o,["enableEnhancedCivicAnswers"],ne),o}function fN(e,t,n){const o={},i=c(t,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],Ke(i));const r=c(t,["temperature"]);r!=null&&f(o,["temperature"],r);const s=c(t,["topP"]);s!=null&&f(o,["topP"],s);const a=c(t,["topK"]);a!=null&&f(o,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(o,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(o,["maxOutputTokens"],u);const d=c(t,["stopSequences"]);d!=null&&f(o,["stopSequences"],d);const h=c(t,["responseLogprobs"]);h!=null&&f(o,["responseLogprobs"],h);const p=c(t,["logprobs"]);p!=null&&f(o,["logprobs"],p);const g=c(t,["presencePenalty"]);g!=null&&f(o,["presencePenalty"],g);const v=c(t,["frequencyPenalty"]);v!=null&&f(o,["frequencyPenalty"],v);const T=c(t,["seed"]);T!=null&&f(o,["seed"],T);const E=c(t,["responseMimeType"]);E!=null&&f(o,["responseMimeType"],E);const S=c(t,["responseSchema"]);S!=null&&f(o,["responseSchema"],Nd(S));const y=c(t,["responseJsonSchema"]);y!=null&&f(o,["responseJsonSchema"],y);const x=c(t,["routingConfig"]);x!=null&&f(o,["routingConfig"],x);const w=c(t,["modelSelectionConfig"]);w!=null&&f(o,["modelConfig"],w);const I=c(t,["safetySettings"]);if(n!==void 0&&I!=null){let de=I;Array.isArray(de)&&(de=de.map(Z=>Z)),f(n,["safetySettings"],de)}const C=c(t,["tools"]);if(n!==void 0&&C!=null){let de=hi(C);Array.isArray(de)&&(de=de.map(Z=>gv(pi(Z)))),f(n,["tools"],de)}const N=c(t,["toolConfig"]);n!==void 0&&N!=null&&f(n,["toolConfig"],N);const _=c(t,["labels"]);n!==void 0&&_!=null&&f(n,["labels"],_);const M=c(t,["cachedContent"]);n!==void 0&&M!=null&&f(n,["cachedContent"],yn(e,M));const b=c(t,["responseModalities"]);b!=null&&f(o,["responseModalities"],b);const B=c(t,["mediaResolution"]);B!=null&&f(o,["mediaResolution"],B);const ne=c(t,["speechConfig"]);ne!=null&&f(o,["speechConfig"],_d(ne));const Q=c(t,["audioTimestamp"]);Q!=null&&f(o,["audioTimestamp"],Q);const oe=c(t,["thinkingConfig"]);oe!=null&&f(o,["thinkingConfig"],oe);const pe=c(t,["imageConfig"]);if(pe!=null&&f(o,["imageConfig"],GN(pe)),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function em(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["contents"]);if(i!=null){let s=_t(i);Array.isArray(s)&&(s=s.map(a=>Pl(a))),f(n,["contents"],s)}const r=c(t,["config"]);return r!=null&&f(n,["generationConfig"],dN(e,r,n)),n}function tm(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["contents"]);if(i!=null){let s=_t(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const r=c(t,["config"]);return r!=null&&f(n,["generationConfig"],fN(e,r,n)),n}function nm(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["candidates"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>DI(u))),f(t,["candidates"],l)}const i=c(e,["modelVersion"]);i!=null&&f(t,["modelVersion"],i);const r=c(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);const s=c(e,["responseId"]);s!=null&&f(t,["responseId"],s);const a=c(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function om(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),f(t,["candidates"],u)}const i=c(e,["createTime"]);i!=null&&f(t,["createTime"],i);const r=c(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const s=c(e,["promptFeedback"]);s!=null&&f(t,["promptFeedback"],s);const a=c(e,["responseId"]);a!=null&&f(t,["responseId"],a);const l=c(e,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function pN(e,t){const n={};if(c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=c(e,["numberOfImages"]);t!==void 0&&o!=null&&f(t,["parameters","sampleCount"],o);const i=c(e,["aspectRatio"]);t!==void 0&&i!=null&&f(t,["parameters","aspectRatio"],i);const r=c(e,["guidanceScale"]);if(t!==void 0&&r!=null&&f(t,["parameters","guidanceScale"],r),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&f(t,["parameters","safetySetting"],s);const a=c(e,["personGeneration"]);t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a);const l=c(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&f(t,["parameters","includeSafetyAttributes"],l);const u=c(e,["includeRaiReason"]);t!==void 0&&u!=null&&f(t,["parameters","includeRaiReason"],u);const d=c(e,["language"]);t!==void 0&&d!=null&&f(t,["parameters","language"],d);const h=c(e,["outputMimeType"]);t!==void 0&&h!=null&&f(t,["parameters","outputOptions","mimeType"],h);const p=c(e,["outputCompressionQuality"]);if(t!==void 0&&p!=null&&f(t,["parameters","outputOptions","compressionQuality"],p),c(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=c(e,["imageSize"]);if(t!==void 0&&g!=null&&f(t,["parameters","sampleImageSize"],g),c(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function hN(e,t){const n={},o=c(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);const i=c(e,["negativePrompt"]);t!==void 0&&i!=null&&f(t,["parameters","negativePrompt"],i);const r=c(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const s=c(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);const a=c(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);const l=c(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);const u=c(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&f(t,["parameters","safetySetting"],u);const d=c(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const h=c(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&f(t,["parameters","includeSafetyAttributes"],h);const p=c(e,["includeRaiReason"]);t!==void 0&&p!=null&&f(t,["parameters","includeRaiReason"],p);const g=c(e,["language"]);t!==void 0&&g!=null&&f(t,["parameters","language"],g);const v=c(e,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const T=c(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T);const E=c(e,["addWatermark"]);t!==void 0&&E!=null&&f(t,["parameters","addWatermark"],E);const S=c(e,["labels"]);t!==void 0&&S!=null&&f(t,["labels"],S);const y=c(e,["imageSize"]);t!==void 0&&y!=null&&f(t,["parameters","sampleImageSize"],y);const x=c(e,["enhancePrompt"]);return t!==void 0&&x!=null&&f(t,["parameters","enhancePrompt"],x),n}function mN(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const r=c(t,["config"]);return r!=null&&pN(r,n),n}function gN(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const r=c(t,["config"]);return r!=null&&hN(r,n),n}function yN(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>kN(s))),f(t,["generatedImages"],r)}const i=c(e,["positivePromptSafetyAttributes"]);return i!=null&&f(t,["positivePromptSafetyAttributes"],hv(i)),t}function vN(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Rl(s))),f(t,["generatedImages"],r)}const i=c(e,["positivePromptSafetyAttributes"]);return i!=null&&f(t,["positivePromptSafetyAttributes"],mv(i)),t}function xN(e,t){const n={},o=c(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&f(t,["parameters","sampleCount"],o),c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=c(e,["durationSeconds"]);if(t!==void 0&&i!=null&&f(t,["parameters","durationSeconds"],i),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=c(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const s=c(e,["resolution"]);t!==void 0&&s!=null&&f(t,["parameters","resolution"],s);const a=c(e,["personGeneration"]);if(t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a),c(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(e,["negativePrompt"]);t!==void 0&&l!=null&&f(t,["parameters","negativePrompt"],l);const u=c(e,["enhancePrompt"]);if(t!==void 0&&u!=null&&f(t,["parameters","enhancePrompt"],u),c(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=c(e,["lastFrame"]);t!==void 0&&d!=null&&f(t,["instances[0]","lastFrame"],Ml(d));const h=c(e,["referenceImages"]);if(t!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>T_(g))),f(t,["instances[0]","referenceImages"],p)}if(c(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function SN(e,t){const n={},o=c(e,["numberOfVideos"]);t!==void 0&&o!=null&&f(t,["parameters","sampleCount"],o);const i=c(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const r=c(e,["fps"]);t!==void 0&&r!=null&&f(t,["parameters","fps"],r);const s=c(e,["durationSeconds"]);t!==void 0&&s!=null&&f(t,["parameters","durationSeconds"],s);const a=c(e,["seed"]);t!==void 0&&a!=null&&f(t,["parameters","seed"],a);const l=c(e,["aspectRatio"]);t!==void 0&&l!=null&&f(t,["parameters","aspectRatio"],l);const u=c(e,["resolution"]);t!==void 0&&u!=null&&f(t,["parameters","resolution"],u);const d=c(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const h=c(e,["pubsubTopic"]);t!==void 0&&h!=null&&f(t,["parameters","pubsubTopic"],h);const p=c(e,["negativePrompt"]);t!==void 0&&p!=null&&f(t,["parameters","negativePrompt"],p);const g=c(e,["enhancePrompt"]);t!==void 0&&g!=null&&f(t,["parameters","enhancePrompt"],g);const v=c(e,["generateAudio"]);t!==void 0&&v!=null&&f(t,["parameters","generateAudio"],v);const T=c(e,["lastFrame"]);t!==void 0&&T!=null&&f(t,["instances[0]","lastFrame"],Jt(T));const E=c(e,["referenceImages"]);if(t!==void 0&&E!=null){let x=E;Array.isArray(x)&&(x=x.map(w=>E_(w))),f(t,["instances[0]","referenceImages"],x)}const S=c(e,["mask"]);t!==void 0&&S!=null&&f(t,["instances[0]","mask"],S_(S));const y=c(e,["compressionQuality"]);return t!==void 0&&y!=null&&f(t,["parameters","compressionQuality"],y),n}function TN(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["metadata"]);o!=null&&f(t,["metadata"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],IN(s)),t}function EN(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["metadata"]);o!=null&&f(t,["metadata"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],NN(s)),t}function wN(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const r=c(t,["image"]);r!=null&&f(n,["instances[0]","image"],Ml(r));const s=c(t,["video"]);s!=null&&f(n,["instances[0]","video"],yv(s));const a=c(t,["source"]);a!=null&&_N(a,n);const l=c(t,["config"]);return l!=null&&xN(l,n),n}function CN(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const r=c(t,["image"]);r!=null&&f(n,["instances[0]","image"],Jt(r));const s=c(t,["video"]);s!=null&&f(n,["instances[0]","video"],vv(s));const a=c(t,["source"]);a!=null&&AN(a,n);const l=c(t,["config"]);return l!=null&&SN(l,n),n}function IN(e){const t={},n=c(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>RN(s))),f(t,["generatedVideos"],r)}const o=c(e,["raiMediaFilteredCount"]);o!=null&&f(t,["raiMediaFilteredCount"],o);const i=c(e,["raiMediaFilteredReasons"]);return i!=null&&f(t,["raiMediaFilteredReasons"],i),t}function NN(e){const t={},n=c(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>MN(s))),f(t,["generatedVideos"],r)}const o=c(e,["raiMediaFilteredCount"]);o!=null&&f(t,["raiMediaFilteredCount"],o);const i=c(e,["raiMediaFilteredReasons"]);return i!=null&&f(t,["raiMediaFilteredReasons"],i),t}function _N(e,t){const n={},o=c(e,["prompt"]);t!==void 0&&o!=null&&f(t,["instances[0]","prompt"],o);const i=c(e,["image"]);t!==void 0&&i!=null&&f(t,["instances[0]","image"],Ml(i));const r=c(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],yv(r)),n}function AN(e,t){const n={},o=c(e,["prompt"]);t!==void 0&&o!=null&&f(t,["instances[0]","prompt"],o);const i=c(e,["image"]);t!==void 0&&i!=null&&f(t,["instances[0]","image"],Jt(i));const r=c(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],vv(r)),n}function kN(e){const t={},n=c(e,["_self"]);n!=null&&f(t,["image"],BN(n));const o=c(e,["raiFilteredReason"]);o!=null&&f(t,["raiFilteredReason"],o);const i=c(e,["_self"]);return i!=null&&f(t,["safetyAttributes"],hv(i)),t}function Rl(e){const t={},n=c(e,["_self"]);n!=null&&f(t,["image"],pv(n));const o=c(e,["raiFilteredReason"]);o!=null&&f(t,["raiFilteredReason"],o);const i=c(e,["_self"]);i!=null&&f(t,["safetyAttributes"],mv(i));const r=c(e,["prompt"]);return r!=null&&f(t,["enhancedPrompt"],r),t}function PN(e){const t={},n=c(e,["_self"]);n!=null&&f(t,["mask"],pv(n));const o=c(e,["labels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),f(t,["labels"],i)}return t}function RN(e){const t={},n=c(e,["video"]);return n!=null&&f(t,["video"],v_(n)),t}function MN(e){const t={},n=c(e,["_self"]);return n!=null&&f(t,["video"],x_(n)),t}function bN(e){const t={},n=c(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);const o=c(e,["responseJsonSchema"]);o!=null&&f(t,["responseJsonSchema"],o);const i=c(e,["audioTimestamp"]);i!=null&&f(t,["audioTimestamp"],i);const r=c(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);const s=c(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);const a=c(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);const l=c(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(t,["maxOutputTokens"],u);const d=c(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);const h=c(e,["presencePenalty"]);h!=null&&f(t,["presencePenalty"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(t,["responseLogprobs"],p);const g=c(e,["responseMimeType"]);g!=null&&f(t,["responseMimeType"],g);const v=c(e,["responseModalities"]);v!=null&&f(t,["responseModalities"],v);const T=c(e,["responseSchema"]);T!=null&&f(t,["responseSchema"],T);const E=c(e,["routingConfig"]);E!=null&&f(t,["routingConfig"],E);const S=c(e,["seed"]);S!=null&&f(t,["seed"],S);const y=c(e,["speechConfig"]);y!=null&&f(t,["speechConfig"],y);const x=c(e,["stopSequences"]);x!=null&&f(t,["stopSequences"],x);const w=c(e,["temperature"]);w!=null&&f(t,["temperature"],w);const I=c(e,["thinkingConfig"]);I!=null&&f(t,["thinkingConfig"],I);const C=c(e,["topK"]);C!=null&&f(t,["topK"],C);const N=c(e,["topP"]);if(N!=null&&f(t,["topP"],N),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function DN(e,t){const n={},o=c(t,["model"]);return o!=null&&f(n,["_url","name"],ue(e,o)),n}function LN(e,t){const n={},o=c(t,["model"]);return o!=null&&f(n,["_url","name"],ue(e,o)),n}function FN(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function UN(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function VN(e){const t={},n=c(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const o=c(e,["imageSize"]);if(o!=null&&f(t,["imageSize"],o),c(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function GN(e){const t={},n=c(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const o=c(e,["imageSize"]);o!=null&&f(t,["imageSize"],o);const i=c(e,["outputMimeType"]);i!=null&&f(t,["imageOutputOptions","mimeType"],i);const r=c(e,["outputCompressionQuality"]);return r!=null&&f(t,["imageOutputOptions","compressionQuality"],r),t}function BN(e){const t={},n=c(e,["bytesBase64Encoded"]);n!=null&&f(t,["imageBytes"],qn(n));const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function pv(e){const t={},n=c(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);const o=c(e,["bytesBase64Encoded"]);o!=null&&f(t,["imageBytes"],qn(o));const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Ml(e){const t={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(e,["imageBytes"]);n!=null&&f(t,["bytesBase64Encoded"],qn(n));const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Jt(e){const t={},n=c(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);const o=c(e,["imageBytes"]);o!=null&&f(t,["bytesBase64Encoded"],qn(o));const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function ON(e,t,n){const o={},i=c(t,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const r=c(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);const s=c(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=c(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],sv(e,a)),o}function HN(e,t,n){const o={},i=c(t,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const r=c(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);const s=c(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=c(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],sv(e,a)),o}function zN(e,t){const n={},o=c(t,["config"]);return o!=null&&ON(e,o,n),n}function $N(e,t){const n={},o=c(t,["config"]);return o!=null&&HN(e,o,n),n}function qN(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["_self"]);if(i!=null){let r=lv(i);Array.isArray(r)&&(r=r.map(s=>Gu(s))),f(t,["models"],r)}return t}function JN(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["_self"]);if(i!=null){let r=lv(i);Array.isArray(r)&&(r=r.map(s=>Bu(s))),f(t,["models"],r)}return t}function jN(e){const t={},n=c(e,["maskMode"]);n!=null&&f(t,["maskMode"],n);const o=c(e,["segmentationClasses"]);o!=null&&f(t,["maskClasses"],o);const i=c(e,["maskDilation"]);return i!=null&&f(t,["dilation"],i),t}function Gu(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["displayName"]);o!=null&&f(t,["displayName"],o);const i=c(e,["description"]);i!=null&&f(t,["description"],i);const r=c(e,["version"]);r!=null&&f(t,["version"],r);const s=c(e,["_self"]);s!=null&&f(t,["tunedModelInfo"],u_(s));const a=c(e,["inputTokenLimit"]);a!=null&&f(t,["inputTokenLimit"],a);const l=c(e,["outputTokenLimit"]);l!=null&&f(t,["outputTokenLimit"],l);const u=c(e,["supportedGenerationMethods"]);u!=null&&f(t,["supportedActions"],u);const d=c(e,["temperature"]);d!=null&&f(t,["temperature"],d);const h=c(e,["maxTemperature"]);h!=null&&f(t,["maxTemperature"],h);const p=c(e,["topP"]);p!=null&&f(t,["topP"],p);const g=c(e,["topK"]);g!=null&&f(t,["topK"],g);const v=c(e,["thinking"]);return v!=null&&f(t,["thinking"],v),t}function Bu(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["displayName"]);o!=null&&f(t,["displayName"],o);const i=c(e,["description"]);i!=null&&f(t,["description"],i);const r=c(e,["versionId"]);r!=null&&f(t,["version"],r);const s=c(e,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>sN(p))),f(t,["endpoints"],h)}const a=c(e,["labels"]);a!=null&&f(t,["labels"],a);const l=c(e,["_self"]);l!=null&&f(t,["tunedModelInfo"],c_(l));const u=c(e,["defaultCheckpointId"]);u!=null&&f(t,["defaultCheckpointId"],u);const d=c(e,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>p)),f(t,["checkpoints"],h)}return t}function WN(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const o=c(e,["codeExecutionResult"]);o!=null&&f(t,["codeExecutionResult"],o);const i=c(e,["executableCode"]);i!=null&&f(t,["executableCode"],i);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],lN(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],aN(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],bI(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const h=c(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=c(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function KN(e){const t={},n=c(e,["productImage"]);return n!=null&&f(t,["image"],Jt(n)),t}function YN(e,t){const n={},o=c(e,["numberOfImages"]);t!==void 0&&o!=null&&f(t,["parameters","sampleCount"],o);const i=c(e,["baseSteps"]);t!==void 0&&i!=null&&f(t,["parameters","baseSteps"],i);const r=c(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const s=c(e,["seed"]);t!==void 0&&s!=null&&f(t,["parameters","seed"],s);const a=c(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&f(t,["parameters","safetySetting"],a);const l=c(e,["personGeneration"]);t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l);const u=c(e,["addWatermark"]);t!==void 0&&u!=null&&f(t,["parameters","addWatermark"],u);const d=c(e,["outputMimeType"]);t!==void 0&&d!=null&&f(t,["parameters","outputOptions","mimeType"],d);const h=c(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&f(t,["parameters","outputOptions","compressionQuality"],h);const p=c(e,["enhancePrompt"]);t!==void 0&&p!=null&&f(t,["parameters","enhancePrompt"],p);const g=c(e,["labels"]);return t!==void 0&&g!=null&&f(t,["labels"],g),n}function XN(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["source"]);i!=null&&ZN(i,n);const r=c(t,["config"]);return r!=null&&YN(r,n),n}function QN(e){const t={},n=c(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Rl(i))),f(t,["generatedImages"],o)}return t}function ZN(e,t){const n={},o=c(e,["prompt"]);t!==void 0&&o!=null&&f(t,["instances[0]","prompt"],o);const i=c(e,["personImage"]);t!==void 0&&i!=null&&f(t,["instances[0]","personImage","image"],Jt(i));const r=c(e,["productImages"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>KN(a))),f(t,["instances[0]","productImages"],s)}return n}function e_(e){const t={},n=c(e,["referenceImage"]);n!=null&&f(t,["referenceImage"],Jt(n));const o=c(e,["referenceId"]);o!=null&&f(t,["referenceId"],o);const i=c(e,["referenceType"]);i!=null&&f(t,["referenceType"],i);const r=c(e,["maskImageConfig"]);r!=null&&f(t,["maskImageConfig"],jN(r));const s=c(e,["controlImageConfig"]);s!=null&&f(t,["controlImageConfig"],BI(s));const a=c(e,["styleImageConfig"]);a!=null&&f(t,["styleImageConfig"],a);const l=c(e,["subjectImageConfig"]);return l!=null&&f(t,["subjectImageConfig"],l),t}function hv(e){const t={},n=c(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);const o=c(e,["safetyAttributes","scores"]);o!=null&&f(t,["scores"],o);const i=c(e,["contentType"]);return i!=null&&f(t,["contentType"],i),t}function mv(e){const t={},n=c(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);const o=c(e,["safetyAttributes","scores"]);o!=null&&f(t,["scores"],o);const i=c(e,["contentType"]);return i!=null&&f(t,["contentType"],i),t}function t_(e){const t={},n=c(e,["category"]);if(n!=null&&f(t,["category"],n),c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(e,["threshold"]);return o!=null&&f(t,["threshold"],o),t}function n_(e){const t={},n=c(e,["image"]);return n!=null&&f(t,["image"],Jt(n)),t}function o_(e,t){const n={},o=c(e,["mode"]);t!==void 0&&o!=null&&f(t,["parameters","mode"],o);const i=c(e,["maxPredictions"]);t!==void 0&&i!=null&&f(t,["parameters","maxPredictions"],i);const r=c(e,["confidenceThreshold"]);t!==void 0&&r!=null&&f(t,["parameters","confidenceThreshold"],r);const s=c(e,["maskDilation"]);t!==void 0&&s!=null&&f(t,["parameters","maskDilation"],s);const a=c(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&f(t,["parameters","binaryColorThreshold"],a);const l=c(e,["labels"]);return t!==void 0&&l!=null&&f(t,["labels"],l),n}function i_(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["source"]);i!=null&&s_(i,n);const r=c(t,["config"]);return r!=null&&o_(r,n),n}function r_(e){const t={},n=c(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>PN(i))),f(t,["generatedMasks"],o)}return t}function s_(e,t){const n={},o=c(e,["prompt"]);t!==void 0&&o!=null&&f(t,["instances[0]","prompt"],o);const i=c(e,["image"]);t!==void 0&&i!=null&&f(t,["instances[0]","image"],Jt(i));const r=c(e,["scribbleImage"]);return t!==void 0&&r!=null&&f(t,["instances[0]","scribble"],n_(r)),n}function l_(e){const t={},n=c(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],uN(n));const o=c(e,["retrievalConfig"]);return o!=null&&f(t,["retrievalConfig"],o),t}function a_(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const i=c(e,["computerUse"]);i!=null&&f(t,["computerUse"],i);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],FN(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],UN(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function gv(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>cN(p))),f(t,["functionDeclarations"],h)}const o=c(e,["retrieval"]);o!=null&&f(t,["retrieval"],o);const i=c(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const r=c(e,["computerUse"]);if(r!=null&&f(t,["computerUse"],r),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(e,["codeExecution"]);s!=null&&f(t,["codeExecution"],s);const a=c(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const l=c(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],l);const u=c(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=c(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function u_(e){const t={},n=c(e,["baseModel"]);n!=null&&f(t,["baseModel"],n);const o=c(e,["createTime"]);o!=null&&f(t,["createTime"],o);const i=c(e,["updateTime"]);return i!=null&&f(t,["updateTime"],i),t}function c_(e){const t={},n=c(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(t,["baseModel"],n);const o=c(e,["createTime"]);o!=null&&f(t,["createTime"],o);const i=c(e,["updateTime"]);return i!=null&&f(t,["updateTime"],i),t}function d_(e,t){const n={},o=c(e,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);const i=c(e,["description"]);t!==void 0&&i!=null&&f(t,["description"],i);const r=c(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function f_(e,t){const n={},o=c(e,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);const i=c(e,["description"]);t!==void 0&&i!=null&&f(t,["description"],i);const r=c(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function p_(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","name"],ue(e,o));const i=c(t,["config"]);return i!=null&&d_(i,n),n}function h_(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["config"]);return i!=null&&f_(i,n),n}function m_(e,t){const n={},o=c(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);const i=c(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&f(t,["parameters","safetySetting"],i);const r=c(e,["personGeneration"]);t!==void 0&&r!=null&&f(t,["parameters","personGeneration"],r);const s=c(e,["includeRaiReason"]);t!==void 0&&s!=null&&f(t,["parameters","includeRaiReason"],s);const a=c(e,["outputMimeType"]);t!==void 0&&a!=null&&f(t,["parameters","outputOptions","mimeType"],a);const l=c(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&f(t,["parameters","outputOptions","compressionQuality"],l);const u=c(e,["enhanceInputImage"]);t!==void 0&&u!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],u);const d=c(e,["imagePreservationFactor"]);t!==void 0&&d!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],d);const h=c(e,["labels"]);t!==void 0&&h!=null&&f(t,["labels"],h);const p=c(e,["numberOfImages"]);t!==void 0&&p!=null&&f(t,["parameters","sampleCount"],p);const g=c(e,["mode"]);return t!==void 0&&g!=null&&f(t,["parameters","mode"],g),n}function g_(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["_url","model"],ue(e,o));const i=c(t,["image"]);i!=null&&f(n,["instances[0]","image"],Jt(i));const r=c(t,["upscaleFactor"]);r!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],r);const s=c(t,["config"]);return s!=null&&m_(s,n),n}function y_(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>Rl(r))),f(t,["generatedImages"],i)}return t}function v_(e){const t={},n=c(e,["uri"]);n!=null&&f(t,["uri"],n);const o=c(e,["encodedVideo"]);o!=null&&f(t,["videoBytes"],qn(o));const i=c(e,["encoding"]);return i!=null&&f(t,["mimeType"],i),t}function x_(e){const t={},n=c(e,["gcsUri"]);n!=null&&f(t,["uri"],n);const o=c(e,["bytesBase64Encoded"]);o!=null&&f(t,["videoBytes"],qn(o));const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function S_(e){const t={},n=c(e,["image"]);n!=null&&f(t,["_self"],Jt(n));const o=c(e,["maskMode"]);return o!=null&&f(t,["maskMode"],o),t}function T_(e){const t={},n=c(e,["image"]);n!=null&&f(t,["image"],Ml(n));const o=c(e,["referenceType"]);return o!=null&&f(t,["referenceType"],o),t}function E_(e){const t={},n=c(e,["image"]);n!=null&&f(t,["image"],Jt(n));const o=c(e,["referenceType"]);return o!=null&&f(t,["referenceType"],o),t}function yv(e){const t={},n=c(e,["uri"]);n!=null&&f(t,["uri"],n);const o=c(e,["videoBytes"]);o!=null&&f(t,["encodedVideo"],qn(o));const i=c(e,["mimeType"]);return i!=null&&f(t,["encoding"],i),t}function vv(e){const t={},n=c(e,["uri"]);n!=null&&f(t,["gcsUri"],n);const o=c(e,["videoBytes"]);o!=null&&f(t,["bytesBase64Encoded"],qn(o));const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w_(e,t){const n={},o=c(e,["displayName"]);return t!==void 0&&o!=null&&f(t,["displayName"],o),n}function C_(e){const t={},n=c(e,["config"]);return n!=null&&w_(n,t),t}function I_(e,t){const n={},o=c(e,["force"]);return t!==void 0&&o!=null&&f(t,["_query","force"],o),n}function N_(e){const t={},n=c(e,["name"]);n!=null&&f(t,["_url","name"],n);const o=c(e,["config"]);return o!=null&&I_(o,t),t}function __(e){const t={},n=c(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function A_(e,t){const n={},o=c(e,["customMetadata"]);if(t!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["customMetadata"],r)}const i=c(e,["chunkingConfig"]);return t!==void 0&&i!=null&&f(t,["chunkingConfig"],i),n}function k_(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const o=c(e,["metadata"]);o!=null&&f(t,["metadata"],o);const i=c(e,["done"]);i!=null&&f(t,["done"],i);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],R_(s)),t}function P_(e){const t={},n=c(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);const o=c(e,["fileName"]);o!=null&&f(t,["fileName"],o);const i=c(e,["config"]);return i!=null&&A_(i,t),t}function R_(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["parent"]);o!=null&&f(t,["parent"],o);const i=c(e,["documentName"]);return i!=null&&f(t,["documentName"],i),t}function M_(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const i=c(e,["pageToken"]);return t!==void 0&&i!=null&&f(t,["_query","pageToken"],i),n}function b_(e){const t={},n=c(e,["config"]);return n!=null&&M_(n,t),t}function D_(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["fileSearchStores"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["fileSearchStores"],r)}return t}function xv(e,t){const n={},o=c(e,["mimeType"]);t!==void 0&&o!=null&&f(t,["mimeType"],o);const i=c(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const r=c(e,["customMetadata"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(t,["customMetadata"],a)}const s=c(e,["chunkingConfig"]);return t!==void 0&&s!=null&&f(t,["chunkingConfig"],s),n}function L_(e){const t={},n=c(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);const o=c(e,["config"]);return o!=null&&xv(o,t),t}function F_(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U_="Content-Type",V_="X-Server-Timeout",G_="User-Agent",Ou="x-goog-api-client",B_="1.34.0",O_=`google-genai-sdk/${B_}`,H_="v1beta1",z_="v1beta";class $_{constructor(t){var n,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:H_,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:z_,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,o){const i=[this.getRequestUrlInternal(n)];return o&&i.push(this.getBaseResourcePath()),t!==""&&i.push(t),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,o);if(t.queryParams)for(const[s,a]of Object.entries(t.queryParams))i.searchParams.append(s,String(a));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,i.toString(),t.abortSignal),this.unaryApiCall(i,r,t.httpMethod)}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[i,r]of Object.entries(n))typeof r=="object"?o[i]=Object.assign(Object.assign({},o[i]),r):r!==void 0&&(o[i]=r);return o}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,o);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,i.toString(),t.abortSignal),this.streamApiCall(i,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,o,i){if(n&&n.timeout||i){const r=new AbortController,s=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>r.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),t.signal=s}return n&&n.extraBody!==null&&q_(t,n.extraBody),t.headers=await this.getHeadersInternal(n,o),t}async unaryApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await im(i),new Fu(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await im(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){return zt(this,arguments,function*(){var o;const i=(o=t==null?void 0:t.body)===null||o===void 0?void 0:o.getReader(),r=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:d}=yield X(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=r.decode(d,{stream:!0});try{const v=JSON.parse(h);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),E=T.status,S=T.code,y=`got status: ${E}. ${JSON.stringify(v)}`;if(S>=400&&S<600)throw new kl({message:y,status:S})}}catch(v){if(v.name==="ApiError")throw v}s+=h;let p=-1,g=0;for(;;){p=-1,g=0;for(const E of l){const S=s.indexOf(E);S!==-1&&(p===-1||S<p)&&(p=S,g=E.length)}if(p===-1)break;const v=s.substring(0,p);s=s.substring(p+g);const T=v.trim();if(T.startsWith(a)){const E=T.substring(a.length).trim();try{const S=new Response(E,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield X(new Fu(S))}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}}finally{i.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},n=O_+" "+this.clientOptions.userAgentExtra;return t[G_]=n,t[Ou]=n,t[U_]="application/json",t}async getHeadersInternal(t,n){const o=new Headers;if(t&&t.headers){for(const[i,r]of Object.entries(t.headers))o.append(i,r);t.timeout&&t.timeout>0&&o.append(V_,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(t){var n;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(t,n){var o;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const r=this.clientOptions.uploader,s=await r.stat(t);i.sizeBytes=String(s.size);const a=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},u=this.getFileName(t),d=U("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(d,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return r.upload(t,h,this)}async uploadFileToFileSearchStore(t,n,o){var i;const r=this.clientOptions.uploader,s=await r.stat(n),a=String(s.size),l=(i=o==null?void 0:o.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${t}:uploadToFileSearchStore`,d=this.getFileName(n),h={};o!=null&&xv(o,h);const p=await this.fetchUploadUrl(u,a,l,d,h,o==null?void 0:o.httpOptions);return r.uploadToFileSearchStore(n,p,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,o,i,r,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:t,body:JSON.stringify(r),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function im(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await e.json():o={error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(o);throw n>=400&&n<600?new kl({message:i,status:n}):new Error(i)}}function q_(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const r=JSON.parse(e.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(r,s){const a=Object.assign({},r);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const u=s[l],d=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=o(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const i=o(n,t);e.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J_="mcp_used/unknown";let j_=!1;function Sv(e){for(const t of e)if(W_(t)||typeof t=="object"&&"inputSchema"in t)return!0;return j_}function Tv(e){var t;const n=(t=e[Ou])!==null&&t!==void 0?t:"";e[Ou]=(n+` ${J_}`).trimStart()}function W_(e){return e!==null&&typeof e=="object"&&e instanceof kd}function K_(e){return zt(this,arguments,function*(n,o=100){let i,r=0;for(;r<o;){const s=yield X(n.listTools({cursor:i}));for(const a of s.tools)yield yield X(a),r++;if(!s.nextCursor)break;i=s.nextCursor}})}class kd{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new kd(t,n)}async initialize(){var t,n,o,i;if(this.mcpTools.length>0)return;const r={},s=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,$t(K_(d))),u;u=await l.next(),t=u.done,!t;a=!0){i=u.value,a=!1;const h=i;s.push(h);const p=h.name;if(r[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);r[p]=d}}catch(h){n={error:h}}finally{try{!a&&!t&&(o=l.return)&&await o.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),_w(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[o.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const s=await i.callTool({name:o.name,arguments:o.args},void 0,r);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Y_(e,t,n){const o=new xw;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(o,i),t(o)}class X_{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}async connect(t){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=eA(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const d=new Promise(x=>{u=x}),h=t.callbacks,p=function(){u({})},g=this.apiClient,v={onopen:p,onmessage:x=>{Y_(g,h.onmessage,x)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(x){},onclose:(o=h==null?void 0:h.onclose)!==null&&o!==void 0?o:function(x){}},T=this.webSocketFactory.create(l,Z_(s),v);T.connect(),await d;const y={setup:{model:ue(this.apiClient,t.model)}};return T.send(JSON.stringify(y)),new Q_(T,this.apiClient)}}class Q_{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=CI(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=wI(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Lo.PLAY)}pause(){this.sendPlaybackControl(Lo.PAUSE)}stop(){this.sendPlaybackControl(Lo.STOP)}resetContext(){this.sendPlaybackControl(Lo.RESET_CONTEXT)}close(){this.conn.close()}}function Z_(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function eA(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tA="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function nA(e,t,n){const o=new vw;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const r=JSON.parse(i);if(e.isVertexAI()){const s=_I(r);Object.assign(o,s)}else Object.assign(o,r);t(o)}class oA{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new X_(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,o,i,r,s,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();t.config&&t.config.tools&&Sv(t.config.tools)&&Tv(h);const p=lA(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,d);else{const M=this.apiClient.getApiKey();let b="BidiGenerateContent",B="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",B="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${b}?${B}=${M}`}let g=()=>{};const v=new Promise(M=>{g=M}),T=t.callbacks,E=function(){var M;(M=T==null?void 0:T.onopen)===null||M===void 0||M.call(T),g({})},S=this.apiClient,y={onopen:E,onmessage:M=>{nA(S,T.onmessage,M)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(M){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(M){}},x=this.webSocketFactory.create(d,sA(p),y);x.connect(),await v;let w=ue(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const M=this.apiClient.getProject(),b=this.apiClient.getLocation();w=`projects/${M}/locations/${b}/`+w}let I={};this.apiClient.isVertexAI()&&((i=t.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Xs.AUDIO]}:t.config.responseModalities=[Xs.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C=(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],N=[];for(const M of C)if(this.isCallableTool(M)){const b=M;N.push(await b.tool())}else N.push(M);N.length>0&&(t.config.tools=N);const _={model:w,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?I=EI(this.apiClient,_):I=TI(this.apiClient,_),delete I.config,x.send(JSON.stringify(I)),new rA(x,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const iA={turnComplete:!0};class rA{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=_t(n.turns),t.isVertexAI()||(o=o.map(i=>Pl(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const r of o){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(tA)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},iA),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:NI(t)}:n={realtimeInput:II(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function sA(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function lA(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rm=10;function sm(e){var t,n,o;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let i=!1;for(const s of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Xo(s)){i=!0;break}if(!i)return!0;const r=(o=e==null?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Xo(e){return"callTool"in e&&typeof e.callTool=="function"}function aA(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>Xo(i)))!==null&&o!==void 0?o:!1}function lm(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((o,i)=>{if(Xo(o))return;const r=o;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(i)}),n}function am(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uA extends gn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var o,i,r,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!aA(n)||sm(n.config))return await this.generateContentInternal(l);const u=lm(n);if(u.length>0){const T=u.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let d,h;const p=_t(l.contents),g=(r=(i=(o=l.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:rm;let v=0;for(;v<g&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const T=d.candidates[0].content,E=[];for(const S of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Xo(S)){const x=await S.callTool(d.functionCalls);E.push(...x)}v++,h={role:"user",parts:E},l.contents=_t(l.contents),l.contents.push(T),l.contents.push(h),am(l.config)&&(p.push(T),p.push(h))}return am(l.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async n=>{var o,i,r,s,a;if(this.maybeMoveToResponseJsonSchem(n),sm(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const l=lm(n);if(l.length>0){const h=l.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(r=(i=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,d=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var i;let r;const s=[];if(o!=null&&o.generatedImages)for(const l of o.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?r=l==null?void 0:l.safetyAttributes:s.push(l);let a;return r?a={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:o.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},a}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new xo(fn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var o,i,r,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(r=n.source)===null||r===void 0?void 0:r.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,o,i;const r=(n=t.config)===null||n===void 0?void 0:n.tools;if(!r)return t;const s=await Promise.all(r.map(async l=>Xo(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(a.config.tools=s,t.config&&t.config.tools&&Sv(t.config.tools)){const l=(i=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),Tv(u),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(t){var n,o,i;const r=new Map;for(const s of(o=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Xo(s)){const a=s,l=await a.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(r.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);r.set(u.name,a)}}return r}async processAfcStream(t){var n,o,i;const r=(i=(o=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:rm;let s=!1,a=0;const l=await this.initAfcToolsMap(t);return function(u,d,h){return zt(this,arguments,function*(){for(var p,g,v,T,E,S;a<r;){s&&(a++,s=!1);const I=yield X(u.processParamsMaybeAddMcpUsage(h)),C=yield X(u.generateContentStreamInternal(I)),N=[],_=[];try{for(var y=!0,x=(g=void 0,$t(C)),w;w=yield X(x.next()),p=w.done,!p;y=!0){T=w.value,y=!1;const M=T;if(yield yield X(M),M.candidates&&(!((E=M.candidates[0])===null||E===void 0)&&E.content)){_.push(M.candidates[0].content);for(const b of(S=M.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(a<r&&b.functionCall){if(!b.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(b.functionCall.name)){const B=yield X(d.get(b.functionCall.name).callTool([b.functionCall]));N.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${b.functionCall.name}`)}}}}catch(M){g={error:M}}finally{try{!y&&!p&&(v=x.return)&&(yield X(v.call(x)))}finally{if(g)throw g.error}}if(N.length>0){s=!0;const M=new ki;M.candidates=[{content:{role:"user",parts:N}}],yield yield X(M);const b=[];b.push(..._),b.push({role:"user",parts:N});const B=_t(h.contents).concat(b);h.contents=B}else break}})}(this,l,t)}async generateContentInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=tm(this.apiClient,t);return a=U("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=om(d),p=new ki;return Object.assign(p,h),p})}else{const u=em(this.apiClient,t);return a=U("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=nm(d),p=new ki;return Object.assign(p,h),p})}}async generateContentStreamInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=tm(this.apiClient,t);return a=U("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return zt(this,arguments,function*(){var p,g,v,T;try{for(var E=!0,S=$t(h),y;y=yield X(S.next()),p=y.done,!p;E=!0){T=y.value,E=!1;const x=T,w=om(yield X(x.json()));w.sdkHttpResponse={headers:x.headers};const I=new ki;Object.assign(I,w),yield yield X(I)}}catch(x){g={error:x}}finally{try{!E&&!p&&(v=S.return)&&(yield X(v.call(S)))}finally{if(g)throw g.error}}})})}else{const u=em(this.apiClient,t);return a=U("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return zt(this,arguments,function*(){var p,g,v,T;try{for(var E=!0,S=$t(h),y;y=yield X(S.next()),p=y.done,!p;E=!0){T=y.value,E=!1;const x=T,w=nm(yield X(x.json()));w.sdkHttpResponse={headers:x.headers};const I=new ki;Object.assign(I,w),yield yield X(I)}}catch(x){g={error:x}}finally{try{!E&&!p&&(v=S.return)&&(yield X(v.call(S)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=oN(this.apiClient,t);return a=U("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=rN(d),p=new Uh;return Object.assign(p,h),p})}else{const u=nN(this.apiClient,t);return a=U("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=iN(d),p=new Uh;return Object.assign(p,h),p})}}async generateImagesInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=gN(this.apiClient,t);return a=U("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=vN(d),p=new Vh;return Object.assign(p,h),p})}else{const u=mN(this.apiClient,t);return a=U("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=yN(d),p=new Vh;return Object.assign(p,h),p})}}async editImageInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const a=QI(this.apiClient,t);return r=U("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=ZI(l),d=new lw;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const a=g_(this.apiClient,t);return r=U("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=y_(l),d=new aw;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const a=XN(this.apiClient,t);return r=U("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>{const u=QN(l),d=new uw;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const a=i_(this.apiClient,t);return r=U("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>{const u=r_(l),d=new cw;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=LN(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Bu(d))}else{const u=DN(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Gu(d))}}async listInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=$N(this.apiClient,t);return a=U("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=JN(d),p=new Gh;return Object.assign(p,h),p})}else{const u=zN(this.apiClient,t);return a=U("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=qN(d),p=new Gh;return Object.assign(p,h),p})}}async update(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=h_(this.apiClient,t);return a=U("{model}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Bu(d))}else{const u=p_(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Gu(d))}}async delete(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=WI(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=YI(d),p=new Bh;return Object.assign(p,h),p})}else{const u=jI(this.apiClient,t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=KI(d),p=new Bh;return Object.assign(p,h),p})}}async countTokens(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=$I(this.apiClient,t);return a=U("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=JI(d),p=new Oh;return Object.assign(p,h),p})}else{const u=zI(this.apiClient,t);return a=U("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=qI(d),p=new Oh;return Object.assign(p,h),p})}}async computeTokens(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const a=FI(this.apiClient,t);return r=U("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=UI(l),d=new dw;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=CN(this.apiClient,t);return a=U("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const h=EN(d),p=new Qs;return Object.assign(p,h),p})}else{const u=wN(this.apiClient,t);return a=U("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{const h=TN(d),p=new Qs;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cA extends gn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=tw(t);return a=U("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}else{const u=ew(t);return a=U("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const a=jE(t);return r=U("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dA(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function fA(e){const t={},n=c(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>TA(r))),f(t,["parts"],i)}const o=c(e,["role"]);return o!=null&&f(t,["role"],o),t}function pA(e,t,n){const o={},i=c(t,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);const r=c(t,["newSessionExpireTime"]);n!==void 0&&r!=null&&f(n,["newSessionExpireTime"],r);const s=c(t,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);const a=c(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],SA(e,a));const l=c(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),o}function hA(e,t){const n={},o=c(t,["config"]);return o!=null&&f(n,["config"],pA(e,o,n)),n}function mA(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function gA(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const o=c(e,["args"]);o!=null&&f(t,["args"],o);const i=c(e,["name"]);if(i!=null&&f(t,["name"],i),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function yA(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function vA(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function xA(e,t){const n={},o=c(e,["generationConfig"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig"],o);const i=c(e,["responseModalities"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig","responseModalities"],i);const r=c(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const s=c(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);const a=c(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=c(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const h=c(e,["speechConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","speechConfig"],Ad(h));const p=c(e,["thinkingConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","thinkingConfig"],p);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],fA(Ke(v)));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let C=hi(T);Array.isArray(C)&&(C=C.map(N=>wA(pi(N)))),f(t,["setup","tools"],C)}const E=c(e,["sessionResumption"]);t!==void 0&&E!=null&&f(t,["setup","sessionResumption"],EA(E));const S=c(e,["inputAudioTranscription"]);t!==void 0&&S!=null&&f(t,["setup","inputAudioTranscription"],S);const y=c(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","outputAudioTranscription"],y);const x=c(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&f(t,["setup","realtimeInputConfig"],x);const w=c(e,["contextWindowCompression"]);t!==void 0&&w!=null&&f(t,["setup","contextWindowCompression"],w);const I=c(e,["proactivity"]);if(t!==void 0&&I!=null&&f(t,["setup","proactivity"],I),c(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function SA(e,t){const n={},o=c(t,["model"]);o!=null&&f(n,["setup","model"],ue(e,o));const i=c(t,["config"]);return i!=null&&f(n,["config"],xA(i,n)),n}function TA(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const o=c(e,["codeExecutionResult"]);o!=null&&f(t,["codeExecutionResult"],o);const i=c(e,["executableCode"]);i!=null&&f(t,["executableCode"],i);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],mA(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],gA(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],dA(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const h=c(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=c(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function EA(e){const t={},n=c(e,["handle"]);if(n!=null&&f(t,["handle"],n),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function wA(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const i=c(e,["computerUse"]);i!=null&&f(t,["computerUse"],i);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],yA(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],vA(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CA(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const i=Object.keys(o).map(r=>`${n}.${r}`);t.push(...i)}else t.push(n)}return t.join(",")}function IA(e,t){let n=null;const o=e.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const r=o.setup;typeof r=="object"&&r!==null?(e.bidiGenerateContentSetup=r,n=r):delete e.bidiGenerateContentSetup}else o!==void 0&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const r=CA(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)r?e.fieldMask=r:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>s.includes(u)?`generationConfig.${u}`:u));const l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class NA extends gn{constructor(t){super(),this.apiClient=t}async create(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=hA(this.apiClient,t);r=U("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=IA(a,t.config);return i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _A(e,t){const n={},o=c(e,["force"]);return t!==void 0&&o!=null&&f(t,["_query","force"],o),n}function AA(e){const t={},n=c(e,["name"]);n!=null&&f(t,["_url","name"],n);const o=c(e,["config"]);return o!=null&&_A(o,t),t}function kA(e){const t={},n=c(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function PA(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const i=c(e,["pageToken"]);return t!==void 0&&i!=null&&f(t,["_query","pageToken"],i),n}function RA(e){const t={},n=c(e,["parent"]);n!=null&&f(t,["_url","parent"],n);const o=c(e,["config"]);return o!=null&&PA(o,t),t}function MA(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const i=c(e,["documents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["documents"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bA extends gn{constructor(t){super(),this.apiClient=t,this.list=async n=>new xo(fn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=kA(t);return r=U("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(t){var n,o;let i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=AA(t);i=U("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RA(t);return r=U("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>{const u=MA(l),d=new fw;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DA extends gn{constructor(t,n=new bA(t)){super(),this.apiClient=t,this.documents=n,this.list=async(o={})=>new xo(fn.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=C_(t);return r=U("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=__(t);return r=U("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(t){var n,o;let i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=N_(t);i=U("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=b_(t);return r=U("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>{const u=D_(l),d=new pw;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=L_(t);return r=U("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>{const u=F_(l),d=new hw;return Object.assign(d,u),d})}}async importFile(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=P_(t);return r=U("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json()),i.then(l=>{const u=k_(l),d=new wd;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ev=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Ev=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const LA=()=>Ev();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hu(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const zu=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rt extends Error{}class nt extends Rt{constructor(t,n,o,i){super(`${nt.makeMessage(t,n,o)}`),this.status=t,this.headers=i,this.error=n}static makeMessage(t,n,o){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,o,i){if(!t||!i)return new bl({message:o,cause:zu(n)});const r=n;return t===400?new Cv(t,r,o,i):t===401?new Iv(t,r,o,i):t===403?new Nv(t,r,o,i):t===404?new _v(t,r,o,i):t===409?new Av(t,r,o,i):t===422?new kv(t,r,o,i):t===429?new Pv(t,r,o,i):t>=500?new Rv(t,r,o,i):new nt(t,r,o,i)}}class $u extends nt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class bl extends nt{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class wv extends bl{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Cv extends nt{}class Iv extends nt{}class Nv extends nt{}class _v extends nt{}class Av extends nt{}class kv extends nt{}class Pv extends nt{}class Rv extends nt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FA=/^[a-z][a-z0-9+.-]*:/i,UA=e=>FA.test(e);let qu=e=>(qu=Array.isArray,qu(e));const VA=qu;let GA=VA;const um=GA;function BA(e){if(!e)return!0;for(const t in e)return!1;return!0}function OA(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const HA=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Rt(`${e} must be an integer`);if(t<0)throw new Rt(`${e} must be a positive integer`);return t},zA=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $A=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const JA=()=>{var e,t,n,o,i;const r=qA();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":dm(Deno.build.os),"X-Stainless-Arch":cm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":dm((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":cm((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=jA();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function jA(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const o=n.exec(navigator.userAgent);if(o){const i=o[1]||0,r=o[2]||0,s=o[3]||0;return{browser:t,version:`${i}.${r}.${s}`}}}return null}const cm=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",dm=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Wr;const WA=()=>Wr??(Wr=JA());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Mv(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function YA(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Mv({start(){},async pull(n){const{done:o,value:i}=await t.next();o?n.close():n.enqueue(i)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function bv(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function XA(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const o=e.getReader(),i=o.cancel();o.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QA=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dv=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ta(e,t,n){return Dv(),new File(e,t??"unknown_file",n)}function ZA(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const ek=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lv=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",tk=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Lv(e),nk=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function ok(e,t,n){if(Dv(),e=await e,tk(e))return e instanceof File?e:Ta([await e.arrayBuffer()],e.name);if(nk(e)){const i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Ta(await Ju(i),t,n)}const o=await Ju(e);if(t||(t=ZA(e)),!(n!=null&&n.type)){const i=o.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return Ta(o,t,n)}async function Ju(e){var t,n,o,i,r;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(Lv(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(ek(e))try{for(var a=!0,l=$t(e),u;u=await l.next(),t=u.done,!t;a=!0){i=u.value,a=!1;const d=i;s.push(...await Ju(d))}}catch(d){n={error:d}}finally{try{!a&&!t&&(o=l.return)&&await o.call(l)}finally{if(n)throw n.error}}else{const d=(r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof e}${d?`; constructor: ${d}`:""}${ik(e)}`)}return s}function ik(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fv{constructor(t){this._client=t}}Fv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uv(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const fm=Object.freeze(Object.create(null)),rk=(e=Uv)=>function(n,...o){if(n.length===1)return n[0];let i=!1;const r=[],s=n.reduce((d,h,p)=>{var g,v,T;/[?#]/.test(h)&&(i=!0);const E=o[p];let S=(i?encodeURIComponent:e)(""+E);return p!==o.length&&(E==null||typeof E=="object"&&E.toString===((T=Object.getPrototypeOf((v=Object.getPrototypeOf((g=E.hasOwnProperty)!==null&&g!==void 0?g:fm))!==null&&v!==void 0?v:fm))===null||T===void 0?void 0:T.toString))&&(S=E+"",r.push({start:d.length+h.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),d+h+(p===o.length?"":S)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)r.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(r.sort((d,h)=>d.start-h.start),r.length>0){let d=0;const h=r.reduce((p,g)=>{const v=" ".repeat(g.start-d),T="^".repeat(g.length);return d=g.start+g.length,p+v+T},"");throw new Rt(`Path parameters result in path with invalid segments:
${r.map(p=>p.error).join(`
`)}
${s}
${h}`)}return s},Kr=rk(Uv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vv extends Fv{create(t,n){var o;const{api_version:i=this._client.apiVersion}=t,r=el(t,["api_version"]);if("model"in r&&"agent_config"in r)throw new Rt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Rt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Kr`/${i}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(o=t.stream)!==null&&o!==void 0?o:!1}))}delete(t,n={},o){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Kr`/${i}/interactions/${t}`,o)}cancel(t,n={},o){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Kr`/${i}/interactions/${t}/cancel`,o)}get(t,n={},o){var i;const r=n??{},{api_version:s=this._client.apiVersion}=r,a=el(r,["api_version"]);return this._client.get(Kr`/${s}/interactions/${t}`,Object.assign(Object.assign({query:a},o),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}Vv._key=Object.freeze(["interactions"]);class Gv extends Vv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sk(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let o=0;for(const i of e)n.set(i,o),o+=i.length;return n}let Yr;function Pd(e){let t;return(Yr??(t=new globalThis.TextEncoder,Yr=t.encode.bind(t)))(e)}let Xr;function pm(e){let t;return(Xr??(t=new globalThis.TextDecoder,Xr=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Pd(t):t;this.buffer=sk([this.buffer,n]);const o=[];let i;for(;(i=lk(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){o.push(pm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=pm(this.buffer.subarray(0,r));o.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Dl.NEWLINE_CHARS=new Set([`
`,"\r"]);Dl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lk(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function ak(e){for(let o=0;o<e.length-1;o++){if(e[o]===10&&e[o+1]===10||e[o]===13&&e[o+1]===13)return o+2;if(e[o]===13&&e[o+1]===10&&o+3<e.length&&e[o+2]===13&&e[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tl={off:0,error:200,warn:300,info:400,debug:500},hm=(e,t,n)=>{if(e){if(OA(tl,e))return e;Qe(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(tl))}`)}};function Fi(){}function Qr(e,t,n){return!t||tl[e]>tl[n]?Fi:t[e].bind(t)}const uk={error:Fi,warn:Fi,info:Fi,debug:Fi};let mm=new WeakMap;function Qe(e){var t;const n=e.logger,o=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return uk;const i=mm.get(n);if(i&&i[0]===o)return i[1];const r={error:Qr("error",n,o),warn:Qr("warn",n,o),info:Qr("info",n,o),debug:Qr("debug",n,o)};return mm.set(n,[o,r]),r}const Xn=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fo{constructor(t,n,o){this.iterator=t,this.controller=n,this.client=o}static fromSSEResponse(t,n,o){let i=!1;const r=o?Qe(o):console;function s(){return zt(this,arguments,function*(){var l,u,d,h;if(i)throw new Rt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var g=!0,v=$t(ck(t,n)),T;T=yield X(v.next()),l=T.done,!l;g=!0){h=T.value,g=!1;const E=h;if(!p)if(E.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield X(JSON.parse(E.data))}catch(S){throw r.error("Could not parse message into JSON:",E.data),r.error("From chunk:",E.raw),S}}}catch(E){u={error:E}}finally{try{!g&&!l&&(d=v.return)&&(yield X(d.call(v)))}finally{if(u)throw u.error}}p=!0}catch(E){if(Hu(E))return yield X(void 0);throw E}finally{p||n.abort()}})}return new Fo(s,n,o)}static fromReadableStream(t,n,o){let i=!1;function r(){return zt(this,arguments,function*(){var l,u,d,h;const p=new Dl,g=bv(t);try{for(var v=!0,T=$t(g),E;E=yield X(T.next()),l=E.done,!l;v=!0){h=E.value,v=!1;const S=h;for(const y of p.decode(S))yield yield X(y)}}catch(S){u={error:S}}finally{try{!v&&!l&&(d=T.return)&&(yield X(d.call(T)))}finally{if(u)throw u.error}}for(const S of p.flush())yield yield X(S)})}function s(){return zt(this,arguments,function*(){var l,u,d,h;if(i)throw new Rt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var g=!0,v=$t(r()),T;T=yield X(v.next()),l=T.done,!l;g=!0){h=T.value,g=!1;const E=h;p||E&&(yield yield X(JSON.parse(E)))}}catch(E){u={error:E}}finally{try{!g&&!l&&(d=v.return)&&(yield X(d.call(v)))}finally{if(u)throw u.error}}p=!0}catch(E){if(Hu(E))return yield X(void 0);throw E}finally{p||n.abort()}})}return new Fo(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],o=this.iterator(),i=r=>({next:()=>{if(r.length===0){const s=o.next();t.push(s),n.push(s)}return r.shift()}});return[new Fo(()=>i(t),this.controller,this.client),new Fo(()=>i(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return Mv({async start(){n=t[Symbol.asyncIterator]()},async pull(o){try{const{value:i,done:r}=await n.next();if(r)return o.close();const s=Pd(JSON.stringify(i)+`
`);o.enqueue(s)}catch(i){o.error(i)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function ck(e,t){return zt(this,arguments,function*(){var o,i,r,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Rt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Rt("Attempted to iterate over a response with no body");const a=new fk,l=new Dl,u=bv(e.body);try{for(var d=!0,h=$t(dk(u)),p;p=yield X(h.next()),o=p.done,!o;d=!0){s=p.value,d=!1;const g=s;for(const v of l.decode(g)){const T=a.decode(v);T&&(yield yield X(T))}}}catch(g){i={error:g}}finally{try{!d&&!o&&(r=h.return)&&(yield X(r.call(h)))}finally{if(i)throw i.error}}for(const g of l.flush()){const v=a.decode(g);v&&(yield yield X(v))}})}function dk(e){return zt(this,arguments,function*(){var n,o,i,r;let s=new Uint8Array;try{for(var a=!0,l=$t(e),u;u=yield X(l.next()),n=u.done,!n;a=!0){r=u.value,a=!1;const d=r;if(d==null)continue;const h=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Pd(d):d;let p=new Uint8Array(s.length+h.length);p.set(s),p.set(h,s.length),s=p;let g;for(;(g=ak(s))!==-1;)yield yield X(s.slice(0,g)),s=s.slice(g)}}catch(d){o={error:d}}finally{try{!a&&!n&&(i=l.return)&&(yield X(i.call(l)))}finally{if(o)throw o.error}}s.length>0&&(yield yield X(s))})}class fk{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,o,i]=pk(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function pk(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function hk(e,t){const{response:n,requestLogID:o,retryOfRequestLogID:i,startTime:r}=t,s=await(async()=>{var a;if(t.options.stream)return Qe(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Fo.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return Qe(e).debug(`[${o}] response parsed`,Xn({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-r})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rd extends Promise{constructor(t,n,o=hk){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=o,this.client=t}_thenUnwrap(t){return new Rd(this.client,this.responsePromise,async(n,o)=>t(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bv=Symbol("brand.privateNullableHeaders");function*mk(e){if(!e)return;if(Bv in e){const{values:o,nulls:i}=e;yield*o.entries();for(const r of i)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():um(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let o of n){const i=o[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const r=um(o[1])?o[1]:[o[1]];let s=!1;for(const a of r)a!==void 0&&(t&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Pi=e=>{const t=new Headers,n=new Set;for(const o of e){const i=new Set;for(const[r,s]of mk(o)){const a=r.toLowerCase();i.has(a)||(t.delete(r),i.add(a)),s===null?(t.delete(r),n.add(a)):(t.append(r,s),n.delete(a))}}return{[Bv]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ea=e=>{var t,n,o,i,r,s;if(typeof globalThis.process<"u")return(o=(n=(t=OE)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(r=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||r===void 0?void 0:r.call(i,e))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ov;class Ll{constructor(t){var n,o,i,r,s,a,l,{baseURL:u=Ea("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Ea("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=t,p=el(t,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:d,apiVersion:h},p),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(o=g.timeout)!==null&&o!==void 0?o:Ll.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const v="warn";this.logLevel=v,this.logLevel=(s=(r=hm(g.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:hm(Ea("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:KA(),this.encoder=QA,this._options=g,this.apiKey=d,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=Pi([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Pi([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Pi([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new Rt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Eo}`}defaultIdempotencyKey(){return`stainless-node-retry-${LA()}`}makeStatusError(t,n,o,i){return nt.generate(t,n,o,i)}buildURL(t,n,o){const i=!this.baseURLOverridden()&&o||this.baseURL,r=UA(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return BA(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:o}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,o){return this.request(Promise.resolve(o).then(i=>Object.assign({method:t,path:n},i)))}request(t,n=null){return new Rd(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,o){var i,r,s;const a=await t,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:d,timeout:h}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:d,options:a});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,v=Date.now();if(Qe(this).debug(`[${p}] sending request`,Xn({retryOfRequestLogID:o,method:a.method,url:d,options:a,headers:u.headers})),!((r=a.signal)===null||r===void 0)&&r.aborted)throw new $u;const T=new AbortController,E=await this.fetchWithTimeout(d,u,h,T).catch(zu),S=Date.now();if(E instanceof globalThis.Error){const x=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new $u;const w=Hu(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return Qe(this).info(`[${p}] connection ${w?"timed out":"failed"} - ${x}`),Qe(this).debug(`[${p}] connection ${w?"timed out":"failed"} (${x})`,Xn({retryOfRequestLogID:o,url:d,durationMs:S-v,message:E.message})),this.retryRequest(a,n,o??p);throw Qe(this).info(`[${p}] connection ${w?"timed out":"failed"} - error; no more retries left`),Qe(this).debug(`[${p}] connection ${w?"timed out":"failed"} (error; no more retries left)`,Xn({retryOfRequestLogID:o,url:d,durationMs:S-v,message:E.message})),w?new wv:new bl({cause:E})}const y=`[${p}${g}] ${u.method} ${d} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${S-v}ms`;if(!E.ok){const x=await this.shouldRetry(E);if(n&&x){const M=`retrying, ${n} attempts remaining`;return await XA(E.body),Qe(this).info(`${y} - ${M}`),Qe(this).debug(`[${p}] response error (${M})`,Xn({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,durationMs:S-v})),this.retryRequest(a,n,o??p,E.headers)}const w=x?"error; no more retries left":"error; not retryable";Qe(this).info(`${y} - ${w}`);const I=await E.text().catch(M=>zu(M).message),C=zA(I),N=C?void 0:I;throw Qe(this).debug(`[${p}] response error (${w})`,Xn({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,message:N,durationMs:Date.now()-v})),this.makeStatusError(E.status,C,N,E.headers)}return Qe(this).info(y),Qe(this).debug(`[${p}] response start`,Xn({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,durationMs:S-v})),{response:E,options:a,controller:T,requestLogID:p,retryOfRequestLogID:o,startTime:v}}async fetchWithTimeout(t,n,o,i){const r=n||{},{signal:s,method:a}=r,l=el(r,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),o),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,t,h)}finally{clearTimeout(u)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,o,i){var r;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(s=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const u=parseFloat(l);Number.isNaN(u)?s=Date.parse(l)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){const u=(r=t.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await $A(s),this.makeRequest(t,n-1,o)}calculateDefaultRetryTimeoutMillis(t,n){const r=n-t,s=Math.min(.5*Math.pow(2,r),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(t,{retryCount:n=0}={}){var o,i,r;const s=Object.assign({},t),{method:a,path:l,query:u,defaultBaseURL:d}=s,h=this.buildURL(l,u,d);"timeout"in s&&HA("timeout",s.timeout),s.timeout=(o=s.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:s}),v=await this.buildHeaders({options:t,method:a,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(r=s.fetchOptions)!==null&&r!==void 0?r:{}),url:h,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:o,retryCount:i}){let r={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);const s=await this.authHeaders(t);let a=Pi([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),WA()),this._options.defaultHeaders,o,t.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const o=Pi([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&o.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:YA(t)}:this.encoder({body:t,headers:o})}}Ll.DEFAULT_TIMEOUT=6e4;class Ge extends Ll{constructor(){super(...arguments),this.interactions=new Gv(this)}}Ov=Ge;Ge.GeminiNextGenAPIClient=Ov;Ge.GeminiNextGenAPIClientError=Rt;Ge.APIError=nt;Ge.APIConnectionError=bl;Ge.APIConnectionTimeoutError=wv;Ge.APIUserAbortError=$u;Ge.NotFoundError=_v;Ge.ConflictError=Av;Ge.RateLimitError=Pv;Ge.BadRequestError=Cv;Ge.AuthenticationError=Iv;Ge.InternalServerError=Rv;Ge.PermissionDeniedError=Nv;Ge.UnprocessableEntityError=kv;Ge.toFile=ok;Ge.Interactions=Gv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gk(e,t){const n={},o=c(e,["name"]);return o!=null&&f(n,["_url","name"],o),n}function yk(e,t){const n={},o=c(e,["name"]);return o!=null&&f(n,["_url","name"],o),n}function vk(e,t){const n={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(n,["sdkHttpResponse"],o),n}function xk(e,t){const n={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(n,["sdkHttpResponse"],o),n}function Sk(e,t,n){const o={};if(c(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&f(t,["displayName"],i),c(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=c(e,["epochCount"]);t!==void 0&&r!=null&&f(t,["tuningTask","hyperparameters","epochCount"],r);const s=c(e,["learningRateMultiplier"]);if(s!=null&&f(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),c(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=c(e,["batchSize"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","batchSize"],a);const l=c(e,["learningRate"]);if(t!==void 0&&l!=null&&f(t,["tuningTask","hyperparameters","learningRate"],l),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function Tk(e,t,n){const o={};let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=c(e,["validationDataset"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec"],gm(g))}else if(i==="PREFERENCE_TUNING"){const g=c(e,["validationDataset"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec"],gm(g))}const r=c(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&f(t,["tunedModelDisplayName"],r);const s=c(e,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);let a=c(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=c(e,["epochCount"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=c(e,["epochCount"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=c(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=c(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=c(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=c(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=c(e,["adapterSize"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(d==="PREFERENCE_TUNING"){const g=c(e,["adapterSize"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(c(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=c(e,["labels"]);t!==void 0&&h!=null&&f(t,["labels"],h);const p=c(e,["beta"]);return t!==void 0&&p!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],p),o}function Ek(e,t){const n={},o=c(e,["baseModel"]);o!=null&&f(n,["baseModel"],o);const i=c(e,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const r=c(e,["trainingDataset"]);r!=null&&bk(r);const s=c(e,["config"]);return s!=null&&Sk(s,n),n}function wk(e,t){const n={},o=c(e,["baseModel"]);o!=null&&f(n,["baseModel"],o);const i=c(e,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const r=c(e,["trainingDataset"]);r!=null&&Dk(r,n,t);const s=c(e,["config"]);return s!=null&&Tk(s,n,t),n}function Ck(e,t){const n={},o=c(e,["name"]);return o!=null&&f(n,["_url","name"],o),n}function Ik(e,t){const n={},o=c(e,["name"]);return o!=null&&f(n,["_url","name"],o),n}function Nk(e,t,n){const o={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const r=c(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const s=c(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),o}function _k(e,t,n){const o={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const r=c(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const s=c(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),o}function Ak(e,t){const n={},o=c(e,["config"]);return o!=null&&Nk(o,n),n}function kk(e,t){const n={},o=c(e,["config"]);return o!=null&&_k(o,n),n}function Pk(e,t){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const i=c(e,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const r=c(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Hv(a))),f(n,["tuningJobs"],s)}return n}function Rk(e,t){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const i=c(e,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const r=c(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>ju(a))),f(n,["tuningJobs"],s)}return n}function Mk(e,t){const n={},o=c(e,["name"]);o!=null&&f(n,["model"],o);const i=c(e,["name"]);return i!=null&&f(n,["endpoint"],i),n}function bk(e,t){const n={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=c(e,["examples"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),f(n,["examples","examples"],i)}return n}function Dk(e,t,n){const o={};let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=c(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=c(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=c(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=c(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(c(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Hv(e,t){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const i=c(e,["name"]);i!=null&&f(n,["name"],i);const r=c(e,["state"]);r!=null&&f(n,["state"],iv(r));const s=c(e,["createTime"]);s!=null&&f(n,["createTime"],s);const a=c(e,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const l=c(e,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);const u=c(e,["updateTime"]);u!=null&&f(n,["updateTime"],u);const d=c(e,["description"]);d!=null&&f(n,["description"],d);const h=c(e,["baseModel"]);h!=null&&f(n,["baseModel"],h);const p=c(e,["_self"]);return p!=null&&f(n,["tunedModel"],Mk(p)),n}function ju(e,t){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const i=c(e,["name"]);i!=null&&f(n,["name"],i);const r=c(e,["state"]);r!=null&&f(n,["state"],iv(r));const s=c(e,["createTime"]);s!=null&&f(n,["createTime"],s);const a=c(e,["startTime"]);a!=null&&f(n,["startTime"],a);const l=c(e,["endTime"]);l!=null&&f(n,["endTime"],l);const u=c(e,["updateTime"]);u!=null&&f(n,["updateTime"],u);const d=c(e,["error"]);d!=null&&f(n,["error"],d);const h=c(e,["description"]);h!=null&&f(n,["description"],h);const p=c(e,["baseModel"]);p!=null&&f(n,["baseModel"],p);const g=c(e,["tunedModel"]);g!=null&&f(n,["tunedModel"],g);const v=c(e,["preTunedModel"]);v!=null&&f(n,["preTunedModel"],v);const T=c(e,["supervisedTuningSpec"]);T!=null&&f(n,["supervisedTuningSpec"],T);const E=c(e,["preferenceOptimizationSpec"]);E!=null&&f(n,["preferenceOptimizationSpec"],E);const S=c(e,["tuningDataStats"]);S!=null&&f(n,["tuningDataStats"],S);const y=c(e,["encryptionSpec"]);y!=null&&f(n,["encryptionSpec"],y);const x=c(e,["partnerModelTuningSpec"]);x!=null&&f(n,["partnerModelTuningSpec"],x);const w=c(e,["customBaseModel"]);w!=null&&f(n,["customBaseModel"],w);const I=c(e,["experiment"]);I!=null&&f(n,["experiment"],I);const C=c(e,["labels"]);C!=null&&f(n,["labels"],C);const N=c(e,["outputUri"]);N!=null&&f(n,["outputUri"],N);const _=c(e,["pipelineJob"]);_!=null&&f(n,["pipelineJob"],_);const M=c(e,["serviceAccount"]);M!=null&&f(n,["serviceAccount"],M);const b=c(e,["tunedModelDisplayName"]);b!=null&&f(n,["tunedModelDisplayName"],b);const B=c(e,["veoTuningSpec"]);return B!=null&&f(n,["veoTuningSpec"],B),n}function Lk(e,t){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const i=c(e,["name"]);i!=null&&f(n,["name"],i);const r=c(e,["metadata"]);r!=null&&f(n,["metadata"],r);const s=c(e,["done"]);s!=null&&f(n,["done"],s);const a=c(e,["error"]);return a!=null&&f(n,["error"],a),n}function gm(e,t){const n={},o=c(e,["gcsUri"]);o!=null&&f(n,["validationDatasetUri"],o);const i=c(e,["vertexDatasetResource"]);return i!=null&&f(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fk extends gn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new xo(fn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:i});return r.baseModel=void 0,await this.tuneInternal(r)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),r=await this.tuneMldevInternal(i);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:Lu.JOB_STATE_QUEUED}}}}async getInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Ik(t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>ju(d))}else{const u=Ck(t);return a=U("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>Hv(d))}}async listInternal(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=kk(t);return a=U("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=Rk(d),p=new Hh;return Object.assign(p,h),p})}else{const u=Ak(t);return a=U("tunedModels",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=Pk(d),p=new Hh;return Object.assign(p,h),p})}}async cancel(t){var n,o,i,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=yk(t);return a=U("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=xk(d),p=new zh;return Object.assign(p,h),p})}else{const u=gk(t);return a=U("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=vk(d),p=new zh;return Object.assign(p,h),p})}}async tuneInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const a=wk(t,t);return r=U("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>ju(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ek(t);return r=U("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>Lk(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uk{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Vk=1024*1024*8,Gk=3,Bk=1e3,Ok=2,nl="x-goog-upload-status";async function Hk(e,t,n){var o;const i=await zv(e,t,n),r=await(i==null?void 0:i.json());if(((o=i==null?void 0:i.headers)===null||o===void 0?void 0:o[nl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function zk(e,t,n){var o;const i=await zv(e,t,n),r=await(i==null?void 0:i.json());if(((o=i==null?void 0:i.headers)===null||o===void 0?void 0:o[nl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Qy(r),a=new Cd;return Object.assign(a,s),a}async function zv(e,t,n){var o,i;let r=0,s=0,a=new Fu(new Response),l="upload";for(r=e.size;s<r;){const u=Math.min(Vk,r-s),d=e.slice(s,s+u);s+u>=r&&(l+=", finalize");let h=0,p=Bk;for(;h<Gk&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((o=a==null?void 0:a.headers)===null||o===void 0)&&o[nl]));)h++,await qk(p),p=p*Ok;if(s+=u,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[nl])!=="active")break;if(r<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function $k(e){return{size:e.size,type:e.type}}function qk(e){return new Promise(t=>setTimeout(t,e))}class Jk{async upload(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Hk(t,n,o)}async uploadToFileSearchStore(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await zk(t,n,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await $k(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jk{create(t,n,o){return new Wk(t,n,o)}}class Wk{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ym="x-goog-api-key";class Kk{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(ym)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(ym,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yk="gl-node/";class Xk{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ge({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const o=qE(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const i=new Kk(this.apiKey);this.apiClient=new $_({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Yk+"web",uploader:new Jk,downloader:new Uk}),this.models=new uA(this.apiClient),this.live=new oA(this.apiClient,i,new jk),this.batches=new SC(this.apiClient),this.chats=new tI(this.models,this.apiClient),this.caches=new QC(this.apiClient),this.files=new dI(this.apiClient),this.operations=new cA(this.apiClient),this.authTokens=new NA(this.apiClient),this.tunings=new Fk(this.apiClient),this.fileSearchStores=new DA(this.apiClient)}}const $v={ESTJ:{type:"ESTJ",othersSee:"ESTJESTJESTJ",functions:"Te-Si-Ne-FiTi-Se-Ni-Fe",bestState:"ESTJ",growth:"",features:""},INTP:{type:"INTP",othersSee:"INTP",functions:"Ti-Ne-Si-FeTe-Ni-Se-Fi",bestState:"INTP",growth:"",features:""},ISFP:{type:"ISFP",othersSee:"ISFP",functions:"Fi-Se-Ni-Te, Fe-Si-Ne-Ti",bestState:"ISFP",growth:"",features:""},ENTP:{type:"ENTP",othersSee:"ENTP",functions:"Ne-Ti-Fe-SiNi-Te-Fi-Se",bestState:"",growth:"",features:""},ISTP:{type:"ISTP",othersSee:"ISTP",functions:"Ti-Se-Ni-Fe, Te-Si-Ne-Fi",bestState:"ISTP",growth:"",features:""},ENFJ:{type:"ENFJ",othersSee:"ENFJ",functions:"Fe-Ni-Se-TiFi-Ne-Si-Te",bestState:"ENFJ",growth:"",features:""},ENTJ:{type:"ENTJ",othersSee:"ENTJENTJ",functions:"Te-Ni-Se-FiTi-Ne-Si-Fe",bestState:"ENTJ",growth:"",features:""},ESTP:{type:"ESTP",othersSee:"ESTP",functions:"Se-Ti-Fe-NiSi-Te-Fi-Ne",bestState:"ESTP",growth:"",features:""},INFJ:{type:"INFJ",othersSee:"INFJ",functions:"Ni-Fe-Ti-Se, Ne-Fi-Te-Si",bestState:"",growth:"",features:""},ISTJ:{type:"ISTJ",othersSee:"ISTJ",functions:"Si-Te-Fi-NeSe-Ti-Fe-Ni",bestState:"ISTJ",growth:"",features:""},ENFP:{type:"ENFP",othersSee:"ENFPENFP",functions:"Ne-Fi-Te-SiNi-Fe-Ti-Se",bestState:"",growth:"",features:""},ESFP:{type:"ESFP",othersSee:"ESFP",functions:"Se-Fi-Te-NiSi-Fe-Ti-Ne",bestState:"",growth:"",features:""},INTJ:{type:"INTJ",othersSee:"INTJ",functions:"Ni-Te-Fi-Se, Ne-Ti-Fe-Si",bestState:"",growth:"",features:""},ESFJ:{type:"ESFJ",othersSee:"ESFJ",functions:"Fe-Si-Ne-TiFi-Se-Ni-Te",bestState:"",growth:"",features:""},INFP:{type:"INFP",othersSee:"INFP",functions:"Fi-Ne-Si-TeFe-Ni-Se-Ti",bestState:"",growth:"",features:""},ISFJ:{type:"ISFJ",othersSee:"ISFJ",functions:"Si-Fe-Ti-Ne, Se-Fi-Te-Ni",bestState:"",growth:"",features:""}},qv=[{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Te"},{title:"",description:"30",functionId:"Te"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Ti"},{title:"",description:"/",functionId:"Fe"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Fi"},{title:"",description:"",functionId:"Fi"},{title:"",description:"vs",functionId:"Fe"},{title:"",description:"",functionId:"Fi"},{title:"",description:"3",functionId:"Fi"},{title:"",description:"/",functionId:"Fi"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Fi"},{title:"",description:"103",functionId:"Se"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Fi"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Fi"},{title:"",description:"30",functionId:"Se"},{title:"",description:"10",functionId:"Se"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Si"},{title:"",description:"......",functionId:"Ne"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Ni"}],Qk=(e,t=4)=>[...qv.filter(i=>i.functionId===e)].sort(()=>Math.random()-.5).slice(0,t).map((i,r)=>({category:["standard","truth","dare","deep"][r%4],title:i.title,description:i.description,multiplier:[1,1.2,1.2,1.5][r%4],scoreType:["expression","insight","expression","trust"][r%4],durationSeconds:60})),vm={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Zn=e=>vm&&vm[e]||"",lo={gemini:Zn("VITE_GEMINI_KEY")||Zn("VITE_API_KEY"),groq:Zn("VITE_GROQ_KEY"),openRouter:Zn("VITE_OPENROUTER_KEY"),zhipu:Zn("VITE_ZHIPU_KEY")},ol={ENFJ:`
[] (Fe - Ni)
[] 
[] 
[ / ] Ti / Se(Ti)
[] 
`,ENFP:`
[] (Ne - Fi)
[] 
[] 
[ / ] Si / Te(Si)
[] 
`,ENTJ:`
[] (Te - Ni)
[] 
[] 
[ / ] Fi / Se(Fi)
[] 
`,ENTP:`
[] (Ne - Ti)
[] 
[] 
[ / ] Si / Fe(Si)
[] 
`,ESFJ:`
[] (Fe - Si)
[] 
[] 
[ / ] Ti / Ne(Ti)
[] 
`,ESFP:`
[] (Se - Fi)
[] 
[] 
[ / ] Ni / Te(Ni)
[] 
`,ESTJ:`
[] (Te - Si)
[] 
[] 
[ / ] Fi / Ne(Fi)
[] 
`,ESTP:`
[] (Se - Ti)
[] 
[] 
[ / ] Ni / Fe(Ni)
[] 
`,INFJ:`
[] (Ni - Fe)
[] 
[] 
[ / ] Se / Ti(Se)
[] 
`,INFP:`
[] (Fi - Ne)
[] 
[] 
[ / ] Te / Si(Te)
[] 
`,INTJ:`
[] (Ni - Te)
[] 
[] 
[ / ] Se / Fi(Se)
[] 
`,INTP:`
[] (Ti - Ne)
[] 
[] 
[ / ] Fe / Si(Fe)
[] 
`,ISFJ:`
[] (Si - Fe)
[] 
[] 
[ / ] Ne / Ti(Ne)
[] 
`,ISFP:`
[] (Fi - Se)
[] 
[] 
[ / ] Te / Ni(Te)
[] 
`,ISTJ:`
[] (Si - Te)
[] 
[] 
[ / ] Ne / Fi(Ne)
[] 
`,ISTP:`
[] (Ti - Se)
[] 
[] 
[ / ] Fe / Ni(Fe)
[] 
`},Zk=`
[]
 AI  MBTI 

[]

1. ** (Trust) **
2. ** (Insight) ** / 
3. ** (Expression) **

[]
    - FeNi
- 
- **  ** 16 
`.trim(),eP=`
[]
 MBTI  4 

[]
1. ** (Flow State) ** ENTJ  TeINFJ  Ni
2. ** (Growth Zone) ** /  INTP  FeESTJ  Fi

[ - !]
    - **  ** 
-  **  ** 
- 

[]
1. "standard"()
2. "truth"()(Score: Insight)
3. "dare"() INTJ  Se ESFP  Ti(Score: Expression)
4. "deep"()(Score: Trust)

[]
 JSON  keys: "standard", "truth", "dare", "deep"
 Value 
{
    "title": " ()",
        "description": "",
            "scoreType": "trust" | "insight" | "expression",
                "durationSeconds": 45 - 90
}
`.trim(),tP=`
[]


[]
1. **  **
2. **  ** NF  ST 
3. **  **

[ - !]
 JSON 
{
    "groupAnalysis": "150-200",
    "playerAnalysis": {
        "ID": "150

1.  ****[]
2.  ****[][]
3.  ****"
    }
}

1. **  ID **  key
2.  emoji  (\\n) 
3. 
`.trim(),Zr={geminiKey:"",openRouterKey:"",groqKey:"",geminiModel:"gemini-2.5-flash",openRouterModel:"anthropic/claude-3-haiku",groqModel:"llama3-70b-8192",systemPersona:Zk,taskPromptTemplate:eP,reportPromptTemplate:tP,zhipuKey:""},nP=()=>{if(typeof window>"u")return Zr;const e=localStorage.getItem("PSYCHEPOLY_AI_CONFIG_V2");if(e)try{return{...Zr,...JSON.parse(e)}}catch{return Zr}return Zr};let dt=nP();const oP=()=>dt,iP=e=>{dt={...dt,...e},localStorage.setItem("PSYCHEPOLY_AI_CONFIG_V2",JSON.stringify(dt))},rP=async(e,t,n,o)=>{var l,u,d;const i=dt.groqKey||lo.groq;if(!i)throw new Error("Skipped: No Groq Key");const r=[{type:"text",text:t}];o&&r.push({type:"image_url",image_url:{url:o.startsWith("data:")?o:`data: image / jpeg; base64, ${o} `}});const s=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${i} `,"Content-Type":"application/json"},body:JSON.stringify({model:dt.groqModel,messages:[{role:"system",content:e},{role:"user",content:r}],response_format:{type:"json_object"}})});if(!s.ok)throw new Error(`Groq ${s.statusText} `);return((d=(u=(l=(await s.json()).choices)==null?void 0:l[0])==null?void 0:u.message)==null?void 0:d.content)||"{}"},sP=async(e,t,n,o)=>{var l,u,d;const i=dt.openRouterKey||lo.openRouter;if(!i)throw new Error("Skipped: No OpenRouter Key");const r=[{type:"text",text:t}];o&&r.push({type:"image_url",image_url:{url:o.startsWith("data:")?o:`data: image / jpeg; base64, ${o} `}});const s=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${i} `,"Content-Type":"application/json","HTTP-Referer":window.location.href,"X-Title":"PsychePoly"},body:JSON.stringify({model:dt.openRouterModel,messages:[{role:"system",content:e},{role:"user",content:r}],response_format:{type:"json_object"}})});if(!s.ok)throw new Error(`OpenRouter ${s.statusText} `);return((d=(u=(l=(await s.json()).choices)==null?void 0:l[0])==null?void 0:u.message)==null?void 0:d.content)||"{}"},lP=async(e,t,n,o)=>{const i=dt.geminiKey||lo.gemini;if(!i)throw new Error("Skipped: No Gemini Key");const r=new Xk({apiKey:i}),s=o?{inlineData:{data:o.split(",")[1]||o,mimeType:"image/jpeg"}}:null;return(await r.models.generateContent({model:dt.geminiModel,contents:[{role:"user",parts:[...s?[s]:[],{text:t}]}],config:{systemInstruction:e,responseMimeType:"application/json"}})).text||"{}"},aP=async(e,t,n)=>{var s,a,l;const o=dt.zhipuKey||lo.zhipu;if(!o)throw new Error("Skipped: No Zhipu Key");const i=await fetch("https://open.bigmodel.cn/api/paas/v4/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${o} `,"Content-Type":"application/json"},body:JSON.stringify({model:"glm-4-flash",messages:[{role:"system",content:e},{role:"user",content:t}],response_format:{type:"json_object"},temperature:.7})});if(!i.ok)throw new Error(`Zhipu ${i.statusText} `);return((l=(a=(s=(await i.json()).choices)==null?void 0:s[0])==null?void 0:a.message)==null?void 0:l.content)||"{}"},uP=async(e,t,n)=>{const o=`${e} 

${t} 

Respond in JSON.`,i=await fetch(`https://text.pollinations.ai/${encodeURIComponent(o)}`);if(!i.ok)throw new Error(`Pollinations ${i.statusText}`);let r=await i.text();return r=r.replace(/```json/g,"").replace(/```/g,"").trim(),r},Fl=e=>{try{const t=e.indexOf("{"),n=e.lastIndexOf("}");if(t!==-1&&n!==-1&&n>t)return e.substring(t,n+1)}catch(t){console.warn("JSON extraction lookup failed",t)}return e.trim()},gi=async(e,t,n)=>{let o=t||dt.systemPersona;o.toLowerCase().includes("json")||(o+=`

IMPORTANT: You MUST respond strictly in valid raw JSON format.`);const i=[],r=Zn("VITE_PLATFORM")==="vercel"||Zn("VERCEL")==="1",s=[{name:"Groq",call:()=>rP(o,e,!0,n)},{name:"OpenRouter",call:()=>sP(o,e,!0,n)},{name:"Gemini",call:()=>lP(o,e,!0,n)},{name:"Zhipu",call:()=>aP(o,e)},{name:"Pollinations",call:()=>uP(o,e)}];if(r){const a=s.findIndex(l=>l.name==="Zhipu");if(a>-1){const[l]=s.splice(a,1);s.unshift(l)}}for(const a of s)try{return console.log(`Calling [${a.name}]...`),await a.call()}catch(l){i.push(`${a.name}: ${l.message}`)}throw console.error("All AI providers failed:",i),new Error("ALL_AI_FAILED")},Jv=e=>e.map(t=>`${t.id}|${t.name}|${t.mbti}|${t.trustScore}|${t.insightScore}|${t.expressionScore}`).join(`
`),jv=e=>{const t=Array.from(new Set(e.map(o=>o.mbti)));let n=`
[]
`;return t.forEach(o=>{ol[o]&&(n+=`--- ${o} ---
${ol[o].trim()}
`)}),n},cP=(e,t)=>{var o;const n={};e.forEach(i=>n[i.id]=[]);for(const i of t){if(!i.taskDetails||!i.taskDetails.includes(":"))continue;const r=e.find(s=>s.name===i.author);if(r){const s=(o=i.taskDetails.split(":")[1])==null?void 0:o.trim();s&&n[r.id].push(s)}}return e.map(i=>{const r=n[i.id].slice(-5);return`[ ${i.name}(${i.id})]: (${r.join("; ")||""})`}).join(`
`)},Wv=async(e,t)=>{const n=" 20 ",o=`: ${t}`;try{return(await gi(o,n,e)).trim()||""}catch{return""}},dP=(e,t)=>{const n=Jv(e),o=t.filter(i=>i.taskDetails&&i.taskDetails.includes(":")).slice(-15).map(i=>{var r;return`[${i.author}]: ${(r=i.taskDetails)==null?void 0:r.split(":")[1]}`}).join(`
`);return`[(ID|Name|MBTI|T|I|E)]
${n}

[]
${o||"..."}`},fP=async e=>{const t=`
     MBTI 
     4 0100 3  MBTI 
    
    []
    1. 1 ():  I E
    2. 2 ():  S N
    3. 3 ():  T F
    4. 4 ():  J P
     40-60

    []
     JSON  3 
    [
      { "type": "INTJ", "percentage": 85, "reason": "" },
      { "type": "ENTJ", "percentage": 60, "reason": "" },
      { "type": "ISTJ", "percentage": 40, "reason": "" }
    ]
  `.trim(),n=e.map(o=>`${o.q}: ${o.val}`).join(`
`);try{const o=await gi(n,t),i=JSON.parse(Fl(o));if(Array.isArray(i)&&i.length>0&&i[0].type)return i;throw new Error("Invalid format")}catch(o){return console.warn("Analysis fallback",o),[{type:"ISFP",percentage:70,reason:""},{type:"INFP",percentage:50,reason:""},{type:"ESFP",percentage:30,reason:""}]}},Wu=async(e,t,n,o=[])=>{const i=dP(t,o),r=qv.filter(h=>h.functionId===e).sort(()=>Math.random()-.5).slice(0,2),s=r.length>0?`
[ ()]:
${r.map(h=>`- ${h.title}: ${h.description}`).join(`
`)}
`:"",a=ol[n.mbti]?`
[ ${n.mbti}  ()]
${ol[n.mbti]}
`:"";let l=`: "${e}" ().`;const u=Mu[e];u&&(e==="Hub"?l=`
                []
                
                
            `:l=`
                []
                ${e}${u}
                 MBTI  (${e})  ${u} 
                
            `);const d=`
        []
        : ${n.name} (: ${n.mbti}).
        ${l}
        ${a}
        ${s}
        
        ${i}
        ${jv([n])}

        ${dt.taskPromptTemplate}
    `;try{const h=await gi(d),p=JSON.parse(Fl(h)),g={};return["standard","truth","dare","deep"].forEach(T=>{const E=p[T]||{},S=Ko[T];g[T]={category:T,title:E.title||"",description:E.description||"AI ",scoreType:E.scoreType||"expression",durationSeconds:E.durationSeconds||60,multiplier:S.multiplier}}),g}catch{console.warn("Falling back to Static Data from Local Library");const p=Qk(e,4),g={};return["standard","truth","dare","deep"].forEach((v,T)=>{const E=p[T]||{title:"",description:"",scoreType:"expression",durationSeconds:60},S=Ko[v];g[v]={category:v,title:E.title,description:E.description,scoreType:E.scoreType,durationSeconds:E.durationSeconds,multiplier:S.multiplier}}),g}},pP=async(e,t,n,o)=>{const i=`
    
     ${e.mbti} 
    
    []
    : ${t.title}
    : ${t.description}
    : ${t.scoreType}

    []
    : "${n||""}"
    ${o?`AI : "${o}"`:""}

    []
    1.  80 
    2. 0-5
    3. 

    []
     JSON :
    {
      "feedback": "...",
      "scores": { "trust": 3, "insight": 4, "expression": 2 }
    }
    `.trim(),r="";try{const s=await gi(r,i),a=JSON.parse(Fl(s));return{feedback:a.feedback||"",scores:a.scores||{trust:3,insight:3,expression:3}}}catch{return{feedback:"",scores:{trust:3,insight:3,expression:3}}}},hP=async(e,t,n=[])=>{const o=Jv(e),i=cP(e,n),r=jv(e);let s=dt.reportPromptTemplate;const a=`
        [: ]
        (ID|Name|MBTI|T|I|E):
        ${o}

        []:
        ${i}

        ${r}
    `;s.includes("{players_placeholder}")?s=s.replace("{players_placeholder}",o).replace("{logs_placeholder}",i+r):s=`${a}

[]
${s}`;try{const l=await gi(s),u=JSON.parse(Fl(l)),d={};return e.forEach(h=>{var g;let p=(g=u.playerAnalysis)==null?void 0:g[h.id];if(!p&&u.playerAnalysis){const v=Object.keys(u.playerAnalysis).find(T=>T.includes(h.name));v&&(p=u.playerAnalysis[v])}d[h.id]=p||`${h.name} ... `}),{groupAnalysis:u.groupAnalysis||"",playerAnalysis:d}}catch(l){console.error("Report Generation Fail",l);const u={};return e.forEach(d=>{const h=$v[d.mbti];h?u[d.id]=`AI ...

 **** ${d.mbti} ${h.bestState}

 ****${h.growth}

 ****${h.othersSee}`:u[d.id]=""}),{groupAnalysis:"AI ",playerAnalysis:u}}},mP=async(e,t)=>{const n=t.map(r=>`${r.type} (${r.percentage}%): ${r.reason}`).join(`
`),o=`
 "${e.name}" 
 MBTI 

[]:
${n}
`.trim(),i=` "${e.name}" ${e.mbti}`;try{const r=await gi(i,o);return{groupAnalysis:` ${e.name} `,playerAnalysis:{[e.mbti]:r}}}catch{const s=$v[e.mbti];return{groupAnalysis:"",playerAnalysis:{[e.mbti]:s?`
${s.type} ${s.othersSee}


${s.bestState}


${s.growth}`:" AI "}}}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kv=(...e)=>e.filter((t,n,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:i="",children:r,iconNode:s,...a},l)=>k.createElement("svg",{ref:l,...yP,width:t,height:t,stroke:e,strokeWidth:o?Number(n)*24/Number(t):n,className:Kv("lucide",i),...a},[...s.map(([u,d])=>k.createElement(u,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=(e,t)=>{const n=k.forwardRef(({className:o,...i},r)=>k.createElement(vP,{ref:r,iconNode:t,className:Kv(`lucide-${gP(e)}`,o),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=z("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=z("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=z("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=z("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=z("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=z("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=z("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=z("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=z("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=z("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=z("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=z("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=z("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=z("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=z("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=z("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=z("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=z("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=z("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=z("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=z("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=z("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=z("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=z("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=z("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=z("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=z("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=z("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=z("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=z("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=z("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=z("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=z("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=z("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=z("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=z("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),bd=k.createContext({});function Dd(e){const t=k.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ld=typeof window<"u",tx=Ld?k.useLayoutEffect:k.useEffect,Gl=k.createContext(null);function Fd(e,t){e.indexOf(t)===-1&&e.push(t)}function Ud(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const pn=(e,t,n)=>n>t?t:n<e?e:n;let Vd=()=>{};const hn={},nx=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function ox(e){return typeof e=="object"&&e!==null}const ix=e=>/^0[^.\s]+$/u.test(e);function Gd(e){let t;return()=>(t===void 0&&(t=e()),t)}const At=e=>e,i2=(e,t)=>n=>t(e(n)),Nr=(...e)=>e.reduce(i2),gr=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o};class Bd{constructor(){this.subscriptions=[]}add(t){return Fd(this.subscriptions,t),()=>Ud(this.subscriptions,t)}notify(t,n,o){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,o);else for(let r=0;r<i;r++){const s=this.subscriptions[r];s&&s(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const en=e=>e*1e3,It=e=>e/1e3;function rx(e,t){return t?e*(1e3/t):0}const sx=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,r2=1e-7,s2=12;function l2(e,t,n,o,i){let r,s,a=0;do s=t+(n-t)/2,r=sx(s,o,i)-e,r>0?n=s:t=s;while(Math.abs(r)>r2&&++a<s2);return s}function _r(e,t,n,o){if(e===t&&n===o)return At;const i=r=>l2(r,0,1,e,n);return r=>r===0||r===1?r:sx(i(r),t,o)}const lx=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ax=e=>t=>1-e(1-t),ux=_r(.33,1.53,.69,.99),Od=ax(ux),cx=lx(Od),dx=e=>(e*=2)<1?.5*Od(e):.5*(2-Math.pow(2,-10*(e-1))),Hd=e=>1-Math.sin(Math.acos(e)),fx=ax(Hd),px=lx(Hd),a2=_r(.42,0,1,1),u2=_r(0,0,.58,1),hx=_r(.42,0,.58,1),c2=e=>Array.isArray(e)&&typeof e[0]!="number",mx=e=>Array.isArray(e)&&typeof e[0]=="number",d2={linear:At,easeIn:a2,easeInOut:hx,easeOut:u2,circIn:Hd,circInOut:px,circOut:fx,backIn:Od,backInOut:cx,backOut:ux,anticipate:dx},f2=e=>typeof e=="string",Tm=e=>{if(mx(e)){Vd(e.length===4);const[t,n,o,i]=e;return _r(t,n,o,i)}else if(f2(e))return d2[e];return e},es=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function p2(e,t){let n=new Set,o=new Set,i=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(u.schedule(d),e()),d(a)}const u={schedule:(d,h=!1,p=!1)=>{const v=p&&i?n:o;return h&&s.add(d),v.has(d)||v.add(d),d},cancel:d=>{o.delete(d),s.delete(d)},process:d=>{if(a=d,i){r=!0;return}i=!0,[n,o]=[o,n],n.forEach(l),n.clear(),i=!1,r&&(r=!1,u.process(d))}};return u}const h2=40;function gx(e,t){let n=!1,o=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,s=es.reduce((x,w)=>(x[w]=p2(r),x),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:d,update:h,preRender:p,render:g,postRender:v}=s,T=()=>{const x=hn.useManualTiming?i.timestamp:performance.now();n=!1,hn.useManualTiming||(i.delta=o?1e3/60:Math.max(Math.min(x-i.timestamp,h2),1)),i.timestamp=x,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&t&&(o=!1,e(T))},E=()=>{n=!0,o=!0,i.isProcessing||e(T)};return{schedule:es.reduce((x,w)=>{const I=s[w];return x[w]=(C,N=!1,_=!1)=>(n||E(),I.schedule(C,N,_)),x},{}),cancel:x=>{for(let w=0;w<es.length;w++)s[es[w]].cancel(x)},state:i,steps:s}}const{schedule:xe,cancel:Bn,state:He,steps:Ca}=gx(typeof requestAnimationFrame<"u"?requestAnimationFrame:At,!0);let Es;function m2(){Es=void 0}const lt={now:()=>(Es===void 0&&lt.set(He.isProcessing||hn.useManualTiming?He.timestamp:performance.now()),Es),set:e=>{Es=e,queueMicrotask(m2)}},yx=e=>t=>typeof t=="string"&&t.startsWith(e),vx=yx("--"),g2=yx("var(--"),zd=e=>g2(e)?y2.test(e.split("/*")[0].trim()):!1,y2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},yr={...yi,transform:e=>pn(0,1,e)},ts={...yi,default:1},ji=e=>Math.round(e*1e5)/1e5,$d=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function v2(e){return e==null}const x2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qd=(e,t)=>n=>!!(typeof n=="string"&&x2.test(n)&&n.startsWith(e)||t&&!v2(n)&&Object.prototype.hasOwnProperty.call(n,t)),xx=(e,t,n)=>o=>{if(typeof o!="string")return o;const[i,r,s,a]=o.match($d);return{[e]:parseFloat(i),[t]:parseFloat(r),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},S2=e=>pn(0,255,e),Ia={...yi,transform:e=>Math.round(S2(e))},oo={test:qd("rgb","red"),parse:xx("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+Ia.transform(e)+", "+Ia.transform(t)+", "+Ia.transform(n)+", "+ji(yr.transform(o))+")"};function T2(e){let t="",n="",o="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,o+=o,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:i?parseInt(i,16)/255:1}}const ec={test:qd("#"),parse:T2,transform:oo.transform},Ar=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),En=Ar("deg"),tn=Ar("%"),K=Ar("px"),E2=Ar("vh"),w2=Ar("vw"),Em={...tn,parse:e=>tn.parse(e)/100,transform:e=>tn.transform(e*100)},Uo={test:qd("hsl","hue"),parse:xx("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+tn.transform(ji(t))+", "+tn.transform(ji(n))+", "+ji(yr.transform(o))+")"},Pe={test:e=>oo.test(e)||ec.test(e)||Uo.test(e),parse:e=>oo.test(e)?oo.parse(e):Uo.test(e)?Uo.parse(e):ec.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?oo.transform(e):Uo.transform(e),getAnimatableNone:e=>{const t=Pe.parse(e);return t.alpha=0,Pe.transform(t)}},C2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function I2(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match($d))==null?void 0:t.length)||0)+(((n=e.match(C2))==null?void 0:n.length)||0)>0}const Sx="number",Tx="color",N2="var",_2="var(",wm="${}",A2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vr(e){const t=e.toString(),n=[],o={color:[],number:[],var:[]},i=[];let r=0;const a=t.replace(A2,l=>(Pe.test(l)?(o.color.push(r),i.push(Tx),n.push(Pe.parse(l))):l.startsWith(_2)?(o.var.push(r),i.push(N2),n.push(l)):(o.number.push(r),i.push(Sx),n.push(parseFloat(l))),++r,wm)).split(wm);return{values:n,split:a,indexes:o,types:i}}function Ex(e){return vr(e).values}function wx(e){const{split:t,types:n}=vr(e),o=t.length;return i=>{let r="";for(let s=0;s<o;s++)if(r+=t[s],i[s]!==void 0){const a=n[s];a===Sx?r+=ji(i[s]):a===Tx?r+=Pe.transform(i[s]):r+=i[s]}return r}}const k2=e=>typeof e=="number"?0:Pe.test(e)?Pe.getAnimatableNone(e):e;function P2(e){const t=Ex(e);return wx(e)(t.map(k2))}const On={test:I2,parse:Ex,createTransformer:wx,getAnimatableNone:P2};function Na(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function R2({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let i=0,r=0,s=0;if(!t)i=r=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=Na(l,a,e+1/3),r=Na(l,a,e),s=Na(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(s*255),alpha:o}}function il(e,t){return n=>n>0?t:e}const Te=(e,t,n)=>e+(t-e)*n,_a=(e,t,n)=>{const o=e*e,i=n*(t*t-o)+o;return i<0?0:Math.sqrt(i)},M2=[ec,oo,Uo],b2=e=>M2.find(t=>t.test(e));function Cm(e){const t=b2(e);if(!t)return!1;let n=t.parse(e);return t===Uo&&(n=R2(n)),n}const Im=(e,t)=>{const n=Cm(e),o=Cm(t);if(!n||!o)return il(e,t);const i={...n};return r=>(i.red=_a(n.red,o.red,r),i.green=_a(n.green,o.green,r),i.blue=_a(n.blue,o.blue,r),i.alpha=Te(n.alpha,o.alpha,r),oo.transform(i))},tc=new Set(["none","hidden"]);function D2(e,t){return tc.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function L2(e,t){return n=>Te(e,t,n)}function Jd(e){return typeof e=="number"?L2:typeof e=="string"?zd(e)?il:Pe.test(e)?Im:V2:Array.isArray(e)?Cx:typeof e=="object"?Pe.test(e)?Im:F2:il}function Cx(e,t){const n=[...e],o=n.length,i=e.map((r,s)=>Jd(r)(r,t[s]));return r=>{for(let s=0;s<o;s++)n[s]=i[s](r);return n}}function F2(e,t){const n={...e,...t},o={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(o[i]=Jd(e[i])(e[i],t[i]));return i=>{for(const r in o)n[r]=o[r](i);return n}}function U2(e,t){const n=[],o={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const r=t.types[i],s=e.indexes[r][o[r]],a=e.values[s]??0;n[i]=a,o[r]++}return n}const V2=(e,t)=>{const n=On.createTransformer(t),o=vr(e),i=vr(t);return o.indexes.var.length===i.indexes.var.length&&o.indexes.color.length===i.indexes.color.length&&o.indexes.number.length>=i.indexes.number.length?tc.has(e)&&!i.values.length||tc.has(t)&&!o.values.length?D2(e,t):Nr(Cx(U2(o,i),i.values),n):il(e,t)};function Ix(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Te(e,t,n):Jd(e)(e,t)}const G2=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>xe.update(t,n),stop:()=>Bn(t),now:()=>He.isProcessing?He.timestamp:lt.now()}},Nx=(e,t,n=10)=>{let o="";const i=Math.max(Math.round(t/n),2);for(let r=0;r<i;r++)o+=Math.round(e(r/(i-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},rl=2e4;function jd(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<rl;)t+=n,o=e.next(t);return t>=rl?1/0:t}function B2(e,t=100,n){const o=n({...e,keyframes:[0,t]}),i=Math.min(jd(o),rl);return{type:"keyframes",ease:r=>o.next(i*r).value/t,duration:It(i)}}const O2=5;function _x(e,t,n){const o=Math.max(t-O2,0);return rx(n-e(o),t-o)}const Ne={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Aa=.001;function H2({duration:e=Ne.duration,bounce:t=Ne.bounce,velocity:n=Ne.velocity,mass:o=Ne.mass}){let i,r,s=1-t;s=pn(Ne.minDamping,Ne.maxDamping,s),e=pn(Ne.minDuration,Ne.maxDuration,It(e)),s<1?(i=u=>{const d=u*s,h=d*e,p=d-n,g=nc(u,s),v=Math.exp(-h);return Aa-p/g*v},r=u=>{const h=u*s*e,p=h*n+n,g=Math.pow(s,2)*Math.pow(u,2)*e,v=Math.exp(-h),T=nc(Math.pow(u,2),s);return(-i(u)+Aa>0?-1:1)*((p-g)*v)/T}):(i=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-Aa+d*h},r=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const a=5/e,l=$2(i,r,a);if(e=en(e),isNaN(l))return{stiffness:Ne.stiffness,damping:Ne.damping,duration:e};{const u=Math.pow(l,2)*o;return{stiffness:u,damping:s*2*Math.sqrt(o*u),duration:e}}}const z2=12;function $2(e,t,n){let o=n;for(let i=1;i<z2;i++)o=o-e(o)/t(o);return o}function nc(e,t){return e*Math.sqrt(1-t*t)}const q2=["duration","bounce"],J2=["stiffness","damping","mass"];function Nm(e,t){return t.some(n=>e[n]!==void 0)}function j2(e){let t={velocity:Ne.velocity,stiffness:Ne.stiffness,damping:Ne.damping,mass:Ne.mass,isResolvedFromDuration:!1,...e};if(!Nm(e,J2)&&Nm(e,q2))if(e.visualDuration){const n=e.visualDuration,o=2*Math.PI/(n*1.2),i=o*o,r=2*pn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Ne.mass,stiffness:i,damping:r}}else{const n=H2(e);t={...t,...n,mass:Ne.mass},t.isResolvedFromDuration=!0}return t}function sl(e=Ne.visualDuration,t=Ne.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:o,restDelta:i}=n;const r=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:g}=j2({...n,velocity:-It(n.velocity||0)}),v=p||0,T=u/(2*Math.sqrt(l*d)),E=s-r,S=It(Math.sqrt(l/d)),y=Math.abs(E)<5;o||(o=y?Ne.restSpeed.granular:Ne.restSpeed.default),i||(i=y?Ne.restDelta.granular:Ne.restDelta.default);let x;if(T<1){const I=nc(S,T);x=C=>{const N=Math.exp(-T*S*C);return s-N*((v+T*S*E)/I*Math.sin(I*C)+E*Math.cos(I*C))}}else if(T===1)x=I=>s-Math.exp(-S*I)*(E+(v+S*E)*I);else{const I=S*Math.sqrt(T*T-1);x=C=>{const N=Math.exp(-T*S*C),_=Math.min(I*C,300);return s-N*((v+T*S*E)*Math.sinh(_)+I*E*Math.cosh(_))/I}}const w={calculatedDuration:g&&h||null,next:I=>{const C=x(I);if(g)a.done=I>=h;else{let N=I===0?v:0;T<1&&(N=I===0?en(v):_x(x,I,C));const _=Math.abs(N)<=o,M=Math.abs(s-C)<=i;a.done=_&&M}return a.value=a.done?s:C,a},toString:()=>{const I=Math.min(jd(w),rl),C=Nx(N=>w.next(I*N).value,I,30);return I+"ms "+C},toTransition:()=>{}};return w}sl.applyToOptions=e=>{const t=B2(e,100,sl);return e.ease=t.ease,e.duration=en(t.duration),e.type="keyframes",e};function oc({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:s,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=e[0],p={done:!1,value:h},g=_=>a!==void 0&&_<a||l!==void 0&&_>l,v=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let T=n*t;const E=h+T,S=s===void 0?E:s(E);S!==E&&(T=S-h);const y=_=>-T*Math.exp(-_/o),x=_=>S+y(_),w=_=>{const M=y(_),b=x(_);p.done=Math.abs(M)<=u,p.value=p.done?S:b};let I,C;const N=_=>{g(p.value)&&(I=_,C=sl({keyframes:[p.value,v(p.value)],velocity:_x(x,_,p.value),damping:i,stiffness:r,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:_=>{let M=!1;return!C&&I===void 0&&(M=!0,w(_),N(_)),I!==void 0&&_>=I?C.next(_-I):(!M&&w(_),p)}}}function W2(e,t,n){const o=[],i=n||hn.mix||Ix,r=e.length-1;for(let s=0;s<r;s++){let a=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||At:t;a=Nr(l,a)}o.push(a)}return o}function K2(e,t,{clamp:n=!0,ease:o,mixer:i}={}){const r=e.length;if(Vd(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=W2(t,o,i),l=a.length,u=d=>{if(s&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const p=gr(e[h],e[h+1],d);return a[h](p)};return n?d=>u(pn(e[0],e[r-1],d)):u}function Y2(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const i=gr(0,t,o);e.push(Te(n,1,i))}}function X2(e){const t=[0];return Y2(t,e.length-1),t}function Q2(e,t){return e.map(n=>n*t)}function Z2(e,t){return e.map(()=>t||hx).splice(0,e.length-1)}function Wi({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const i=c2(o)?o.map(Tm):Tm(o),r={done:!1,value:t[0]},s=Q2(n&&n.length===t.length?n:X2(t),e),a=K2(s,t,{ease:Array.isArray(i)?i:Z2(t,i)});return{calculatedDuration:e,next:l=>(r.value=a(l),r.done=l>=e,r)}}const eR=e=>e!==null;function Wd(e,{repeat:t,repeatType:n="loop"},o,i=1){const r=e.filter(eR),a=i<0||t&&n!=="loop"&&t%2===1?0:r.length-1;return!a||o===void 0?r[a]:o}const tR={decay:oc,inertia:oc,tween:Wi,keyframes:Wi,spring:sl};function Ax(e){typeof e.type=="string"&&(e.type=tR[e.type])}class Kd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const nR=e=>e/100;class Yd extends Kd{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var o,i;const{motionValue:n}=this.options;n&&n.updatedAt!==lt.now()&&this.tick(lt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(o=this.options).onStop)==null||i.call(o))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Ax(t);const{type:n=Wi,repeat:o=0,repeatDelay:i=0,repeatType:r,velocity:s=0}=t;let{keyframes:a}=t;const l=n||Wi;l!==Wi&&typeof a[0]!="number"&&(this.mixKeyframes=Nr(nR,Ix(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=jd(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(o+1)-i,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:o,totalDuration:i,mixKeyframes:r,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return o.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:g,type:v,onUpdate:T,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let x=this.currentTime,w=o;if(h){const _=Math.min(this.currentTime,i)/a;let M=Math.floor(_),b=_%1;!b&&_>=1&&(b=1),b===1&&M--,M=Math.min(M,h+1),!!(M%2)&&(p==="reverse"?(b=1-b,g&&(b-=g/a)):p==="mirror"&&(w=s)),x=pn(0,1,b)*a}const I=y?{done:!1,value:d[0]}:w.next(x);r&&(I.value=r(I.value));let{done:C}=I;!y&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return N&&v!==oc&&(I.value=Wd(d,this.options,E,this.speed)),T&&T(I.value),N&&this.finish(),I}then(t,n){return this.finished.then(t,n)}get duration(){return It(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+It(t)}get time(){return It(this.currentTime)}set time(t){var n;t=en(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(lt.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=It(this.currentTime))}play(){var i,r;if(this.isStopped)return;const{driver:t=G2,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),(r=(i=this.options).onPlay)==null||r.call(i);const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=n??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(lt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function oR(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const io=e=>e*180/Math.PI,ic=e=>{const t=io(Math.atan2(e[1],e[0]));return rc(t)},iR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ic,rotateZ:ic,skewX:e=>io(Math.atan(e[1])),skewY:e=>io(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rc=e=>(e=e%360,e<0&&(e+=360),e),_m=ic,Am=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),km=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),rR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Am,scaleY:km,scale:e=>(Am(e)+km(e))/2,rotateX:e=>rc(io(Math.atan2(e[6],e[5]))),rotateY:e=>rc(io(Math.atan2(-e[2],e[0]))),rotateZ:_m,rotate:_m,skewX:e=>io(Math.atan(e[4])),skewY:e=>io(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function sc(e){return e.includes("scale")?1:0}function lc(e,t){if(!e||e==="none")return sc(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,i;if(n)o=rR,i=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=iR,i=a}if(!i)return sc(t);const r=o[t],s=i[1].split(",").map(lR);return typeof r=="function"?r(s):s[r]}const sR=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return lc(n,t)};function lR(e){return parseFloat(e.trim())}const vi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xi=new Set(vi),Pm=e=>e===yi||e===K,aR=new Set(["x","y","z"]),uR=vi.filter(e=>!aR.has(e));function cR(e){const t=[];return uR.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t}const ao={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>lc(t,"x"),y:(e,{transform:t})=>lc(t,"y")};ao.translateX=ao.x;ao.translateY=ao.y;const uo=new Set;let ac=!1,uc=!1,cc=!1;function kx(){if(uc){const e=Array.from(uo).filter(o=>o.needsMeasurement),t=new Set(e.map(o=>o.element)),n=new Map;t.forEach(o=>{const i=cR(o);i.length&&(n.set(o,i),o.render())}),e.forEach(o=>o.measureInitialState()),t.forEach(o=>{o.render();const i=n.get(o);i&&i.forEach(([r,s])=>{var a;(a=o.getValue(r))==null||a.set(s)})}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}uc=!1,ac=!1,uo.forEach(e=>e.complete(cc)),uo.clear()}function Px(){uo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(uc=!0)})}function dR(){cc=!0,Px(),kx(),cc=!1}class Xd{constructor(t,n,o,i,r,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=o,this.motionValue=i,this.element=r,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(uo.add(this),ac||(ac=!0,xe.read(Px),xe.resolveKeyframes(kx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:o,motionValue:i}=this;if(t[0]===null){const r=i==null?void 0:i.get(),s=t[t.length-1];if(r!==void 0)t[0]=r;else if(o&&n){const a=o.readValue(n,s);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=s),i&&r===void 0&&i.set(t[0])}oR(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),uo.delete(this)}cancel(){this.state==="scheduled"&&(uo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const fR=e=>e.startsWith("--");function pR(e,t,n){fR(t)?e.style.setProperty(t,n):e.style[t]=n}const hR=Gd(()=>window.ScrollTimeline!==void 0),mR={};function gR(e,t){const n=Gd(e);return()=>mR[t]??n()}const Rx=gR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ui=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,Rm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ui([0,.65,.55,1]),circOut:Ui([.55,0,1,.45]),backIn:Ui([.31,.01,.66,-.59]),backOut:Ui([.33,1.53,.69,.99])};function Mx(e,t){if(e)return typeof e=="function"?Rx()?Nx(e,t):"ease-out":mx(e)?Ui(e):Array.isArray(e)?e.map(n=>Mx(n,t)||Rm.easeOut):Rm[e]}function yR(e,t,n,{delay:o=0,duration:i=300,repeat:r=0,repeatType:s="loop",ease:a="easeOut",times:l}={},u=void 0){const d={[t]:n};l&&(d.offset=l);const h=Mx(a,i);Array.isArray(h)&&(d.easing=h);const p={delay:o,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:s==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(d,p)}function bx(e){return typeof e=="function"&&"applyToOptions"in e}function vR({type:e,...t}){return bx(e)&&Rx()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class xR extends Kd{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:o,keyframes:i,pseudoElement:r,allowFlatten:s=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!r,this.allowFlatten=s,this.options=t,Vd(typeof t.type!="string");const u=vR(t);this.animation=yR(n,o,i,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const d=Wd(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):pR(n,o,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,o;const t=((o=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:o.call(n).duration)||0;return It(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+It(t)}get time(){return It(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=en(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var o;return this.allowFlatten&&((o=this.animation.effect)==null||o.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&hR()?(this.animation.timeline=t,At):n(this)}}const Dx={anticipate:dx,backInOut:cx,circInOut:px};function SR(e){return e in Dx}function TR(e){typeof e.ease=="string"&&SR(e.ease)&&(e.ease=Dx[e.ease])}const Mm=10;class ER extends xR{constructor(t){TR(t),Ax(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:o,onComplete:i,element:r,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new Yd({...s,autoplay:!1}),l=en(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Mm).value,a.sample(l).value,Mm),a.stop()}}const bm=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(On.test(e)||e==="0")&&!e.startsWith("url("));function wR(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function CR(e,t,n,o){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],s=bm(i,t),a=bm(r,t);return!s||!a?!1:wR(e)||(n==="spring"||bx(n))&&o}function dc(e){e.duration=0,e.type="keyframes"}const IR=new Set(["opacity","clipPath","filter","transform"]),NR=Gd(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _R(e){var d;const{motionValue:t,name:n,repeatDelay:o,repeatType:i,damping:r,type:s}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return NR()&&n&&IR.has(n)&&(n!=="transform"||!u)&&!l&&!o&&i!=="mirror"&&r!==0&&s!=="inertia"}const AR=40;class kR extends Kd{constructor({autoplay:t=!0,delay:n=0,type:o="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s="loop",keyframes:a,name:l,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var T,E;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=lt.now();const p={autoplay:t,delay:n,type:o,repeat:i,repeatDelay:r,repeatType:s,name:l,motionValue:u,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||Xd;this.keyframeResolver=new g(a,(T,E,S)=>this.onKeyframesResolved(T,E,p,!S),l,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,o,i){this.keyframeResolver=void 0;const{name:r,type:s,velocity:a,delay:l,isHandoff:u,onUpdate:d}=o;this.resolvedAt=lt.now(),CR(t,r,s,a)||((hn.instantAnimations||!l)&&(d==null||d(Wd(t,o,n))),t[0]=t[t.length-1],dc(o),o.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>AR?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...o,keyframes:t},g=!u&&_R(p)?new ER({...p,element:p.motionValue.owner.current}):new Yd(p);g.finished.then(()=>this.notifyFinished()).catch(At),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),dR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const PR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RR(e){const t=PR.exec(e);if(!t)return[,];const[,n,o,i]=t;return[`--${n??o}`,i]}function Lx(e,t,n=1){const[o,i]=RR(e);if(!o)return;const r=window.getComputedStyle(t).getPropertyValue(o);if(r){const s=r.trim();return nx(s)?parseFloat(s):s}return zd(i)?Lx(i,t,n+1):i}function Qd(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Fx=new Set(["width","height","top","left","right","bottom",...vi]),MR={test:e=>e==="auto",parse:e=>e},Ux=e=>t=>t.test(e),Vx=[yi,K,tn,En,w2,E2,MR],Dm=e=>Vx.find(Ux(e));function bR(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||ix(e):!0}const DR=new Set(["brightness","contrast","saturate","opacity"]);function LR(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match($d)||[];if(!o)return e;const i=n.replace(o,"");let r=DR.has(t)?1:0;return o!==n&&(r*=100),t+"("+r+i+")"}const FR=/\b([a-z-]*)\(.*?\)/gu,fc={...On,getAnimatableNone:e=>{const t=e.match(FR);return t?t.map(LR).join(" "):e}},Lm={...yi,transform:Math.round},UR={rotate:En,rotateX:En,rotateY:En,rotateZ:En,scale:ts,scaleX:ts,scaleY:ts,scaleZ:ts,skew:En,skewX:En,skewY:En,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:yr,originX:Em,originY:Em,originZ:K},Zd={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,radius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,top:K,right:K,bottom:K,left:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,backgroundPositionX:K,backgroundPositionY:K,...UR,zIndex:Lm,fillOpacity:yr,strokeOpacity:yr,numOctaves:Lm},VR={...Zd,color:Pe,backgroundColor:Pe,outlineColor:Pe,fill:Pe,stroke:Pe,borderColor:Pe,borderTopColor:Pe,borderRightColor:Pe,borderBottomColor:Pe,borderLeftColor:Pe,filter:fc,WebkitFilter:fc},Gx=e=>VR[e];function Bx(e,t){let n=Gx(e);return n!==fc&&(n=On),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const GR=new Set(["auto","none","0"]);function BR(e,t,n){let o=0,i;for(;o<e.length&&!i;){const r=e[o];typeof r=="string"&&!GR.has(r)&&vr(r).values.length&&(i=e[o]),o++}if(i&&n)for(const r of t)e[r]=Bx(n,i)}class OR extends Xd{constructor(t,n,o,i,r){super(t,n,o,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:o}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),zd(u))){const d=Lx(u,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Fx.has(o)||t.length!==2)return;const[i,r]=t,s=Dm(i),a=Dm(r);if(s!==a)if(Pm(s)&&Pm(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else ao[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,o=[];for(let i=0;i<t.length;i++)(t[i]===null||bR(t[i]))&&o.push(i);o.length&&BR(t,o,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:o}=this;if(!t||!t.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ao[o](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(o,i).jump(i,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:o}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=o.length-1,s=o[r];o[r]=ao[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function HR(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;const i=(n==null?void 0:n[e])??o.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const Ox=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Hx(e){return ox(e)&&"offsetHeight"in e}const Fm=30,zR=e=>!isNaN(parseFloat(e));class $R{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{var r;const i=lt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=lt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=zR(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Bd);const o=this.events[t].add(n);return t==="change"?()=>{o(),xe.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,o){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-o}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=lt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Fm)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Fm);return rx(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ai(e,t){return new $R(e,t)}const{schedule:ef}=gx(queueMicrotask,!1),Ft={x:!1,y:!1};function zx(){return Ft.x||Ft.y}function qR(e){return e==="x"||e==="y"?Ft[e]?null:(Ft[e]=!0,()=>{Ft[e]=!1}):Ft.x||Ft.y?null:(Ft.x=Ft.y=!0,()=>{Ft.x=Ft.y=!1})}function $x(e,t){const n=HR(e),o=new AbortController,i={passive:!0,...t,signal:o.signal};return[n,i,()=>o.abort()]}function Um(e){return!(e.pointerType==="touch"||zx())}function JR(e,t,n={}){const[o,i,r]=$x(e,n),s=a=>{if(!Um(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const d=h=>{Um(h)&&(u(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return o.forEach(a=>{a.addEventListener("pointerenter",s,i)}),r}const qx=(e,t)=>t?e===t?!0:qx(e,t.parentElement):!1,tf=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,jR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WR(e){return jR.has(e.tagName)||e.tabIndex!==-1}const ws=new WeakSet;function Vm(e){return t=>{t.key==="Enter"&&e(t)}}function ka(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const KR=(e,t)=>{const n=e.currentTarget;if(!n)return;const o=Vm(()=>{if(ws.has(n))return;ka(n,"down");const i=Vm(()=>{ka(n,"up")}),r=()=>ka(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",r,t)});n.addEventListener("keydown",o,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",o),t)};function Gm(e){return tf(e)&&!zx()}function YR(e,t,n={}){const[o,i,r]=$x(e,n),s=a=>{const l=a.currentTarget;if(!Gm(a))return;ws.add(l);const u=t(l,a),d=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),ws.has(l)&&ws.delete(l),Gm(g)&&typeof u=="function"&&u(g,{success:v})},h=g=>{d(g,l===window||l===document||n.useGlobalTarget||qx(l,g.target))},p=g=>{d(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return o.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",s,i),Hx(a)&&(a.addEventListener("focus",u=>KR(u,i)),!WR(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function Jx(e){return ox(e)&&"ownerSVGElement"in e}function XR(e){return Jx(e)&&e.tagName==="svg"}const Ye=e=>!!(e&&e.getVelocity),QR=[...Vx,Pe,On],ZR=e=>QR.find(Ux(e)),nf=k.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Bm(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function eM(...e){return t=>{let n=!1;const o=e.map(i=>{const r=Bm(i,t);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let i=0;i<o.length;i++){const r=o[i];typeof r=="function"?r():Bm(e[i],null)}}}}function tM(...e){return k.useCallback(eM(...e),e)}class nM extends k.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const o=n.offsetParent,i=Hx(o)&&o.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oM({children:e,isPresent:t,anchorX:n,root:o}){const i=k.useId(),r=k.useRef(null),s=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=k.useContext(nf),l=tM(r,e==null?void 0:e.ref);return k.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:p,right:g}=s.current;if(t||!r.current||!u||!d)return;const v=n==="left"?`left: ${p}`:`right: ${g}`;r.current.dataset.motionPopId=i;const T=document.createElement("style");a&&(T.nonce=a);const E=o??document.head;return E.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${v}px !important;
            top: ${h}px !important;
          }
        `),()=>{E.contains(T)&&E.removeChild(T)}},[t]),m.jsx(nM,{isPresent:t,childRef:r,sizeRef:s,children:k.cloneElement(e,{ref:l})})}const iM=({children:e,initial:t,isPresent:n,onExitComplete:o,custom:i,presenceAffectsLayout:r,mode:s,anchorX:a,root:l})=>{const u=Dd(rM),d=k.useId();let h=!0,p=k.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:n,custom:i,onExitComplete:g=>{u.set(g,!0);for(const v of u.values())if(!v)return;o&&o()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,o]);return r&&h&&(p={...p}),k.useMemo(()=>{u.forEach((g,v)=>u.set(v,!1))},[n]),k.useEffect(()=>{!n&&!u.size&&o&&o()},[n]),s==="popLayout"&&(e=m.jsx(oM,{isPresent:n,anchorX:a,root:l,children:e})),m.jsx(Gl.Provider,{value:p,children:e})};function rM(){return new Map}function jx(e=!0){const t=k.useContext(Gl);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:o,register:i}=t,r=k.useId();k.useEffect(()=>{if(e)return i(r)},[e]);const s=k.useCallback(()=>e&&o&&o(r),[r,o,e]);return!n&&o?[!1,s]:[!0]}const ns=e=>e.key||"";function Om(e){const t=[];return k.Children.forEach(e,n=>{k.isValidElement(n)&&t.push(n)}),t}const Gt=({children:e,custom:t,initial:n=!0,onExitComplete:o,presenceAffectsLayout:i=!0,mode:r="sync",propagate:s=!1,anchorX:a="left",root:l})=>{const[u,d]=jx(s),h=k.useMemo(()=>Om(e),[e]),p=s&&!u?[]:h.map(ns),g=k.useRef(!0),v=k.useRef(h),T=Dd(()=>new Map),[E,S]=k.useState(h),[y,x]=k.useState(h);tx(()=>{g.current=!1,v.current=h;for(let C=0;C<y.length;C++){const N=ns(y[C]);p.includes(N)?T.delete(N):T.get(N)!==!0&&T.set(N,!1)}},[y,p.length,p.join("-")]);const w=[];if(h!==E){let C=[...h];for(let N=0;N<y.length;N++){const _=y[N],M=ns(_);p.includes(M)||(C.splice(N,0,_),w.push(_))}return r==="wait"&&w.length&&(C=w),x(Om(C)),S(h),null}const{forceRender:I}=k.useContext(bd);return m.jsx(m.Fragment,{children:y.map(C=>{const N=ns(C),_=s&&!u?!1:h===y||p.includes(N),M=()=>{if(T.has(N))T.set(N,!0);else return;let b=!0;T.forEach(B=>{B||(b=!1)}),b&&(I==null||I(),x(v.current),s&&(d==null||d()),o&&o())};return m.jsx(iM,{isPresent:_,initial:!g.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:r,root:l,onExitComplete:_?void 0:M,anchorX:a,children:C},N)})})},Wx=k.createContext({strict:!1}),Hm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ui={};for(const e in Hm)ui[e]={isEnabled:t=>Hm[e].some(n=>!!t[n])};function sM(e){for(const t in e)ui[t]={...ui[t],...e[t]}}const lM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ll(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||lM.has(e)}let Kx=e=>!ll(e);function aM(e){typeof e=="function"&&(Kx=t=>t.startsWith("on")?!ll(t):e(t))}try{aM(require("@emotion/is-prop-valid").default)}catch{}function uM(e,t,n){const o={};for(const i in e)i==="values"&&typeof e.values=="object"||(Kx(i)||n===!0&&ll(i)||!t&&!ll(i)||e.draggable&&i.startsWith("onDrag"))&&(o[i]=e[i]);return o}const Bl=k.createContext({});function Ol(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function xr(e){return typeof e=="string"||Array.isArray(e)}const of=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rf=["initial",...of];function Hl(e){return Ol(e.animate)||rf.some(t=>xr(e[t]))}function Yx(e){return!!(Hl(e)||e.variants)}function cM(e,t){if(Hl(e)){const{initial:n,animate:o}=e;return{initial:n===!1||xr(n)?n:void 0,animate:xr(o)?o:void 0}}return e.inherit!==!1?t:{}}function dM(e){const{initial:t,animate:n}=cM(e,k.useContext(Bl));return k.useMemo(()=>({initial:t,animate:n}),[zm(t),zm(n)])}function zm(e){return Array.isArray(e)?e.join(" "):e}function $m(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ri={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(K.test(e))e=parseFloat(e);else return e;const n=$m(e,t.target.x),o=$m(e,t.target.y);return`${n}% ${o}%`}},fM={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,i=On.parse(e);if(i.length>5)return o;const r=On.createTransformer(e),s=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=a,i[1+s]/=l;const u=Te(a,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),r(i)}},pc={borderRadius:{...Ri,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ri,borderTopRightRadius:Ri,borderBottomLeftRadius:Ri,borderBottomRightRadius:Ri,boxShadow:fM};function Xx(e,{layout:t,layoutId:n}){return xi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!pc[e]||e==="opacity")}const pM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hM=vi.length;function mM(e,t,n){let o="",i=!0;for(let r=0;r<hM;r++){const s=vi[r],a=e[s];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(s.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=Ox(a,Zd[s]);if(!l){i=!1;const d=pM[s]||s;o+=`${d}(${u}) `}n&&(t[s]=u)}}return o=o.trim(),n?o=n(t,i?"":o):i&&(o="none"),o}function sf(e,t,n){const{style:o,vars:i,transformOrigin:r}=e;let s=!1,a=!1;for(const l in t){const u=t[l];if(xi.has(l)){s=!0;continue}else if(vx(l)){i[l]=u;continue}else{const d=Ox(u,Zd[l]);l.startsWith("origin")?(a=!0,r[l]=d):o[l]=d}}if(t.transform||(s||n?o.transform=mM(t,e.transform,n):o.transform&&(o.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:d=0}=r;o.transformOrigin=`${l} ${u} ${d}`}}const lf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qx(e,t,n){for(const o in t)!Ye(t[o])&&!Xx(o,n)&&(e[o]=t[o])}function gM({transformTemplate:e},t){return k.useMemo(()=>{const n=lf();return sf(n,t,e),Object.assign({},n.vars,n.style)},[t])}function yM(e,t){const n=e.style||{},o={};return Qx(o,n,e),Object.assign(o,gM(e,t)),o}function vM(e,t){const n={},o=yM(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=o,n}const xM={offset:"stroke-dashoffset",array:"stroke-dasharray"},SM={offset:"strokeDashoffset",array:"strokeDasharray"};function TM(e,t,n=1,o=0,i=!0){e.pathLength=1;const r=i?xM:SM;e[r.offset]=K.transform(-o);const s=K.transform(t),a=K.transform(n);e[r.array]=`${s} ${a}`}function Zx(e,{attrX:t,attrY:n,attrScale:o,pathLength:i,pathSpacing:r=1,pathOffset:s=0,...a},l,u,d){if(sf(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p}=e;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),o!==void 0&&(h.scale=o),i!==void 0&&TM(h,i,r,s,!1)}const eS=()=>({...lf(),attrs:{}}),tS=e=>typeof e=="string"&&e.toLowerCase()==="svg";function EM(e,t,n,o){const i=k.useMemo(()=>{const r=eS();return Zx(r,t,tS(o),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};Qx(r,e.style,e),i.style={...r,...i.style}}return i}const wM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function af(e){return typeof e!="string"||e.includes("-")?!1:!!(wM.indexOf(e)>-1||/[A-Z]/u.test(e))}function CM(e,t,n,{latestValues:o},i,r=!1){const a=(af(e)?EM:vM)(t,o,i,e),l=uM(t,typeof e=="string",r),u=e!==k.Fragment?{...l,...a,ref:n}:{},{children:d}=t,h=k.useMemo(()=>Ye(d)?d.get():d,[d]);return k.createElement(e,{...u,children:h})}function qm(e){const t=[{},{}];return e==null||e.values.forEach((n,o)=>{t[0][o]=n.get(),t[1][o]=n.getVelocity()}),t}function uf(e,t,n,o){if(typeof t=="function"){const[i,r]=qm(o);t=t(n!==void 0?n:e.custom,i,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,r]=qm(o);t=t(n!==void 0?n:e.custom,i,r)}return t}function Cs(e){return Ye(e)?e.get():e}function IM({scrapeMotionValuesFromProps:e,createRenderState:t},n,o,i){return{latestValues:NM(n,o,i,e),renderState:t()}}function NM(e,t,n,o){const i={},r=o(e,{});for(const p in r)i[p]=Cs(r[p]);let{initial:s,animate:a}=e;const l=Hl(e),u=Yx(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?a:s;if(h&&typeof h!="boolean"&&!Ol(h)){const p=Array.isArray(h)?h:[h];for(let g=0;g<p.length;g++){const v=uf(e,p[g]);if(v){const{transitionEnd:T,transition:E,...S}=v;for(const y in S){let x=S[y];if(Array.isArray(x)){const w=d?x.length-1:0;x=x[w]}x!==null&&(i[y]=x)}for(const y in T)i[y]=T[y]}}}return i}const nS=e=>(t,n)=>{const o=k.useContext(Bl),i=k.useContext(Gl),r=()=>IM(e,t,o,i);return n?r():Dd(r)};function cf(e,t,n){var r;const{style:o}=e,i={};for(const s in o)(Ye(o[s])||t.style&&Ye(t.style[s])||Xx(s,e)||((r=n==null?void 0:n.getValue(s))==null?void 0:r.liveStyle)!==void 0)&&(i[s]=o[s]);return i}const _M=nS({scrapeMotionValuesFromProps:cf,createRenderState:lf});function oS(e,t,n){const o=cf(e,t,n);for(const i in e)if(Ye(e[i])||Ye(t[i])){const r=vi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;o[r]=e[i]}return o}const AM=nS({scrapeMotionValuesFromProps:oS,createRenderState:eS}),kM=Symbol.for("motionComponentSymbol");function Vo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function PM(e,t,n){return k.useCallback(o=>{o&&e.onMount&&e.onMount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):Vo(n)&&(n.current=o))},[t])}const df=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),RM="framerAppearId",iS="data-"+df(RM),rS=k.createContext({});function MM(e,t,n,o,i){var T,E;const{visualElement:r}=k.useContext(Bl),s=k.useContext(Wx),a=k.useContext(Gl),l=k.useContext(nf).reducedMotion,u=k.useRef(null);o=o||s.renderer,!u.current&&o&&(u.current=o(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,h=k.useContext(rS);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&bM(u.current,n,i,h);const p=k.useRef(!1);k.useInsertionEffect(()=>{d&&p.current&&d.update(n,a)});const g=n[iS],v=k.useRef(!!g&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,g))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,g)));return tx(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),v.current&&d.animationState&&d.animationState.animateChanges())}),k.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,g)}),v.current=!1),d.enteringChildren=void 0)}),d}function bM(e,t,n,o){const{layoutId:i,layout:r,drag:s,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:sS(e.parent)),e.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!s||a&&Vo(a),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:o,crossfade:d,layoutScroll:l,layoutRoot:u})}function sS(e){if(e)return e.options.allowProjection!==!1?e.projection:sS(e.parent)}function Pa(e,{forwardMotionProps:t=!1}={},n,o){n&&sM(n);const i=af(e)?AM:_M;function r(a,l){let u;const d={...k.useContext(nf),...a,layoutId:DM(a)},{isStatic:h}=d,p=dM(a),g=i(a,h);if(!h&&Ld){LM();const v=FM(d);u=v.MeasureLayout,p.visualElement=MM(e,g,d,o,v.ProjectionNode)}return m.jsxs(Bl.Provider,{value:p,children:[u&&p.visualElement?m.jsx(u,{visualElement:p.visualElement,...d}):null,CM(e,a,PM(g,p.visualElement,l),g,h,t)]})}r.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const s=k.forwardRef(r);return s[kM]=e,s}function DM({layoutId:e}){const t=k.useContext(bd).id;return t&&e!==void 0?t+"-"+e:e}function LM(e,t){k.useContext(Wx).strict}function FM(e){const{drag:t,layout:n}=ui;if(!t&&!n)return{};const o={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function UM(e,t){if(typeof Proxy>"u")return Pa;const n=new Map,o=(r,s)=>Pa(r,s,e,t),i=(r,s)=>o(r,s);return new Proxy(i,{get:(r,s)=>s==="create"?o:(n.has(s)||n.set(s,Pa(s,void 0,e,t)),n.get(s))})}function lS({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function VM({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function GM(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function Ra(e){return e===void 0||e===1}function hc({scale:e,scaleX:t,scaleY:n}){return!Ra(e)||!Ra(t)||!Ra(n)}function Qn(e){return hc(e)||aS(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function aS(e){return Jm(e.x)||Jm(e.y)}function Jm(e){return e&&e!=="0%"}function al(e,t,n){const o=e-n,i=t*o;return n+i}function jm(e,t,n,o,i){return i!==void 0&&(e=al(e,i,o)),al(e,n,o)+t}function mc(e,t=0,n=1,o,i){e.min=jm(e.min,t,n,o,i),e.max=jm(e.max,t,n,o,i)}function uS(e,{x:t,y:n}){mc(e.x,t.translate,t.scale,t.originPoint),mc(e.y,n.translate,n.scale,n.originPoint)}const Wm=.999999999999,Km=1.0000000000001;function BM(e,t,n,o=!1){const i=n.length;if(!i)return;t.x=t.y=1;let r,s;for(let a=0;a<i;a++){r=n[a],s=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(o&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Bo(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,uS(e,s)),o&&Qn(r.latestValues)&&Bo(e,r.latestValues))}t.x<Km&&t.x>Wm&&(t.x=1),t.y<Km&&t.y>Wm&&(t.y=1)}function Go(e,t){e.min=e.min+t,e.max=e.max+t}function Ym(e,t,n,o,i=.5){const r=Te(e.min,e.max,i);mc(e,t,n,r,o)}function Bo(e,t){Ym(e.x,t.x,t.scaleX,t.scale,t.originX),Ym(e.y,t.y,t.scaleY,t.scale,t.originY)}function cS(e,t){return lS(GM(e.getBoundingClientRect(),t))}function OM(e,t,n){const o=cS(e,n),{scroll:i}=t;return i&&(Go(o.x,i.offset.x),Go(o.y,i.offset.y)),o}const Xm=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oo=()=>({x:Xm(),y:Xm()}),Qm=()=>({min:0,max:0}),be=()=>({x:Qm(),y:Qm()}),gc={current:null},dS={current:!1};function HM(){if(dS.current=!0,!!Ld)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>gc.current=e.matches;e.addEventListener("change",t),t()}else gc.current=!1}const zM=new WeakMap;function $M(e,t,n){for(const o in t){const i=t[o],r=n[o];if(Ye(i))e.addValue(o,i);else if(Ye(r))e.addValue(o,ai(i,{owner:e}));else if(r!==i)if(e.hasValue(o)){const s=e.getValue(o);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(o);e.addValue(o,ai(s!==void 0?s:i,{owner:e}))}}for(const o in n)t[o]===void 0&&e.removeValue(o);return t}const Zm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class qM{scrapeMotionValuesFromProps(t,n,o){return{}}constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:i,blockInitialAnimation:r,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=lt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,xe.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Hl(n),this.isVariantNode=Yx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const g=h[p];l[p]!==void 0&&Ye(g)&&g.set(l[p])}}mount(t){var n;this.current=t,zM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,i)=>this.bindToMotionValue(i,o)),dS.current||HM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gc.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Bn(this.notifyUpdate),Bn(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const o=this.features[n];o&&(o.unmount(),o.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const o=xi.has(t);o&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&xe.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),r&&r(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ui){const n=ui[t];if(!n)continue;const{isEnabled:o,Feature:i}=n;if(!this.features[t]&&i&&o(this.props)&&(this.features[t]=new i(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):be()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<Zm.length;o++){const i=Zm[o];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,s=t[r];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=$M(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const o=this.values.get(t);n!==o&&(o&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=ai(n===null?void 0:n,{owner:this}),this.addValue(t,o)),o}readValue(t,n){let o=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return o!=null&&(typeof o=="string"&&(nx(o)||ix(o))?o=parseFloat(o):!ZR(o)&&On.test(n)&&(o=Bx(t,n)),this.setBaseTarget(t,Ye(o)?o.get():o)),Ye(o)?o.get():o}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var r;const{initial:n}=this.props;let o;if(typeof n=="string"||typeof n=="object"){const s=uf(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);s&&(o=s[t])}if(n&&o!==void 0)return o;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ye(i)?i:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Bd),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){ef.render(this.render)}}class fS extends qM{constructor(){super(...arguments),this.KeyframeResolver=OR}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ye(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function pS(e,{style:t,vars:n},o,i){const r=e.style;let s;for(s in t)r[s]=t[s];i==null||i.applyProjectionStyles(r,o);for(s in n)r.setProperty(s,n[s])}function JM(e){return window.getComputedStyle(e)}class jM extends fS{constructor(){super(...arguments),this.type="html",this.renderInstance=pS}readValueFromInstance(t,n){var o;if(xi.has(n))return(o=this.projection)!=null&&o.isProjecting?sc(n):sR(t,n);{const i=JM(t),r=(vx(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return cS(t,n)}build(t,n,o){sf(t,n,o.transformTemplate)}scrapeMotionValuesFromProps(t,n,o){return cf(t,n,o)}}const hS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function WM(e,t,n,o){pS(e,t,void 0,o);for(const i in t.attrs)e.setAttribute(hS.has(i)?i:df(i),t.attrs[i])}class KM extends fS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=be}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(xi.has(n)){const o=Gx(n);return o&&o.default||0}return n=hS.has(n)?n:df(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,o){return oS(t,n,o)}build(t,n,o){Zx(t,n,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(t,n,o,i){WM(t,n,o,i)}mount(t){this.isSVGTag=tS(t.tagName),super.mount(t)}}const YM=(e,t)=>af(e)?new KM(t):new jM(t,{allowProjection:e!==k.Fragment});function Qo(e,t,n){const o=e.getProps();return uf(o,t,n!==void 0?n:o.custom,e)}const yc=e=>Array.isArray(e);function XM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ai(n))}function QM(e){return yc(e)?e[e.length-1]||0:e}function ZM(e,t){const n=Qo(e,t);let{transitionEnd:o={},transition:i={},...r}=n||{};r={...r,...o};for(const s in r){const a=QM(r[s]);XM(e,s,a)}}function eb(e){return!!(Ye(e)&&e.add)}function vc(e,t){const n=e.getValue("willChange");if(eb(n))return n.add(t);if(!n&&hn.WillChange){const o=new hn.WillChange("auto");e.addValue("willChange",o),o.add(t)}}function mS(e){return e.props[iS]}const tb=e=>e!==null;function nb(e,{repeat:t,repeatType:n="loop"},o){const i=e.filter(tb),r=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[r]}const ob={type:"spring",stiffness:500,damping:25,restSpeed:10},ib=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),rb={type:"keyframes",duration:.8},sb={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lb=(e,{keyframes:t})=>t.length>2?rb:xi.has(e)?e.startsWith("scale")?ib(t[1]):ob:sb;function ab({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:i,repeat:r,repeatType:s,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const ff=(e,t,n,o={},i,r)=>s=>{const a=Qd(o,e)||{},l=a.delay||o.delay||0;let{elapsed:u=0}=o;u=u-en(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:r?void 0:i};ab(a)||Object.assign(d,lb(e,d)),d.duration&&(d.duration=en(d.duration)),d.repeatDelay&&(d.repeatDelay=en(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(dc(d),d.delay===0&&(h=!0)),(hn.instantAnimations||hn.skipAnimations)&&(h=!0,dc(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,h&&!r&&t.get()!==void 0){const p=nb(d.keyframes,a);if(p!==void 0){xe.update(()=>{d.onUpdate(p),d.onComplete()});return}}return a.isSync?new Yd(d):new kR(d)};function ub({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function gS(e,t,{delay:n=0,transitionOverride:o,type:i}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:s,...a}=t;o&&(r=o);const l=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in a){const h=e.getValue(d,e.latestValues[d]??null),p=a[d];if(p===void 0||u&&ub(u,d))continue;const g={delay:n,...Qd(r||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===v&&!g.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const S=mS(e);if(S){const y=window.MotionHandoffAnimation(S,d,xe);y!==null&&(g.startTime=y,T=!0)}}vc(e,d),h.start(ff(d,h,p,e.shouldReduceMotion&&Fx.has(d)?{type:!1}:g,e,T));const E=h.animation;E&&l.push(E)}return s&&Promise.all(l).then(()=>{xe.update(()=>{s&&ZM(e,s)})}),l}function yS(e,t,n,o=0,i=1){const r=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),s=e.size,a=(s-1)*o;return typeof n=="function"?n(r,s):i===1?r*o:a-r*o}function xc(e,t,n={}){var l;const o=Qo(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(i=n.transitionOverride);const r=o?()=>Promise.all(gS(e,o,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return cb(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,d]=a==="beforeChildren"?[r,s]:[s,r];return u().then(()=>d())}else return Promise.all([r(),s(n.delay)])}function cb(e,t,n=0,o=0,i=0,r=1,s){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(xc(l,t,{...s,delay:n+(typeof o=="function"?0:o)+yS(e.variantChildren,l,o,i,r)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function db(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const i=t.map(r=>xc(e,r,n));o=Promise.all(i)}else if(typeof t=="string")o=xc(e,t,n);else{const i=typeof t=="function"?Qo(e,t,n.custom):t;o=Promise.all(gS(e,i,n))}return o.then(()=>{e.notify("AnimationComplete",t)})}function vS(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}const fb=rf.length;function xS(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?xS(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<fb;n++){const o=rf[n],i=e.props[o];(xr(i)||i===!1)&&(t[o]=i)}return t}const pb=[...of].reverse(),hb=of.length;function mb(e){return t=>Promise.all(t.map(({animation:n,options:o})=>db(e,n,o)))}function gb(e){let t=mb(e),n=e0(),o=!0;const i=l=>(u,d)=>{var p;const h=Qo(e,d,l==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:g,transitionEnd:v,...T}=h;u={...u,...T,...v}}return u};function r(l){t=l(e)}function s(l){const{props:u}=e,d=xS(e.parent)||{},h=[],p=new Set;let g={},v=1/0;for(let E=0;E<hb;E++){const S=pb[E],y=n[S],x=u[S]!==void 0?u[S]:d[S],w=xr(x),I=S===l?y.isActive:null;I===!1&&(v=E);let C=x===d[S]&&x!==u[S]&&w;if(C&&o&&e.manuallyAnimateOnMount&&(C=!1),y.protectedKeys={...g},!y.isActive&&I===null||!x&&!y.prevProp||Ol(x)||typeof x=="boolean")continue;const N=yb(y.prevProp,x);let _=N||S===l&&y.isActive&&!C&&w||E>v&&w,M=!1;const b=Array.isArray(x)?x:[x];let B=b.reduce(i(S),{});I===!1&&(B={});const{prevResolvedValues:ne={}}=y,Q={...ne,...B},oe=Z=>{_=!0,p.has(Z)&&(M=!0,p.delete(Z)),y.needsAnimating[Z]=!0;const D=e.getValue(Z);D&&(D.liveStyle=!1)};for(const Z in Q){const D=B[Z],O=ne[Z];if(g.hasOwnProperty(Z))continue;let $=!1;yc(D)&&yc(O)?$=!vS(D,O):$=D!==O,$?D!=null?oe(Z):p.add(Z):D!==void 0&&p.has(Z)?oe(Z):y.protectedKeys[Z]=!0}y.prevProp=x,y.prevResolvedValues=B,y.isActive&&(g={...g,...B}),o&&e.blockInitialAnimation&&(_=!1);const pe=C&&N;_&&(!pe||M)&&h.push(...b.map(Z=>{const D={type:S};if(typeof Z=="string"&&o&&!pe&&e.manuallyAnimateOnMount&&e.parent){const{parent:O}=e,$=Qo(O,Z);if(O.enteringChildren&&$){const{delayChildren:se}=$.transition||{};D.delay=yS(O.enteringChildren,e,se)}}return{animation:Z,options:D}}))}if(p.size){const E={};if(typeof u.initial!="boolean"){const S=Qo(e,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(E.transition=S.transition)}p.forEach(S=>{const y=e.getBaseTarget(S),x=e.getValue(S);x&&(x.liveStyle=!0),E[S]=y??null}),h.push({animation:E})}let T=!!h.length;return o&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(T=!1),o=!1,T?t(h):Promise.resolve()}function a(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:r,getState:()=>n,reset:()=>{n=e0()}}}function yb(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!vS(t,e):!1}function Wn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function e0(){return{animate:Wn(!0),whileInView:Wn(),whileHover:Wn(),whileTap:Wn(),whileDrag:Wn(),whileFocus:Wn(),exit:Wn()}}class Jn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class vb extends Jn{constructor(t){super(t),t.animationState||(t.animationState=gb(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ol(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let xb=0;class Sb extends Jn{constructor(){super(...arguments),this.id=xb++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Tb={animation:{Feature:vb},exit:{Feature:Sb}};function Sr(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}function kr(e){return{point:{x:e.pageX,y:e.pageY}}}const Eb=e=>t=>tf(t)&&e(t,kr(t));function Ki(e,t,n,o){return Sr(e,t,Eb(n),o)}const SS=1e-4,wb=1-SS,Cb=1+SS,TS=.01,Ib=0-TS,Nb=0+TS;function et(e){return e.max-e.min}function _b(e,t,n){return Math.abs(e-t)<=n}function t0(e,t,n,o=.5){e.origin=o,e.originPoint=Te(t.min,t.max,e.origin),e.scale=et(n)/et(t),e.translate=Te(n.min,n.max,e.origin)-e.originPoint,(e.scale>=wb&&e.scale<=Cb||isNaN(e.scale))&&(e.scale=1),(e.translate>=Ib&&e.translate<=Nb||isNaN(e.translate))&&(e.translate=0)}function Yi(e,t,n,o){t0(e.x,t.x,n.x,o?o.originX:void 0),t0(e.y,t.y,n.y,o?o.originY:void 0)}function n0(e,t,n){e.min=n.min+t.min,e.max=e.min+et(t)}function Ab(e,t,n){n0(e.x,t.x,n.x),n0(e.y,t.y,n.y)}function o0(e,t,n){e.min=t.min-n.min,e.max=e.min+et(t)}function ul(e,t,n){o0(e.x,t.x,n.x),o0(e.y,t.y,n.y)}function St(e){return[e("x"),e("y")]}const ES=({current:e})=>e?e.ownerDocument.defaultView:null,i0=(e,t)=>Math.abs(e-t);function kb(e,t){const n=i0(e.x,t.x),o=i0(e.y,t.y);return Math.sqrt(n**2+o**2)}class wS{constructor(t,n,{transformPagePoint:o,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=ba(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=kb(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:T}=p,{timestamp:E}=He;this.history.push({...T,timestamp:E});const{onStart:S,onMove:y}=this.handlers;g||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Ma(g,this.transformPagePoint),xe.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:v,onSessionEnd:T,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=ba(p.type==="pointercancel"?this.lastMoveEventInfo:Ma(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(p,S),T&&T(p,S)},!tf(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=o,this.distanceThreshold=s,this.contextWindow=i||window;const a=kr(t),l=Ma(a,this.transformPagePoint),{point:u}=l,{timestamp:d}=He;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,ba(l,this.history)),this.removeListeners=Nr(Ki(this.contextWindow,"pointermove",this.handlePointerMove),Ki(this.contextWindow,"pointerup",this.handlePointerUp),Ki(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Bn(this.updatePoint)}}function Ma(e,t){return t?{point:t(e.point)}:e}function r0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ba({point:e},t){return{point:e,delta:r0(e,CS(t)),offset:r0(e,Pb(t)),velocity:Rb(t,.1)}}function Pb(e){return e[0]}function CS(e){return e[e.length-1]}function Rb(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const i=CS(e);for(;n>=0&&(o=e[n],!(i.timestamp-o.timestamp>en(t)));)n--;if(!o)return{x:0,y:0};const r=It(i.timestamp-o.timestamp);if(r===0)return{x:0,y:0};const s={x:(i.x-o.x)/r,y:(i.y-o.y)/r};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Mb(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?Te(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?Te(n,e,o.max):Math.min(e,n)),e}function s0(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function bb(e,{top:t,left:n,bottom:o,right:i}){return{x:s0(e.x,n,i),y:s0(e.y,t,o)}}function l0(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function Db(e,t){return{x:l0(e.x,t.x),y:l0(e.y,t.y)}}function Lb(e,t){let n=.5;const o=et(e),i=et(t);return i>o?n=gr(t.min,t.max-o,e.min):o>i&&(n=gr(e.min,e.max-i,t.min)),pn(0,1,n)}function Fb(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Sc=.35;function Ub(e=Sc){return e===!1?e=0:e===!0&&(e=Sc),{x:a0(e,"left","right"),y:a0(e,"top","bottom")}}function a0(e,t,n){return{min:u0(e,t),max:u0(e,n)}}function u0(e,t){return typeof e=="number"?e:e[t]||0}const Vb=new WeakMap;class Gb{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=be(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:o}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(kr(h).point)},s=(h,p)=>{const{drag:g,dragPropagation:v,onDragStart:T}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qR(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),St(S=>{let y=this.getAxisMotionValue(S).get()||0;if(tn.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[S];w&&(y=et(w)*(parseFloat(y)/100))}}this.originPoint[S]=y}),T&&xe.postRender(()=>T(h,p)),vc(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:T,onDrag:E}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:S}=p;if(v&&this.currentDirection===null){this.currentDirection=Bb(S),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",p.point,S),this.updateAxis("y",p.point,S),this.visualElement.render(),E&&E(h,p)},l=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>St(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new wS(t,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:o,contextWindow:ES(this.visualElement)})}stop(t,n){const o=t||this.latestPointerEvent,i=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!o)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&xe.postRender(()=>a(o,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:i}=this.getProps();if(!o||!os(t,i,this.currentDirection))return;const r=this.getAxisMotionValue(t);let s=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(s=Mb(s,this.constraints[t],this.elastic[t])),r.set(s)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:n}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,i=this.constraints;t&&Vo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=bb(o.layoutBox,t):this.constraints=!1,this.elastic=Ub(n),i!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&St(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Fb(o.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Vo(t))return!1;const o=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=OM(o,i.root,this.visualElement.getTransformPagePoint());let s=Db(i.layout.layoutBox,r);if(n){const a=n(VM(s));this.hasMutatedConstraints=!!a,a&&(s=lS(a))}return s}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:i,dragTransition:r,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=St(d=>{if(!os(d,n,this.currentDirection))return;let h=l&&l[d]||{};s&&(h={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:o?t[d]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return vc(this.visualElement,t),o.start(ff(t,o,0,n,this.visualElement,!1))}stopAnimation(){St(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){St(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,o=this.visualElement.getProps(),i=o[n];return i||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){St(n=>{const{drag:o}=this.getProps();if(!os(n,o,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];r.set(t[n]-Te(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!Vo(n)||!o||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};St(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const l=a.get();i[s]=Lb({min:l,max:l},this.constraints[s])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),St(s=>{if(!os(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];a.set(Te(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;Vb.set(this.visualElement,this);const t=this.visualElement.current,n=Ki(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),o=()=>{const{dragConstraints:l}=this.getProps();Vo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",o);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xe.read(o);const s=Sr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(St(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{s(),n(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:s=Sc,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:i,dragConstraints:r,dragElastic:s,dragMomentum:a}}}function os(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Bb(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Ob extends Jn{constructor(t){super(t),this.removeGroupControls=At,this.removeListeners=At,this.controls=new Gb(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||At}unmount(){this.removeGroupControls(),this.removeListeners()}}const c0=e=>(t,n)=>{e&&xe.postRender(()=>e(t,n))};class Hb extends Jn{constructor(){super(...arguments),this.removePointerDownListener=At}onPointerDown(t){this.session=new wS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ES(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:i}=this.node.getProps();return{onSessionStart:c0(t),onStart:c0(n),onMove:o,onEnd:(r,s)=>{delete this.session,i&&xe.postRender(()=>i(r,s))}}}mount(){this.removePointerDownListener=Ki(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Is={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Da=!1;class zb extends k.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:i}=this.props,{projection:r}=t;r&&(n.group&&n.group.add(r),o&&o.register&&i&&o.register(r),Da&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Is.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:i,isPresent:r}=this.props,{projection:s}=o;return s&&(s.isPresent=r,Da=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==r?s.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?s.promote():s.relegate()||xe.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ef.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:i}=t;Da=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),o&&o.deregister&&o.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function IS(e){const[t,n]=jx(),o=k.useContext(bd);return m.jsx(zb,{...e,layoutGroup:o,switchLayoutGroup:k.useContext(rS),isPresent:t,safeToRemove:n})}function $b(e,t,n){const o=Ye(e)?e:ai(e);return o.start(ff("",o,t,n)),o.animation}const qb=(e,t)=>e.depth-t.depth;class Jb{constructor(){this.children=[],this.isDirty=!1}add(t){Fd(this.children,t),this.isDirty=!0}remove(t){Ud(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(qb),this.isDirty=!1,this.children.forEach(t)}}function jb(e,t){const n=lt.now(),o=({timestamp:i})=>{const r=i-n;r>=t&&(Bn(o),e(r-t))};return xe.setup(o,!0),()=>Bn(o)}const NS=["TopLeft","TopRight","BottomLeft","BottomRight"],Wb=NS.length,d0=e=>typeof e=="string"?parseFloat(e):e,f0=e=>typeof e=="number"||K.test(e);function Kb(e,t,n,o,i,r){i?(e.opacity=Te(0,n.opacity??1,Yb(o)),e.opacityExit=Te(t.opacity??1,0,Xb(o))):r&&(e.opacity=Te(t.opacity??1,n.opacity??1,o));for(let s=0;s<Wb;s++){const a=`border${NS[s]}Radius`;let l=p0(t,a),u=p0(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||f0(l)===f0(u)?(e[a]=Math.max(Te(d0(l),d0(u),o),0),(tn.test(u)||tn.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Te(t.rotate||0,n.rotate||0,o))}function p0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Yb=_S(0,.5,fx),Xb=_S(.5,.95,At);function _S(e,t,n){return o=>o<e?0:o>t?1:n(gr(e,t,o))}function h0(e,t){e.min=t.min,e.max=t.max}function Lt(e,t){h0(e.x,t.x),h0(e.y,t.y)}function m0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function g0(e,t,n,o,i){return e-=t,e=al(e,1/n,o),i!==void 0&&(e=al(e,1/i,o)),e}function Qb(e,t=0,n=1,o=.5,i,r=e,s=e){if(tn.test(t)&&(t=parseFloat(t),t=Te(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=Te(r.min,r.max,o);e===r&&(a-=t),e.min=g0(e.min,t,n,a,i),e.max=g0(e.max,t,n,a,i)}function y0(e,t,[n,o,i],r,s){Qb(e,t[n],t[o],t[i],t.scale,r,s)}const Zb=["x","scaleX","originX"],eD=["y","scaleY","originY"];function v0(e,t,n,o){y0(e.x,t,Zb,n?n.x:void 0,o?o.x:void 0),y0(e.y,t,eD,n?n.y:void 0,o?o.y:void 0)}function x0(e){return e.translate===0&&e.scale===1}function AS(e){return x0(e.x)&&x0(e.y)}function S0(e,t){return e.min===t.min&&e.max===t.max}function tD(e,t){return S0(e.x,t.x)&&S0(e.y,t.y)}function T0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function kS(e,t){return T0(e.x,t.x)&&T0(e.y,t.y)}function E0(e){return et(e.x)/et(e.y)}function w0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class nD{constructor(){this.members=[]}add(t){Fd(this.members,t),t.scheduleRender()}remove(t){if(Ud(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let o;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){o=r;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oD(e,t,n){let o="";const i=e.x.translate/t.x,r=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((i||r||s)&&(o=`translate3d(${i}px, ${r}px, ${s}px) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:p,skewX:g,skewY:v}=n;u&&(o=`perspective(${u}px) ${o}`),d&&(o+=`rotate(${d}deg) `),h&&(o+=`rotateX(${h}deg) `),p&&(o+=`rotateY(${p}deg) `),g&&(o+=`skewX(${g}deg) `),v&&(o+=`skewY(${v}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(o+=`scale(${a}, ${l})`),o||"none"}const La=["","X","Y","Z"],iD=1e3;let rD=0;function Fa(e,t,n,o){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),o&&(o[e]=0))}function PS(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=mS(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xe,!(i||r))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&PS(o)}function RS({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=rD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(aD),this.nodes.forEach(fD),this.nodes.forEach(pD),this.nodes.forEach(uD)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Jb)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Bd),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=Jx(s)&&!XR(s),this.instance=s;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let d,h=0;const p=()=>this.root.updateBlockedByResize=!1;xe.read(()=>{h=window.innerWidth}),e(s,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,d&&d(),d=jb(p,250),Is.hasAnimatedSinceResize&&(Is.hasAnimatedSinceResize=!1,this.nodes.forEach(N0)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||vD,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=u.getProps(),S=!this.targetLayout||!kS(this.targetLayout,g),y=!h&&p;if(this.options.layoutRoot||this.resumeFrom||y||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...Qd(v,"layout"),onPlay:T,onComplete:E};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(d,y)}else h||N0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Bn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hD),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(C0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(I0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(dD),this.nodes.forEach(sD),this.nodes.forEach(lD)):this.nodes.forEach(I0),this.clearAllSnapshots();const a=lt.now();He.delta=pn(0,1e3/60,a-He.timestamp),He.timestamp=a,He.isProcessing=!0,Ca.update.process(He),Ca.preRender.process(He),Ca.render.process(He),He.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ef.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cD),this.sharedNodes.forEach(mD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!et(this.snapshot.measuredBox.x)&&!et(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=be(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&this.instance){const l=o(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!AS(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&this.instance&&(a||Qn(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),xD(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return be();const a=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(SD))){const{scroll:d}=this.root;d&&(Go(a.x,d.offset.x),Go(a.y,d.offset.y))}return a}removeElementScroll(s){var l;const a=be();if(Lt(a,s),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Lt(a,s),Go(a.x,h.offset.x),Go(a.y,h.offset.y))}return a}applyTransform(s,a=!1){const l=be();Lt(l,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Bo(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Qn(d.latestValues)&&Bo(l,d.latestValues)}return Qn(this.latestValues)&&Bo(l,this.latestValues),l}removeTransform(s){const a=be();Lt(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Qn(u.latestValues))continue;hc(u.latestValues)&&u.updateSnapshot();const d=be(),h=u.measurePageBox();Lt(d,h),v0(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Qn(this.latestValues)&&v0(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==He.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=He.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=be(),this.targetWithTransforms=be()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ab(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lt(this.target,this.layout.layoutBox),uS(this.target,this.targetDelta)):Lt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hc(this.parent.latestValues)||aS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,a,l){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=be(),this.relativeTargetOrigin=be(),ul(this.relativeTargetOrigin,a,l),Lt(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const s=this.getLead(),a=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===He.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Lt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;BM(this.layoutCorrected,this.treeScale,this.path,a),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=be());const{target:g}=s;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(m0(this.prevProjectionDelta.x,this.projectionDelta.x),m0(this.prevProjectionDelta.y,this.projectionDelta.y)),Yi(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!w0(this.projectionDelta.x,this.prevProjectionDelta.x)||!w0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oo(),this.projectionDelta=Oo(),this.projectionDeltaWithTransform=Oo()}setAnimationOrigin(s,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=Oo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=be(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,T=g!==v,E=this.getStack(),S=!E||E.members.length<=1,y=!!(T&&!S&&this.options.crossfade===!0&&!this.path.some(yD));this.animationProgress=0;let x;this.mixTargetDelta=w=>{const I=w/1e3;_0(h.x,s.x,I),_0(h.y,s.y,I),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ul(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gD(this.relativeTarget,this.relativeTargetOrigin,p,I),x&&tD(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=be()),Lt(x,this.relativeTarget)),T&&(this.animationValues=d,Kb(d,u,this.latestValues,I,y,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Bn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xe.update(()=>{Is.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ai(0)),this.currentAnimation=$b(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),s.onUpdate&&s.onUpdate(d)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=s;if(!(!a||!l||!u)){if(this!==s&&this.layout&&u&&MS(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||be();const h=et(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+h;const p=et(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+p}Lt(a,l),Bo(a,d),Yi(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new nD),this.sharedNodes.get(s).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Fa("z",s,u,this.animationValues);for(let d=0;d<La.length;d++)Fa(`rotate${La[d]}`,s,u,this.animationValues),Fa(`skew${La[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}applyProjectionStyles(s,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Cs(a==null?void 0:a.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Cs(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Qn(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=oD(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),s.transform=h;const{x:p,y:g}=this.projectionDelta;s.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,u.animationValues?s.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:s.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in pc){if(d[v]===void 0)continue;const{correct:T,applyTo:E,isCSSVariable:S}=pc[v],y=h==="none"?d[v]:T(d[v],u);if(E){const x=E.length;for(let w=0;w<x;w++)s[E[w]]=y}else S?this.options.visualElement.renderState.vars[v]=y:s[v]=y}this.options.layoutId&&(s.pointerEvents=u===this?Cs(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(C0),this.root.sharedNodes.clear()}}}function sD(e){e.updateLayout()}function lD(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:i}=e.layout,{animationType:r}=e.options,s=t.source!==e.layout.source;r==="size"?St(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=et(p);p.min=o[h].min,p.max=p.min+g}):MS(r,t.layoutBox,o)&&St(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=et(o[h]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const a=Oo();Yi(a,o,t.layoutBox);const l=Oo();s?Yi(l,e.applyTransform(i,!0),t.measuredBox):Yi(l,o,t.layoutBox);const u=!AS(a);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const v=be();ul(v,t.layoutBox,p.layoutBox);const T=be();ul(T,o,g.layoutBox),kS(v,T)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=T,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function aD(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function uD(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function cD(e){e.clearSnapshot()}function C0(e){e.clearMeasurements()}function I0(e){e.isLayoutDirty=!1}function dD(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function N0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function fD(e){e.resolveTargetDelta()}function pD(e){e.calcProjection()}function hD(e){e.resetSkewAndRotation()}function mD(e){e.removeLeadSnapshot()}function _0(e,t,n){e.translate=Te(t.translate,0,n),e.scale=Te(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function A0(e,t,n,o){e.min=Te(t.min,n.min,o),e.max=Te(t.max,n.max,o)}function gD(e,t,n,o){A0(e.x,t.x,n.x,o),A0(e.y,t.y,n.y,o)}function yD(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const vD={duration:.45,ease:[.4,0,.1,1]},k0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),P0=k0("applewebkit/")&&!k0("chrome/")?Math.round:At;function R0(e){e.min=P0(e.min),e.max=P0(e.max)}function xD(e){R0(e.x),R0(e.y)}function MS(e,t,n){return e==="position"||e==="preserve-aspect"&&!_b(E0(t),E0(n),.2)}function SD(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const TD=RS({attachResizeListener:(e,t)=>Sr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ua={current:void 0},bS=RS({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ua.current){const e=new TD({});e.mount(window),e.setOptions({layoutScroll:!0}),Ua.current=e}return Ua.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ED={pan:{Feature:Hb},drag:{Feature:Ob,ProjectionNode:bS,MeasureLayout:IS}};function M0(e,t,n){const{props:o}=e;e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=o[i];r&&xe.postRender(()=>r(t,kr(t)))}class wD extends Jn{mount(){const{current:t}=this.node;t&&(this.unmount=JR(t,(n,o)=>(M0(this.node,o,"Start"),i=>M0(this.node,i,"End"))))}unmount(){}}class CD extends Jn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nr(Sr(this.node.current,"focus",()=>this.onFocus()),Sr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function b0(e,t,n){const{props:o}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&o.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=o[i];r&&xe.postRender(()=>r(t,kr(t)))}class ID extends Jn{mount(){const{current:t}=this.node;t&&(this.unmount=YR(t,(n,o)=>(b0(this.node,o,"Start"),(i,{success:r})=>b0(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Tc=new WeakMap,Va=new WeakMap,ND=e=>{const t=Tc.get(e.target);t&&t(e)},_D=e=>{e.forEach(ND)};function AD({root:e,...t}){const n=e||document;Va.has(n)||Va.set(n,{});const o=Va.get(n),i=JSON.stringify(t);return o[i]||(o[i]=new IntersectionObserver(_D,{root:e,...t})),o[i]}function kD(e,t,n){const o=AD(t);return Tc.set(e,n),o.observe(e),()=>{Tc.delete(e),o.unobserve(e)}}const PD={some:0,all:1};class RD extends Jn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:i="some",once:r}=t,s={root:n?n.current:void 0,rootMargin:o,threshold:typeof i=="number"?i:PD[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(l)};return kD(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(MD(t,n))&&this.startObserver()}unmount(){}}function MD({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const bD={inView:{Feature:RD},tap:{Feature:ID},focus:{Feature:CD},hover:{Feature:wD}},DD={layout:{ProjectionNode:bS,MeasureLayout:IS}},LD={...Tb,...bD,...ED,...DD},he=UM(LD,YM),DS=({onClose:e})=>{const[t,n]=k.useState("keys"),[o,i]=k.useState(oP()),r=k.useRef(null),s=()=>{iP(o),e(),alert(`AI 
: Groq -> OpenRouter -> Gemini -> Pollinations`)},a=()=>{confirm(" prompt ")&&(localStorage.removeItem("PSYCHEPOLY_AI_CONFIG_V2"),window.location.reload())},l=()=>{const p="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o,null,2)),g=document.createElement("a");g.setAttribute("href",p),g.setAttribute("download","psychepoly_ai_config.json"),document.body.appendChild(g),g.click(),g.remove()},u=()=>{var p;(p=r.current)==null||p.click()},d=p=>{var T;const g=(T=p.target.files)==null?void 0:T[0];if(!g)return;const v=new FileReader;v.onload=E=>{var S;try{const y=(S=E.target)==null?void 0:S.result,x=JSON.parse(y);x.geminiModel||x.systemPersona?(i({...o,...x}),alert("")):alert("")}catch{alert("JSON ")}},v.readAsText(g),r.current&&(r.current.value="")},h=(p,g,v,T,E,S,y,x)=>m.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:`text-xs font-bold ${g} flex items-center gap-1`,children:p}),m.jsx("input",{type:"text",value:S,onChange:w=>y(w.target.value),className:"bg-slate-900 border border-slate-700 rounded px-2 py-0.5 text-[10px] text-slate-400 w-32 text-right",placeholder:"Model ID"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"password",value:v,onChange:w=>T(w.target.value),className:`w-full bg-slate-900 border rounded-lg px-3 py-2 text-sm text-white outline-none font-mono ${v?"border-slate-700":E?"border-teal-500/50":"border-slate-800"}`,placeholder:E?" Key ()":x}),!v&&E&&m.jsxs("div",{className:"absolute right-3 top-2.5 flex items-center gap-1 text-[10px] text-teal-500 pointer-events-none",children:[m.jsx(YP,{size:12})," "]})]})]});return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-teal-500/20 rounded-lg text-teal-400",children:m.jsx(AP,{size:24})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-bold text-white",children:"AI "}),m.jsx("p",{className:"text-[10px] text-slate-400",children:": G > O > Mini > P"})]})]}),m.jsx("button",{onClick:e,className:"text-slate-500 hover:text-white transition",children:m.jsx(Vl,{size:24})})]}),m.jsxs("div",{className:"flex border-b border-slate-800",children:[m.jsxs("button",{onClick:()=>n("keys"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 border-b-2 transition ${t==="keys"?"border-teal-500 text-teal-400 bg-slate-800/50":"border-transparent text-slate-500 hover:text-white"}`,children:[m.jsx(LP,{size:16})," API  & "]}),m.jsxs("button",{onClick:()=>n("prompts"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 border-b-2 transition ${t==="prompts"?"border-teal-500 text-teal-400 bg-slate-800/50":"border-transparent text-slate-500 hover:text-white"}`,children:[m.jsx(HP,{size:16})," Prompt "]})]}),m.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1 custom-scrollbar",children:[t==="keys"&&m.jsxs("div",{className:"space-y-6",children:[h("1. Groq (G) - ","text-orange-400",o.groqKey,p=>i({...o,groqKey:p}),!!lo.groq,o.groqModel,p=>i({...o,groqModel:p}),"gsk_..."),h("2. OpenRouter (O) - ","text-blue-400",o.openRouterKey,p=>i({...o,openRouterKey:p}),!!lo.openRouter,o.openRouterModel,p=>i({...o,openRouterModel:p}),"sk-or-..."),h("3. Gemini (Mini) - ","text-teal-400",o.geminiKey,p=>i({...o,geminiKey:p}),!!lo.gemini,o.geminiModel,p=>i({...o,geminiModel:p}),"AIza..."),h("4. Zhipu () - ","text-red-400",o.zhipuKey,p=>i({...o,zhipuKey:p}),!1,"glm-4-flash",()=>{}," API Key..."),m.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg flex items-center gap-3 text-xs text-slate-400",children:[m.jsx(NP,{size:16}),m.jsxs("span",{children:[" Key  ",m.jsx("strong",{children:"Pollinations.ai (P)"}),""]})]})]}),t==="prompts"&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-xs font-bold text-purple-400 uppercase tracking-wider flex items-center gap-1",children:"System Persona ()"}),m.jsx("textarea",{value:o.systemPersona,onChange:p=>i({...o,systemPersona:p.target.value}),className:"w-full h-32 bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-xs text-slate-300 focus:border-purple-500 outline-none resize-none font-mono leading-relaxed",placeholder:"[]... []..."}),m.jsx("p",{className:"text-[10px] text-slate-500",children:" AI "})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-xs font-bold text-green-400 uppercase tracking-wider flex items-center gap-1",children:"Task Generation Instruction ()"}),m.jsx("textarea",{value:o.taskPromptTemplate,onChange:p=>i({...o,taskPromptTemplate:p.target.value}),className:"w-full h-40 bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-xs text-slate-300 focus:border-green-500 outline-none resize-none font-mono"}),m.jsx("p",{className:"text-[10px] text-slate-500",children:" JSON  (keys: standard, truth, dare, deep)"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-xs font-bold text-yellow-400 uppercase tracking-wider flex items-center gap-1",children:"Report & Analysis Instruction ()"}),m.jsx("textarea",{value:o.reportPromptTemplate,onChange:p=>i({...o,reportPromptTemplate:p.target.value}),className:"w-full h-40 bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-xs text-slate-300 focus:border-yellow-500 outline-none resize-none font-mono"}),m.jsx("p",{className:"text-[10px] text-slate-500",children:"Te, Ti, Fe"})]})]})]}),m.jsxs("div",{className:"p-5 border-t border-slate-800 flex flex-wrap gap-3 bg-slate-900/50 rounded-b-2xl",children:[m.jsx("input",{type:"file",ref:r,className:"hidden",accept:".json",onChange:d}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:u,className:"px-3 py-2 bg-slate-800 text-slate-400 rounded-lg text-xs font-bold hover:bg-slate-700 hover:text-white flex items-center gap-1 transition",title:"",children:[m.jsx(e2,{size:14})," "]}),m.jsxs("button",{onClick:l,className:"px-3 py-2 bg-slate-800 text-slate-400 rounded-lg text-xs font-bold hover:bg-slate-700 hover:text-white flex items-center gap-1 transition",title:"",children:[m.jsx(Xv,{size:14})," "]})]}),m.jsx("div",{className:"flex-1"}),m.jsxs("button",{onClick:a,className:"px-4 py-2 bg-slate-800 text-slate-400 rounded-lg text-sm font-bold hover:text-white flex items-center gap-2 transition",children:[m.jsx(WP,{size:16})," "]}),m.jsxs("button",{onClick:s,className:"px-6 py-2 bg-teal-600 hover:bg-teal-500 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 shadow-lg transition",children:[m.jsx(KP,{size:16})," "]})]})]})})},D0=[{id:1,text:"...",left:" ()",right:" ()",dimension:"E-I"},{id:2,text:"...",left:"",right:"",dimension:"S-N"},{id:3,text:"...",left:"",right:"TA",dimension:"T-F"},{id:4,text:"...",left:"Excel",right:"",dimension:"J-P"}],FD=({onClose:e})=>m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-2xl flex flex-col max-h-[90vh] overflow-hidden",children:[m.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Yv,{className:"text-teal-600 dark:text-teal-400"}),m.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:""})]}),m.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-800 dark:hover:text-white transition",children:m.jsx(Vl,{size:24})})]}),m.jsxs("div",{className:"p-8 overflow-y-auto custom-scrollbar prose dark:prose-invert max-w-none text-slate-700 dark:text-slate-300 space-y-8",children:[m.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-6 rounded-2xl border border-teal-100 dark:border-teal-800/50",children:[m.jsx("h3",{className:"mt-0 text-teal-800 dark:text-teal-200 flex items-center gap-2",children:" "}),m.jsx("p",{className:"mb-0 text-sm leading-relaxed",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h4",{className:"flex items-center gap-2 text-indigo-600 dark:text-indigo-400 mb-0",children:[m.jsx(zP,{size:20})," 1. "]}),m.jsxs("ul",{className:"text-sm space-y-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"AI "})," ",m.jsx(Md,{size:14,className:"inline"}),"  API Key  Gemini/Groq ",m.jsx("strong",{children:"Zhipu ()"}),""]}),m.jsxs("li",{children:[m.jsx("strong",{children:""}),""]}),m.jsxs("li",{children:[m.jsx("strong",{children:""})," AI "]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h4",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400 mb-0",children:[m.jsx(li,{size:20})," 2. "]}),m.jsxs("ul",{className:"text-sm space-y-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:""}),""]}),m.jsxs("li",{children:[m.jsx("strong",{children:" (?)"}),""]}),m.jsxs("li",{children:[m.jsx("strong",{children:""}),""]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h4",{className:"flex items-center gap-2 text-teal-600 dark:text-teal-400 mb-0",children:[m.jsx(Ul,{size:20})," 3. "]}),m.jsxs("ul",{className:"text-sm space-y-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:""}),"AI  AI "]}),m.jsxs("li",{children:[m.jsx("strong",{children:""}),""]})]})]}),m.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl text-[11px] text-slate-500 border border-slate-200 dark:border-slate-700 italic",children:" "})]}),m.jsx("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950 flex justify-end",children:m.jsx("button",{onClick:e,className:"px-6 py-2 bg-teal-600 hover:bg-teal-500 text-white rounded-lg font-bold",children:""})})]})}),UD=({onComplete:e,isDarkMode:t,toggleTheme:n,initialStep:o="setup",isSoloTest:i=!1,onBackToHub:r,onShowQuickReport:s})=>{const[a,l]=k.useState(o),[u,d]=k.useState([{id:"p1",name:"",mbti:""}]),[h,p]=k.useState(0),[g,v]=k.useState(null),T=k.useRef(null),E=k.useRef(null),[S,y]=k.useState({1:50,2:50,3:50,4:50}),[x,w]=k.useState([]),[I,C]=k.useState(Ie.JUNG_8),[N,_]=k.useState(0),[M,b]=k.useState(40),[B,ne]=k.useState(!1),[Q,oe]=k.useState(!1);k.useEffect(()=>{let H=null;return g!==null&&navigator.mediaDevices.getUserMedia({video:{width:{ideal:300},height:{ideal:300}}}).then(Y=>{H=Y,T.current&&(T.current.srcObject=H,T.current.play())}).catch(Y=>{console.error("Camera error:",Y),v(null),alert("")}),()=>{H&&H.getTracks().forEach(Y=>Y.stop())}},[g]);const pe=H=>{if(T.current&&E.current){const Y=E.current.getContext("2d");if(Y){const ce=Math.min(T.current.videoWidth,T.current.videoHeight),vn=(T.current.videoWidth-ce)/2,Mt=(T.current.videoHeight-ce)/2;Y.drawImage(T.current,vn,Mt,ce,ce,0,0,300,300);const jn=E.current.toDataURL("image/jpeg"),Pr=[...u];Pr[H].avatarImage=jn,d(Pr),v(null)}}},de=()=>{u.length<16&&d([...u,{id:`p${Date.now()}`,name:"",mbti:""}])},Z=H=>{if(u.length>1){const Y=[...u];Y.splice(H,1),d(Y)}},D=(H,Y)=>{const ce=[...u];ce[H].name=Y,d(ce)},O=(H,Y)=>{const ce=[...u];ce[H].mbti=Y,d(ce)},$=H=>{p(H),y({1:50,2:50,3:50,4:50}),l("quiz")},se=async()=>{l("analyzing");const H=D0.map(ce=>({q:ce.text,val:S[ce.id]})),Y=await fP(H);w(Y),l("results")},V=H=>{O(h,H),l("setup")},J=()=>u.every(H=>H.name.trim()!==""&&H.mbti!==""),te=()=>{J()&&e(u,I,N,M)};return a==="quiz"?m.jsx("div",{className:"flex flex-col items-center justify-center h-full p-4 overflow-y-auto",children:m.jsxs("div",{className:"w-full max-w-xl bg-white dark:bg-slate-800/90 backdrop-blur p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-2xl",children:[m.jsxs("h3",{className:"text-xl font-bold mb-6 text-center text-teal-600 dark:text-teal-300",children:[u[h].name||""," "]}),m.jsx("div",{className:"space-y-8",children:D0.map(H=>m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"text-slate-800 dark:text-white font-medium text-lg",children:H.text}),m.jsxs("div",{className:"relative pt-1",children:[m.jsx("input",{type:"range",min:"0",max:"100",value:S[H.id],onChange:Y=>y({...S,[H.id]:parseInt(Y.target.value)}),className:"w-full h-2 bg-slate-200 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-teal-500 relative z-10"}),m.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 font-bold mt-2",children:[m.jsx("span",{children:H.left}),m.jsx("span",{children:H.right})]})]})]},H.id))}),m.jsxs("div",{className:"flex gap-4 mt-10",children:[m.jsx("button",{onClick:()=>i?r&&r():l("setup"),className:"flex-1 py-3 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white bg-slate-100 dark:bg-slate-700/50 rounded-xl",children:i?"":""}),m.jsx("button",{onClick:se,className:"flex-1 py-3 bg-teal-600 rounded-xl font-bold text-white hover:bg-teal-500 shadow-lg shadow-teal-500/20",children:""})]})]})}):a==="analyzing"?m.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[m.jsx(GP,{size:48,className:"text-teal-500 animate-spin mb-4"}),m.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-300",children:"AI ..."})]}):a==="results"?m.jsx("div",{className:"flex flex-col items-center justify-center h-full p-4 overflow-y-auto",children:m.jsxs("div",{className:"w-full max-w-xl bg-white dark:bg-slate-800/90 backdrop-blur p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-2xl",children:[m.jsx("h3",{className:"text-xl font-bold mb-2 text-center text-slate-800 dark:text-white",children:""}),m.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 mb-6 text-sm",children:" AI "}),m.jsx("div",{className:"space-y-4",children:x.map((H,Y)=>m.jsxs("button",{onClick:()=>V(H.type),className:"w-full p-4 bg-slate-50 dark:bg-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl border border-slate-200 dark:border-slate-600 hover:border-teal-500 transition text-left group relative overflow-hidden",children:[m.jsxs("div",{className:"flex justify-between items-end mb-2 relative z-10",children:[m.jsx("span",{className:"text-2xl font-bold text-slate-800 dark:text-white group-hover:text-teal-600 dark:group-hover:text-teal-300",children:H.type}),m.jsxs("span",{className:"text-lg font-mono font-bold text-teal-600 dark:text-teal-400",children:[H.percentage,"%"]})]}),m.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-teal-500/20 w-full",children:m.jsx("div",{className:"h-full bg-teal-500",style:{width:`${H.percentage}%`}})}),m.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 relative z-10",children:H.reason})]},H.type))}),m.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200 dark:border-slate-700 text-center flex flex-col gap-3",children:[i&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>s&&s(u[h],x),className:"w-full py-4 bg-gradient-to-r from-teal-600 to-indigo-600 text-white rounded-xl font-bold hover:brightness-110 shadow-lg shadow-teal-500/20 flex items-center justify-center gap-2 transition",children:[m.jsx(li,{size:20})," "]}),m.jsx("button",{onClick:()=>r&&r(),className:"w-full py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-white rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:""})]}),m.jsx("button",{onClick:()=>l("setup"),className:"text-slate-500 hover:text-slate-800 dark:hover:text-white text-sm",children:i?"":""})]})]})}):m.jsxs("div",{className:"flex flex-col items-center min-h-screen p-4 overflow-y-auto bg-slate-50 dark:bg-slate-900 transition-colors duration-300 gpu-accelerated",children:[m.jsxs("div",{className:"w-full max-w-6xl bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-2xl my-4 relative gpu-accelerated",children:[m.jsxs("div",{className:"absolute top-6 right-6 flex gap-3 z-10",children:[m.jsxs("button",{onClick:()=>oe(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-indigo-50 hover:bg-indigo-100 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 text-indigo-600 dark:text-indigo-300 text-xs font-bold transition",children:[m.jsx(Yv,{size:16})," "]}),m.jsx("button",{onClick:n,className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 hover:text-amber-500 dark:hover:text-yellow-400 transition",children:t?m.jsx(Xu,{size:18}):m.jsx(Yu,{size:18})}),m.jsx("button",{onClick:()=>ne(!0),className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 transition",title:"AI Settings",children:m.jsx(Md,{size:18})})]}),m.jsxs("div",{className:"text-center mb-6 pt-2",children:[m.jsx("h2",{className:"text-3xl font-bold mb-2 text-transparent bg-clip-text bg-[linear-gradient(to_right,#ef4444,#f97316,#eab308,#22c55e,#3b82f6,#a855f7)] tracking-tight",children:""}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:""})]}),m.jsxs("div",{className:"flex flex-col gap-8",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("h4",{className:"text-teal-600 dark:text-teal-400 font-bold flex items-center gap-2",children:[m.jsx(Zu,{size:18}),"  (",u.length,"/16)"]}),u.length<16&&m.jsxs("button",{onClick:de,className:"text-xs bg-teal-50 hover:bg-teal-100 dark:bg-teal-900/50 dark:hover:bg-teal-900 text-teal-700 dark:text-teal-200 px-3 py-1.5 rounded-full flex items-center gap-1 transition",children:[m.jsx(JP,{size:12})," "]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:u.map((H,Y)=>m.jsxs("div",{className:"bg-slate-100/60 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative transition hover:border-slate-400 dark:hover:border-slate-600 flex gap-4 items-start",children:[u.length>1&&m.jsx("button",{onClick:()=>Z(Y),className:"absolute top-2 right-2 text-slate-400 hover:text-red-500 dark:text-slate-600 dark:hover:text-red-400 transition",children:m.jsx(ZP,{size:14})}),m.jsxs("div",{className:"shrink-0 flex flex-col items-center gap-2",children:[m.jsxs("div",{className:"w-16 h-16 rounded-full bg-slate-200 dark:bg-slate-800 border-2 border-slate-300 dark:border-slate-600 overflow-hidden flex items-center justify-center relative group",children:[H.avatarImage?m.jsx("img",{src:H.avatarImage,alt:"Avatar",className:"w-full h-full object-cover"}):m.jsx(Qu,{size:32,className:"text-slate-400 dark:text-slate-500"}),g===Y?m.jsxs("div",{className:"absolute inset-0 bg-black z-10 flex flex-col items-center justify-center",children:[m.jsx("video",{ref:T,className:"absolute inset-0 w-full h-full object-cover opacity-50",autoPlay:!0,playsInline:!0,muted:!0}),m.jsx("button",{onClick:()=>pe(Y),className:"relative z-20 bg-white/20 p-1 rounded-full animate-pulse hover:bg-white/40",children:m.jsx(xm,{size:16})}),m.jsx("canvas",{ref:E,width:"300",height:"300",className:"hidden"})]}):m.jsx("button",{onClick:()=>v(Y),className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition",children:m.jsx(xm,{size:20,className:"text-white"})})]}),H.avatarImage&&m.jsx("button",{onClick:()=>{const ce=[...u];ce[Y].avatarImage=void 0,d(ce)},className:"text-[10px] text-red-500 dark:text-red-400 hover:underline",children:""})]}),m.jsxs("div",{className:"flex flex-col gap-3 flex-1",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase block mb-1",children:""}),m.jsx("input",{type:"text",value:H.name,onChange:ce=>D(Y,ce.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-800 dark:text-white text-sm focus:ring-1 focus:ring-teal-500 outline-none",placeholder:` ${Y+1}`})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase",children:" (MBTI)"}),!H.mbti&&m.jsxs("button",{onClick:()=>$(Y),className:"text-[10px] text-teal-600 dark:text-teal-400 hover:text-teal-500 dark:hover:text-teal-300 flex items-center gap-1",children:[m.jsx(li,{size:10})," AI "]})]}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.entries(Xt).map(([ce,vn])=>m.jsxs("div",{className:`rounded-lg p-2 border ${vn.color} flex flex-col gap-1`,children:[m.jsx("div",{className:"text-[10px] font-bold opacity-80 uppercase tracking-wide text-center mb-1 text-slate-700 dark:text-slate-300",children:ce.split(" ")[0]}),m.jsx("div",{className:"grid grid-cols-2 gap-1",children:vn.types.map(Mt=>m.jsx("button",{onClick:()=>O(Y,Mt),className:`text-[10px] py-1 rounded font-bold transition ${H.mbti===Mt?"bg-slate-800 text-white dark:bg-white dark:text-slate-900 shadow-md transform scale-105":"bg-black/5 hover:bg-black/10 dark:bg-black/20 dark:hover:bg-black/40 text-slate-600 dark:text-inherit"}`,children:Mt},Mt))})]},ce))})]})]})]},H.id))})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-slate-200 dark:border-slate-700/50",children:[m.jsxs("div",{children:[m.jsxs("h4",{className:"text-blue-500 dark:text-blue-400 font-bold mb-3 flex items-center gap-2 text-sm",children:[m.jsx(UP,{size:16})," "]}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("button",{onClick:()=>C(Ie.JUNG_8),className:`px-3 py-2 rounded-lg border text-left transition text-sm ${I===Ie.JUNG_8?"bg-blue-100 border-blue-500 text-blue-800 dark:bg-blue-600/20 dark:text-white":"bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 text-slate-500 dark:text-slate-400"}`,children:m.jsx("span",{className:"font-bold",children:""})}),m.jsx("button",{onClick:()=>C(Ie.MBTI_16),className:`px-3 py-2 rounded-lg border text-left transition text-sm ${I===Ie.MBTI_16?"bg-purple-100 border-purple-500 text-purple-800 dark:bg-purple-600/20 dark:text-white":"bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 text-slate-500 dark:text-slate-400"}`,children:m.jsx("span",{className:"font-bold",children:"MBTI "})})]})]}),m.jsxs("div",{children:[m.jsxs("h4",{className:"text-orange-500 dark:text-orange-400 font-bold mb-3 flex items-center gap-2 text-sm",children:[m.jsx(Qu,{size:16})," : ",N]}),m.jsx("input",{type:"range",min:"0",max:"5",value:N,onChange:H=>_(parseInt(H.target.value)),className:"w-full h-1.5 bg-slate-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-orange-500"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-2",children:[m.jsx("span",{children:" Bot"}),m.jsx("span",{children:"5 Bots"})]})]}),m.jsxs("div",{children:[m.jsxs("h4",{className:"text-yellow-500 dark:text-yellow-400 font-bold mb-3 flex items-center gap-2 text-sm",children:[m.jsx(Ul,{size:16})," : ",M]}),m.jsx("input",{type:"range",min:"20",max:"100",step:"10",value:M,onChange:H=>b(parseInt(H.target.value)),className:"w-full h-1.5 bg-slate-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-2",children:[m.jsx("span",{children:" (20)"}),m.jsx("span",{children:" (100)"})]})]})]})]}),m.jsxs("button",{onClick:te,disabled:!J(),className:"w-full mt-8 py-3.5 bg-gradient-to-r from-teal-600 to-blue-600 hover:from-teal-500 hover:to-blue-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-bold text-white text-lg transition shadow-lg hover:shadow-teal-500/20 flex items-center justify-center gap-2",children:[" ",m.jsx(mr,{size:20})]}),m.jsx("div",{className:"flex justify-center mt-8",children:m.jsxs(he.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>{console.log("Anchor clicked - returning to hub"),r&&r()},className:"flex items-center gap-2 px-6 py-2.5 text-slate-400 hover:text-teal-600 dark:text-slate-500 dark:hover:text-teal-400 transition-all duration-300 text-sm font-bold group bg-slate-100/50 dark:bg-slate-800/30 hover:bg-white dark:hover:bg-slate-800 rounded-full border border-transparent hover:border-teal-500/30 shadow-sm hover:shadow-md",children:[m.jsx(SP,{size:16,className:"group-hover:rotate-[20deg] group-hover:scale-110 transition-transform duration-300"}),""]})})]}),B&&m.jsx(DS,{onClose:()=>ne(!1)}),Q&&m.jsx(FD,{onClose:()=>oe(!1)})]})},cl=60,Ec=110,L0=(e,t,n)=>{const o=[];for(let i=0;i<6;i++){const r=60*i-30,s=Math.PI/180*r;o.push(`${e+n*Math.cos(s)},${t+n*Math.sin(s)}`)}return o.join(" ")},VD=(e,t)=>{const n=cl*(Math.sqrt(3)*e+Math.sqrt(3)/2*t),o=cl*(3/2*t);return{x:n+600,y:o+450}},GD=(e,t)=>{const n=(e-3)*Ec+600,o=(t-3)*Ec+450;return{x:n,y:o}},BD=({players:e,currentPlayerId:t,boardLayout:n,validMoves:o,onTileClick:i,gameMode:r,visibilityRadius:s})=>{const a=()=>n.map(d=>{const{x:h,y:p}=VD(d.q,d.r),g=bu.find(x=>x.id===d.functionId),v=d.q===0&&d.r===0;let T=g?g.color:v?"#94a3b8":"#64748b";const E=e.filter(x=>x.position===d.index),S=o.includes(d.index),y=S;return m.jsxs("g",{className:`transition-all duration-300 ${S?"cursor-pointer":""}`,onClick:()=>S&&i(d.index),children:[m.jsx("polygon",{points:L0(h,p,cl-2),className:"fill-slate-200 stroke-slate-300 dark:fill-slate-900 dark:stroke-slate-700",style:{fill:v?document.documentElement.classList.contains("dark")?"#334155":"#cbd5e1":void 0},stroke:y?"#2dd4bf":T,strokeWidth:y?6:v?3:2,strokeOpacity:y?1:.7}),m.jsx("polygon",{points:L0(h,p,cl-8),fill:T,fillOpacity:y?.6:.2}),m.jsx("text",{x:h,y:p+8,textAnchor:"middle",className:"fill-slate-600 dark:fill-slate-300",style:{fill:y?"#ffffff":T,pointerEvents:"none",userSelect:"none"},fontWeight:"bold",fontSize:v?"24":"18",children:d.functionId}),u(E,h,p,t,!1)]},d.index)}),l=()=>{const d=e.find(p=>p.id===t),h=n.find(p=>p.index===(d==null?void 0:d.position));return n.map(p=>{const{x:g,y:v}=GD(p.q,p.r);let T=!1,E=999;h&&(E=Math.abs(p.q-h.q)+Math.abs(p.r-h.r),T=E<=s);const S=p.zone==="Hub",y=e.filter(_=>_.position===p.index),x=o.includes(p.index);let w="#64748b";p.zone==="NT"?w=Xt[" (NT)"].hexColor:p.zone==="NF"?w=Xt[" (NF)"].hexColor:p.zone==="SJ"?w=Xt[" (SJ)"].hexColor:p.zone==="SP"?w=Xt[" (SP)"].hexColor:S&&(w="#f59e0b");let I=w,C=1;T?S?I="#f59e0b":I=w:(I=w,C=.4);const N=Ec-6;return m.jsxs("g",{className:`transition-all duration-500 ${x?"cursor-pointer":""}`,onClick:()=>x&&i(p.index),children:[m.jsx("rect",{x:g-N/2,y:v-N/2,width:N,height:N,rx:S?30:12,className:`
                        ${T?S?"fill-amber-50 dark:fill-amber-900/30":"fill-white dark:fill-slate-800":"fill-slate-100 dark:fill-slate-900"} 
                        transition-colors duration-500
                    `,fillOpacity:T?.9:.2,stroke:x?"#2dd4bf":I,strokeWidth:x?4:T?2:1,strokeOpacity:x?1:C,style:{filter:T?`drop-shadow(0 4px 6px ${I}40)`:"none"}}),T&&!S&&m.jsx("rect",{x:g-N/2+4,y:v-N/2+4,width:N-8,height:N-8,rx:8,fill:I,fillOpacity:.05,stroke:"none"}),T&&m.jsx("g",{className:"animate-in fade-in zoom-in duration-500",children:p.functionId==="Hub"?m.jsxs(m.Fragment,{children:[m.jsx("text",{x:g,y:v-5,textAnchor:"middle",className:"fill-slate-900 dark:fill-white",fontWeight:"bold",fontSize:"18",style:{pointerEvents:"none",userSelect:"none"},children:""}),m.jsx("text",{x:g,y:v+18,textAnchor:"middle",className:"fill-slate-900 dark:fill-white",fontWeight:"bold",fontSize:"18",style:{pointerEvents:"none",userSelect:"none"},children:""})]}):m.jsxs(m.Fragment,{children:[m.jsx("text",{x:g,y:v-5,textAnchor:"middle",fill:x?"#2dd4bf":I,fontWeight:"bold",fontSize:"18",style:{pointerEvents:"none",userSelect:"none"},children:p.functionId}),p.characterName&&m.jsx("text",{x:g,y:v+18,textAnchor:"middle",className:"fill-slate-500 dark:fill-slate-400",fontSize:"12",style:{pointerEvents:"none",userSelect:"none"},children:p.characterName})]})}),u(y,g,v,t,!0)]},p.index)})},u=(d,h,p,g,v)=>d.length===0?null:m.jsx("g",{transform:`translate(${h}, ${p})`,children:d.map((T,E)=>{const S=d.length,y=v?35:32,x=2*Math.PI/(S||1),I=Math.PI/2+E*x,C=Math.cos(I)*y,N=Math.sin(I)*y,_=v?10:12;return m.jsxs("g",{className:"transition-all duration-500",children:[m.jsx("circle",{cx:C,cy:N,r:v?25:30,fill:T.color,fillOpacity:"0.2",className:"animate-pulse",style:{filter:"blur(8px)"}}),m.jsx("defs",{children:m.jsx("clipPath",{id:`clip-${T.id}`,children:m.jsx("circle",{cx:C,cy:N,r:_})})}),m.jsx("circle",{cx:C,cy:N,r:_+1,fill:T.color,stroke:"white",strokeWidth:"2",className:"shadow-md"}),T.avatar&&T.avatar.startsWith("data:")?m.jsx("image",{x:C-_,y:N-_,width:_*2,height:_*2,href:T.avatar,clipPath:`url(#clip-${T.id})`,preserveAspectRatio:"xMidYMid slice"}):m.jsx("text",{x:C,y:N+_/2-1,textAnchor:"middle",fill:"white",fontSize:_-2,fontWeight:"bold",children:T.name[0].toUpperCase()}),T.id===g&&m.jsx("circle",{cx:C,cy:N,r:_+6,stroke:T.color,strokeWidth:"3",fill:"none",className:"animate-ping",opacity:"0.8"})]},T.id)})});return m.jsxs("div",{className:"w-full h-full bg-white dark:bg-slate-900/50 rounded-2xl border border-slate-300 dark:border-slate-700 overflow-hidden relative shadow-inner flex items-center justify-center cursor-move transition-colors duration-300",children:[m.jsx("div",{className:"absolute top-4 left-4 text-slate-500 dark:text-slate-500 text-xs font-mono z-10 bg-slate-100/80 dark:bg-slate-900/80 px-2 py-1 rounded",children:r===Ie.MBTI_16?"MBTI  (33) - ":" (Rainbow Ark)"}),m.jsx("svg",{viewBox:"0 0 1200 900",className:"w-full h-full animate-fade-in touch-pan-x touch-pan-y select-none",children:r===Ie.JUNG_8?a():l()})]})};var OD=Object.defineProperty,dl=Object.getOwnPropertySymbols,LS=Object.prototype.hasOwnProperty,FS=Object.prototype.propertyIsEnumerable,F0=(e,t,n)=>t in e?OD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wc=(e,t)=>{for(var n in t||(t={}))LS.call(t,n)&&F0(e,n,t[n]);if(dl)for(var n of dl(t))FS.call(t,n)&&F0(e,n,t[n]);return e},Cc=(e,t)=>{var n={};for(var o in e)LS.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&dl)for(var o of dl(e))t.indexOf(o)<0&&FS.call(e,o)&&(n[o]=e[o]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var go;(e=>{const t=class ie{constructor(l,u,d,h){if(this.version=l,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],l<ie.MIN_VERSION||l>ie.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let p=[];for(let v=0;v<this.size;v++)p.push(!1);for(let v=0;v<this.size;v++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(d);if(this.drawCodewords(g),h==-1){let v=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const E=this.getPenaltyScore();E<v&&(h=T,v=E),this.applyMask(T)}}i(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(l,u){const d=e.QrSegment.makeSegments(l);return ie.encodeSegments(d,u)}static encodeBinary(l,u){const d=e.QrSegment.makeBytes(l);return ie.encodeSegments([d],u)}static encodeSegments(l,u,d=1,h=40,p=-1,g=!0){if(!(ie.MIN_VERSION<=d&&d<=h&&h<=ie.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let v,T;for(v=d;;v++){const x=ie.getNumDataCodewords(v,u)*8,w=s.getTotalBits(l,v);if(w<=x){T=w;break}if(v>=h)throw new RangeError("Data too long")}for(const x of[ie.Ecc.MEDIUM,ie.Ecc.QUARTILE,ie.Ecc.HIGH])g&&T<=ie.getNumDataCodewords(v,x)*8&&(u=x);let E=[];for(const x of l){n(x.mode.modeBits,4,E),n(x.numChars,x.mode.numCharCountBits(v),E);for(const w of x.getData())E.push(w)}i(E.length==T);const S=ie.getNumDataCodewords(v,u)*8;i(E.length<=S),n(0,Math.min(4,S-E.length),E),n(0,(8-E.length%8)%8,E),i(E.length%8==0);for(let x=236;E.length<S;x^=253)n(x,8,E);let y=[];for(;y.length*8<E.length;)y.push(0);return E.forEach((x,w)=>y[w>>>3]|=x<<7-(w&7)),new ie(v,u,y,p)}getModule(l,u){return 0<=l&&l<this.size&&0<=u&&u<this.size&&this.modules[u][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),u=l.length;for(let d=0;d<u;d++)for(let h=0;h<u;h++)d==0&&h==0||d==0&&h==u-1||d==u-1&&h==0||this.drawAlignmentPattern(l[d],l[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const u=this.errorCorrectionLevel.formatBits<<3|l;let d=u;for(let p=0;p<10;p++)d=d<<1^(d>>>9)*1335;const h=(u<<10|d)^21522;i(h>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,o(h,p));this.setFunctionModule(8,7,o(h,6)),this.setFunctionModule(8,8,o(h,7)),this.setFunctionModule(7,8,o(h,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,o(h,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,o(h,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,o(h,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let d=0;d<12;d++)l=l<<1^(l>>>11)*7973;const u=this.version<<12|l;i(u>>>18==0);for(let d=0;d<18;d++){const h=o(u,d),p=this.size-11+d%3,g=Math.floor(d/3);this.setFunctionModule(p,g,h),this.setFunctionModule(g,p,h)}}drawFinderPattern(l,u){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const p=Math.max(Math.abs(h),Math.abs(d)),g=l+h,v=u+d;0<=g&&g<this.size&&0<=v&&v<this.size&&this.setFunctionModule(g,v,p!=2&&p!=4)}}drawAlignmentPattern(l,u){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(l+h,u+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(l,u,d){this.modules[u][l]=d,this.isFunction[u][l]=!0}addEccAndInterleave(l){const u=this.version,d=this.errorCorrectionLevel;if(l.length!=ie.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const h=ie.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],p=ie.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],g=Math.floor(ie.getNumRawDataModules(u)/8),v=h-g%h,T=Math.floor(g/h);let E=[];const S=ie.reedSolomonComputeDivisor(p);for(let x=0,w=0;x<h;x++){let I=l.slice(w,w+T-p+(x<v?0:1));w+=I.length;const C=ie.reedSolomonComputeRemainder(I,S);x<v&&I.push(0),E.push(I.concat(C))}let y=[];for(let x=0;x<E[0].length;x++)E.forEach((w,I)=>{(x!=T-p||I>=v)&&y.push(w[x])});return i(y.length==g),y}drawCodewords(l){if(l.length!=Math.floor(ie.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let p=0;p<2;p++){const g=d-p,T=(d+1&2)==0?this.size-1-h:h;!this.isFunction[T][g]&&u<l.length*8&&(this.modules[T][g]=o(l[u>>>3],7-(u&7)),u++)}}i(u==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let h;switch(l){case 0:h=(d+u)%2==0;break;case 1:h=u%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+u)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:h=d*u%2+d*u%3==0;break;case 6:h=(d*u%2+d*u%3)%2==0;break;case 7:h=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&h&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let l=0;for(let p=0;p<this.size;p++){let g=!1,v=0,T=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[p][E]==g?(v++,v==5?l+=ie.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,T),g||(l+=this.finderPenaltyCountPatterns(T)*ie.PENALTY_N3),g=this.modules[p][E],v=1);l+=this.finderPenaltyTerminateAndCount(g,v,T)*ie.PENALTY_N3}for(let p=0;p<this.size;p++){let g=!1,v=0,T=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][p]==g?(v++,v==5?l+=ie.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,T),g||(l+=this.finderPenaltyCountPatterns(T)*ie.PENALTY_N3),g=this.modules[E][p],v=1);l+=this.finderPenaltyTerminateAndCount(g,v,T)*ie.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let g=0;g<this.size-1;g++){const v=this.modules[p][g];v==this.modules[p][g+1]&&v==this.modules[p+1][g]&&v==this.modules[p+1][g+1]&&(l+=ie.PENALTY_N2)}let u=0;for(const p of this.modules)u=p.reduce((g,v)=>g+(v?1:0),u);const d=this.size*this.size,h=Math.ceil(Math.abs(u*20-d*10)/d)-1;return i(0<=h&&h<=9),l+=h*ie.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let d=[6];for(let h=this.size-7;d.length<l;h-=u)d.splice(1,0,h);return d}}static getNumRawDataModules(l){if(l<ie.MIN_VERSION||l>ie.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*l+128)*l+64;if(l>=2){const d=Math.floor(l/7)+2;u-=(25*d-10)*d-55,l>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(l,u){return Math.floor(ie.getNumRawDataModules(l)/8)-ie.ECC_CODEWORDS_PER_BLOCK[u.ordinal][l]*ie.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let u=[];for(let h=0;h<l-1;h++)u.push(0);u.push(1);let d=1;for(let h=0;h<l;h++){for(let p=0;p<u.length;p++)u[p]=ie.reedSolomonMultiply(u[p],d),p+1<u.length&&(u[p]^=u[p+1]);d=ie.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(l,u){let d=u.map(h=>0);for(const h of l){const p=h^d.shift();d.push(0),u.forEach((g,v)=>d[v]^=ie.reedSolomonMultiply(g,p))}return d}static reedSolomonMultiply(l,u){if(l>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(u>>>h&1)*l;return i(d>>>8==0),d}finderPenaltyCountPatterns(l){const u=l[1];i(u<=this.size*3);const d=u>0&&l[2]==u&&l[3]==u*3&&l[4]==u&&l[5]==u;return(d&&l[0]>=u*4&&l[6]>=u?1:0)+(d&&l[6]>=u*4&&l[0]>=u?1:0)}finderPenaltyTerminateAndCount(l,u,d){return l&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(l,u){u[0]==0&&(l+=this.size),u.pop(),u.unshift(l)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(a,l,u){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let d=l-1;d>=0;d--)u.push(a>>>d&1)}function o(a,l){return(a>>>l&1)!=0}function i(a){if(!a)throw new Error("Assertion error")}const r=class Ce{constructor(l,u,d){if(this.mode=l,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(l){let u=[];for(const d of l)n(d,8,u);return new Ce(Ce.Mode.BYTE,l.length,u)}static makeNumeric(l){if(!Ce.isNumeric(l))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<l.length;){const h=Math.min(l.length-d,3);n(parseInt(l.substring(d,d+h),10),h*3+1,u),d+=h}return new Ce(Ce.Mode.NUMERIC,l.length,u)}static makeAlphanumeric(l){if(!Ce.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=l.length;d+=2){let h=Ce.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d))*45;h+=Ce.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d+1)),n(h,11,u)}return d<l.length&&n(Ce.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d)),6,u),new Ce(Ce.Mode.ALPHANUMERIC,l.length,u)}static makeSegments(l){return l==""?[]:Ce.isNumeric(l)?[Ce.makeNumeric(l)]:Ce.isAlphanumeric(l)?[Ce.makeAlphanumeric(l)]:[Ce.makeBytes(Ce.toUtf8ByteArray(l))]}static makeEci(l){let u=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,u);else if(l<16384)n(2,2,u),n(l,14,u);else if(l<1e6)n(6,3,u),n(l,21,u);else throw new RangeError("ECI assignment value out of range");return new Ce(Ce.Mode.ECI,0,u)}static isNumeric(l){return Ce.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return Ce.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,u){let d=0;for(const h of l){const p=h.mode.numCharCountBits(u);if(h.numChars>=1<<p)return 1/0;d+=4+p+h.bitData.length}return d}static toUtf8ByteArray(l){l=encodeURI(l);let u=[];for(let d=0;d<l.length;d++)l.charAt(d)!="%"?u.push(l.charCodeAt(d)):(u.push(parseInt(l.substring(d+1,d+3),16)),d+=2);return u}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let s=r;e.QrSegment=r})(go||(go={}));(e=>{(t=>{const n=class{constructor(i,r){this.ordinal=i,this.formatBits=r}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(go||(go={}));(e=>{(t=>{const n=class{constructor(i,r){this.modeBits=i,this.numBitsCharCount=r}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(go||(go={}));var Ho=go;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var HD={L:Ho.QrCode.Ecc.LOW,M:Ho.QrCode.Ecc.MEDIUM,Q:Ho.QrCode.Ecc.QUARTILE,H:Ho.QrCode.Ecc.HIGH},US=128,VS="L",GS="#FFFFFF",BS="#000000",OS=!1,HS=1,zD=4,$D=0,qD=.1;function zS(e,t=0){const n=[];return e.forEach(function(o,i){let r=null;o.forEach(function(s,a){if(!s&&r!==null){n.push(`M${r+t} ${i+t}h${a-r}v1H${r+t}z`),r=null;return}if(a===o.length-1){if(!s)return;r===null?n.push(`M${a+t},${i+t} h1v1H${a+t}z`):n.push(`M${r+t},${i+t} h${a+1-r}v1H${r+t}z`);return}s&&r===null&&(r=a)})}),n.join("")}function $S(e,t){return e.slice().map((n,o)=>o<t.y||o>=t.y+t.h?n:n.map((i,r)=>r<t.x||r>=t.x+t.w?i:!1))}function JD(e,t,n,o){if(o==null)return null;const i=e.length+n*2,r=Math.floor(t*qD),s=i/t,a=(o.width||r)*s,l=(o.height||r)*s,u=o.x==null?e.length/2-a/2:o.x*s,d=o.y==null?e.length/2-l/2:o.y*s,h=o.opacity==null?1:o.opacity;let p=null;if(o.excavate){let v=Math.floor(u),T=Math.floor(d),E=Math.ceil(a+u-v),S=Math.ceil(l+d-T);p={x:v,y:T,w:E,h:S}}const g=o.crossOrigin;return{x:u,y:d,h:l,w:a,excavation:p,opacity:h,crossOrigin:g}}function jD(e,t){return t!=null?Math.max(Math.floor(t),0):e?zD:$D}function qS({value:e,level:t,minVersion:n,includeMargin:o,marginSize:i,imageSettings:r,size:s,boostLevel:a}){let l=Ae.useMemo(()=>{const v=(Array.isArray(e)?e:[e]).reduce((T,E)=>(T.push(...Ho.QrSegment.makeSegments(E)),T),[]);return Ho.QrCode.encodeSegments(v,HD[t],n,void 0,void 0,a)},[e,t,n,a]);const{cells:u,margin:d,numCells:h,calculatedImageSettings:p}=Ae.useMemo(()=>{let g=l.getModules();const v=jD(o,i),T=g.length+v*2,E=JD(g,s,v,r);return{cells:g,margin:v,numCells:T,calculatedImageSettings:E}},[l,s,r,o,i]);return{qrcode:l,margin:d,cells:u,numCells:h,calculatedImageSettings:p}}var WD=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),JS=Ae.forwardRef(function(t,n){const o=t,{value:i,size:r=US,level:s=VS,bgColor:a=GS,fgColor:l=BS,includeMargin:u=OS,minVersion:d=HS,boostLevel:h,marginSize:p,imageSettings:g}=o,T=Cc(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:E}=T,S=Cc(T,["style"]),y=g==null?void 0:g.src,x=Ae.useRef(null),w=Ae.useRef(null),I=Ae.useCallback(oe=>{x.current=oe,typeof n=="function"?n(oe):n&&(n.current=oe)},[n]),[C,N]=Ae.useState(!1),{margin:_,cells:M,numCells:b,calculatedImageSettings:B}=qS({value:i,level:s,minVersion:d,boostLevel:h,includeMargin:u,marginSize:p,imageSettings:g,size:r});Ae.useEffect(()=>{if(x.current!=null){const oe=x.current,pe=oe.getContext("2d");if(!pe)return;let de=M;const Z=w.current,D=B!=null&&Z!==null&&Z.complete&&Z.naturalHeight!==0&&Z.naturalWidth!==0;D&&B.excavation!=null&&(de=$S(M,B.excavation));const O=window.devicePixelRatio||1;oe.height=oe.width=r*O;const $=r/b*O;pe.scale($,$),pe.fillStyle=a,pe.fillRect(0,0,b,b),pe.fillStyle=l,WD?pe.fill(new Path2D(zS(de,_))):M.forEach(function(se,V){se.forEach(function(J,te){J&&pe.fillRect(te+_,V+_,1,1)})}),B&&(pe.globalAlpha=B.opacity),D&&pe.drawImage(Z,B.x+_,B.y+_,B.w,B.h)}}),Ae.useEffect(()=>{N(!1)},[y]);const ne=wc({height:r,width:r},E);let Q=null;return y!=null&&(Q=Ae.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{N(!0)},ref:w,crossOrigin:B==null?void 0:B.crossOrigin})),Ae.createElement(Ae.Fragment,null,Ae.createElement("canvas",wc({style:ne,height:r,width:r,ref:I,role:"img"},S)),Q)});JS.displayName="QRCodeCanvas";var KD=Ae.forwardRef(function(t,n){const o=t,{value:i,size:r=US,level:s=VS,bgColor:a=GS,fgColor:l=BS,includeMargin:u=OS,minVersion:d=HS,boostLevel:h,title:p,marginSize:g,imageSettings:v}=o,T=Cc(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:E,cells:S,numCells:y,calculatedImageSettings:x}=qS({value:i,level:s,minVersion:d,boostLevel:h,includeMargin:u,marginSize:g,imageSettings:v,size:r});let w=S,I=null;v!=null&&x!=null&&(x.excavation!=null&&(w=$S(S,x.excavation)),I=Ae.createElement("image",{href:v.src,height:x.h,width:x.w,x:x.x+E,y:x.y+E,preserveAspectRatio:"none",opacity:x.opacity,crossOrigin:x.crossOrigin}));const C=zS(w,E);return Ae.createElement("svg",wc({height:r,width:r,viewBox:`0 0 ${y} ${y}`,ref:n,role:"img"},T),!!p&&Ae.createElement("title",null,p),Ae.createElement("path",{fill:a,d:`M0,0 h${y}v${y}H0z`,shapeRendering:"crispEdges"}),Ae.createElement("path",{fill:l,d:C,shapeRendering:"crispEdges"}),I)});KD.displayName="QRCodeSVG";var jS={exports:{}};(function(e){var t=function(){var n=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function s(l,u){if(!r[l]){r[l]={};for(var d=0;d<l.length;d++)r[l][l.charAt(d)]=d}return r[l][u]}var a={compressToBase64:function(l){if(l==null)return"";var u=a._compress(l,6,function(d){return o.charAt(d)});switch(u.length%4){default:case 0:return u;case 1:return u+"===";case 2:return u+"==";case 3:return u+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:a._decompress(l.length,32,function(u){return s(o,l.charAt(u))})},compressToUTF16:function(l){return l==null?"":a._compress(l,15,function(u){return n(u+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:a._decompress(l.length,16384,function(u){return l.charCodeAt(u)-32})},compressToUint8Array:function(l){for(var u=a.compress(l),d=new Uint8Array(u.length*2),h=0,p=u.length;h<p;h++){var g=u.charCodeAt(h);d[h*2]=g>>>8,d[h*2+1]=g%256}return d},decompressFromUint8Array:function(l){if(l==null)return a.decompress(l);for(var u=new Array(l.length/2),d=0,h=u.length;d<h;d++)u[d]=l[d*2]*256+l[d*2+1];var p=[];return u.forEach(function(g){p.push(n(g))}),a.decompress(p.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":a._compress(l,6,function(u){return i.charAt(u)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),a._decompress(l.length,32,function(u){return s(i,l.charAt(u))}))},compress:function(l){return a._compress(l,16,function(u){return n(u)})},_compress:function(l,u,d){if(l==null)return"";var h,p,g={},v={},T="",E="",S="",y=2,x=3,w=2,I=[],C=0,N=0,_;for(_=0;_<l.length;_+=1)if(T=l.charAt(_),Object.prototype.hasOwnProperty.call(g,T)||(g[T]=x++,v[T]=!0),E=S+T,Object.prototype.hasOwnProperty.call(g,E))S=E;else{if(Object.prototype.hasOwnProperty.call(v,S)){if(S.charCodeAt(0)<256){for(h=0;h<w;h++)C=C<<1,N==u-1?(N=0,I.push(d(C)),C=0):N++;for(p=S.charCodeAt(0),h=0;h<8;h++)C=C<<1|p&1,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=p>>1}else{for(p=1,h=0;h<w;h++)C=C<<1|p,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=0;for(p=S.charCodeAt(0),h=0;h<16;h++)C=C<<1|p&1,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=p>>1}y--,y==0&&(y=Math.pow(2,w),w++),delete v[S]}else for(p=g[S],h=0;h<w;h++)C=C<<1|p&1,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=p>>1;y--,y==0&&(y=Math.pow(2,w),w++),g[E]=x++,S=String(T)}if(S!==""){if(Object.prototype.hasOwnProperty.call(v,S)){if(S.charCodeAt(0)<256){for(h=0;h<w;h++)C=C<<1,N==u-1?(N=0,I.push(d(C)),C=0):N++;for(p=S.charCodeAt(0),h=0;h<8;h++)C=C<<1|p&1,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=p>>1}else{for(p=1,h=0;h<w;h++)C=C<<1|p,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=0;for(p=S.charCodeAt(0),h=0;h<16;h++)C=C<<1|p&1,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=p>>1}y--,y==0&&(y=Math.pow(2,w),w++),delete v[S]}else for(p=g[S],h=0;h<w;h++)C=C<<1|p&1,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=p>>1;y--,y==0&&(y=Math.pow(2,w),w++)}for(p=2,h=0;h<w;h++)C=C<<1|p&1,N==u-1?(N=0,I.push(d(C)),C=0):N++,p=p>>1;for(;;)if(C=C<<1,N==u-1){I.push(d(C));break}else N++;return I.join("")},decompress:function(l){return l==null?"":l==""?null:a._decompress(l.length,32768,function(u){return l.charCodeAt(u)})},_decompress:function(l,u,d){var h=[],p=4,g=4,v=3,T="",E=[],S,y,x,w,I,C,N,_={val:d(0),position:u,index:1};for(S=0;S<3;S+=1)h[S]=S;for(x=0,I=Math.pow(2,2),C=1;C!=I;)w=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),x|=(w>0?1:0)*C,C<<=1;switch(x){case 0:for(x=0,I=Math.pow(2,8),C=1;C!=I;)w=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),x|=(w>0?1:0)*C,C<<=1;N=n(x);break;case 1:for(x=0,I=Math.pow(2,16),C=1;C!=I;)w=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),x|=(w>0?1:0)*C,C<<=1;N=n(x);break;case 2:return""}for(h[3]=N,y=N,E.push(N);;){if(_.index>l)return"";for(x=0,I=Math.pow(2,v),C=1;C!=I;)w=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),x|=(w>0?1:0)*C,C<<=1;switch(N=x){case 0:for(x=0,I=Math.pow(2,8),C=1;C!=I;)w=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),x|=(w>0?1:0)*C,C<<=1;h[g++]=n(x),N=g-1,p--;break;case 1:for(x=0,I=Math.pow(2,16),C=1;C!=I;)w=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),x|=(w>0?1:0)*C,C<<=1;h[g++]=n(x),N=g-1,p--;break;case 2:return E.join("")}if(p==0&&(p=Math.pow(2,v),v++),h[N])T=h[N];else if(N===g)T=y+y.charAt(0);else return null;E.push(T),h[g++]=y+T.charAt(0),p--,y=T,p==0&&(p=Math.pow(2,v),v++)}}};return a}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(jS);var YD=jS.exports;const WS=G0(YD),is=({title:e,icon:t,player:n,gradientClass:o,borderColorClass:i,glowColor:r,desc:s})=>m.jsxs("div",{className:`relative w-full overflow-hidden rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-1 border-t border-white/20 ${o} group`,children:[m.jsx("div",{className:"absolute -top-12 -right-12 w-48 h-48 bg-white opacity-10 rounded-full blur-3xl pointer-events-none"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-full h-3/4 bg-gradient-to-t from-black/60 via-black/20 to-transparent pointer-events-none"}),m.jsxs("div",{className:"relative z-10 flex flex-col items-center p-5 text-center",children:[m.jsxs("div",{className:"w-full flex justify-center items-center relative mb-4",children:[m.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 text-white/80 group-hover:text-white group-hover:scale-110 transition-all duration-500 filter drop-shadow-md",children:t}),m.jsx("h3",{className:"text-2xl font-black text-white tracking-wider drop-shadow-md",children:e})]}),m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full mb-3",children:[m.jsxs("div",{className:"relative mb-3",children:[m.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full blur-md transform scale-110 group-hover:scale-125 transition duration-700"}),m.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white/90 relative z-10 shadow-2xl bg-slate-200 dark:bg-slate-700",children:n.avatar.startsWith("data:")?m.jsx("img",{src:n.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-4xl text-slate-500",children:n.name[0]})}),m.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-white text-slate-900 text-xs font-bold px-3 py-0.5 rounded-full shadow-lg z-20 border border-slate-200 whitespace-nowrap",children:n.mbti})]}),m.jsx("div",{className:"text-3xl font-bold text-white drop-shadow-md mt-2",children:n.name})]}),m.jsx("div",{className:"w-full bg-black/20 backdrop-blur-md border border-white/10 rounded-xl p-2.5 flex items-center justify-center",children:m.jsx("p",{className:"text-xs text-white/90 font-medium leading-snug",children:s})})]})]}),U0=({players:e,report:t,onReturnHome:n,startTime:o,gameMode:i})=>{const[r,s]=k.useState({awards:!0,group:!1,winner:!1}),[a,l]=k.useState({}),[u,d]=k.useState(!1);`${window.location.origin}${window.location.pathname}${WS.compressToEncodedURIComponent(JSON.stringify({players:e,report:t,startTime:o,gameMode:i}))}`;const h=[...e].sort((y,x)=>x.trustScore+x.insightScore+x.expressionScore-(y.trustScore+y.insightScore+y.expressionScore)),p=h[0],g=y=>[...e].sort((x,w)=>w[y]-x[y])[0],v=[...e].sort((y,x)=>x.totalRatingGiven-y.totalRatingGiven)[0],T=y=>{s(x=>({...x,[y]:!x[y]}))},E=y=>{l(x=>({...x,[y]:!x[y]}))},S=()=>{const y=new Date(o).toLocaleString("zh-CN"),x=Math.floor((Date.now()-o)/6e4),w=`
        <!DOCTYPE html>
        <html lang="zh-CN">
        <head>
            <meta charset="UTF-8">
            <title> -  (${y})</title>
            <style>
                body { font-family: sans-serif; background: #0f172a; color: #e2e8f0; padding: 40px; max-width: 800px; margin: 0 auto; }
                h1, h2 { color: #2dd4bf; border-bottom: 1px solid #334155; padding-bottom: 10px; }
                .card { background: #1e293b; padding: 20px; margin-bottom: 20px; border-radius: 12px; border: 1px solid #334155; }
                .highlight { color: #f59e0b; font-weight: bold; }
                .player-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; padding: 10px; background: #0f172a; border-radius: 8px; }
                .tag { font-size: 0.8em; padding: 2px 8px; border-radius: 12px; background: #334155; }
            </style>
        </head>
        <body>
            <h1>  - </h1>
            <div class="card">
                <p><strong>:</strong> ${y}</p>
                <p><strong>:</strong> ${x} </p>
                <p><strong>:</strong> ${i}</p>
                <p><strong>:</strong> ${e.length} </p>
            </div>

            <h2> </h2>
            <div class="card">
                <p> <strong> ():</strong> ${p.name}</p>
                <p> <strong> ():</strong> ${g("trustScore").name}</p>
                <p> <strong> ():</strong> ${g("insightScore").name}</p>
                <p> <strong> ():</strong> ${g("expressionScore").name}</p>
                <p> <strong> ():</strong> ${v.name}</p>
            </div>

            <h2> </h2>
            <div class="card">
                <p>${t.groupAnalysis}</p>
            </div>

            <h2> </h2>
            ${h.map(_=>`
                <div class="card">
                    <div class="player-row">
                        <strong>${_.name}</strong> <span class="tag">${_.mbti}</span>
                        <span style="margin-left:auto" class="highlight">: ${_.trustScore+_.insightScore+_.expressionScore}</span>
                    </div>
                    <p><em>"${t.playerAnalysis[_.id]||"..."}"</em></p>
                    <p style="font-size: 0.9em; opacity: 0.8">
                        : ${_.trustScore} | : ${_.insightScore} | : ${_.expressionScore}
                    </p>
                </div>
            `).join("")}
            
            <footer style="text-align: center; margin-top: 40px; color: #64748b; font-size: 0.8em;">
                Generated by Rainbow Boat
            </footer>
        </body>
        </html>
      `,I=new Blob([w],{type:"text/html"}),C=URL.createObjectURL(I),N=document.createElement("a");N.href=C,N.download=`__${new Date().toISOString().slice(0,10)}.html`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(C)};return m.jsx("div",{className:"min-h-screen w-full overflow-y-auto p-8 bg-slate-50/80 dark:bg-slate-900/80 text-slate-800 dark:text-white custom-scrollbar transition-colors duration-300 backdrop-blur-sm",children:m.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-20",children:[m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx(he.div,{initial:{scale:0},animate:{scale:1},className:"inline-block p-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full shadow-lg mb-4",children:m.jsx(Ul,{size:48,className:"text-white"})}),m.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-[linear-gradient(to_right,#ef4444,#f97316,#eab308,#22c55e,#3b82f6,#a855f7)]",children:"  "}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-light tracking-wide",children:"  "})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center gap-2 px-2",children:[m.jsx(EP,{className:"text-teal-600 dark:text-teal-400"}),m.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:""})]}),m.jsx(Gt,{children:r.awards&&m.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx(is,{title:"",icon:m.jsx(RP,{size:32}),player:g("trustScore"),gradientClass:"bg-gradient-to-br from-blue-400 to-blue-600",borderColorClass:"border-blue-300",glowColor:"#60a5fa",desc:`: ${g("trustScore").trustScore} - `}),m.jsx(is,{title:"",icon:m.jsx(VP,{size:32}),player:g("insightScore"),gradientClass:"bg-gradient-to-br from-purple-400 to-purple-600",borderColorClass:"border-purple-300",glowColor:"#a855f7",desc:`: ${g("insightScore").insightScore} - `}),m.jsx(is,{title:"",icon:m.jsx(li,{size:32}),player:g("expressionScore"),gradientClass:"bg-gradient-to-br from-orange-400 to-red-500",borderColorClass:"border-orange-300",glowColor:"#f97316",desc:`: ${g("expressionScore").expressionScore} - `}),m.jsx(is,{title:"",icon:m.jsx(MP,{size:32}),player:v,gradientClass:"bg-gradient-to-br from-pink-400 to-rose-600",borderColorClass:"border-pink-300",glowColor:"#ec4899",desc:`: ${v.totalRatingGiven} - `})]})}),m.jsx("div",{className:"mt-12 flex justify-center",children:m.jsx("button",{onClick:()=>T("winner"),className:"relative group w-full max-w-3xl",children:m.jsx("div",{className:`w-full p-1 rounded-3xl transition-all duration-500 transform hover:scale-[1.02] ${r.winner?"bg-gradient-to-r from-yellow-300 via-amber-400 to-yellow-300 animate-pulse":"bg-slate-200 dark:bg-slate-700"}`,children:m.jsx("div",{className:`w-full h-full p-8 rounded-[22px] border-2 flex flex-col items-center shadow-2xl relative overflow-hidden ${r.winner?"bg-slate-50 dark:bg-slate-900 border-transparent":"bg-slate-100 dark:bg-slate-800 border-dashed border-slate-300 dark:border-slate-600"}`,children:r.winner?m.jsxs(he.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"relative z-10 flex flex-col md:flex-row items-center gap-10 w-full justify-center",children:[m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-yellow-500/20 rounded-full blur-3xl -z-10"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-40 h-40 rounded-full overflow-hidden border-[6px] border-yellow-400 shadow-[0_0_30px_rgba(251,191,36,0.6)]",children:p.avatar.startsWith("data:")?m.jsx("img",{src:p.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 w-full h-full flex items-center justify-center font-bold text-5xl",children:p.name[0]})}),m.jsx("div",{className:"absolute -top-6 -right-6 text-7xl drop-shadow-lg filter animate-bounce",children:""})]}),m.jsxs("div",{className:"text-center md:text-left",children:[m.jsx("div",{className:"text-amber-500 dark:text-amber-400 font-black text-2xl mb-2 uppercase tracking-[0.2em]",children:""}),m.jsx("div",{className:"text-5xl font-black text-slate-900 dark:text-white mb-4 drop-shadow-sm",children:p.name}),m.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[m.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700",children:m.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-white",children:p.mbti})}),m.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 px-4 py-2 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[m.jsx("span",{className:"text-sm text-yellow-600 dark:text-yellow-500 mr-2",children:""}),m.jsx("span",{className:"text-2xl font-black text-yellow-600 dark:text-yellow-400",children:p.trustScore+p.insightScore+p.expressionScore})]})]})]})]}):m.jsxs("div",{className:"py-8 flex flex-col items-center text-slate-500 dark:text-slate-400",children:[m.jsx(wa,{size:48,className:"mb-4 text-slate-400 dark:text-slate-500"}),m.jsx("span",{className:"font-bold text-xl",children:""})]})})})})})]}),m.jsxs("div",{className:"space-y-4 pt-8 border-t border-slate-200 dark:border-slate-700/50",children:[m.jsxs("button",{onClick:()=>T("group"),className:"w-full flex items-center justify-between p-6 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 hover:border-teal-500 transition group",children:[m.jsxs("span",{className:"font-bold text-xl flex items-center gap-3 text-teal-600 dark:text-teal-400 group-hover:scale-105 transition-transform",children:[m.jsx(xP,{})," "]}),r.group?m.jsx(wP,{}):m.jsx(wa,{size:18,className:"text-slate-400"})]}),m.jsx(Gt,{children:r.group&&m.jsx(he.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:m.jsx("div",{className:"text-slate-700 dark:text-slate-200 leading-relaxed text-lg bg-slate-50 dark:bg-slate-900/80 p-8 rounded-2xl border border-slate-200 dark:border-slate-700/50 shadow-inner whitespace-pre-wrap",children:t.groupAnalysis||"AI ..."})})})]}),m.jsxs("div",{className:"space-y-4 pt-4",children:[m.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-blue-600 dark:text-blue-400 px-2",children:[m.jsx(Qu,{}),"  ()"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((y,x)=>m.jsxs(he.div,{className:`bg-white dark:bg-slate-800/60 backdrop-blur rounded-xl border transition-all duration-300 ${a[y.id]?"border-teal-500 shadow-lg ring-1 ring-teal-500/20":"border-slate-200 dark:border-slate-700 hover:border-slate-400"}`,children:[m.jsxs("button",{onClick:()=>E(y.id),className:"w-full p-4 flex items-center gap-4 text-left",children:[m.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden bg-slate-200 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 shrink-0 shadow-sm",children:y.avatar.startsWith("data:")?m.jsx("img",{src:y.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-xl",children:y.name[0]})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:y.name}),m.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-900 text-slate-600 dark:text-slate-400 px-2 py-1 rounded-full font-mono border border-slate-200 dark:border-slate-700",children:y.mbti})]}),m.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:a[y.id]?m.jsxs(m.Fragment,{children:[m.jsx(BP,{size:12,className:"text-teal-500"})," "]}):m.jsxs(m.Fragment,{children:[m.jsx(wa,{size:12})," ..."]})})]})]}),m.jsx(Gt,{children:a[y.id]&&m.jsx(he.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden px-4 pb-4 border-t border-slate-100 dark:border-slate-700/50",children:m.jsxs("div",{className:"pt-4",children:[m.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300 italic mb-4 bg-slate-50 dark:bg-slate-900/30 p-4 rounded-lg border-l-4 border-teal-500 whitespace-pre-wrap leading-relaxed",children:['"',t.playerAnalysis[y.id]||"AI ...",'"']}),m.jsxs("div",{className:"flex gap-2 text-xs font-mono opacity-90",children:[m.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded",children:[": ",y.trustScore]}),m.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-1 rounded",children:[": ",y.insightScore]}),m.jsxs("span",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-1 rounded",children:[": ",y.expressionScore]})]})]})})})]},y.id))})]}),m.jsxs("div",{className:"flex justify-center pt-8 gap-4",children:[m.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 text-white px-6 py-3 rounded-full font-bold transition shadow-lg border border-slate-600",children:[m.jsx(Xv,{size:20})," "]}),m.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-full font-bold transition shadow-lg border border-purple-400",children:[m.jsx(Sm,{size:20})," "]}),m.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-gradient-to-r from-teal-600 to-blue-600 hover:from-teal-500 hover:to-blue-500 text-white px-8 py-3 rounded-full font-bold transition shadow-lg transform hover:scale-105",children:[m.jsx(bP,{size:20})," "]})]}),u&&m.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/95 backdrop-blur-md p-4 animate-in fade-in duration-300",children:m.jsxs("div",{className:"w-full max-w-5xl h-[85vh] flex flex-col bg-slate-800 rounded-3xl overflow-hidden shadow-2xl border border-slate-700",children:[m.jsxs("div",{className:"p-6 border-b border-slate-700 flex justify-between items-center bg-slate-800 z-10",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[m.jsx(Sm,{className:"text-purple-500"}),"   "]}),m.jsx("p",{className:"text-slate-400 text-sm mt-1",children:""})]}),m.jsxs("button",{onClick:()=>d(!1),className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-full font-bold transition",children:[m.jsx(Vl,{size:20})," "]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(y=>{const x=`  - 


${t.groupAnalysis}

${y.name} 
${t.playerAnalysis[y.id]||""}

[]: ${y.trustScore+y.insightScore+y.expressionScore}
(:${y.trustScore} | :${y.insightScore} | :${y.expressionScore})`;return m.jsxs("div",{className:"bg-slate-900 rounded-2xl p-6 border border-slate-700 flex flex-col items-center gap-4 hover:border-purple-500 transition-colors group",children:[m.jsxs("div",{className:"flex items-center gap-4 w-full",children:[m.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-slate-800 border border-slate-600",children:y.avatar.startsWith("data:")?m.jsx("img",{src:y.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-lg text-white",children:y.name[0]})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-bold text-white text-lg",children:y.name}),m.jsx("div",{className:"text-xs text-purple-400 font-mono",children:y.mbti})]})]}),m.jsx("div",{className:"p-3 bg-white rounded-xl shadow-inner mt-2",children:m.jsx(JS,{value:x,size:180,level:"M",includeMargin:!1})}),m.jsxs("p",{className:"text-xs text-slate-500 text-center",children:["",m.jsx("br",{}),m.jsxs("span",{className:"text-purple-400",children:['"',y.name,'"']})," "]})]},y.id)})})})]})})]})})};let Yt=[];const Ic=()=>{const e=window.speechSynthesis.getVoices();Yt=e.filter(t=>t.lang==="zh-CN"||t.lang.includes("zh-SG")),Yt.length===0&&(Yt=e.filter(t=>t.lang.toLowerCase().includes("zh")&&!t.lang.toLowerCase().includes("hk")&&!t.lang.toLowerCase().includes("mo"))),Yt.length===0&&(Yt=e.filter(t=>t.lang.toLowerCase().includes("zh")))};typeof window<"u"&&window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=Ic),Ic());const XD=(e,t="system")=>{if(!window.speechSynthesis)return;window.speechSynthesis.cancel(),Yt.length===0&&Ic();const n=new SpeechSynthesisUtterance(e);if(n.rate=1.2,n.pitch=1,Yt.length>0)if(t==="system")n.voice=Yt[0];else{let o=0;for(let r=0;r<t.length;r++)o=t.charCodeAt(r)+((o<<5)-o);const i=Math.abs(o)%Yt.length;n.voice=Yt[i],n.pitch=.8+Math.abs(o)%5/10}window.speechSynthesis.speak(n)};let Tt=null;const pf=()=>"webkitSpeechRecognition"in window||"SpeechRecognition"in window,KS=(e,t)=>{if(!pf())return null;const n=window.SpeechRecognition||window.webkitSpeechRecognition;Tt=new n,Tt.continuous=!0,Tt.interimResults=!0,Tt.lang="zh-CN",Tt.onresult=o=>{let i="";for(let r=o.resultIndex;r<o.results.length;++r)o.results[r].isFinal&&(i+=o.results[r][0].transcript);i&&e(i)},Tt.onerror=o=>{console.warn("Speech recognition error",o.error)},Tt.onend=()=>{t()};try{Tt.start()}catch{console.warn("Speech recognition already started")}return Tt},Nc=()=>{Tt&&(Tt.stop(),Tt=null)},QD=({onSelectMode:e,isMobile:t})=>{const n=[{id:"test",title:"AI ",desc:" AI ",icon:m.jsx(li,{className:"text-teal-400",size:32}),color:"from-teal-600/20 to-emerald-600/20",borderColor:"border-teal-500/30",tag:"",tagColor:"bg-teal-500"},{id:"tasks",title:"",desc:"",icon:m.jsx(Ul,{className:"text-amber-400",size:32}),color:"from-amber-600/20 to-orange-600/20",borderColor:"border-amber-500/30",tag:"",tagColor:"bg-amber-500"},{id:"party",title:" Party",desc:"",icon:m.jsx(Zv,{className:"text-blue-400",size:32}),color:"from-blue-600/20 to-indigo-600/20",borderColor:"border-blue-500/30",tag:"",tagColor:"bg-blue-500"}];return m.jsxs("div",{className:`min-h-screen flex flex-col items-center py-12 px-6 relative gpu-accelerated ${t?"overflow-y-auto":"overflow-hidden"}`,children:[m.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-500/10 rounded-full blur-[120px] pointer-events-none"}),m.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[120px] pointer-events-none"}),m.jsxs(he.div,{initial:t?{opacity:0}:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12 relative z-10",children:[m.jsx("h1",{className:"text-5xl md:text-6xl font-black mb-4 tracking-tighter",children:m.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-red-400 via-yellow-400 via-green-400 via-blue-400 to-purple-400",children:"MBTI Hub"})}),m.jsx("p",{className:"text-slate-400 text-lg md:text-xl font-medium",children:""})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl relative z-10",children:n.map((o,i)=>m.jsxs(he.button,{initial:t?{opacity:0}:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:i*.1},whileHover:t?{}:{y:-8,scale:1.02},onClick:()=>e(o.id),className:`group relative flex flex-col text-left p-8 rounded-3xl border ${o.borderColor} bg-slate-900/40 backdrop-blur-xl overflow-hidden transition-all gpu-accelerated`,children:[m.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${o.color} opacity-0 group-hover:opacity-100 transition-opacity`}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-start mb-6",children:[m.jsx("div",{className:"p-4 bg-slate-800/50 rounded-2xl group-hover:scale-110 transition-transform",children:o.icon}),m.jsx("span",{className:`${o.tagColor} text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest`,children:o.tag})]}),m.jsx("h3",{className:"text-2xl font-bold text-white mb-3 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:to-slate-400 transition-all",children:o.title}),m.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 min-h-[4rem]",children:o.desc}),m.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-slate-300 group-hover:text-white group-hover:gap-4 transition-all",children:[" ",m.jsx(mr,{size:16})]})]})]},o.id))}),m.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-16 flex items-center gap-2 text-slate-500 text-sm bg-slate-800/20 px-6 py-3 rounded-full border border-slate-700/30",children:[m.jsx(DP,{size:16}),m.jsx("span",{children:"Jungian Functions"})]})]})};let Zo=null,V0=null,To=null,Xi=null,_c;const hf=async e=>{try{Xi=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),Zo=new(window.AudioContext||window.webkitAudioContext),To=Zo.createAnalyser(),To.fftSize=256,V0=Zo.createMediaStreamSource(Xi),V0.connect(To);const t=new Uint8Array(To.frequencyBinCount),n=()=>{if(!To)return;To.getByteFrequencyData(t);let o=0;for(let s=0;s<t.length;s++)o+=t[s];const r=o/t.length/255;e(r),_c=requestAnimationFrame(n)};n()}catch(t){console.error("Audio monitoring failed",t)}},fl=()=>{_c&&cancelAnimationFrame(_c),Xi&&(Xi.getTracks().forEach(e=>e.stop()),Xi=null),Zo&&(Zo.close(),Zo=null)},ZD=({onBack:e,isMobile:t})=>{const[n,o]=k.useState("INTJ"),[i,r]=k.useState(0),[s,a]=k.useState(null),[l,u]=k.useState(!1),[d,h]=k.useState(null),[p,g]=k.useState("SELECTING"),[v,T]=k.useState(0),[E,S]=k.useState(""),[y,x]=k.useState(!1),[w,I]=k.useState(0),[C,N]=k.useState(!1),_=k.useRef(null),M=k.useRef(null),[b,B]=k.useState(""),[ne,Q]=k.useState(null),oe=vs[n]||[],pe=oe[i]||"Te",de=bu.find(V=>V.id===pe),Z={id:"solo-user",name:"",mbti:n,isBot:!1,avatar:"user",trustScore:0,insightScore:0,expressionScore:0,totalRatingGiven:0,position:0,previousPosition:null,stackIndex:i,skipUsedCount:0,color:"teal"},D=async(V,J)=>{u(!0),h(null),g("SELECTING");try{const te=await Wu(V,[Z],{...Z,mbti:J});a(te)}catch(te){console.error(te)}finally{u(!1)}};k.useEffect(()=>{D(pe,n)},[pe,n]),k.useEffect(()=>{let V;return p==="EXECUTING"&&v>0?V=setInterval(()=>{T(J=>J-1)},1e3):v===0&&p==="EXECUTING"&&$(),()=>clearInterval(V)},[p,v]),k.useEffect(()=>{p==="EXECUTING"?(hf(V=>I(V)),pf()&&(x(!0),KS(V=>S(J=>J+" "+V),()=>x(!1)))):(fl(),Nc(),x(!1))},[p]),k.useEffect(()=>{let V=null;return C&&(p==="SELECTING"||p==="EXECUTING")&&navigator.mediaDevices.getUserMedia({video:!0}).then(J=>{V=J,_.current&&(_.current.srcObject=J)}).catch(J=>{console.error("Camera error:",J),N(!1)}),()=>{V&&V.getTracks().forEach(J=>J.stop())}},[C,p]);const O=V=>{h(V),T(V.durationSeconds),S(""),g("EXECUTING")},$=async()=>{g("FEEDBACK"),u(!0);let V="";if(C&&_.current&&M.current&&d){const te=M.current.getContext("2d");if(te){te.drawImage(_.current,0,0,300,300);const H=M.current.toDataURL("image/jpeg");V=await Wv(H,d.title)}}const J=await pP(Z,d,E,V);Q(J),u(!1)},se=()=>{const V=(i+1)%oe.length;r(V),Q(null),h(null),g("SELECTING")};return m.jsxs("div",{className:`min-h-screen bg-slate-950 text-white p-6 flex flex-col relative gpu-accelerated ${t?"overflow-y-auto":"overflow-hidden"}`,children:[m.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-blue-500/10 rounded-full blur-[120px] pointer-events-none"}),m.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[120px] pointer-events-none"}),m.jsxs("div",{className:`max-w-6xl mx-auto w-full flex-1 flex flex-col relative z-10 ${t?"gap-4":""}`,children:[m.jsxs("header",{className:"flex items-center justify-between mb-8 shrink-0",children:[m.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-400 hover:text-white transition group",children:[m.jsx(TP,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"  Hub"]}),m.jsxs("div",{className:"flex items-center gap-4 bg-slate-900/50 p-1.5 rounded-2xl border border-slate-800",children:[m.jsxs("div",{className:"flex items-center gap-2 px-3",children:[m.jsx(FP,{size:16,className:"text-teal-400"}),m.jsx("select",{value:n,onChange:V=>{o(V.target.value),r(0)},className:"bg-transparent text-sm font-bold outline-none cursor-pointer",children:Ys.map(V=>m.jsx("option",{value:V,className:"bg-slate-900",children:V},V))})]}),m.jsx("div",{className:"h-6 w-px bg-slate-800"}),m.jsx("button",{onClick:()=>N(!C),className:`p-2 rounded-xl transition-all ${C?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-slate-800 text-slate-500 hover:bg-slate-700"}`,title:C?"":"",children:C?m.jsx(n2,{size:18}):m.jsx(t2,{size:18})}),m.jsx("button",{onClick:()=>D(pe,n),className:"p-2 hover:bg-slate-800 rounded-xl transition",title:"",children:m.jsx(Qv,{size:18,className:l&&p==="SELECTING"?"animate-spin":""})})]})]}),m.jsx("div",{className:"flex items-center gap-2 mb-10 overflow-x-auto no-scrollbar pb-2",children:oe.map((V,J)=>{const te=J===i,H=J<i,Y=bu.find(ce=>ce.id===V);return m.jsxs(Ae.Fragment,{children:[m.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[70px]",children:[m.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-xs font-black transition-all duration-500 border-2 ${te?"bg-teal-500 border-white scale-110 shadow-[0_0_20px_rgba(20,184,166,0.5)]":H?"bg-slate-800 border-teal-500/50 text-teal-400":"bg-slate-900 border-slate-800 text-slate-600"}`,children:V}),m.jsx("span",{className:`text-[10px] font-bold ${te?"text-teal-400":"text-slate-600"}`,children:Y==null?void 0:Y.name.slice(-2)})]}),J<oe.length-1&&m.jsx("div",{className:`h-px w-8 ${J<i?"bg-teal-500/50":"bg-slate-800"}`})]},V)})}),m.jsx("div",{className:"flex-1 flex flex-col items-center justify-center min-h-0",children:m.jsxs(Gt,{mode:"wait",children:[p==="SELECTING"&&m.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsxs("span",{className:"px-4 py-1.5 bg-teal-500/10 border border-teal-500/20 rounded-full text-teal-400 text-xs font-bold tracking-widest uppercase mb-4 inline-block",children:["LEVEL ",i+1,": ",de==null?void 0:de.name," "]}),m.jsx("h2",{className:"text-3xl font-black mb-2",children:""}),m.jsxs("p",{className:"text-slate-400",children:[" ",pe," "]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-5xl mx-auto",children:l?Array.from({length:4}).map((V,J)=>m.jsx("div",{className:"h-44 bg-slate-900/50 rounded-3xl border border-slate-800 animate-pulse"},J)):s&&Object.entries(s).map(([V,J])=>{const te=Ko[V];return m.jsxs(he.button,{whileHover:{scale:1.02,y:-4},onClick:()=>O(J),className:`p-6 rounded-3xl border ${te.color} bg-opacity-5 hover:bg-opacity-10 text-left transition-all group relative overflow-hidden`,children:[m.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:m.jsx("div",{className:"text-8xl",children:te.icon})}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx("div",{className:"text-3xl",children:te.icon}),m.jsx("div",{className:"px-2 py-0.5 bg-white/10 rounded text-[10px] font-bold uppercase tracking-widest",children:te.name})]}),m.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-teal-400 transition-colors",children:J.title}),m.jsx("p",{className:"text-slate-400 text-sm line-clamp-2 leading-relaxed",children:J.description})]})]},V)})})]},"selecting"),p==="EXECUTING"&&d&&m.jsxs(he.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full flex flex-col lg:flex-row gap-8 items-stretch max-w-6xl",children:[m.jsxs("div",{className:"flex-1 bg-slate-900/80 backdrop-blur-xl border border-slate-800 rounded-[2.5rem] p-8 md:p-12 flex flex-col shadow-2xl",children:[m.jsxs("div",{className:"flex justify-between items-start mb-8",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-3xl font-black mb-2 text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500",children:["",d.title]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("span",{className:"px-3 py-1 bg-white/5 rounded-full text-xs font-bold text-slate-400 flex items-center gap-1.5",children:[m.jsx(QP,{size:14,className:"text-teal-400"})," ",de==null?void 0:de.name]}),m.jsxs("span",{className:"px-3 py-1 bg-white/5 rounded-full text-xs font-bold text-slate-400 flex items-center gap-1.5",children:[m.jsx(li,{size:14,className:"text-amber-400"})," ",d.scoreType]})]})]}),m.jsxs("div",{className:"w-20 h-20 rounded-2xl bg-slate-800 border-2 border-teal-500/30 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"text-xs font-bold text-teal-400 uppercase",children:""}),m.jsxs("span",{className:"text-2xl font-black",children:[v,"s"]})]})]}),m.jsxs("p",{className:"text-2xl text-slate-200 leading-relaxed italic mb-12 text-center md:text-left",children:['"',d.description,'"']}),m.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[m.jsxs("div",{className:"relative flex-1 bg-black/40 border border-slate-800 rounded-3xl p-6 min-h-[200px]",children:[y&&m.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2 text-red-500 animate-pulse text-xs font-bold",children:[m.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})," "]}),m.jsx("textarea",{className:"w-full h-full bg-transparent resize-none outline-none text-xl leading-relaxed placeholder:text-slate-700 font-medium",placeholder:"...",value:E,onChange:V=>S(V.target.value)}),m.jsx("div",{className:"absolute bottom-6 left-6 right-6 h-8 flex items-end gap-1 pointer-events-none",children:Array.from({length:40}).map((V,J)=>m.jsx("div",{className:"flex-1 bg-teal-500/20 rounded-t-sm",style:{height:`${Math.random()*w*100}%`}},J))})]}),m.jsxs("button",{onClick:$,className:"w-full py-5 bg-gradient-to-r from-teal-500 to-blue-600 rounded-2xl font-black text-white text-xl shadow-lg hover:shadow-teal-500/20 transition-all flex items-center justify-center gap-3",children:[" ",m.jsx(mr,{size:24})]})]})]}),C&&m.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[m.jsxs("div",{className:"aspect-square md:aspect-auto md:flex-1 bg-black rounded-[2.5rem] border border-slate-800 overflow-hidden relative group",children:[m.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),m.jsxs("div",{className:"absolute inset-0 pointer-events-none border-[20px] border-transparent",children:[m.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-teal-500/50"}),m.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-teal-500/50"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-teal-500/50"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-teal-500/50"})]}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:m.jsxs("div",{className:"flex items-center gap-2 text-teal-400 font-bold text-xs uppercase tracking-widest",children:[m.jsx(Ku,{size:14})," AI "]})})]}),m.jsx("div",{className:"bg-slate-900/50 p-6 rounded-3xl border border-slate-800 text-xs text-slate-500 italic leading-relaxed",children:"AI "})]})]},"executing"),p==="FEEDBACK"&&m.jsx(he.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full max-w-3xl",children:l?m.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] p-16 flex flex-col items-center justify-center text-center",children:[m.jsxs("div",{className:"w-20 h-20 mb-8 relative",children:[m.jsx("div",{className:"absolute inset-0 border-4 border-teal-500/20 rounded-full"}),m.jsx("div",{className:"absolute inset-0 border-4 border-teal-500 border-t-transparent rounded-full animate-spin"})]}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"..."}),m.jsx("p",{className:"text-slate-500",children:"AI "})]}):ne&&m.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] overflow-hidden shadow-2xl",children:[m.jsxs("div",{className:"p-10 bg-gradient-to-br from-teal-500/20 to-blue-500/20 border-b border-slate-800 text-center relative",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("div",{className:"w-20 h-20 bg-teal-500 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(20,184,166,0.5)]",children:m.jsx(IP,{size:40,className:"text-white"})})}),m.jsx("h2",{className:"text-3xl font-black mb-1",children:""}),m.jsx("p",{className:"text-teal-400 font-bold uppercase tracking-widest text-sm",children:"COGNITIVE EVOLUTION ACHIEVED"})]}),m.jsxs("div",{className:"p-10",children:[m.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-10",children:[m.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl text-center",children:[m.jsx("div",{className:"text-xs font-bold text-slate-500 mb-1 uppercase",children:" (Trust)"}),m.jsx("div",{className:"flex justify-center gap-1",children:Array.from({length:5}).map((V,J)=>m.jsx(Ts,{size:14,fill:J<ne.scores.trust?"#14b8a6":"none",stroke:J<ne.scores.trust?"#14b8a6":"#475569"},J))})]}),m.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl text-center",children:[m.jsx("div",{className:"text-xs font-bold text-slate-500 mb-1 uppercase",children:" (Insight)"}),m.jsx("div",{className:"flex justify-center gap-1",children:Array.from({length:5}).map((V,J)=>m.jsx(Ts,{size:14,fill:J<ne.scores.insight?"#a855f7":"none",stroke:J<ne.scores.insight?"#a855f7":"#475569"},J))})]}),m.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl text-center",children:[m.jsx("div",{className:"text-xs font-bold text-slate-500 mb-1 uppercase",children:" (Exp)"}),m.jsx("div",{className:"flex justify-center gap-1",children:Array.from({length:5}).map((V,J)=>m.jsx(Ts,{size:14,fill:J<ne.scores.expression?"#f59e0b":"none",stroke:J<ne.scores.expression?"#f59e0b":"#475569"},J))})]})]}),m.jsxs("div",{className:"p-8 bg-slate-800/30 border border-slate-700/50 rounded-3xl mb-10 relative",children:[m.jsx(Ku,{className:"absolute -top-4 -left-4 text-teal-400 opacity-20",size:48}),m.jsx("h4",{className:"text-teal-400 font-black mb-4 flex items-center gap-2 italic uppercase tracking-tighter bg-teal-400/10 px-3 py-1 rounded-lg w-fit",children:" / Soul Feedback"}),m.jsxs("p",{className:"text-xl text-slate-200 leading-relaxed italic",children:['"',ne.feedback,'"']})]}),m.jsxs("button",{onClick:se,className:"w-full py-5 bg-white text-slate-900 rounded-2xl font-black text-xl hover:bg-slate-200 transition-all flex items-center justify-center gap-3",children:["",oe[(i+1)%oe.length]," ",m.jsx(mr,{size:24})]})]})]})},"feedback")]})})]}),m.jsx("canvas",{ref:M,width:"300",height:"300",className:"hidden"})]})},rs=["#ef4444","#f97316","#eab308","#84cc16","#06b6d4","#8b5cf6","#d946ef","#f43f5e","#be123c","#0f766e","#1d4ed8","#4338ca","#a21caf","#be185d","#881337","#7c2d12"],eL=()=>Ys[Math.floor(Math.random()*Ys.length)],tL=({value:e,rolling:t})=>m.jsxs("div",{className:"relative w-24 h-24 perspective-[800px] flex items-center justify-center pointer-events-none z-20",children:[m.jsx("style",{children:`
                .dice-wrap { width: 60px; height: 60px; position: relative; transform-style: preserve-3d; }
                .dice-wrap.spinning { animation: spin3d 0.5s infinite linear; }
                @keyframes spin3d {
                    0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg); }
                    100% { transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg); }
                }
                .face { position: absolute; width: 60px; height: 60px; background: rgba(20, 184, 166, 0.9); border: 2px solid #fff; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size: 24px; color: #fff; box-shadow: 0 0 15px rgba(45,212,191,0.5); border-radius: 8px; }
                .face:nth-child(1) { transform: rotateY(0deg) translateZ(30px); }
                .face:nth-child(2) { transform: rotateY(90deg) translateZ(30px); }
                .face:nth-child(3) { transform: rotateY(180deg) translateZ(30px); }
                .face:nth-child(4) { transform: rotateY(-90deg) translateZ(30px); }
                .face:nth-child(5) { transform: rotateX(90deg) translateZ(30px); }
                .face:nth-child(6) { transform: rotateX(-90deg) translateZ(30px); }
            `}),m.jsx("div",{className:`dice-wrap ${t?"spinning":""} transition-all duration-500`,children:[1,2,3,4,8,6].map((n,o)=>m.jsx("div",{className:"face",children:t?"?":o===0?e:n},o))})]}),nL=()=>{const[e,t]=k.useState(0),[n,o]=k.useState(!1);return k.useEffect(()=>((()=>{o(!0),hf(r=>t(r))})(),()=>{fl(),o(!1)}),[]),m.jsx("div",{className:"absolute top-0 left-0 right-0 h-40 pointer-events-none flex items-center justify-center overflow-hidden opacity-40 z-0",children:m.jsx("div",{className:"relative w-full h-full flex items-center justify-center gap-1.5 px-4",children:Array.from({length:96}).map((i,r)=>{const s=r/96,a=Math.sin(s*Math.PI);return m.jsx("div",{className:`w-1 rounded-full transition-all duration-75 ${e>.05?"bg-teal-400 shadow-[0_0_10px_#2dd4bf]":"bg-slate-500/20"}`,style:{height:`${Math.max(4,e*200*a+Math.random()*10*a)}px`}},r)})})})},oL=({reviewer:e,actor:t,onSubmit:n,hasHighEnergyBonus:o})=>{const[i,r]=k.useState(5);return m.jsx(he.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md",children:m.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl border border-slate-700 shadow-2xl max-w-md w-full text-center",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-2 border-slate-500 relative",children:e.avatar.startsWith("data:")?m.jsx("img",{src:e.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"bg-slate-700 w-full h-full flex items-center justify-center font-bold text-2xl",children:e.name[0]})})}),m.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:""}),m.jsxs("p",{className:"text-slate-400 mb-6",children:[m.jsx("strong",{children:e.name})," ",m.jsx("strong",{children:t.name})," "]}),o&&m.jsx("div",{className:"mb-6 p-3 bg-red-500/20 border border-red-500/50 rounded-xl animate-pulse",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-500 font-bold",children:[m.jsx(ex,{fill:"currentColor",size:20})," "]})}),m.jsx("div",{className:"flex justify-center gap-2 mb-8",children:[1,2,3,4,5].map(s=>m.jsx("button",{onClick:()=>r(s),className:"transition transform hover:scale-110",children:m.jsx(Ts,{size:40,fill:s<=i?"#fbbf24":"none",stroke:s<=i?"#fbbf24":"#475569"})},s))}),m.jsxs("div",{className:"text-xl font-bold text-yellow-500 mb-8",children:[i,"  - ",i===5?"":i>=3?"":""]}),m.jsx("button",{onClick:()=>n(i),className:"w-full py-4 bg-gradient-to-r from-teal-500 to-blue-600 rounded-xl font-bold text-white text-lg shadow-lg",children:""})]})})},iL=e=>{let t=[],n=0;const o=()=>{const i=Math.random();return i<.5?"NORMAL":i<.7?"DOUBLE":i<.8?"HALF":i<.9?"CLONE":"TRANSFER"};if(e===Ie.JUNG_8){const i=["Te","Ti","Fe","Fi","Se","Si","Ne","Ni"];let s=[];i.forEach(l=>{for(let u=0;u<7;u++)s.push(l)});for(let l=0;l<4;l++)s.push("?");for(let l=s.length-1;l>0;l--){const u=Math.floor(Math.random()*(l+1));[s[l],s[u]]=[s[u],s[l]]}const a=["FREEDOM","SUBSTITUTE","COMPANION","FREEDOM"];for(let l=-4;l<=4;l++){const u=Math.max(-4,-l-4),d=Math.min(4,-l+4);for(let h=u;h<=d;h++){const p=l===0&&h===0;let g=p?"?":s.pop()||"Te",v="NORMAL",T="NONE";g==="?"?p?T="FREEDOM":T=a.pop()||"FREEDOM":v=o(),t.push({index:n++,functionId:g,modifier:v,specialAbility:T,q:l,r:h})}}}else{const i=[{id:"NF",types:Xt[" (NF)"].types,coords:[{q:0,r:0},{q:1,r:0},{q:2,r:0},{q:0,r:1},{q:0,r:2},{q:0,r:3},{q:1,r:3},{q:2,r:3}]},{id:"NT",types:Xt[" (NT)"].types,coords:[{q:6,r:0},{q:5,r:0},{q:4,r:0},{q:6,r:1},{q:6,r:2},{q:3,r:0},{q:3,r:1},{q:3,r:2}]},{id:"SP",types:Xt[" (SP)"].types,coords:[{q:6,r:6},{q:5,r:6},{q:4,r:6},{q:6,r:5},{q:6,r:4},{q:6,r:3},{q:5,r:3},{q:4,r:3}]},{id:"SJ",types:Xt[" (SJ)"].types,coords:[{q:0,r:6},{q:1,r:6},{q:2,r:6},{q:0,r:5},{q:0,r:4},{q:3,r:6},{q:3,r:5},{q:3,r:4}]}];t.push({index:n++,functionId:"Hub",characterName:Mu.Hub,q:3,r:3,zone:"Hub",modifier:"NORMAL",specialAbility:"FREEDOM"}),i.forEach(r=>{let s=[];r.types.forEach(a=>{s.push(a),s.push(a)});for(let a=s.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1));[s[a],s[l]]=[s[l],s[a]]}r.coords.forEach((a,l)=>{const u=s[l]||"INTJ",d=Mu[u];t.push({index:n++,functionId:u,characterName:d,q:a.q,r:a.r,zone:r.id,modifier:o(),specialAbility:"NONE"})})})}return t};function rL(){var Af;const[e,t]=k.useState([]),[n,o]=k.useState([]),[i,r]=k.useState(!1),[s,a]=k.useState(!0),[l,u]=k.useState({players:[],currentPlayerIndex:0,gameMode:Ie.JUNG_8,turn:1,targetScore:40,logs:[],phase:"HUB",subPhase:"IDLE",currentTile:null,selectedTask:null,activeModifier:"NORMAL",activeSpecialAbility:"NONE",remainingSteps:0,sightRange:1,helperId:null,scoreTargetPlayerId:null,sharedHelpUsedCount:0,hasReselected:!1,pregeneratedTasks:null,movementState:"IDLE",diceValue:null,highestScore:0,snapshots:[],startTime:Date.now(),peerReviewQueue:[],currentReviewerId:null,accumulatedRating:0}),[d,h]=k.useState(!1),[p,g]=k.useState(!1),[v,T]=k.useState(0),[E,S]=k.useState(null),[y,x]=k.useState(0),[w,I]=k.useState(!1),[C,N]=k.useState(!1),[_,M]=k.useState(""),[b,B]=k.useState(!1),[ne,Q]=k.useState(null),[oe,pe]=k.useState(0),[de,Z]=k.useState(!1),[D,O]=k.useState(!1),[$,se]=k.useState(!1),V=k.useRef(null),J=k.useRef(null),[te,H]=k.useState(null),[Y,ce]=k.useState([]),[vn,Mt]=k.useState(!1),[jn,Pr]=k.useState([]),[XS,mf]=k.useState("");k.useEffect(()=>{const A=()=>{h(window.innerWidth<1024)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]),k.useEffect(()=>{if(!d||l.phase!=="PLAYING"||l.movementState!=="IDLE"||l.remainingSteps===0)return;const A=l.players[l.currentPlayerIndex];if(A&&!A.isBot&&n.length===1){const P=setTimeout(()=>{ql(n[0])},800);return()=>clearTimeout(P)}},[d,n,l.phase,l.movementState,l.remainingSteps]),k.useEffect(()=>{const P=new URLSearchParams(window.location.search).get("share_data");if(P)try{const R=WS.decompressFromEncodedURIComponent(P);if(R){const F=JSON.parse(R);Q(F)}}catch(R){console.error("Failed to parse shared data",R)}},[]);const Fe=k.useRef(null);k.useEffect(()=>{Fe.current=new Audio("https://cdn.pixabay.com/audio/2022/05/27/audio_1808fbf07a.mp3"),Fe.current.loop=!0,Fe.current.volume=.2},[]),k.useEffect(()=>{Fe.current&&(p?Fe.current.volume=b?.02:.2:Fe.current.pause())},[b,p]),k.useEffect(()=>{Fe.current&&(p?Fe.current.play().catch(A=>console.log("Audio autoplay blocked until interaction")):Fe.current.pause())},[p]),k.useEffect(()=>{const A=document.documentElement;s?A.classList.add("dark"):A.classList.remove("dark")},[s]);const zl=()=>a(!s);k.useEffect(()=>{if(l.phase!=="PLAYING")return;const A=l.players[l.currentPlayerIndex];if(!A||!A.isBot)return;let P;return l.subPhase==="IDLE"&&l.movementState==="IDLE"&&l.remainingSteps===0&&A.isBot&&(P=setTimeout(()=>$l(),1500)),l.movementState==="IDLE"&&l.remainingSteps>0&&n.length>0&&A.isBot&&(P=setTimeout(()=>{const R=n[Math.floor(Math.random()*n.length)];ql(R)},1500)),l.subPhase==="SELECTING_CARD"&&(P=setTimeout(()=>{const R=["standard","truth","dare","deep"],F=R[Math.floor(Math.random()*R.length)];xf(F)},2e3)),l.subPhase==="VIEWING_TASK"&&(P=setTimeout(()=>{Tf(),setTimeout(()=>{Ef()},3e3)},2e3)),["SELECTING_SCORE_TARGET","SELECTING_SUBSTITUTE","SELECTING_COMPANION","CHOOSING_HELPER"].includes(l.subPhase)&&(P=setTimeout(()=>{const R=l.players.filter(q=>q.id!==A.id),F=R[Math.floor(Math.random()*R.length)];F&&(l.subPhase==="SELECTING_SCORE_TARGET"?wf(F.id):l.subPhase==="SELECTING_SUBSTITUTE"?yf(F.id):l.subPhase==="SELECTING_COMPANION"?vf(F.id):l.subPhase==="CHOOSING_HELPER"&&Sf(F.id))},2e3)),()=>clearTimeout(P)},[l.phase,l.subPhase,l.movementState,l.remainingSteps,l.currentPlayerIndex,n,D]),k.useEffect(()=>{if(l.subPhase==="PEER_REVIEW"&&l.currentReviewerId){const A=l.players.find(P=>P.id===l.currentReviewerId);if(A&&A.isBot){const P=setTimeout(()=>{jl(Math.random()>.3?5:4)},1500);return()=>clearTimeout(P)}}},[l.subPhase,l.currentReviewerId]);const QS=(A,P)=>{const R=P.find(ee=>ee.index===A.position);if(!R)return[];let F=[];l.gameMode===Ie.JUNG_8?F=BE(R,P):F=GE(R,P);const q=F.filter(ee=>ee.index!==A.previousPosition);if(l.movementState==="TELEPORTING")return P.filter(ee=>ee.functionId!=="Hub").map(ee=>ee.index);if(l.gameMode===Ie.MBTI_16)return q.map(ee=>ee.index);const j=vs[A.mbti]||[];let le="?",W=A.stackIndex+1;for(let ee=0;ee<j.length;ee++){const ft=(W+ee)%j.length,bt=j[ft];if(q.some(Be=>Be.functionId===bt)){le=bt;break}}return q.filter(ee=>ee.functionId===le||ee.functionId==="?").map(ee=>ee.index)};k.useEffect(()=>{if(l.phase!=="PLAYING")return;const A=l.players[l.currentPlayerIndex];if(A)if(l.movementState==="IDLE"&&l.remainingSteps>0){const P=QS(A,e);o(P)}else if(l.movementState==="TELEPORTING"){const P=e.filter(R=>R.index!==A.position).map(R=>R.index);o(P)}else l.remainingSteps===0&&l.movementState==="IDLE"&&o([])},[l.remainingSteps,l.movementState,l.currentPlayerIndex,l.players]);const xn=(A,P="system",R,F)=>{const q={id:Date.now().toString()+Math.random(),text:A,type:P,author:R,timestamp:Date.now(),taskDetails:F};if(u(j=>({...j,logs:[...j.logs,q]})),R&&R!=="system"){const j=l.players.find(le=>le.name===R);j&&j.isBot&&XD(A,R)}},ZS=A=>{u(P=>({...P,snapshots:[...P.snapshots,A]}))},eT=(A,P,R,F)=>{u(le=>({...le,phase:"LOADING"}));let q=0;const j=setInterval(()=>{q+=1,x(q),q>=100&&(clearInterval(j),I(!0))},50);window.pendingGameConfig={humanPlayers:A,mode:P,botCount:R,targetScore:F}},tT=()=>{const A=window.pendingGameConfig;nT(A.humanPlayers,A.mode,A.botCount,A.targetScore)},nT=(A,P,R,F)=>{const q=iL(P);t(q);const j=P===Ie.MBTI_16?3:0,le=P===Ie.MBTI_16?3:0,W=q.find(ee=>ee.q===j&&ee.r===le),qe=A.map((ee,ft)=>{let bt=(W==null?void 0:W.index)||0;if(P===Ie.MBTI_16){const Be=q.filter(xt=>xt.functionId===ee.mbti);Be.length>0&&(bt=Be[Math.floor(Math.random()*Be.length)].index)}return{id:`user-${ft}`,name:ee.name||`P${ft+1}`,mbti:ee.mbti,isBot:!1,avatar:ee.avatarImage||"user",color:rs[ft%rs.length],trustScore:0,insightScore:0,expressionScore:0,totalRatingGiven:0,position:bt,previousPosition:null,stackIndex:0,skipUsedCount:0}});for(let ee=0;ee<R;ee++){const ft=eL(),bt=VE[ft]||[`Bot ${ee}`];let Be=(W==null?void 0:W.index)||0;if(P===Ie.MBTI_16){const xt=q.filter(Sn=>Sn.functionId===ft);xt.length>0&&(Be=xt[Math.floor(Math.random()*xt.length)].index)}qe.push({id:`bot-${ee}`,name:bt[0],mbti:ft,isBot:!0,avatar:"bot",color:rs[qe.length%rs.length],trustScore:0,insightScore:0,expressionScore:0,totalRatingGiven:0,position:Be,previousPosition:null,stackIndex:0,skipUsedCount:0})}u(ee=>({...ee,players:qe,gameMode:P,targetScore:F,phase:"PLAYING",subPhase:"IDLE",logs:[{id:"0",text:"",type:"system",timestamp:Date.now()}],sightRange:1})),g(!0),Fe.current&&(Fe.current.volume=.2,Fe.current.play().catch(ee=>console.warn("Autoplay prevented:",ee)))},oT=A=>{A==="test"?(se(!0),u(P=>({...P,phase:"ONBOARDING"}))):A==="tasks"?(se(!1),u(P=>({...P,phase:"SOLO_TASKS"}))):(se(!1),u(P=>({...P,phase:"ONBOARDING"})))},$l=A=>{const P=l.players[l.currentPlayerIndex];u(R=>({...R,movementState:"ROLLING"})),setTimeout(()=>{const R=A||Math.floor(Math.random()*8)+1,F=Math.random()>.5?2:1;u(q=>({...q,diceValue:R,remainingSteps:R,sightRange:F,movementState:"IDLE",activeModifier:"NORMAL",activeSpecialAbility:"NONE",helperId:null,scoreTargetPlayerId:null})),Z(!1),xn(`${P.name}  ${R}  (: ${F})`,"action")},1e3)},ql=A=>{if(!n.includes(A))return;const P=l.players[l.currentPlayerIndex],R=e.find(le=>le.index===A);if(!R)return;const F=vs[P.mbti]||[];let q=P.stackIndex;if(l.gameMode===Ie.JUNG_8&&R.functionId!=="?")for(let le=1;le<F.length;le++){const W=(P.stackIndex+le)%F.length;if(F[W]===R.functionId){q=W;break}}const j=l.movementState==="TELEPORTING";u(le=>{const W=[...le.players],qe=W[le.currentPlayerIndex];qe.previousPosition=qe.position,qe.position=A,qe.stackIndex=q;const ee=j?0:le.remainingSteps-1;return{...le,players:W,currentTile:R,remainingSteps:ee,movementState:"MOVING_STEP",activeModifier:R.modifier,activeSpecialAbility:R.specialAbility}}),o([]),setTimeout(()=>{j||l.remainingSteps===1?iT(R,j):u(le=>({...le,movementState:"IDLE"}))},600)},iT=(A,P)=>{const R=l.players[l.currentPlayerIndex];if(u(F=>({...F,movementState:"IDLE"})),!P&&A.specialAbility!=="NONE"&&A.functionId==="?"){gf(A.specialAbility);return}if(l.gameMode===Ie.MBTI_16&&A.functionId==="Hub"&&!P){gf("FREEDOM");return}Wu(A.functionId,l.players,R,l.logs).then(F=>{u(q=>({...q,pregeneratedTasks:F}))}),u(F=>({...F,subPhase:"SELECTING_CARD",selectedTask:null,hasReselected:!1,scoreTargetPlayerId:F.scoreTargetPlayerId,helperId:F.helperId})),xn(` ${A.characterName||A.functionId}...`,"system")},gf=A=>{const P=l.players[l.currentPlayerIndex];if(A==="FREEDOM"){u(R=>({...R,movementState:"TELEPORTING"})),xn(`${P.name} `,"action");return}if(A==="SUBSTITUTE"){u(R=>({...R,subPhase:"SELECTING_SUBSTITUTE"})),xn(`${P.name} ...`,"action");return}if(A==="COMPANION"){u(R=>({...R,subPhase:"SELECTING_COMPANION"})),xn(`${P.name} ...`,"action");return}u(R=>({...R,subPhase:"SELECTING_CARD"}))},yf=A=>{u(P=>({...P,helperId:A,subPhase:"IDLE",movementState:"TELEPORTING"})),xn("","system")},vf=A=>{u(P=>({...P,helperId:A,subPhase:"IDLE",movementState:"TELEPORTING"})),xn("","system")},Jl=async A=>{if(!l.players[l.currentPlayerIndex].isBot){te&&te.getTracks().forEach(R=>R.stop());try{const R={video:{width:480,height:360,deviceId:A?{exact:A}:void 0}},F=await navigator.mediaDevices.getUserMedia(R);H(F),Mt(!0);const j=(await navigator.mediaDevices.enumerateDevices()).filter(le=>le.kind==="videoinput");if(Pr(j),!A&&j.length>0){const W=F.getVideoTracks()[0].getSettings();W.deviceId&&mf(W.deviceId)}}catch(R){console.warn("Camera access denied or unavailable",R),Mt(!1)}}},rT=async()=>{if(jn.length<=1)return;const P=(jn.findIndex(F=>F.deviceId===XS)+1)%jn.length,R=jn[P];mf(R.deviceId),await Jl(R.deviceId)},xf=A=>{var R;const P=(R=l.pregeneratedTasks)==null?void 0:R[A];if(P)u(F=>({...F,subPhase:"VIEWING_TASK",selectedTask:P})),Jl();else{u(q=>({...q,subPhase:"VIEWING_TASK",selectedTask:null}));const F=l.currentTile;F&&Wu(F.functionId,l.players,l.players[l.currentPlayerIndex],l.logs).then(q=>{u(j=>({...j,selectedTask:q[A],pregeneratedTasks:q})),Jl()})}},sT=()=>{var q;if(l.hasReselected||!l.pregeneratedTasks)return;const A=["standard","truth","dare","deep"],P=(q=l.selectedTask)==null?void 0:q.category,R=A.filter(j=>j!==P),F=R[Math.floor(Math.random()*R.length)];u(j=>({...j,hasReselected:!0,selectedTask:j.pregeneratedTasks[F]}))},lT=()=>{l.players[l.currentPlayerIndex],u(A=>{const P=[...A.players];return P[A.currentPlayerIndex].skipUsedCount+=1,{...A,players:P,subPhase:"IDLE"}}),If()},aT=()=>{if(l.sharedHelpUsedCount>=3){alert("");return}u(A=>({...A,subPhase:"CHOOSING_HELPER"}))},Sf=A=>{u(P=>({...P,helperId:A,sharedHelpUsedCount:P.sharedHelpUsedCount+1,subPhase:"VIEWING_TASK"}))},Tf=async()=>{if(!l.selectedTask)return;const A=l.players[l.currentPlayerIndex];M(""),Z(!1),ce([]),A.isBot||pf()&&(KS(R=>M(F=>F+" "+R),()=>B(!1)),B(!0),hf(R=>{pe(R),R>.4&&Z(!0)})),u(R=>({...R,subPhase:"TASK_EXECUTION"})),T(l.selectedTask.durationSeconds);const P=setInterval(()=>{T(R=>R<=1?(clearInterval(P),0):R-1)},1e3)};k.useEffect(()=>{if(l.subPhase!=="TASK_EXECUTION"||!vn||!te)return;const A=setInterval(async()=>{var P;if(V.current&&J.current){const R=V.current,F=J.current,q=F.getContext("2d");if(q){F.width=R.videoWidth,F.height=R.videoHeight,q.drawImage(R,0,0,F.width,F.height);const j=F.toDataURL("image/jpeg",.6),le=await Wv(j,((P=l.selectedTask)==null?void 0:P.title)||"MBTI ");ce(W=>[...W.slice(-2),le])}}},15e3);return()=>clearInterval(A)},[l.subPhase,vn,te]),k.useEffect(()=>{te&&V.current&&(V.current.srcObject=te)},[te,l.subPhase]),k.useEffect(()=>{(l.subPhase==="IDLE"||l.subPhase==="SELECTING_CARD")&&(te&&(te.getTracks().forEach(A=>A.stop()),H(null),Mt(!1)),b&&(Nc(),fl(),B(!1)))},[l.subPhase]);const Ef=()=>{var j,le;b&&(Nc(),fl(),B(!1)),te&&(te.getTracks().forEach(W=>W.stop()),H(null),Mt(!1));const A=l.players[l.currentPlayerIndex],P=`: ${((j=l.selectedTask)==null?void 0:j.title)||""}`,R=_.trim()?`: "${_.trim()}"`:A.isBot?"Bot ":"",F=Y.length>0?`| : ${Y.join("; ")}`:"";xn(`${A.name} `,"action",A.name,`${P}${R} ${F}`),ZS(`${A.name}[${(le=l.selectedTask)==null?void 0:le.category}]${R} ${F}`);const q=l.players.filter(W=>W.id!==l.players[l.currentPlayerIndex].id);if(q.length===0){jl(5);return}u(W=>({...W,subPhase:"PEER_REVIEW",peerReviewQueue:q.map(qe=>qe.id),currentReviewerId:q[0].id,accumulatedRating:0}))},jl=A=>{const P=l.currentReviewerId;if(P&&u(R=>{const F=[...R.players],q=F.findIndex(j=>j.id===P);return q!==-1&&(F[q]={...F[q],totalRatingGiven:(F[q].totalRatingGiven||0)+A}),{...R,players:F}}),!(P&&l.peerReviewQueue.length>0&&(u(R=>{const F=R.peerReviewQueue.filter(j=>j!==P),q=F.length>0?F[0]:null;return q?{...R,accumulatedRating:R.accumulatedRating+A,peerReviewQueue:F,currentReviewerId:q}:{...R,accumulatedRating:R.accumulatedRating+A,peerReviewQueue:[],currentReviewerId:null}}),l.peerReviewQueue.length>1))){if(l.activeModifier==="CLONE"||l.activeModifier==="TRANSFER"){u(R=>({...R,subPhase:"SELECTING_SCORE_TARGET"}));return}Cf(A)}},wf=A=>{u(P=>({...P,scoreTargetPlayerId:A})),Cf(0)},Cf=A=>{l.players[l.currentPlayerIndex];const P=l.selectedTask;if(!P)return;const R=Math.max(1,l.players.length-1),q=(l.accumulatedRating+A)/R;let j=Math.ceil(q*P.multiplier*2);const le=l.activeModifier;l.activeSpecialAbility,le==="DOUBLE"&&(j*=2),le==="HALF"&&(j=Math.floor(j/2)),de&&(j+=5),u(W=>{let qe=W.players.map(xt=>({...xt}));const ee=qe[W.currentPlayerIndex],ft=W.activeModifier,bt=W.activeSpecialAbility,Be=(xt,Sn)=>{const kf=qe.findIndex(Si=>Si.id===xt);if(kf!==-1){const Si=qe[kf];P.scoreType==="trust"?Si.trustScore+=Sn:P.scoreType==="insight"?Si.insightScore+=Sn:Si.expressionScore+=Sn}};if(bt==="SUBSTITUTE"&&W.helperId)Be(W.helperId,j);else if(bt==="COMPANION"&&W.helperId)Be(ee.id,j),Be(W.helperId,j);else if(W.helperId&&bt==="NONE"&&ft==="NORMAL"){const xt=Math.ceil(j/2),Sn=Math.floor(j/2);Be(ee.id,Sn),Be(W.helperId,xt)}else ft==="TRANSFER"&&W.scoreTargetPlayerId?Be(W.scoreTargetPlayerId,j):(Be(ee.id,j),ft==="CLONE"&&W.scoreTargetPlayerId&&Be(W.scoreTargetPlayerId,j));return{...W,players:qe}}),If()},If=()=>{u(A=>{const P=A.players[A.currentPlayerIndex];if(P.trustScore+P.insightScore+P.expressionScore>=A.targetScore)return Nf(A.players),A;const F=(A.currentPlayerIndex+1)%A.players.length;return{...A,currentPlayerIndex:F,subPhase:"IDLE",selectedTask:null,helperId:null,scoreTargetPlayerId:null,activeModifier:"NORMAL",activeSpecialAbility:"NONE",remainingSteps:0,turn:F===0?A.turn+1:A.turn,currentReviewerId:null,peerReviewQueue:[],accumulatedRating:0}})},Nf=async A=>{u(R=>({...R,players:A,phase:"ANALYSIS"}));const P=await hP(A,l.snapshots,l.logs);S(P),Fe.current&&(Fe.current.pause(),Fe.current.currentTime=0),g(!1)},uT=async(A,P)=>{const R={id:"solo-player",name:A.name,mbti:A.mbti,isBot:!1,avatar:"user",trustScore:0,insightScore:0,expressionScore:0,totalRatingGiven:0,position:0,previousPosition:null,stackIndex:0,skipUsedCount:0,color:"teal"};u(q=>({...q,players:[R],phase:"ANALYSIS",currentPlayerIndex:0,startTime:Date.now()}));const F=await mP(A,P);S(F)},cT=()=>{Fe.current&&(Fe.current.pause(),Fe.current.currentTime=0),g(!1)},Wl=()=>{u(A=>({players:[],currentPlayerIndex:0,gameMode:Ie.JUNG_8,turn:1,targetScore:40,logs:[],phase:"HUB",subPhase:"IDLE",currentTile:null,selectedTask:null,activeModifier:"NORMAL",activeSpecialAbility:"NONE",remainingSteps:0,sightRange:1,helperId:null,scoreTargetPlayerId:null,sharedHelpUsedCount:0,hasReselected:!1,pregeneratedTasks:null,movementState:"IDLE",diceValue:null,highestScore:0,snapshots:[],startTime:Date.now(),peerReviewQueue:[],currentReviewerId:null,accumulatedRating:0})),x(0),I(!1),t([]),o([]),S(null),Q(null),se(!1),cT()};if(ne)return m.jsx(U0,{players:ne.players,report:ne.report,startTime:ne.startTime,gameMode:ne.gameMode,onReturnHome:()=>{window.history.pushState({},"",window.location.pathname),Q(null)}});if(l.phase==="HUB")return m.jsxs("div",{className:`min-h-screen flex flex-col transition-colors duration-300 font-sans ${s?"dark bg-slate-900 text-white":"bg-slate-50 text-slate-900"}`,children:[m.jsxs("header",{className:"h-16 flex items-center justify-between px-6 border-b border-slate-200 dark:border-white/5 shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-2 font-black text-xl tracking-tighter italic",children:[m.jsx(Zv,{className:"text-blue-500"})," RAINBOW BOAT"]}),m.jsx("div",{className:"flex items-center gap-3",children:m.jsx("button",{onClick:zl,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition",children:s?m.jsx(Xu,{size:18}):m.jsx(Yu,{size:18})})})]}),m.jsx("main",{className:"flex-1 relative",children:m.jsx(QD,{onSelectMode:oT,isMobile:d})})]});if(l.phase==="SOLO_TASKS")return m.jsx(ZD,{onBack:()=>u(A=>({...A,phase:"HUB"})),isMobile:d});if(l.phase==="ONBOARDING")return m.jsx(UD,{onComplete:eT,isDarkMode:s,toggleTheme:zl,initialStep:$?"quiz":"setup",isSoloTest:$,onBackToHub:Wl,onShowQuickReport:uT});if(l.phase==="LOADING")return m.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center text-slate-800 dark:text-white relative font-sans transition-colors duration-300",children:m.jsxs("div",{className:"z-10 flex flex-col items-center w-full max-w-4xl px-8 text-center bg-white/10 dark:bg-black/20 backdrop-blur-md rounded-3xl p-16 shadow-2xl border border-white/10",children:[m.jsx(he.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-8xl font-bold tracking-tight mb-4 text-transparent bg-clip-text bg-[linear-gradient(to_right,#ef4444,#f97316,#eab308,#22c55e,#3b82f6,#a855f7)] drop-shadow-lg",children:""}),m.jsx(nL,{}),m.jsx("div",{className:"w-full h-4 bg-slate-700 rounded-full overflow-hidden mb-12 mt-8 relative z-20",children:m.jsx(he.div,{className:"h-full bg-gradient-to-r from-teal-400 to-blue-500",initial:{width:0},animate:{width:`${y}%`}})}),w&&m.jsxs(he.button,{initial:{scale:.8},animate:{scale:1},onClick:tT,className:"mt-8 px-16 py-6 bg-white text-slate-900 rounded-full font-bold text-3xl shadow-2xl flex items-center gap-3",children:[m.jsx(qP,{size:32,fill:"currentColor"}),"  "]})]})});if(l.phase==="ANALYSIS"&&E)return m.jsx(U0,{players:l.players,report:E||{groupAnalysis:"",playerAnalysis:{}},onReturnHome:Wl,startTime:l.startTime,gameMode:l.gameMode});const Me=l.players[l.currentPlayerIndex];if(!Me)return m.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center text-white",children:"Loading Game State..."});const _f=l.currentReviewerId?l.players.find(A=>A.id===l.currentReviewerId):null,dT=vs[Me.mbti]||[];return m.jsxs("div",{className:"min-h-screen w-full text-slate-800 dark:text-slate-200 font-sans flex flex-col overflow-x-hidden relative selection:bg-teal-500/30 transition-colors duration-300",children:[m.jsxs("header",{className:"h-16 bg-white/80 dark:bg-slate-900/60 backdrop-blur border-b border-slate-200 dark:border-white/5 flex items-center justify-between px-6 shrink-0 z-30 transition-colors duration-300",children:[m.jsxs("div",{className:"flex items-center gap-6 w-1/3",children:[m.jsx("button",{onClick:Wl,className:"flex items-center gap-1 text-slate-500 hover:text-teal-600 dark:text-slate-400 dark:hover:text-white transition group",title:"Return to Home",children:m.jsx(OP,{size:16,className:"group-hover:-translate-x-1 transition"})}),m.jsxs("div",{className:"flex items-center gap-3 bg-slate-100 dark:bg-slate-800/50 pr-4 rounded-full border border-slate-200 dark:border-slate-700/50",children:[m.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-teal-500/50 overflow-hidden",children:Me.avatar.startsWith("data:")?m.jsx("img",{src:Me.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 w-full h-full flex items-center justify-center font-bold text-lg",children:Me.name[0]})}),m.jsxs("div",{children:[m.jsx("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:Me.name}),m.jsx("div",{className:"text-[10px] font-bold text-teal-600 dark:text-teal-400",children:Me.mbti})]})]})]}),m.jsx("div",{className:"flex items-center gap-4",children:m.jsx("button",{onClick:()=>O(!D),className:`px-3 py-1 rounded-full text-xs font-bold border transition ${D?"bg-amber-500 text-white border-amber-600":"bg-slate-100 dark:bg-slate-800 text-slate-400 border-slate-300 dark:border-slate-700"}`,title:"Enable Host Control (Manual Dice)",children:D?": ON":": OFF"})}),m.jsxs("div",{className:"flex-1 flex justify-center",children:[l.gameMode===Ie.JUNG_8&&m.jsx("div",{className:"flex items-center px-6 py-2 rounded-full bg-white/40 dark:bg-black/40 border border-slate-200 dark:border-white/5 backdrop-blur-md shadow-inner overflow-x-auto no-scrollbar max-w-xl",children:dT.map((A,P)=>{const R=P===Me.stackIndex;return m.jsxs("div",{className:`flex flex-col items-center relative transition-all duration-500 ${R?"mx-3":"mx-1"}`,children:[R&&m.jsx("div",{className:"text-[9px] text-teal-600 dark:text-teal-400 font-bold mb-1 absolute -top-4",children:""}),m.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-[10px] font-bold rounded-full transition-all duration-500 ${R?"bg-teal-500 text-white scale-125 shadow-[0_0_15px_#14b8a6]":"bg-slate-200 dark:bg-slate-800 text-slate-500"}`,children:A})]},P)})}),l.gameMode===Ie.MBTI_16&&m.jsx("div",{className:"flex items-center px-6 py-2 rounded-full bg-white/40 dark:bg-black/40 border border-slate-200 dark:border-white/5 backdrop-blur-md shadow-inner overflow-x-auto no-scrollbar max-w-2xl",children:Ys.map((A,P)=>{var j;const R=((j=l.currentTile)==null?void 0:j.functionId)===A;let F="bg-slate-200 dark:bg-slate-800 text-slate-500";const q=Object.entries(Xt).find(([le,W])=>W.types.includes(A));if(q){const[le,W]=q;R&&(W.hexColor==="#a855f7"?F="bg-purple-500 text-white shadow-[0_0_15px_#a855f7] scale-110":W.hexColor==="#22c55e"?F="bg-green-500 text-white shadow-[0_0_15px_#22c55e] scale-110":W.hexColor==="#3b82f6"?F="bg-blue-500 text-white shadow-[0_0_15px_#3b82f6] scale-110":W.hexColor==="#eab308"&&(F="bg-yellow-500 text-white shadow-[0_0_15px_#eab308] scale-110"))}return m.jsxs("div",{className:"flex flex-col items-center relative transition-all duration-500 mx-1 shrink-0",children:[R&&m.jsx("div",{className:"text-[9px] text-teal-600 dark:text-teal-400 font-bold mb-1 absolute -top-4",children:""}),m.jsx("div",{className:`px-2 py-1 flex items-center justify-center text-[10px] font-bold rounded-md transition-all duration-500 ${R?F:"bg-slate-200 dark:bg-slate-800 text-slate-500"}`,children:A})]},A)})})]}),m.jsxs("div",{className:"w-1/3 flex justify-end gap-3",children:[m.jsxs("button",{onClick:()=>Nf(l.players),className:"px-3 py-1.5 rounded-lg bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/50 border border-red-200 dark:border-red-800/50 text-red-600 dark:text-red-300 transition flex items-center gap-1.5 text-xs font-bold mr-2",children:[m.jsx(PP,{size:14})," "]}),m.jsx("button",{onClick:zl,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-amber-500 dark:hover:text-yellow-400 transition",children:s?m.jsx(Xu,{size:18}):m.jsx(Yu,{size:18})}),m.jsx("button",{onClick:()=>N(!0),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 hover:text-teal-600 dark:hover:text-teal-400 transition",title:"AI Config",children:m.jsx(Md,{size:18})}),m.jsx("button",{onClick:()=>g(!p),className:`p-2 rounded-full transition ${p?"text-teal-500 bg-teal-500/10":"text-slate-600 dark:text-slate-400"}`,title:p?"Pause Music":"Play Music",children:m.jsx($P,{size:18})})]})]}),m.jsxs("main",{className:`flex-1 flex relative ${d?"flex-col":"overflow-hidden"}`,children:[(l.phase==="PLAYING"||l.phase==="SETUP")&&m.jsxs("div",{className:`flex-1 flex relative ${d?"flex-col":"overflow-hidden"}`,children:[m.jsxs("div",{className:`flex-1 relative bg-transparent flex flex-col transition-all duration-300 ${d?"h-[60vh]":""}`,children:[m.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden cursor-grab active:cursor-grabbing",children:m.jsx(BD,{players:l.players,currentPlayerId:Me.id,boardLayout:e,validMoves:n,onTileClick:ql,gameMode:l.gameMode,visibilityRadius:l.sightRange})}),m.jsx(Gt,{children:l.remainingSteps>0&&l.movementState!=="ROLLING"&&m.jsx(he.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},className:"absolute inset-0 pointer-events-none flex items-center justify-center z-10",children:m.jsx("div",{className:"text-[10rem] font-bold text-slate-900/10 dark:text-white/20 drop-shadow-lg select-none",children:l.remainingSteps})})}),m.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-20",children:m.jsxs("div",{className:"relative w-full h-full max-w-4xl max-h-[800px]",children:[m.jsxs("div",{className:`absolute bottom-20 right-8 pointer-events-auto transition-all duration-300 ${l.gameMode===Ie.MBTI_16?"translate-x-24":""}`,children:[D&&l.subPhase==="IDLE"&&l.remainingSteps===0&&m.jsxs("div",{className:"mb-6 p-4 bg-slate-800/80 rounded-2xl border border-amber-500/30 backdrop-blur shadow-xl",children:[m.jsx("h3",{className:"text-amber-400 font-bold mb-3 text-sm uppercase tracking-wider",children:""}),m.jsx("div",{className:"flex gap-2 justify-center",children:[1,2,3,4,5,6,7,8].map(A=>m.jsx("button",{onClick:()=>$l(A),className:"w-12 h-12 rounded-xl bg-slate-700 hover:bg-amber-500 text-white font-bold text-xl transition shadow-lg border border-slate-600",children:A},A))})]}),l.subPhase==="IDLE"&&!Me.isBot&&l.remainingSteps===0&&m.jsxs("button",{onClick:()=>$l(),disabled:D||l.movementState!=="IDLE",className:`group relative w-24 h-24 rounded-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 flex items-center justify-center shadow-2xl transition hover:scale-105 active:scale-95 ${D?"opacity-50 cursor-not-allowed":""}`,children:[m.jsx("div",{className:"absolute inset-0 rounded-full border border-teal-500/30 animate-ping opacity-20"}),m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx(_P,{className:"text-teal-500 group-hover:text-teal-600 dark:group-hover:text-white transition mb-1",size:28}),m.jsx("span",{className:"text-[10px] text-teal-600/80 dark:text-teal-500/80 font-bold uppercase tracking-widest",children:""})]})]}),l.movementState==="ROLLING"&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center -translate-y-12",children:m.jsx(tL,{value:l.diceValue,rolling:!0})})]}),m.jsx(Gt,{children:l.movementState==="IDLE"&&(l.activeModifier!=="NORMAL"||l.activeSpecialAbility!=="NONE")&&l.subPhase==="SELECTING_CARD"&&m.jsx(he.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:2,opacity:0},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white/90 dark:bg-black/80 backdrop-blur-md p-6 rounded-3xl border-2 border-amber-500 text-center shadow-[0_0_50px_rgba(245,158,11,0.5)] text-slate-800 dark:text-white",children:[m.jsxs("div",{className:"text-6xl mb-2",children:[l.activeModifier==="DOUBLE"&&" x2"," ",l.activeModifier==="HALF"&&" 2"," ",l.activeModifier==="CLONE"&&""," ",l.activeModifier==="TRANSFER"&&"",l.activeSpecialAbility==="FREEDOM"&&""," ",l.activeSpecialAbility==="SUBSTITUTE"&&""," ",l.activeSpecialAbility==="COMPANION"&&""]}),m.jsxs("div",{className:"text-2xl font-bold text-amber-500 dark:text-amber-400",children:[l.activeModifier==="DOUBLE"&&""," ",l.activeModifier==="HALF"&&""," ",l.activeModifier==="CLONE"&&""," ",l.activeModifier==="TRANSFER"&&"",l.activeSpecialAbility==="FREEDOM"&&""," ",l.activeSpecialAbility==="SUBSTITUTE"&&""," ",l.activeSpecialAbility==="COMPANION"&&""]})]})})}),m.jsx(Gt,{children:l.subPhase==="SELECTING_CARD"&&m.jsx(he.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"absolute inset-0 flex items-center justify-center pointer-events-auto",children:m.jsx("div",{className:"grid grid-cols-2 gap-6 p-8 bg-white/90 dark:bg-slate-900/80 backdrop-blur-xl rounded-3xl border border-slate-200 dark:border-slate-700 shadow-2xl",children:["standard","truth","dare","deep"].map(A=>{const P=Ko[A];return m.jsxs("button",{onClick:()=>xf(A),className:`w-40 h-48 rounded-2xl flex flex-col items-center justify-center gap-4 transition-all hover:-translate-y-2 hover:shadow-xl border ${P.color} bg-opacity-20 hover:bg-opacity-30 group`,children:[m.jsx("div",{className:"text-5xl group-hover:scale-110 transition",children:P.icon}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:P.name}),m.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-white/60",children:["x",P.multiplier," "]})]})]},A)})})})})]})}),m.jsx(Gt,{children:(l.subPhase==="VIEWING_TASK"||l.subPhase==="TASK_EXECUTION")&&m.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-md p-4 overflow-y-auto",children:m.jsxs("div",{className:"flex gap-6 items-center w-full max-w-6xl justify-center",children:[m.jsx("div",{className:"w-full max-w-lg bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-2xl overflow-hidden flex flex-col transition-all duration-300",children:l.selectedTask?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:`p-8 ${Ko[l.selectedTask.category].color} bg-opacity-20 text-center relative`,children:[m.jsx("div",{className:"text-5xl mb-3",children:Ko[l.selectedTask.category].icon}),m.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:l.selectedTask.title}),m.jsxs("div",{className:"flex justify-center gap-2",children:[m.jsxs("span",{className:"px-2 py-0.5 bg-black/10 dark:bg-black/20 rounded-full text-[10px] text-slate-600 dark:text-white/90",children:[" ",l.selectedTask.durationSeconds,"s"]}),m.jsxs("span",{className:"px-2 py-0.5 bg-black/10 dark:bg-black/20 rounded-full text-[10px] text-slate-600 dark:text-white/90",children:[" ",l.selectedTask.scoreType]})]}),m.jsx("button",{onClick:()=>u(A=>({...A,subPhase:"SELECTING_CARD"})),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:text-white/50 dark:hover:text-white",children:m.jsx(Vl,{size:18})})]}),m.jsxs("div",{className:"p-6 flex-1 flex flex-col min-h-0",children:[m.jsxs("p",{className:"text-md text-slate-600 dark:text-slate-300 leading-relaxed text-center mb-6 flex-shrink-0 italic",children:['"',l.selectedTask.description,'"']}),l.helperId&&m.jsxs("div",{className:"mb-4 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-500/30 p-2 rounded-lg flex items-center gap-3 justify-center text-indigo-700 dark:text-indigo-200 text-xs",children:[m.jsx(Zu,{size:14})," ",m.jsxs("span",{children:[": ",m.jsx("strong",{children:(Af=l.players.find(A=>A.id===l.helperId))==null?void 0:Af.name})]})]}),l.subPhase==="VIEWING_TASK"?m.jsxs("div",{className:"space-y-4 pt-2",children:[m.jsxs("button",{onClick:Tf,className:"w-full py-4 bg-gradient-to-r from-teal-600 to-blue-600 hover:brightness-110 rounded-2xl font-bold text-white shadow-lg transition-all text-lg flex items-center justify-center gap-2 group",children:[" ",m.jsx(mr,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("button",{onClick:sT,disabled:l.hasReselected,className:"py-2.5 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 disabled:opacity-50 rounded-xl text-slate-500 dark:text-slate-300 text-[10px] font-bold flex flex-col items-center justify-center gap-1 transition-all",children:[m.jsx(Qv,{size:14})," "]}),m.jsxs("button",{onClick:aT,className:"py-2.5 bg-indigo-50 hover:bg-indigo-100 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 rounded-xl text-indigo-600 dark:text-indigo-300 text-[10px] font-bold flex flex-col items-center justify-center gap-1 border border-indigo-200 dark:border-indigo-500/30 transition-all",children:[m.jsx(Zu,{size:14}),"  (",3-l.sharedHelpUsedCount,")"]}),m.jsxs("button",{onClick:lT,className:"py-2.5 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 rounded-xl text-slate-500 dark:text-slate-400 text-[10px] font-bold flex flex-col items-center justify-center gap-1 transition-all",children:[m.jsx(XP,{size:14}),"  (-",Me.skipUsedCount,")"]})]})]}):m.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[m.jsxs("div",{className:"flex-1 w-full bg-slate-50 dark:bg-black/20 rounded-2xl p-5 mb-4 border border-slate-200 dark:border-white/10 overflow-y-auto relative min-h-[200px]",children:[b&&m.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 text-red-500 animate-pulse font-bold text-[10px] z-20",children:[m.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"})," "]}),m.jsx("textarea",{className:"w-full h-full bg-transparent resize-none outline-none text-slate-700 dark:text-slate-200 text-lg leading-relaxed placeholder:text-slate-400 font-medium",placeholder:b?"...":"...",value:_,onChange:A=>M(A.target.value)})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"flex-1 bg-slate-100 dark:bg-slate-800 rounded-xl flex items-center justify-center overflow-hidden border-2 border-slate-200 dark:border-slate-700 h-16",children:[m.jsx("canvas",{ref:J,className:"hidden"}),m.jsxs("span",{className:"text-3xl font-mono font-black text-slate-800 dark:text-white",children:[v,"s"]})]}),m.jsx("button",{onClick:()=>Ef(),className:"flex-[2] px-6 bg-teal-600 hover:bg-teal-500 text-white rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 text-md",children:""})]})]})]})]}):m.jsx("div",{className:"p-12 flex flex-col items-center justify-center space-y-4",children:m.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-teal-500 border-t-transparent animate-spin"})})}),vn&&m.jsxs(he.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},className:"w-72 bg-slate-900 rounded-3xl border border-slate-700 shadow-2xl overflow-hidden flex flex-col h-[520px] relative",children:[m.jsxs("div",{className:"p-3 bg-slate-800 border-b border-slate-700 flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest",children:"AI Observation"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[jn.length>1&&m.jsx("button",{onClick:rT,className:"p-1.5 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-teal-400 transition",title:"",children:m.jsx(jP,{size:14})}),m.jsx(kP,{size:12,className:"text-teal-400"})]})]}),m.jsxs("div",{className:"flex-1 bg-black relative flex items-center justify-center overflow-hidden",children:[m.jsx("video",{ref:V,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover",onLoadedMetadata:A=>A.currentTarget.play()}),m.jsxs("div",{className:"absolute inset-0 pointer-events-none border-[15px] border-transparent",children:[m.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t border-l border-teal-500/40"}),m.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-t border-r border-teal-500/40"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b border-l border-teal-500/40"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b border-r border-teal-500/40"}),m.jsx(he.div,{animate:{top:["5%","95%","5%"]},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute left-2 right-2 h-px bg-teal-500/20 blur-[1px] z-10"})]})]}),m.jsxs("div",{className:"p-4 bg-slate-800/90 backdrop-blur-md",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(Ku,{size:16,className:"text-teal-400"}),m.jsx("h4",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:""})]}),m.jsx("p",{className:"text-[9px] text-slate-400 leading-relaxed italic",children:" AI "})]})]})]})})}),m.jsxs(Gt,{children:[l.subPhase==="PEER_REVIEW"&&_f&&m.jsx(oL,{reviewer:_f,actor:Me,hasHighEnergyBonus:de,onSubmit:jl}),l.subPhase==="TASK_EXECUTION"&&b&&m.jsxs("div",{className:"absolute top-24 right-6 flex flex-col items-center gap-2",children:[m.jsxs("div",{className:"w-4 h-32 bg-slate-800 rounded-full overflow-hidden border border-slate-600 relative",children:[m.jsx("div",{className:"absolute bottom-0 w-full transition-all duration-100 bg-gradient-to-t from-green-500 via-yellow-400 to-red-500",style:{height:`${Math.min(100,oe*200)}%`}}),m.jsx("div",{className:"absolute bottom-[40%] w-full h-[2px] bg-white opacity-50"})]}),m.jsx(o2,{size:16,className:oe>.4?"text-red-500 animate-bounce":"text-slate-500"}),de&&m.jsx(ex,{size:16,className:"text-yellow-400 fill-yellow-400 animate-pulse"})]})]}),m.jsx(Gt,{children:(l.subPhase==="SELECTING_SCORE_TARGET"||l.subPhase==="SELECTING_SUBSTITUTE"||l.subPhase==="SELECTING_COMPANION")&&m.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-6 rounded-2xl text-center border-2 border-amber-500/50 shadow-2xl",children:[m.jsxs("h3",{className:"font-bold text-amber-500 dark:text-amber-400 mb-2 text-xl",children:[l.subPhase==="SELECTING_SCORE_TARGET"&&(l.activeModifier==="CLONE"?" ":" "),l.subPhase==="SELECTING_SUBSTITUTE"&&" ",l.subPhase==="SELECTING_COMPANION"&&" "]}),m.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-60 overflow-y-auto mt-4",children:l.players.filter(A=>A.id!==Me.id).map(A=>m.jsxs("button",{onClick:()=>{l.subPhase==="SELECTING_SCORE_TARGET"&&wf(A.id),l.subPhase==="SELECTING_SUBSTITUTE"&&yf(A.id),l.subPhase==="SELECTING_COMPANION"&&vf(A.id)},className:"p-3 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-xl flex flex-col items-center gap-2 border border-transparent hover:border-amber-500 transition",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-300 dark:bg-slate-600 overflow-hidden",children:A.avatar.startsWith("data:")?m.jsx("img",{src:A.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-slate-700 dark:text-white",children:A.name[0]})}),m.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:A.name})]},A.id))})]})})}),m.jsx(Gt,{children:l.subPhase==="CHOOSING_HELPER"&&m.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-6 rounded-2xl text-center",children:[m.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:""}),m.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:l.players.filter(A=>A.id!==Me.id).map(A=>m.jsxs("button",{onClick:()=>Sf(A.id),className:"p-3 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-xl flex flex-col items-center gap-2",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-300 dark:bg-slate-600 overflow-hidden",children:A.avatar.startsWith("data:")?m.jsx("img",{src:A.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-slate-700 dark:text-white",children:A.name[0]})}),m.jsx("span",{className:"text-xs text-slate-800 dark:text-white",children:A.name})]},A.id))})]})})}),m.jsx("div",{className:"absolute bottom-6 left-6 z-40",children:m.jsx("div",{className:"relative group w-32 h-32",children:m.jsx("div",{className:"w-full h-full rounded-full overflow-hidden border-2 border-slate-200 dark:border-slate-700 shadow-2xl bg-white dark:bg-black flex items-center justify-center",children:Me.avatar.startsWith("data:")?m.jsx("img",{src:Me.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"text-4xl font-bold text-slate-400 dark:text-slate-500",children:Me.name[0]})})})})]}),m.jsxs("div",{className:`bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm border-slate-200 dark:border-white/5 flex flex-col transition-all duration-300 z-20 shadow-xl ${d?"w-full border-t min-h-[40vh]":i?"w-16 border-l":"w-64 border-l"}`,children:[m.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-200 dark:border-white/5 shrink-0",children:[!i&&m.jsx("span",{className:"font-bold text-slate-400 text-xs uppercase tracking-widest",children:""}),m.jsx("button",{onClick:()=>r(!i),className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-white transition",children:m.jsx(CP,{size:16})})]}),i?m.jsx("div",{className:"flex flex-col items-center gap-4 py-4",children:l.players.map(A=>m.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-[10px] border ${A.id===Me.id?"border-teal-500 text-teal-500":"border-slate-300 dark:border-slate-700 text-slate-400"}`,children:A.name[0]},A.id))}):m.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[m.jsx("div",{className:`overflow-y-auto custom-scrollbar p-3 transition-all duration-300 ${l.players.length>6?"space-y-1.5":"space-y-3"}`,style:{maxHeight:"65%"},children:[...l.players].sort((A,P)=>P.trustScore+P.insightScore+P.expressionScore-(A.trustScore+A.insightScore+A.expressionScore)).map(A=>{const P=A.trustScore+A.insightScore+A.expressionScore,R=l.players.length>6;return m.jsxs("div",{className:`rounded-xl border transition-all ${R?"p-2":"p-3"} ${A.id===Me.id?"bg-slate-50 dark:bg-slate-800 border-teal-500/30 shadow-lg":"bg-transparent border-slate-100 dark:border-slate-800/50"}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-700 dark:text-white overflow-hidden ring-1 ring-slate-300 dark:ring-slate-600 ${R?"w-6 h-6 text-[9px]":"w-8 h-8 text-[10px]"}`,children:A.avatar.startsWith("data:")?m.jsx("img",{src:A.avatar,className:"w-full h-full object-cover"}):A.name[0]}),m.jsxs("div",{className:"leading-tight",children:[m.jsx("div",{className:`font-bold text-slate-700 dark:text-slate-200 ${R?"text-[10px]":"text-xs"}`,children:A.name}),m.jsx("div",{className:"text-[9px] text-slate-400 dark:text-slate-500",children:A.mbti})]})]}),m.jsx("div",{className:`font-bold text-amber-500 ${R?"text-xs":"text-sm"}`,children:P})]}),m.jsxs("div",{className:"flex gap-1 text-[9px] text-slate-500",children:[m.jsxs("div",{className:"flex-1 bg-slate-100 dark:bg-slate-900/40 rounded px-1.5 py-0.5 flex justify-between",children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:A.trustScore})]}),m.jsxs("div",{className:"flex-1 bg-slate-100 dark:bg-slate-900/40 rounded px-1.5 py-0.5 flex justify-between",children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-purple-500 dark:text-purple-400",children:A.insightScore})]}),m.jsxs("div",{className:"flex-1 bg-slate-100 dark:bg-slate-900/40 rounded px-1.5 py-0.5 flex justify-between",children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-orange-500 dark:text-orange-400",children:A.expressionScore})]})]})]},A.id)})}),m.jsx("div",{className:"flex-1 bg-slate-50/50 dark:bg-slate-950/50 border-t border-slate-200 dark:border-slate-800 p-3 overflow-y-auto custom-scrollbar text-[10px] space-y-1.5 min-h-[150px]",children:l.logs.slice(-30).map(A=>m.jsxs("div",{className:"text-slate-500 dark:text-slate-400 leading-snug mb-1.5 border-b border-slate-200 dark:border-slate-900/50 pb-1",children:[m.jsx("span",{className:"text-teal-600 dark:text-teal-500 font-bold mr-1",children:A.author||""}),A.text,A.taskDetails&&m.jsx("div",{className:"text-[9px] text-slate-400 dark:text-slate-600 mt-0.5 italic line-clamp-2",children:A.taskDetails})]},A.id))})]})]})]}),C&&m.jsx(DS,{onClose:()=>N(!1)})]})]})}const YS=document.getElementById("root");if(!YS)throw new Error("Could not find root element to mount to");const sL=Ga.createRoot(YS);sL.render(m.jsx(Ae.StrictMode,{children:m.jsx(rL,{})}));
