(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function J0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W0={exports:{}},xl={},K0={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir=Symbol.for("react.element"),wT=Symbol.for("react.portal"),ET=Symbol.for("react.fragment"),CT=Symbol.for("react.strict_mode"),NT=Symbol.for("react.profiler"),IT=Symbol.for("react.provider"),kT=Symbol.for("react.context"),_T=Symbol.for("react.forward_ref"),AT=Symbol.for("react.suspense"),PT=Symbol.for("react.memo"),bT=Symbol.for("react.lazy"),Ff=Symbol.iterator;function RT(e){return e===null||typeof e!="object"?null:(e=Ff&&e[Ff]||e["@@iterator"],typeof e=="function"?e:null)}var Y0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X0=Object.assign,Q0={};function ho(e,t,n){this.props=e,this.context=t,this.refs=Q0,this.updater=n||Y0}ho.prototype.isReactComponent={};ho.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ho.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Z0(){}Z0.prototype=ho.prototype;function Mc(e,t,n){this.props=e,this.context=t,this.refs=Q0,this.updater=n||Y0}var Dc=Mc.prototype=new Z0;Dc.constructor=Mc;X0(Dc,ho.prototype);Dc.isPureReactComponent=!0;var Uf=Array.isArray,eg=Object.prototype.hasOwnProperty,Lc={current:null},tg={key:!0,ref:!0,__self:!0,__source:!0};function ng(e,t,n){var i,o={},r=null,s=null;if(t!=null)for(i in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(r=""+t.key),t)eg.call(t,i)&&!tg.hasOwnProperty(i)&&(o[i]=t[i]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)o[i]===void 0&&(o[i]=a[i]);return{$$typeof:Ir,type:e,key:r,ref:s,props:o,_owner:Lc.current}}function MT(e,t){return{$$typeof:Ir,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ir}function DT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vf=/\/+/g;function ea(e,t){return typeof e=="object"&&e!==null&&e.key!=null?DT(""+e.key):t.toString(36)}function fs(e,t,n,i,o){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ir:case wT:s=!0}}if(s)return s=e,o=o(s),e=i===""?"."+ea(s,0):i,Uf(o)?(n="",e!=null&&(n=e.replace(Vf,"$&/")+"/"),fs(o,t,n,"",function(u){return u})):o!=null&&(Fc(o)&&(o=MT(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Vf,"$&/")+"/")+e)),t.push(o)),1;if(s=0,i=i===""?".":i+":",Uf(e))for(var a=0;a<e.length;a++){r=e[a];var l=i+ea(r,a);s+=fs(r,t,n,l,o)}else if(l=RT(e),typeof l=="function")for(e=l.call(e),a=0;!(r=e.next()).done;)r=r.value,l=i+ea(r,a++),s+=fs(r,t,n,l,o);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ur(e,t,n){if(e==null)return e;var i=[],o=0;return fs(e,i,"","",function(r){return t.call(n,r,o++)}),i}function LT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var st={current:null},ps={transition:null},FT={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:ps,ReactCurrentOwner:Lc};function ig(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Ur,forEach:function(e,t,n){Ur(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ur(e,function(){t++}),t},toArray:function(e){return Ur(e,function(t){return t})||[]},only:function(e){if(!Fc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=ho;ae.Fragment=ET;ae.Profiler=NT;ae.PureComponent=Mc;ae.StrictMode=CT;ae.Suspense=AT;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FT;ae.act=ig;ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=X0({},e.props),o=e.key,r=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,s=Lc.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)eg.call(t,l)&&!tg.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Ir,type:e.type,key:o,ref:r,props:i,_owner:s}};ae.createContext=function(e){return e={$$typeof:kT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:IT,_context:e},e.Consumer=e};ae.createElement=ng;ae.createFactory=function(e){var t=ng.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:_T,render:e}};ae.isValidElement=Fc;ae.lazy=function(e){return{$$typeof:bT,_payload:{_status:-1,_result:e},_init:LT}};ae.memo=function(e,t){return{$$typeof:PT,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=ps.transition;ps.transition={};try{e()}finally{ps.transition=t}};ae.unstable_act=ig;ae.useCallback=function(e,t){return st.current.useCallback(e,t)};ae.useContext=function(e){return st.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return st.current.useDeferredValue(e)};ae.useEffect=function(e,t){return st.current.useEffect(e,t)};ae.useId=function(){return st.current.useId()};ae.useImperativeHandle=function(e,t,n){return st.current.useImperativeHandle(e,t,n)};ae.useInsertionEffect=function(e,t){return st.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return st.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return st.current.useMemo(e,t)};ae.useReducer=function(e,t,n){return st.current.useReducer(e,t,n)};ae.useRef=function(e){return st.current.useRef(e)};ae.useState=function(e){return st.current.useState(e)};ae.useSyncExternalStore=function(e,t,n){return st.current.useSyncExternalStore(e,t,n)};ae.useTransition=function(){return st.current.useTransition()};ae.version="18.3.1";K0.exports=ae;var A=K0.exports;const Se=J0(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT=A,VT=Symbol.for("react.element"),GT=Symbol.for("react.fragment"),BT=Object.prototype.hasOwnProperty,zT=UT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OT={key:!0,ref:!0,__self:!0,__source:!0};function og(e,t,n){var i,o={},r=null,s=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(s=t.ref);for(i in t)BT.call(t,i)&&!OT.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:VT,type:e,key:r,ref:s,props:o,_owner:zT.current}}xl.Fragment=GT;xl.jsx=og;xl.jsxs=og;W0.exports=xl;var m=W0.exports,ja={},rg={exports:{}},Tt={},sg={exports:{}},lg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,V){var z=D.length;D.push(V);e:for(;0<z;){var te=z-1>>>1,Z=D[te];if(0<o(Z,V))D[te]=V,D[z]=Z,z=te;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var V=D[0],z=D.pop();if(z!==V){D[0]=z;e:for(var te=0,Z=D.length,he=Z>>>1;te<he;){var ye=2*(te+1)-1,Ut=D[ye],Le=ye+1,mt=D[Le];if(0>o(Ut,z))Le<Z&&0>o(mt,Ut)?(D[te]=mt,D[Le]=z,te=Le):(D[te]=Ut,D[ye]=z,te=ye);else if(Le<Z&&0>o(mt,z))D[te]=mt,D[Le]=z,te=Le;else break e}}return V}function o(D,V){var z=D.sortIndex-V.sortIndex;return z!==0?z:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],d=1,p=null,h=3,g=!1,v=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var V=n(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=D)i(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(u)}}function E(D){if(T=!1,S(D),!v)if(n(l)!==null)v=!0,re(N);else{var V=n(u);V!==null&&J(E,V.startTime-D)}}function N(D,V){v=!1,T&&(T=!1,x(_),_=-1),g=!0;var z=h;try{for(S(V),p=n(l);p!==null&&(!(p.expirationTime>V)||D&&!L());){var te=p.callback;if(typeof te=="function"){p.callback=null,h=p.priorityLevel;var Z=te(p.expirationTime<=V);V=e.unstable_now(),typeof Z=="function"?p.callback=Z:p===n(l)&&i(l),S(V)}else i(l);p=n(l)}if(p!==null)var he=!0;else{var ye=n(u);ye!==null&&J(E,ye.startTime-V),he=!1}return he}finally{p=null,h=z,g=!1}}var C=!1,I=null,_=-1,P=5,R=-1;function L(){return!(e.unstable_now()-R<P)}function ee(){if(I!==null){var D=e.unstable_now();R=D;var V=!0;try{V=I(!0,D)}finally{V?H():(C=!1,I=null)}}else C=!1}var H;if(typeof y=="function")H=function(){y(ee)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,se=$.port2;$.port1.onmessage=ee,H=function(){se.postMessage(null)}}else H=function(){w(ee,0)};function re(D){I=D,C||(C=!0,H())}function J(D,V){_=w(function(){D(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,re(N))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var z=h;h=V;try{return D()}finally{h=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=h;h=D;try{return V()}finally{h=z}},e.unstable_scheduleCallback=function(D,V,z){var te=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?te+z:te):z=te,D){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,D={id:d++,callback:V,priorityLevel:D,startTime:z,expirationTime:Z,sortIndex:-1},z>te?(D.sortIndex=z,t(u,D),n(l)===null&&D===n(u)&&(T?(x(_),_=-1):T=!0,J(E,z-te))):(D.sortIndex=Z,t(l,D),v||g||(v=!0,re(N))),D},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(D){var V=h;return function(){var z=h;h=V;try{return D.apply(this,arguments)}finally{h=z}}}})(lg);sg.exports=lg;var HT=sg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T=A,St=HT;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ag=new Set,or={};function Ti(e,t){oo(e,t),oo(e+"Capture",t)}function oo(e,t){for(or[e]=t,e=0;e<t.length;e++)ag.add(t[e])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ja=Object.prototype.hasOwnProperty,qT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gf={},Bf={};function jT(e){return Ja.call(Bf,e)?!0:Ja.call(Gf,e)?!1:qT.test(e)?Bf[e]=!0:(Gf[e]=!0,!1)}function JT(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function WT(e,t,n,i){if(t===null||typeof t>"u"||JT(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lt(e,t,n,i,o,r,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=s}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Uc=/[\-:]([a-z])/g;function Vc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Uc,Vc);Je[t]=new lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Uc,Vc);Je[t]=new lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Uc,Vc);Je[t]=new lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new lt(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gc(e,t,n,i){var o=Je.hasOwnProperty(t)?Je[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(WT(t,n,o,i)&&(n=null),i||o===null?jT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,i=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var xn=$T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vr=Symbol.for("react.element"),_i=Symbol.for("react.portal"),Ai=Symbol.for("react.fragment"),Bc=Symbol.for("react.strict_mode"),Wa=Symbol.for("react.profiler"),ug=Symbol.for("react.provider"),cg=Symbol.for("react.context"),zc=Symbol.for("react.forward_ref"),Ka=Symbol.for("react.suspense"),Ya=Symbol.for("react.suspense_list"),Oc=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),dg=Symbol.for("react.offscreen"),zf=Symbol.iterator;function Io(e){return e===null||typeof e!="object"?null:(e=zf&&e[zf]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,ta;function Uo(e){if(ta===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ta=t&&t[1]||""}return`
`+ta+e}var na=!1;function ia(e,t){if(!e||na)return"";na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),r=i.stack.split(`
`),s=o.length-1,a=r.length-1;1<=s&&0<=a&&o[s]!==r[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==r[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==r[a]){var l=`
`+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Uo(e):""}function KT(e){switch(e.tag){case 5:return Uo(e.type);case 16:return Uo("Lazy");case 13:return Uo("Suspense");case 19:return Uo("SuspenseList");case 0:case 2:case 15:return e=ia(e.type,!1),e;case 11:return e=ia(e.type.render,!1),e;case 1:return e=ia(e.type,!0),e;default:return""}}function Xa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ai:return"Fragment";case _i:return"Portal";case Wa:return"Profiler";case Bc:return"StrictMode";case Ka:return"Suspense";case Ya:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cg:return(e.displayName||"Context")+".Consumer";case ug:return(e._context.displayName||"Context")+".Provider";case zc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oc:return t=e.displayName||null,t!==null?t:Xa(e.type)||"Memo";case In:t=e._payload,e=e._init;try{return Xa(e(t))}catch{}}return null}function YT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xa(t);case 8:return t===Bc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function On(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function XT(e){var t=fg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){i=""+s,r.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gr(e){e._valueTracker||(e._valueTracker=XT(e))}function pg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=fg(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function bs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qa(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Of(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=On(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hg(e,t){t=t.checked,t!=null&&Gc(e,"checked",t,!1)}function Za(e,t){hg(e,t);var n=On(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?eu(e,t.type,n):t.hasOwnProperty("defaultValue")&&eu(e,t.type,On(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function eu(e,t,n){(t!=="number"||bs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vo=Array.isArray;function Wi(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+On(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function tu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $f(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(Vo(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:On(n)}}function mg(e,t){var n=On(t.value),i=On(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function qf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Br,yg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Br=Br||document.createElement("div"),Br.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Br.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QT=["Webkit","ms","Moz","O"];Object.keys(Ho).forEach(function(e){QT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ho[t]=Ho[e]})});function vg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ho.hasOwnProperty(e)&&Ho[e]?(""+t).trim():t+"px"}function xg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=vg(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,o):e[n]=o}}var ZT=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iu(e,t){if(t){if(ZT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function ou(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ru=null;function Hc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var su=null,Ki=null,Yi=null;function jf(e){if(e=Ar(e)){if(typeof su!="function")throw Error(F(280));var t=e.stateNode;t&&(t=Cl(t),su(e.stateNode,e.type,t))}}function Sg(e){Ki?Yi?Yi.push(e):Yi=[e]:Ki=e}function Tg(){if(Ki){var e=Ki,t=Yi;if(Yi=Ki=null,jf(e),t)for(e=0;e<t.length;e++)jf(t[e])}}function wg(e,t){return e(t)}function Eg(){}var oa=!1;function Cg(e,t,n){if(oa)return e(t,n);oa=!0;try{return wg(e,t,n)}finally{oa=!1,(Ki!==null||Yi!==null)&&(Eg(),Tg())}}function sr(e,t){var n=e.stateNode;if(n===null)return null;var i=Cl(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var lu=!1;if(fn)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){lu=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{lu=!1}function e1(e,t,n,i,o,r,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var $o=!1,Rs=null,Ms=!1,au=null,t1={onError:function(e){$o=!0,Rs=e}};function n1(e,t,n,i,o,r,s,a,l){$o=!1,Rs=null,e1.apply(t1,arguments)}function i1(e,t,n,i,o,r,s,a,l){if(n1.apply(this,arguments),$o){if($o){var u=Rs;$o=!1,Rs=null}else throw Error(F(198));Ms||(Ms=!0,au=u)}}function wi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ng(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jf(e){if(wi(e)!==e)throw Error(F(188))}function o1(e){var t=e.alternate;if(!t){if(t=wi(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var r=o.alternate;if(r===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===n)return Jf(o),e;if(r===i)return Jf(o),t;r=r.sibling}throw Error(F(188))}if(n.return!==i.return)n=o,i=r;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,i=r;break}if(a===i){s=!0,i=o,n=r;break}a=a.sibling}if(!s){for(a=r.child;a;){if(a===n){s=!0,n=r,i=o;break}if(a===i){s=!0,i=r,n=o;break}a=a.sibling}if(!s)throw Error(F(189))}}if(n.alternate!==i)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function Ig(e){return e=o1(e),e!==null?kg(e):null}function kg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kg(e);if(t!==null)return t;e=e.sibling}return null}var _g=St.unstable_scheduleCallback,Wf=St.unstable_cancelCallback,r1=St.unstable_shouldYield,s1=St.unstable_requestPaint,Re=St.unstable_now,l1=St.unstable_getCurrentPriorityLevel,$c=St.unstable_ImmediatePriority,Ag=St.unstable_UserBlockingPriority,Ds=St.unstable_NormalPriority,a1=St.unstable_LowPriority,Pg=St.unstable_IdlePriority,Sl=null,nn=null;function u1(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Sl,e,void 0,(e.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:f1,c1=Math.log,d1=Math.LN2;function f1(e){return e>>>=0,e===0?32:31-(c1(e)/d1|0)|0}var zr=64,Or=4194304;function Go(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ls(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,o=e.suspendedLanes,r=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?i=Go(a):(r&=s,r!==0&&(i=Go(r)))}else s=n&~o,s!==0?i=Go(s):r!==0&&(i=Go(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,r=t&-t,o>=r||o===16&&(r&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-jt(t),o=1<<n,i|=e[n],t&=~o;return i}function p1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h1(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,r=e.pendingLanes;0<r;){var s=31-jt(r),a=1<<s,l=o[s];l===-1?(!(a&n)||a&i)&&(o[s]=p1(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}}function uu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bg(){var e=zr;return zr<<=1,!(zr&4194240)&&(zr=64),e}function ra(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jt(t),e[t]=n}function m1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-jt(n),r=1<<o;t[o]=0,i[o]=-1,e[o]=-1,n&=~r}}function qc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-jt(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}var pe=0;function Rg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mg,jc,Dg,Lg,Fg,cu=!1,Hr=[],Dn=null,Ln=null,Fn=null,lr=new Map,ar=new Map,_n=[],g1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kf(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":lr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ar.delete(t.pointerId)}}function _o(e,t,n,i,o,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[o]},t!==null&&(t=Ar(t),t!==null&&jc(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function y1(e,t,n,i,o){switch(t){case"focusin":return Dn=_o(Dn,e,t,n,i,o),!0;case"dragenter":return Ln=_o(Ln,e,t,n,i,o),!0;case"mouseover":return Fn=_o(Fn,e,t,n,i,o),!0;case"pointerover":var r=o.pointerId;return lr.set(r,_o(lr.get(r)||null,e,t,n,i,o)),!0;case"gotpointercapture":return r=o.pointerId,ar.set(r,_o(ar.get(r)||null,e,t,n,i,o)),!0}return!1}function Ug(e){var t=oi(e.target);if(t!==null){var n=wi(t);if(n!==null){if(t=n.tag,t===13){if(t=Ng(n),t!==null){e.blockedOn=t,Fg(e.priority,function(){Dg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=du(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);ru=i,n.target.dispatchEvent(i),ru=null}else return t=Ar(n),t!==null&&jc(t),e.blockedOn=n,!1;t.shift()}return!0}function Yf(e,t,n){hs(e)&&n.delete(t)}function v1(){cu=!1,Dn!==null&&hs(Dn)&&(Dn=null),Ln!==null&&hs(Ln)&&(Ln=null),Fn!==null&&hs(Fn)&&(Fn=null),lr.forEach(Yf),ar.forEach(Yf)}function Ao(e,t){e.blockedOn===t&&(e.blockedOn=null,cu||(cu=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,v1)))}function ur(e){function t(o){return Ao(o,e)}if(0<Hr.length){Ao(Hr[0],e);for(var n=1;n<Hr.length;n++){var i=Hr[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Dn!==null&&Ao(Dn,e),Ln!==null&&Ao(Ln,e),Fn!==null&&Ao(Fn,e),lr.forEach(t),ar.forEach(t),n=0;n<_n.length;n++)i=_n[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<_n.length&&(n=_n[0],n.blockedOn===null);)Ug(n),n.blockedOn===null&&_n.shift()}var Xi=xn.ReactCurrentBatchConfig,Fs=!0;function x1(e,t,n,i){var o=pe,r=Xi.transition;Xi.transition=null;try{pe=1,Jc(e,t,n,i)}finally{pe=o,Xi.transition=r}}function S1(e,t,n,i){var o=pe,r=Xi.transition;Xi.transition=null;try{pe=4,Jc(e,t,n,i)}finally{pe=o,Xi.transition=r}}function Jc(e,t,n,i){if(Fs){var o=du(e,t,n,i);if(o===null)ma(e,t,i,Us,n),Kf(e,i);else if(y1(o,e,t,n,i))i.stopPropagation();else if(Kf(e,i),t&4&&-1<g1.indexOf(e)){for(;o!==null;){var r=Ar(o);if(r!==null&&Mg(r),r=du(e,t,n,i),r===null&&ma(e,t,i,Us,n),r===o)break;o=r}o!==null&&i.stopPropagation()}else ma(e,t,i,null,n)}}var Us=null;function du(e,t,n,i){if(Us=null,e=Hc(i),e=oi(e),e!==null)if(t=wi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ng(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Us=e,null}function Vg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l1()){case $c:return 1;case Ag:return 4;case Ds:case a1:return 16;case Pg:return 536870912;default:return 16}default:return 16}}var Pn=null,Wc=null,ms=null;function Gg(){if(ms)return ms;var e,t=Wc,n=t.length,i,o="value"in Pn?Pn.value:Pn.textContent,r=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(i=1;i<=s&&t[n-i]===o[r-i];i++);return ms=o.slice(e,1<i?1-i:void 0)}function gs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $r(){return!0}function Xf(){return!1}function wt(e){function t(n,i,o,r,s){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?$r:Xf,this.isPropagationStopped=Xf,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),t}var mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=wt(mo),_r=_e({},mo,{view:0,detail:0}),T1=wt(_r),sa,la,Po,Tl=_e({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Po&&(Po&&e.type==="mousemove"?(sa=e.screenX-Po.screenX,la=e.screenY-Po.screenY):la=sa=0,Po=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:la}}),Qf=wt(Tl),w1=_e({},Tl,{dataTransfer:0}),E1=wt(w1),C1=_e({},_r,{relatedTarget:0}),aa=wt(C1),N1=_e({},mo,{animationName:0,elapsedTime:0,pseudoElement:0}),I1=wt(N1),k1=_e({},mo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_1=wt(k1),A1=_e({},mo,{data:0}),Zf=wt(A1),P1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=R1[e])?!!t[e]:!1}function Yc(){return M1}var D1=_e({},_r,{key:function(e){if(e.key){var t=P1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?b1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yc,charCode:function(e){return e.type==="keypress"?gs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),L1=wt(D1),F1=_e({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ep=wt(F1),U1=_e({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yc}),V1=wt(U1),G1=_e({},mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),B1=wt(G1),z1=_e({},Tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),O1=wt(z1),H1=[9,13,27,32],Xc=fn&&"CompositionEvent"in window,qo=null;fn&&"documentMode"in document&&(qo=document.documentMode);var $1=fn&&"TextEvent"in window&&!qo,Bg=fn&&(!Xc||qo&&8<qo&&11>=qo),tp=" ",np=!1;function zg(e,t){switch(e){case"keyup":return H1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Og(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pi=!1;function q1(e,t){switch(e){case"compositionend":return Og(t);case"keypress":return t.which!==32?null:(np=!0,tp);case"textInput":return e=t.data,e===tp&&np?null:e;default:return null}}function j1(e,t){if(Pi)return e==="compositionend"||!Xc&&zg(e,t)?(e=Gg(),ms=Wc=Pn=null,Pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bg&&t.locale!=="ko"?null:t.data;default:return null}}var J1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J1[e.type]:t==="textarea"}function Hg(e,t,n,i){Sg(i),t=Vs(t,"onChange"),0<t.length&&(n=new Kc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var jo=null,cr=null;function W1(e){ey(e,0)}function wl(e){var t=Mi(e);if(pg(t))return e}function K1(e,t){if(e==="change")return t}var $g=!1;if(fn){var ua;if(fn){var ca="oninput"in document;if(!ca){var op=document.createElement("div");op.setAttribute("oninput","return;"),ca=typeof op.oninput=="function"}ua=ca}else ua=!1;$g=ua&&(!document.documentMode||9<document.documentMode)}function rp(){jo&&(jo.detachEvent("onpropertychange",qg),cr=jo=null)}function qg(e){if(e.propertyName==="value"&&wl(cr)){var t=[];Hg(t,cr,e,Hc(e)),Cg(W1,t)}}function Y1(e,t,n){e==="focusin"?(rp(),jo=t,cr=n,jo.attachEvent("onpropertychange",qg)):e==="focusout"&&rp()}function X1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wl(cr)}function Q1(e,t){if(e==="click")return wl(t)}function Z1(e,t){if(e==="input"||e==="change")return wl(t)}function ew(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:ew;function dr(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Ja.call(t,o)||!Yt(e[o],t[o]))return!1}return!0}function sp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lp(e,t){var n=sp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sp(n)}}function jg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jg(){for(var e=window,t=bs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bs(e.document)}return t}function Qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tw(e){var t=Jg(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&jg(n.ownerDocument.documentElement,n)){if(i!==null&&Qc(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,r=Math.min(i.start,o);i=i.end===void 0?r:Math.min(i.end,o),!e.extend&&r>i&&(o=i,i=r,r=o),o=lp(n,r);var s=lp(n,i);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nw=fn&&"documentMode"in document&&11>=document.documentMode,bi=null,fu=null,Jo=null,pu=!1;function ap(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pu||bi==null||bi!==bs(i)||(i=bi,"selectionStart"in i&&Qc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Jo&&dr(Jo,i)||(Jo=i,i=Vs(fu,"onSelect"),0<i.length&&(t=new Kc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=bi)))}function qr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ri={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionend:qr("Transition","TransitionEnd")},da={},Wg={};fn&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function El(e){if(da[e])return da[e];if(!Ri[e])return e;var t=Ri[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wg)return da[e]=t[n];return e}var Kg=El("animationend"),Yg=El("animationiteration"),Xg=El("animationstart"),Qg=El("transitionend"),Zg=new Map,up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(e,t){Zg.set(e,t),Ti(t,[e])}for(var fa=0;fa<up.length;fa++){var pa=up[fa],iw=pa.toLowerCase(),ow=pa[0].toUpperCase()+pa.slice(1);jn(iw,"on"+ow)}jn(Kg,"onAnimationEnd");jn(Yg,"onAnimationIteration");jn(Xg,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn(Qg,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function cp(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,i1(i,t,void 0,e),e.currentTarget=null}function ey(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&o.isPropagationStopped())break e;cp(o,a,u),r=l}else for(s=0;s<i.length;s++){if(a=i[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&o.isPropagationStopped())break e;cp(o,a,u),r=l}}}if(Ms)throw e=au,Ms=!1,au=null,e}function ve(e,t){var n=t[vu];n===void 0&&(n=t[vu]=new Set);var i=e+"__bubble";n.has(i)||(ty(t,e,2,!1),n.add(i))}function ha(e,t,n){var i=0;t&&(i|=4),ty(n,e,i,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function fr(e){if(!e[jr]){e[jr]=!0,ag.forEach(function(n){n!=="selectionchange"&&(rw.has(n)||ha(n,!1,e),ha(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jr]||(t[jr]=!0,ha("selectionchange",!1,t))}}function ty(e,t,n,i){switch(Vg(t)){case 1:var o=x1;break;case 4:o=S1;break;default:o=Jc}n=o.bind(null,t,n,e),o=void 0,!lu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ma(e,t,n,i,o){var r=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var a=i.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=oi(a),s===null)return;if(l=s.tag,l===5||l===6){i=r=s;continue e}a=a.parentNode}}i=i.return}Cg(function(){var u=r,d=Hc(n),p=[];e:{var h=Zg.get(e);if(h!==void 0){var g=Kc,v=e;switch(e){case"keypress":if(gs(n)===0)break e;case"keydown":case"keyup":g=L1;break;case"focusin":v="focus",g=aa;break;case"focusout":v="blur",g=aa;break;case"beforeblur":case"afterblur":g=aa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=E1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=V1;break;case Kg:case Yg:case Xg:g=I1;break;case Qg:g=B1;break;case"scroll":g=T1;break;case"wheel":g=O1;break;case"copy":case"cut":case"paste":g=_1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ep}var T=(t&4)!==0,w=!T&&e==="scroll",x=T?h!==null?h+"Capture":null:h;T=[];for(var y=u,S;y!==null;){S=y;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,x!==null&&(E=sr(y,x),E!=null&&T.push(pr(y,E,S)))),w)break;y=y.return}0<T.length&&(h=new g(h,v,null,n,d),p.push({event:h,listeners:T}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==ru&&(v=n.relatedTarget||n.fromElement)&&(oi(v)||v[pn]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?oi(v):null,v!==null&&(w=wi(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(T=Qf,E="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(T=ep,E="onPointerLeave",x="onPointerEnter",y="pointer"),w=g==null?h:Mi(g),S=v==null?h:Mi(v),h=new T(E,y+"leave",g,n,d),h.target=w,h.relatedTarget=S,E=null,oi(d)===u&&(T=new T(x,y+"enter",v,n,d),T.target=S,T.relatedTarget=w,E=T),w=E,g&&v)t:{for(T=g,x=v,y=0,S=T;S;S=Ni(S))y++;for(S=0,E=x;E;E=Ni(E))S++;for(;0<y-S;)T=Ni(T),y--;for(;0<S-y;)x=Ni(x),S--;for(;y--;){if(T===x||x!==null&&T===x.alternate)break t;T=Ni(T),x=Ni(x)}T=null}else T=null;g!==null&&dp(p,h,g,T,!1),v!==null&&w!==null&&dp(p,w,v,T,!0)}}e:{if(h=u?Mi(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var N=K1;else if(ip(h))if($g)N=Z1;else{N=X1;var C=Y1}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Q1);if(N&&(N=N(e,u))){Hg(p,N,n,d);break e}C&&C(e,h,u),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&eu(h,"number",h.value)}switch(C=u?Mi(u):window,e){case"focusin":(ip(C)||C.contentEditable==="true")&&(bi=C,fu=u,Jo=null);break;case"focusout":Jo=fu=bi=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,ap(p,n,d);break;case"selectionchange":if(nw)break;case"keydown":case"keyup":ap(p,n,d)}var I;if(Xc)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Pi?zg(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Bg&&n.locale!=="ko"&&(Pi||_!=="onCompositionStart"?_==="onCompositionEnd"&&Pi&&(I=Gg()):(Pn=d,Wc="value"in Pn?Pn.value:Pn.textContent,Pi=!0)),C=Vs(u,_),0<C.length&&(_=new Zf(_,e,null,n,d),p.push({event:_,listeners:C}),I?_.data=I:(I=Og(n),I!==null&&(_.data=I)))),(I=$1?q1(e,n):j1(e,n))&&(u=Vs(u,"onBeforeInput"),0<u.length&&(d=new Zf("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=I))}ey(p,t)})}function pr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vs(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,r=o.stateNode;o.tag===5&&r!==null&&(o=r,r=sr(e,n),r!=null&&i.unshift(pr(e,r,o)),r=sr(e,t),r!=null&&i.push(pr(e,r,o))),e=e.return}return i}function Ni(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dp(e,t,n,i,o){for(var r=t._reactName,s=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,o?(l=sr(n,r),l!=null&&s.unshift(pr(n,l,a))):o||(l=sr(n,r),l!=null&&s.push(pr(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var sw=/\r\n?/g,lw=/\u0000|\uFFFD/g;function fp(e){return(typeof e=="string"?e:""+e).replace(sw,`
`).replace(lw,"")}function Jr(e,t,n){if(t=fp(t),fp(e)!==t&&n)throw Error(F(425))}function Gs(){}var hu=null,mu=null;function gu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yu=typeof setTimeout=="function"?setTimeout:void 0,aw=typeof clearTimeout=="function"?clearTimeout:void 0,pp=typeof Promise=="function"?Promise:void 0,uw=typeof queueMicrotask=="function"?queueMicrotask:typeof pp<"u"?function(e){return pp.resolve(null).then(e).catch(cw)}:yu;function cw(e){setTimeout(function(){throw e})}function ga(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){e.removeChild(o),ur(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);ur(t)}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var go=Math.random().toString(36).slice(2),en="__reactFiber$"+go,hr="__reactProps$"+go,pn="__reactContainer$"+go,vu="__reactEvents$"+go,dw="__reactListeners$"+go,fw="__reactHandles$"+go;function oi(e){var t=e[en];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[en]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hp(e);e!==null;){if(n=e[en])return n;e=hp(e)}return t}e=n,n=e.parentNode}return null}function Ar(e){return e=e[en]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function Cl(e){return e[hr]||null}var xu=[],Di=-1;function Jn(e){return{current:e}}function xe(e){0>Di||(e.current=xu[Di],xu[Di]=null,Di--)}function ge(e,t){Di++,xu[Di]=e.current,e.current=t}var Hn={},et=Jn(Hn),dt=Jn(!1),mi=Hn;function ro(e,t){var n=e.type.contextTypes;if(!n)return Hn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},r;for(r in n)o[r]=t[r];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ft(e){return e=e.childContextTypes,e!=null}function Bs(){xe(dt),xe(et)}function mp(e,t,n){if(et.current!==Hn)throw Error(F(168));ge(et,t),ge(dt,n)}function ny(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(F(108,YT(e)||"Unknown",o));return _e({},n,i)}function zs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hn,mi=et.current,ge(et,e),ge(dt,dt.current),!0}function gp(e,t,n){var i=e.stateNode;if(!i)throw Error(F(169));n?(e=ny(e,t,mi),i.__reactInternalMemoizedMergedChildContext=e,xe(dt),xe(et),ge(et,e)):xe(dt),ge(dt,n)}var an=null,Nl=!1,ya=!1;function iy(e){an===null?an=[e]:an.push(e)}function pw(e){Nl=!0,iy(e)}function Wn(){if(!ya&&an!==null){ya=!0;var e=0,t=pe;try{var n=an;for(pe=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}an=null,Nl=!1}catch(o){throw an!==null&&(an=an.slice(e+1)),_g($c,Wn),o}finally{pe=t,ya=!1}}return null}var Li=[],Fi=0,Os=null,Hs=0,kt=[],_t=0,gi=null,un=1,cn="";function Zn(e,t){Li[Fi++]=Hs,Li[Fi++]=Os,Os=e,Hs=t}function oy(e,t,n){kt[_t++]=un,kt[_t++]=cn,kt[_t++]=gi,gi=e;var i=un;e=cn;var o=32-jt(i)-1;i&=~(1<<o),n+=1;var r=32-jt(t)+o;if(30<r){var s=o-o%5;r=(i&(1<<s)-1).toString(32),i>>=s,o-=s,un=1<<32-jt(t)+o|n<<o|i,cn=r+e}else un=1<<r|n<<o|i,cn=e}function Zc(e){e.return!==null&&(Zn(e,1),oy(e,1,0))}function ed(e){for(;e===Os;)Os=Li[--Fi],Li[Fi]=null,Hs=Li[--Fi],Li[Fi]=null;for(;e===gi;)gi=kt[--_t],kt[_t]=null,cn=kt[--_t],kt[_t]=null,un=kt[--_t],kt[_t]=null}var xt=null,vt=null,Te=!1,$t=null;function ry(e,t){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,vt=Un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,vt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=gi!==null?{id:un,overflow:cn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xt=e,vt=null,!0):!1;default:return!1}}function Su(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tu(e){if(Te){var t=vt;if(t){var n=t;if(!yp(e,t)){if(Su(e))throw Error(F(418));t=Un(n.nextSibling);var i=xt;t&&yp(e,t)?ry(i,n):(e.flags=e.flags&-4097|2,Te=!1,xt=e)}}else{if(Su(e))throw Error(F(418));e.flags=e.flags&-4097|2,Te=!1,xt=e}}}function vp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function Wr(e){if(e!==xt)return!1;if(!Te)return vp(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gu(e.type,e.memoizedProps)),t&&(t=vt)){if(Su(e))throw sy(),Error(F(418));for(;t;)ry(e,t),t=Un(t.nextSibling)}if(vp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){vt=Un(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}vt=null}}else vt=xt?Un(e.stateNode.nextSibling):null;return!0}function sy(){for(var e=vt;e;)e=Un(e.nextSibling)}function so(){vt=xt=null,Te=!1}function td(e){$t===null?$t=[e]:$t.push(e)}var hw=xn.ReactCurrentBatchConfig;function bo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var i=n.stateNode}if(!i)throw Error(F(147,e));var o=i,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(s){var a=o.refs;s===null?delete a[r]:a[r]=s},t._stringRef=r,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function Kr(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xp(e){var t=e._init;return t(e._payload)}function ly(e){function t(x,y){if(e){var S=x.deletions;S===null?(x.deletions=[y],x.flags|=16):S.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function i(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function o(x,y){return x=zn(x,y),x.index=0,x.sibling=null,x}function r(x,y,S){return x.index=S,e?(S=x.alternate,S!==null?(S=S.index,S<y?(x.flags|=2,y):S):(x.flags|=2,y)):(x.flags|=1048576,y)}function s(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,y,S,E){return y===null||y.tag!==6?(y=Ca(S,x.mode,E),y.return=x,y):(y=o(y,S),y.return=x,y)}function l(x,y,S,E){var N=S.type;return N===Ai?d(x,y,S.props.children,E,S.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===In&&xp(N)===y.type)?(E=o(y,S.props),E.ref=bo(x,y,S),E.return=x,E):(E=Es(S.type,S.key,S.props,null,x.mode,E),E.ref=bo(x,y,S),E.return=x,E)}function u(x,y,S,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Na(S,x.mode,E),y.return=x,y):(y=o(y,S.children||[]),y.return=x,y)}function d(x,y,S,E,N){return y===null||y.tag!==7?(y=di(S,x.mode,E,N),y.return=x,y):(y=o(y,S),y.return=x,y)}function p(x,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ca(""+y,x.mode,S),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vr:return S=Es(y.type,y.key,y.props,null,x.mode,S),S.ref=bo(x,null,y),S.return=x,S;case _i:return y=Na(y,x.mode,S),y.return=x,y;case In:var E=y._init;return p(x,E(y._payload),S)}if(Vo(y)||Io(y))return y=di(y,x.mode,S,null),y.return=x,y;Kr(x,y)}return null}function h(x,y,S,E){var N=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:a(x,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vr:return S.key===N?l(x,y,S,E):null;case _i:return S.key===N?u(x,y,S,E):null;case In:return N=S._init,h(x,y,N(S._payload),E)}if(Vo(S)||Io(S))return N!==null?null:d(x,y,S,E,null);Kr(x,S)}return null}function g(x,y,S,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(S)||null,a(y,x,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Vr:return x=x.get(E.key===null?S:E.key)||null,l(y,x,E,N);case _i:return x=x.get(E.key===null?S:E.key)||null,u(y,x,E,N);case In:var C=E._init;return g(x,y,S,C(E._payload),N)}if(Vo(E)||Io(E))return x=x.get(S)||null,d(y,x,E,N,null);Kr(y,E)}return null}function v(x,y,S,E){for(var N=null,C=null,I=y,_=y=0,P=null;I!==null&&_<S.length;_++){I.index>_?(P=I,I=null):P=I.sibling;var R=h(x,I,S[_],E);if(R===null){I===null&&(I=P);break}e&&I&&R.alternate===null&&t(x,I),y=r(R,y,_),C===null?N=R:C.sibling=R,C=R,I=P}if(_===S.length)return n(x,I),Te&&Zn(x,_),N;if(I===null){for(;_<S.length;_++)I=p(x,S[_],E),I!==null&&(y=r(I,y,_),C===null?N=I:C.sibling=I,C=I);return Te&&Zn(x,_),N}for(I=i(x,I);_<S.length;_++)P=g(I,x,_,S[_],E),P!==null&&(e&&P.alternate!==null&&I.delete(P.key===null?_:P.key),y=r(P,y,_),C===null?N=P:C.sibling=P,C=P);return e&&I.forEach(function(L){return t(x,L)}),Te&&Zn(x,_),N}function T(x,y,S,E){var N=Io(S);if(typeof N!="function")throw Error(F(150));if(S=N.call(S),S==null)throw Error(F(151));for(var C=N=null,I=y,_=y=0,P=null,R=S.next();I!==null&&!R.done;_++,R=S.next()){I.index>_?(P=I,I=null):P=I.sibling;var L=h(x,I,R.value,E);if(L===null){I===null&&(I=P);break}e&&I&&L.alternate===null&&t(x,I),y=r(L,y,_),C===null?N=L:C.sibling=L,C=L,I=P}if(R.done)return n(x,I),Te&&Zn(x,_),N;if(I===null){for(;!R.done;_++,R=S.next())R=p(x,R.value,E),R!==null&&(y=r(R,y,_),C===null?N=R:C.sibling=R,C=R);return Te&&Zn(x,_),N}for(I=i(x,I);!R.done;_++,R=S.next())R=g(I,x,_,R.value,E),R!==null&&(e&&R.alternate!==null&&I.delete(R.key===null?_:R.key),y=r(R,y,_),C===null?N=R:C.sibling=R,C=R);return e&&I.forEach(function(ee){return t(x,ee)}),Te&&Zn(x,_),N}function w(x,y,S,E){if(typeof S=="object"&&S!==null&&S.type===Ai&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Vr:e:{for(var N=S.key,C=y;C!==null;){if(C.key===N){if(N=S.type,N===Ai){if(C.tag===7){n(x,C.sibling),y=o(C,S.props.children),y.return=x,x=y;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===In&&xp(N)===C.type){n(x,C.sibling),y=o(C,S.props),y.ref=bo(x,C,S),y.return=x,x=y;break e}n(x,C);break}else t(x,C);C=C.sibling}S.type===Ai?(y=di(S.props.children,x.mode,E,S.key),y.return=x,x=y):(E=Es(S.type,S.key,S.props,null,x.mode,E),E.ref=bo(x,y,S),E.return=x,x=E)}return s(x);case _i:e:{for(C=S.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(x,y.sibling),y=o(y,S.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else t(x,y);y=y.sibling}y=Na(S,x.mode,E),y.return=x,x=y}return s(x);case In:return C=S._init,w(x,y,C(S._payload),E)}if(Vo(S))return v(x,y,S,E);if(Io(S))return T(x,y,S,E);Kr(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(x,y.sibling),y=o(y,S),y.return=x,x=y):(n(x,y),y=Ca(S,x.mode,E),y.return=x,x=y),s(x)):n(x,y)}return w}var lo=ly(!0),ay=ly(!1),$s=Jn(null),qs=null,Ui=null,nd=null;function id(){nd=Ui=qs=null}function od(e){var t=$s.current;xe($s),e._currentValue=t}function wu(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Qi(e,t){qs=e,nd=Ui=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ut=!0),e.firstContext=null)}function Dt(e){var t=e._currentValue;if(nd!==e)if(e={context:e,memoizedValue:t,next:null},Ui===null){if(qs===null)throw Error(F(308));Ui=e,qs.dependencies={lanes:0,firstContext:e}}else Ui=Ui.next=e;return t}var ri=null;function rd(e){ri===null?ri=[e]:ri.push(e)}function uy(e,t,n,i){var o=t.interleaved;return o===null?(n.next=n,rd(t)):(n.next=o.next,o.next=n),t.interleaved=n,hn(e,i)}function hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kn=!1;function sd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ce&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,hn(e,n)}return o=i.interleaved,o===null?(t.next=t,rd(i)):(t.next=o.next,o.next=t),i.interleaved=t,hn(e,n)}function ys(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,qc(e,n)}}function Sp(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?o=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?o=r=t:r=r.next=t}else o=r=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:r,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function js(e,t,n,i){var o=e.updateQueue;kn=!1;var r=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?r=u:s.next=u,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(r!==null){var p=o.baseState;s=0,d=u=l=null,a=r;do{var h=a.lane,g=a.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,T=a;switch(h=t,g=n,T.tag){case 1:if(v=T.payload,typeof v=="function"){p=v.call(g,p,h);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,h=typeof v=="function"?v.call(g,p,h):v,h==null)break e;p=_e({},p,h);break e;case 2:kn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=p):d=d.next=g,s|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(d===null&&(l=p),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else r===null&&(o.shared.lanes=0);vi|=s,e.lanes=s,e.memoizedState=p}}function Tp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(F(191,o));o.call(i)}}}var Pr={},on=Jn(Pr),mr=Jn(Pr),gr=Jn(Pr);function si(e){if(e===Pr)throw Error(F(174));return e}function ld(e,t){switch(ge(gr,t),ge(mr,e),ge(on,Pr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nu(t,e)}xe(on),ge(on,t)}function ao(){xe(on),xe(mr),xe(gr)}function dy(e){si(gr.current);var t=si(on.current),n=nu(t,e.type);t!==n&&(ge(mr,e),ge(on,n))}function ad(e){mr.current===e&&(xe(on),xe(mr))}var Ne=Jn(0);function Js(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var va=[];function ud(){for(var e=0;e<va.length;e++)va[e]._workInProgressVersionPrimary=null;va.length=0}var vs=xn.ReactCurrentDispatcher,xa=xn.ReactCurrentBatchConfig,yi=0,ke=null,Ve=null,Be=null,Ws=!1,Wo=!1,yr=0,mw=0;function Ke(){throw Error(F(321))}function cd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yt(e[n],t[n]))return!1;return!0}function dd(e,t,n,i,o,r){if(yi=r,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vs.current=e===null||e.memoizedState===null?xw:Sw,e=n(i,o),Wo){r=0;do{if(Wo=!1,yr=0,25<=r)throw Error(F(301));r+=1,Be=Ve=null,t.updateQueue=null,vs.current=Tw,e=n(i,o)}while(Wo)}if(vs.current=Ks,t=Ve!==null&&Ve.next!==null,yi=0,Be=Ve=ke=null,Ws=!1,t)throw Error(F(300));return e}function fd(){var e=yr!==0;return yr=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?ke.memoizedState=Be=e:Be=Be.next=e,Be}function Lt(){if(Ve===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Be===null?ke.memoizedState:Be.next;if(t!==null)Be=t,Ve=e;else{if(e===null)throw Error(F(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Be===null?ke.memoizedState=Be=e:Be=Be.next=e}return Be}function vr(e,t){return typeof t=="function"?t(e):t}function Sa(e){var t=Lt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var i=Ve,o=i.baseQueue,r=n.pending;if(r!==null){if(o!==null){var s=o.next;o.next=r.next,r.next=s}i.baseQueue=o=r,n.pending=null}if(o!==null){r=o.next,i=i.baseState;var a=s=null,l=null,u=r;do{var d=u.lane;if((yi&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,s=i):l=l.next=p,ke.lanes|=d,vi|=d}u=u.next}while(u!==null&&u!==r);l===null?s=i:l.next=a,Yt(i,t.memoizedState)||(ut=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){o=e;do r=o.lane,ke.lanes|=r,vi|=r,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=Lt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,r=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do r=e(r,s.action),s=s.next;while(s!==o);Yt(r,t.memoizedState)||(ut=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function fy(){}function py(e,t){var n=ke,i=Lt(),o=t(),r=!Yt(i.memoizedState,o);if(r&&(i.memoizedState=o,ut=!0),i=i.queue,pd(gy.bind(null,n,i,e),[e]),i.getSnapshot!==t||r||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,xr(9,my.bind(null,n,i,o,t),void 0,null),ze===null)throw Error(F(349));yi&30||hy(n,t,o)}return o}function hy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function my(e,t,n,i){t.value=n,t.getSnapshot=i,yy(t)&&vy(e)}function gy(e,t,n){return n(function(){yy(t)&&vy(e)})}function yy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yt(e,n)}catch{return!0}}function vy(e){var t=hn(e,1);t!==null&&Jt(t,e,1,-1)}function wp(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:e},t.queue=e,e=e.dispatch=vw.bind(null,ke,e),[t.memoizedState,e]}function xr(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function xy(){return Lt().memoizedState}function xs(e,t,n,i){var o=Zt();ke.flags|=e,o.memoizedState=xr(1|t,n,void 0,i===void 0?null:i)}function Il(e,t,n,i){var o=Lt();i=i===void 0?null:i;var r=void 0;if(Ve!==null){var s=Ve.memoizedState;if(r=s.destroy,i!==null&&cd(i,s.deps)){o.memoizedState=xr(t,n,r,i);return}}ke.flags|=e,o.memoizedState=xr(1|t,n,r,i)}function Ep(e,t){return xs(8390656,8,e,t)}function pd(e,t){return Il(2048,8,e,t)}function Sy(e,t){return Il(4,2,e,t)}function Ty(e,t){return Il(4,4,e,t)}function wy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ey(e,t,n){return n=n!=null?n.concat([e]):null,Il(4,4,wy.bind(null,t,e),n)}function hd(){}function Cy(e,t){var n=Lt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&cd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ny(e,t){var n=Lt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&cd(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Iy(e,t,n){return yi&21?(Yt(n,t)||(n=bg(),ke.lanes|=n,vi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=n)}function gw(e,t){var n=pe;pe=n!==0&&4>n?n:4,e(!0);var i=xa.transition;xa.transition={};try{e(!1),t()}finally{pe=n,xa.transition=i}}function ky(){return Lt().memoizedState}function yw(e,t,n){var i=Bn(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},_y(e))Ay(t,n);else if(n=uy(e,t,n,i),n!==null){var o=ot();Jt(n,e,i,o),Py(n,t,i)}}function vw(e,t,n){var i=Bn(e),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(_y(e))Ay(t,o);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var s=t.lastRenderedState,a=r(s,n);if(o.hasEagerState=!0,o.eagerState=a,Yt(a,s)){var l=t.interleaved;l===null?(o.next=o,rd(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=uy(e,t,o,i),n!==null&&(o=ot(),Jt(n,e,i,o),Py(n,t,i))}}function _y(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Ay(e,t){Wo=Ws=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Py(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,qc(e,n)}}var Ks={readContext:Dt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},xw={readContext:Dt,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Dt,useEffect:Ep,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xs(4194308,4,wy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xs(4194308,4,e,t)},useInsertionEffect:function(e,t){return xs(4,2,e,t)},useMemo:function(e,t){var n=Zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Zt();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=yw.bind(null,ke,e),[i.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:wp,useDebugValue:hd,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=wp(!1),t=e[0];return e=gw.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ke,o=Zt();if(Te){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),ze===null)throw Error(F(349));yi&30||hy(i,t,n)}o.memoizedState=n;var r={value:n,getSnapshot:t};return o.queue=r,Ep(gy.bind(null,i,r,e),[e]),i.flags|=2048,xr(9,my.bind(null,i,r,n,t),void 0,null),n},useId:function(){var e=Zt(),t=ze.identifierPrefix;if(Te){var n=cn,i=un;n=(i&~(1<<32-jt(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sw={readContext:Dt,useCallback:Cy,useContext:Dt,useEffect:pd,useImperativeHandle:Ey,useInsertionEffect:Sy,useLayoutEffect:Ty,useMemo:Ny,useReducer:Sa,useRef:xy,useState:function(){return Sa(vr)},useDebugValue:hd,useDeferredValue:function(e){var t=Lt();return Iy(t,Ve.memoizedState,e)},useTransition:function(){var e=Sa(vr)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:fy,useSyncExternalStore:py,useId:ky,unstable_isNewReconciler:!1},Tw={readContext:Dt,useCallback:Cy,useContext:Dt,useEffect:pd,useImperativeHandle:Ey,useInsertionEffect:Sy,useLayoutEffect:Ty,useMemo:Ny,useReducer:Ta,useRef:xy,useState:function(){return Ta(vr)},useDebugValue:hd,useDeferredValue:function(e){var t=Lt();return Ve===null?t.memoizedState=e:Iy(t,Ve.memoizedState,e)},useTransition:function(){var e=Ta(vr)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:fy,useSyncExternalStore:py,useId:ky,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Eu(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var kl={isMounted:function(e){return(e=e._reactInternals)?wi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ot(),o=Bn(e),r=dn(i,o);r.payload=t,n!=null&&(r.callback=n),t=Vn(e,r,o),t!==null&&(Jt(t,e,o,i),ys(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ot(),o=Bn(e),r=dn(i,o);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Vn(e,r,o),t!==null&&(Jt(t,e,o,i),ys(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ot(),i=Bn(e),o=dn(n,i);o.tag=2,t!=null&&(o.callback=t),t=Vn(e,o,i),t!==null&&(Jt(t,e,i,n),ys(t,e,i))}};function Cp(e,t,n,i,o,r,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,s):t.prototype&&t.prototype.isPureReactComponent?!dr(n,i)||!dr(o,r):!0}function by(e,t,n){var i=!1,o=Hn,r=t.contextType;return typeof r=="object"&&r!==null?r=Dt(r):(o=ft(t)?mi:et.current,i=t.contextTypes,r=(i=i!=null)?ro(e,o):Hn),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kl,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=r),t}function Np(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&kl.enqueueReplaceState(t,t.state,null)}function Cu(e,t,n,i){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},sd(e);var r=t.contextType;typeof r=="object"&&r!==null?o.context=Dt(r):(r=ft(t)?mi:et.current,o.context=ro(e,r)),o.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Eu(e,t,r,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&kl.enqueueReplaceState(o,o.state,null),js(e,n,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function uo(e,t){try{var n="",i=t;do n+=KT(i),i=i.return;while(i);var o=n}catch(r){o=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:o,digest:null}}function wa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ww=typeof WeakMap=="function"?WeakMap:Map;function Ry(e,t,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Xs||(Xs=!0,Lu=i),Nu(e,t)},n}function My(e,t,n){n=dn(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;n.payload=function(){return i(o)},n.callback=function(){Nu(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Nu(e,t),typeof i!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Ip(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new ww;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(o.add(n),e=Fw.bind(null,e,t,n),t.then(e,e))}function kp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _p(e,t,n,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=dn(-1,1),t.tag=2,Vn(n,t,1))),n.lanes|=1),e)}var Ew=xn.ReactCurrentOwner,ut=!1;function nt(e,t,n,i){t.child=e===null?ay(t,null,n,i):lo(t,e.child,n,i)}function Ap(e,t,n,i,o){n=n.render;var r=t.ref;return Qi(t,o),i=dd(e,t,n,i,r,o),n=fd(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,mn(e,t,o)):(Te&&n&&Zc(t),t.flags|=1,nt(e,t,i,o),t.child)}function Pp(e,t,n,i,o){if(e===null){var r=n.type;return typeof r=="function"&&!wd(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,Dy(e,t,r,i,o)):(e=Es(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&o)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:dr,n(s,i)&&e.ref===t.ref)return mn(e,t,o)}return t.flags|=1,e=zn(r,i),e.ref=t.ref,e.return=t,t.child=e}function Dy(e,t,n,i,o){if(e!==null){var r=e.memoizedProps;if(dr(r,i)&&e.ref===t.ref)if(ut=!1,t.pendingProps=i=r,(e.lanes&o)!==0)e.flags&131072&&(ut=!0);else return t.lanes=e.lanes,mn(e,t,o)}return Iu(e,t,n,i,o)}function Ly(e,t,n){var i=t.pendingProps,o=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Gi,yt),yt|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(Gi,yt),yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,ge(Gi,yt),yt|=i}else r!==null?(i=r.baseLanes|n,t.memoizedState=null):i=n,ge(Gi,yt),yt|=i;return nt(e,t,o,n),t.child}function Fy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,i,o){var r=ft(n)?mi:et.current;return r=ro(t,r),Qi(t,o),n=dd(e,t,n,i,r,o),i=fd(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,mn(e,t,o)):(Te&&i&&Zc(t),t.flags|=1,nt(e,t,n,o),t.child)}function bp(e,t,n,i,o){if(ft(n)){var r=!0;zs(t)}else r=!1;if(Qi(t,o),t.stateNode===null)Ss(e,t),by(t,n,i),Cu(t,n,i,o),i=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dt(u):(u=ft(n)?mi:et.current,u=ro(t,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Np(t,s,i,u),kn=!1;var h=t.memoizedState;s.state=h,js(t,i,s,o),l=t.memoizedState,a!==i||h!==l||dt.current||kn?(typeof d=="function"&&(Eu(t,n,d,i),l=t.memoizedState),(a=kn||Cp(t,n,a,i,h,l,u))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=u,i=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,cy(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ot(t.type,a),s.props=u,p=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dt(l):(l=ft(n)?mi:et.current,l=ro(t,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||h!==l)&&Np(t,s,i,l),kn=!1,h=t.memoizedState,s.state=h,js(t,i,s,o);var v=t.memoizedState;a!==p||h!==v||dt.current||kn?(typeof g=="function"&&(Eu(t,n,g,i),v=t.memoizedState),(u=kn||Cp(t,n,u,i,h,v,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),s.props=i,s.state=v,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return ku(e,t,n,i,r,o)}function ku(e,t,n,i,o,r){Fy(e,t);var s=(t.flags&128)!==0;if(!i&&!s)return o&&gp(t,n,!1),mn(e,t,r);i=t.stateNode,Ew.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&s?(t.child=lo(t,e.child,null,r),t.child=lo(t,null,a,r)):nt(e,t,a,r),t.memoizedState=i.state,o&&gp(t,n,!0),t.child}function Uy(e){var t=e.stateNode;t.pendingContext?mp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mp(e,t.context,!1),ld(e,t.containerInfo)}function Rp(e,t,n,i,o){return so(),td(o),t.flags|=256,nt(e,t,n,i),t.child}var _u={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vy(e,t,n){var i=t.pendingProps,o=Ne.current,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ge(Ne,o&1),e===null)return Tu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=i.children,e=i.fallback,r?(i=t.mode,r=t.child,s={mode:"hidden",children:s},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=s):r=Pl(s,i,0,null),e=di(e,i,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Au(n),t.memoizedState=_u,e):md(t,s));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Cw(e,t,s,i,a,o,n);if(r){r=i.fallback,s=t.mode,o=e.child,a=o.sibling;var l={mode:"hidden",children:i.children};return!(s&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=zn(o,l),i.subtreeFlags=o.subtreeFlags&14680064),a!==null?r=zn(a,r):(r=di(r,s,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,s=e.child.memoizedState,s=s===null?Au(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},r.memoizedState=s,r.childLanes=e.childLanes&~n,t.memoizedState=_u,i}return r=e.child,e=r.sibling,i=zn(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function md(e,t){return t=Pl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yr(e,t,n,i){return i!==null&&td(i),lo(t,e.child,null,n),e=md(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cw(e,t,n,i,o,r,s){if(n)return t.flags&256?(t.flags&=-257,i=wa(Error(F(422))),Yr(e,t,s,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=i.fallback,o=t.mode,i=Pl({mode:"visible",children:i.children},o,0,null),r=di(r,o,s,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&lo(t,e.child,null,s),t.child.memoizedState=Au(s),t.memoizedState=_u,r);if(!(t.mode&1))return Yr(e,t,s,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(F(419)),i=wa(r,i,void 0),Yr(e,t,s,i)}if(a=(s&e.childLanes)!==0,ut||a){if(i=ze,i!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|s)?0:o,o!==0&&o!==r.retryLane&&(r.retryLane=o,hn(e,o),Jt(i,e,o,-1))}return Td(),i=wa(Error(F(421))),Yr(e,t,s,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Uw.bind(null,e),o._reactRetry=t,null):(e=r.treeContext,vt=Un(o.nextSibling),xt=t,Te=!0,$t=null,e!==null&&(kt[_t++]=un,kt[_t++]=cn,kt[_t++]=gi,un=e.id,cn=e.overflow,gi=t),t=md(t,i.children),t.flags|=4096,t)}function Mp(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),wu(e.return,t,n)}function Ea(e,t,n,i,o){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=o)}function Gy(e,t,n){var i=t.pendingProps,o=i.revealOrder,r=i.tail;if(nt(e,t,i.children,n),i=Ne.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mp(e,n,t);else if(e.tag===19)Mp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ge(Ne,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Js(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ea(t,!1,o,n,r);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Js(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ea(t,!0,n,null,r);break;case"together":Ea(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ss(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nw(e,t,n){switch(t.tag){case 3:Uy(t),so();break;case 5:dy(t);break;case 1:ft(t.type)&&zs(t);break;case 4:ld(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;ge($s,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ge(Ne,Ne.current&1),t.flags|=128,null):n&t.child.childLanes?Vy(e,t,n):(ge(Ne,Ne.current&1),e=mn(e,t,n),e!==null?e.sibling:null);ge(Ne,Ne.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Gy(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ge(Ne,Ne.current),i)break;return null;case 22:case 23:return t.lanes=0,Ly(e,t,n)}return mn(e,t,n)}var By,Pu,zy,Oy;By=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pu=function(){};zy=function(e,t,n,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,si(on.current);var r=null;switch(n){case"input":o=Qa(e,o),i=Qa(e,i),r=[];break;case"select":o=_e({},o,{value:void 0}),i=_e({},i,{value:void 0}),r=[];break;case"textarea":o=tu(e,o),i=tu(e,i),r=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Gs)}iu(n,i);var s;n=null;for(u in o)if(!i.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(or.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var l=i[u];if(a=o!=null?o[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(r||(r=[]),r.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(or.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ve("scroll",e),r||a===l||(r=[])):(r=r||[]).push(u,l))}n&&(r=r||[]).push("style",n);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};Oy=function(e,t,n,i){n!==i&&(t.flags|=4)};function Ro(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Iw(e,t,n){var i=t.pendingProps;switch(ed(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return ft(t.type)&&Bs(),Ye(t),null;case 3:return i=t.stateNode,ao(),xe(dt),xe(et),ud(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Wr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$t!==null&&(Vu($t),$t=null))),Pu(e,t),Ye(t),null;case 5:ad(t);var o=si(gr.current);if(n=t.type,e!==null&&t.stateNode!=null)zy(e,t,n,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(F(166));return Ye(t),null}if(e=si(on.current),Wr(t)){i=t.stateNode,n=t.type;var r=t.memoizedProps;switch(i[en]=t,i[hr]=r,e=(t.mode&1)!==0,n){case"dialog":ve("cancel",i),ve("close",i);break;case"iframe":case"object":case"embed":ve("load",i);break;case"video":case"audio":for(o=0;o<Bo.length;o++)ve(Bo[o],i);break;case"source":ve("error",i);break;case"img":case"image":case"link":ve("error",i),ve("load",i);break;case"details":ve("toggle",i);break;case"input":Of(i,r),ve("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},ve("invalid",i);break;case"textarea":$f(i,r),ve("invalid",i)}iu(n,r),o=null;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];s==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Jr(i.textContent,a,e),o=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Jr(i.textContent,a,e),o=["children",""+a]):or.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ve("scroll",i)}switch(n){case"input":Gr(i),Hf(i,r,!0);break;case"textarea":Gr(i),qf(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Gs)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=s.createElement(n,{is:i.is}):(e=s.createElement(n),n==="select"&&(s=e,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):e=s.createElementNS(e,n),e[en]=t,e[hr]=i,By(e,t,!1,!1),t.stateNode=e;e:{switch(s=ou(n,i),n){case"dialog":ve("cancel",e),ve("close",e),o=i;break;case"iframe":case"object":case"embed":ve("load",e),o=i;break;case"video":case"audio":for(o=0;o<Bo.length;o++)ve(Bo[o],e);o=i;break;case"source":ve("error",e),o=i;break;case"img":case"image":case"link":ve("error",e),ve("load",e),o=i;break;case"details":ve("toggle",e),o=i;break;case"input":Of(e,i),o=Qa(e,i),ve("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=_e({},i,{value:void 0}),ve("invalid",e);break;case"textarea":$f(e,i),o=tu(e,i),ve("invalid",e);break;default:o=i}iu(n,o),a=o;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?xg(e,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yg(e,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rr(e,l):typeof l=="number"&&rr(e,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(or.hasOwnProperty(r)?l!=null&&r==="onScroll"&&ve("scroll",e):l!=null&&Gc(e,r,l,s))}switch(n){case"input":Gr(e),Hf(e,i,!1);break;case"textarea":Gr(e),qf(e);break;case"option":i.value!=null&&e.setAttribute("value",""+On(i.value));break;case"select":e.multiple=!!i.multiple,r=i.value,r!=null?Wi(e,!!i.multiple,r,!1):i.defaultValue!=null&&Wi(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Gs)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)Oy(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(F(166));if(n=si(gr.current),si(on.current),Wr(t)){if(i=t.stateNode,n=t.memoizedProps,i[en]=t,(r=i.nodeValue!==n)&&(e=xt,e!==null))switch(e.tag){case 3:Jr(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jr(i.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[en]=t,t.stateNode=i}return Ye(t),null;case 13:if(xe(Ne),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&vt!==null&&t.mode&1&&!(t.flags&128))sy(),so(),t.flags|=98560,r=!1;else if(r=Wr(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(F(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[en]=t}else so(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),r=!1}else $t!==null&&(Vu($t),$t=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?Ge===0&&(Ge=3):Td())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return ao(),Pu(e,t),e===null&&fr(t.stateNode.containerInfo),Ye(t),null;case 10:return od(t.type._context),Ye(t),null;case 17:return ft(t.type)&&Bs(),Ye(t),null;case 19:if(xe(Ne),r=t.memoizedState,r===null)return Ye(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Ro(r,!1);else{if(Ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Js(e),s!==null){for(t.flags|=128,Ro(r,!1),i=s.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)r=n,e=i,r.flags&=14680066,s=r.alternate,s===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,r.type=s.type,e=s.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ge(Ne,Ne.current&1|2),t.child}e=e.sibling}r.tail!==null&&Re()>co&&(t.flags|=128,i=!0,Ro(r,!1),t.lanes=4194304)}else{if(!i)if(e=Js(s),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ro(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Te)return Ye(t),null}else 2*Re()-r.renderingStartTime>co&&n!==1073741824&&(t.flags|=128,i=!0,Ro(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(n=r.last,n!==null?n.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Re(),t.sibling=null,n=Ne.current,ge(Ne,i?n&1|2:n&1),t):(Ye(t),null);case 22:case 23:return Sd(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?yt&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function kw(e,t){switch(ed(t),t.tag){case 1:return ft(t.type)&&Bs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ao(),xe(dt),xe(et),ud(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ad(t),null;case 13:if(xe(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));so()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(Ne),null;case 4:return ao(),null;case 10:return od(t.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var Xr=!1,Xe=!1,_w=typeof WeakSet=="function"?WeakSet:Set,O=null;function Vi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){be(e,t,i)}else n.current=null}function bu(e,t,n){try{n()}catch(i){be(e,t,i)}}var Dp=!1;function Aw(e,t){if(hu=Fs,e=Jg(),Qc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,d=0,p=e,h=null;t:for(;;){for(var g;p!==n||o!==0&&p.nodeType!==3||(a=s+o),p!==r||i!==0&&p.nodeType!==3||(l=s+i),p.nodeType===3&&(s+=p.nodeValue.length),(g=p.firstChild)!==null;)h=p,p=g;for(;;){if(p===e)break t;if(h===n&&++u===o&&(a=s),h===r&&++d===i&&(l=s),(g=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mu={focusedElem:e,selectionRange:n},Fs=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var T=v.memoizedProps,w=v.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?T:Ot(t.type,T),w);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(E){be(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return v=Dp,Dp=!1,v}function Ko(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var r=o.destroy;o.destroy=void 0,r!==void 0&&bu(t,n,r)}o=o.next}while(o!==i)}}function _l(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Ru(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Hy(e){var t=e.alternate;t!==null&&(e.alternate=null,Hy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[en],delete t[hr],delete t[vu],delete t[dw],delete t[fw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $y(e){return e.tag===5||e.tag===3||e.tag===4}function Lp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$y(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Gs));else if(i!==4&&(e=e.child,e!==null))for(Mu(e,t,n),e=e.sibling;e!==null;)Mu(e,t,n),e=e.sibling}function Du(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Du(e,t,n),e=e.sibling;e!==null;)Du(e,t,n),e=e.sibling}var $e=null,Ht=!1;function Cn(e,t,n){for(n=n.child;n!==null;)qy(e,t,n),n=n.sibling}function qy(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Sl,n)}catch{}switch(n.tag){case 5:Xe||Vi(n,t);case 6:var i=$e,o=Ht;$e=null,Cn(e,t,n),$e=i,Ht=o,$e!==null&&(Ht?(e=$e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Ht?(e=$e,n=n.stateNode,e.nodeType===8?ga(e.parentNode,n):e.nodeType===1&&ga(e,n),ur(e)):ga($e,n.stateNode));break;case 4:i=$e,o=Ht,$e=n.stateNode.containerInfo,Ht=!0,Cn(e,t,n),$e=i,Ht=o;break;case 0:case 11:case 14:case 15:if(!Xe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var r=o,s=r.destroy;r=r.tag,s!==void 0&&(r&2||r&4)&&bu(n,t,s),o=o.next}while(o!==i)}Cn(e,t,n);break;case 1:if(!Xe&&(Vi(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){be(n,t,a)}Cn(e,t,n);break;case 21:Cn(e,t,n);break;case 22:n.mode&1?(Xe=(i=Xe)||n.memoizedState!==null,Cn(e,t,n),Xe=i):Cn(e,t,n);break;default:Cn(e,t,n)}}function Fp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new _w),t.forEach(function(i){var o=Vw.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Gt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var r=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:$e=a.stateNode,Ht=!1;break e;case 3:$e=a.stateNode.containerInfo,Ht=!0;break e;case 4:$e=a.stateNode.containerInfo,Ht=!0;break e}a=a.return}if($e===null)throw Error(F(160));qy(r,s,o),$e=null,Ht=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){be(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jy(t,e),t=t.sibling}function jy(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),Qt(e),i&4){try{Ko(3,e,e.return),_l(3,e)}catch(T){be(e,e.return,T)}try{Ko(5,e,e.return)}catch(T){be(e,e.return,T)}}break;case 1:Gt(t,e),Qt(e),i&512&&n!==null&&Vi(n,n.return);break;case 5:if(Gt(t,e),Qt(e),i&512&&n!==null&&Vi(n,n.return),e.flags&32){var o=e.stateNode;try{rr(o,"")}catch(T){be(e,e.return,T)}}if(i&4&&(o=e.stateNode,o!=null)){var r=e.memoizedProps,s=n!==null?n.memoizedProps:r,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&hg(o,r),ou(a,s);var u=ou(a,r);for(s=0;s<l.length;s+=2){var d=l[s],p=l[s+1];d==="style"?xg(o,p):d==="dangerouslySetInnerHTML"?yg(o,p):d==="children"?rr(o,p):Gc(o,d,p,u)}switch(a){case"input":Za(o,r);break;case"textarea":mg(o,r);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?Wi(o,!!r.multiple,g,!1):h!==!!r.multiple&&(r.defaultValue!=null?Wi(o,!!r.multiple,r.defaultValue,!0):Wi(o,!!r.multiple,r.multiple?[]:"",!1))}o[hr]=r}catch(T){be(e,e.return,T)}}break;case 6:if(Gt(t,e),Qt(e),i&4){if(e.stateNode===null)throw Error(F(162));o=e.stateNode,r=e.memoizedProps;try{o.nodeValue=r}catch(T){be(e,e.return,T)}}break;case 3:if(Gt(t,e),Qt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ur(t.containerInfo)}catch(T){be(e,e.return,T)}break;case 4:Gt(t,e),Qt(e);break;case 13:Gt(t,e),Qt(e),o=e.child,o.flags&8192&&(r=o.memoizedState!==null,o.stateNode.isHidden=r,!r||o.alternate!==null&&o.alternate.memoizedState!==null||(vd=Re())),i&4&&Fp(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(u=Xe)||d,Gt(t,e),Xe=u):Gt(t,e),Qt(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(O=e,d=e.child;d!==null;){for(p=O=d;O!==null;){switch(h=O,g=h.child,h.tag){case 0:case 11:case 14:case 15:Ko(4,h,h.return);break;case 1:Vi(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){i=h,n=h.return;try{t=i,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(T){be(i,n,T)}}break;case 5:Vi(h,h.return);break;case 22:if(h.memoizedState!==null){Vp(p);continue}}g!==null?(g.return=h,O=g):Vp(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{o=p.stateNode,u?(r=o.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vg("display",s))}catch(T){be(e,e.return,T)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(T){be(e,e.return,T)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Gt(t,e),Qt(e),i&4&&Fp(e);break;case 21:break;default:Gt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($y(n)){var i=n;break e}n=n.return}throw Error(F(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(rr(o,""),i.flags&=-33);var r=Lp(e);Du(e,r,o);break;case 3:case 4:var s=i.stateNode.containerInfo,a=Lp(e);Mu(e,a,s);break;default:throw Error(F(161))}}catch(l){be(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pw(e,t,n){O=e,Jy(e)}function Jy(e,t,n){for(var i=(e.mode&1)!==0;O!==null;){var o=O,r=o.child;if(o.tag===22&&i){var s=o.memoizedState!==null||Xr;if(!s){var a=o.alternate,l=a!==null&&a.memoizedState!==null||Xe;a=Xr;var u=Xe;if(Xr=s,(Xe=l)&&!u)for(O=o;O!==null;)s=O,l=s.child,s.tag===22&&s.memoizedState!==null?Gp(o):l!==null?(l.return=s,O=l):Gp(o);for(;r!==null;)O=r,Jy(r),r=r.sibling;O=o,Xr=a,Xe=u}Up(e)}else o.subtreeFlags&8772&&r!==null?(r.return=o,O=r):Up(e)}}function Up(e){for(;O!==null;){var t=O;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||_l(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Xe)if(n===null)i.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&Tp(t,r,i);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Tp(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&ur(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Xe||t.flags&512&&Ru(t)}catch(h){be(t,t.return,h)}}if(t===e){O=null;break}if(n=t.sibling,n!==null){n.return=t.return,O=n;break}O=t.return}}function Vp(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var n=t.sibling;if(n!==null){n.return=t.return,O=n;break}O=t.return}}function Gp(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_l(4,t)}catch(l){be(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(l){be(t,o,l)}}var r=t.return;try{Ru(t)}catch(l){be(t,r,l)}break;case 5:var s=t.return;try{Ru(t)}catch(l){be(t,s,l)}}}catch(l){be(t,t.return,l)}if(t===e){O=null;break}var a=t.sibling;if(a!==null){a.return=t.return,O=a;break}O=t.return}}var bw=Math.ceil,Ys=xn.ReactCurrentDispatcher,gd=xn.ReactCurrentOwner,bt=xn.ReactCurrentBatchConfig,ce=0,ze=null,De=null,je=0,yt=0,Gi=Jn(0),Ge=0,Sr=null,vi=0,Al=0,yd=0,Yo=null,at=null,vd=0,co=1/0,ln=null,Xs=!1,Lu=null,Gn=null,Qr=!1,bn=null,Qs=0,Xo=0,Fu=null,Ts=-1,ws=0;function ot(){return ce&6?Re():Ts!==-1?Ts:Ts=Re()}function Bn(e){return e.mode&1?ce&2&&je!==0?je&-je:hw.transition!==null?(ws===0&&(ws=bg()),ws):(e=pe,e!==0||(e=window.event,e=e===void 0?16:Vg(e.type)),e):1}function Jt(e,t,n,i){if(50<Xo)throw Xo=0,Fu=null,Error(F(185));kr(e,n,i),(!(ce&2)||e!==ze)&&(e===ze&&(!(ce&2)&&(Al|=n),Ge===4&&An(e,je)),pt(e,i),n===1&&ce===0&&!(t.mode&1)&&(co=Re()+500,Nl&&Wn()))}function pt(e,t){var n=e.callbackNode;h1(e,t);var i=Ls(e,e===ze?je:0);if(i===0)n!==null&&Wf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Wf(n),t===1)e.tag===0?pw(Bp.bind(null,e)):iy(Bp.bind(null,e)),uw(function(){!(ce&6)&&Wn()}),n=null;else{switch(Rg(i)){case 1:n=$c;break;case 4:n=Ag;break;case 16:n=Ds;break;case 536870912:n=Pg;break;default:n=Ds}n=tv(n,Wy.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Wy(e,t){if(Ts=-1,ws=0,ce&6)throw Error(F(327));var n=e.callbackNode;if(Zi()&&e.callbackNode!==n)return null;var i=Ls(e,e===ze?je:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Zs(e,i);else{t=i;var o=ce;ce|=2;var r=Yy();(ze!==e||je!==t)&&(ln=null,co=Re()+500,ci(e,t));do try{Dw();break}catch(a){Ky(e,a)}while(!0);id(),Ys.current=r,ce=o,De!==null?t=0:(ze=null,je=0,t=Ge)}if(t!==0){if(t===2&&(o=uu(e),o!==0&&(i=o,t=Uu(e,o))),t===1)throw n=Sr,ci(e,0),An(e,i),pt(e,Re()),n;if(t===6)An(e,i);else{if(o=e.current.alternate,!(i&30)&&!Rw(o)&&(t=Zs(e,i),t===2&&(r=uu(e),r!==0&&(i=r,t=Uu(e,r))),t===1))throw n=Sr,ci(e,0),An(e,i),pt(e,Re()),n;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(F(345));case 2:ei(e,at,ln);break;case 3:if(An(e,i),(i&130023424)===i&&(t=vd+500-Re(),10<t)){if(Ls(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){ot(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=yu(ei.bind(null,e,at,ln),t);break}ei(e,at,ln);break;case 4:if(An(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var s=31-jt(i);r=1<<s,s=t[s],s>o&&(o=s),i&=~r}if(i=o,i=Re()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bw(i/1960))-i,10<i){e.timeoutHandle=yu(ei.bind(null,e,at,ln),i);break}ei(e,at,ln);break;case 5:ei(e,at,ln);break;default:throw Error(F(329))}}}return pt(e,Re()),e.callbackNode===n?Wy.bind(null,e):null}function Uu(e,t){var n=Yo;return e.current.memoizedState.isDehydrated&&(ci(e,t).flags|=256),e=Zs(e,t),e!==2&&(t=at,at=n,t!==null&&Vu(t)),e}function Vu(e){at===null?at=e:at.push.apply(at,e)}function Rw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],r=o.getSnapshot;o=o.value;try{if(!Yt(r(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t){for(t&=~yd,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-jt(t),i=1<<n;e[n]=-1,t&=~i}}function Bp(e){if(ce&6)throw Error(F(327));Zi();var t=Ls(e,0);if(!(t&1))return pt(e,Re()),null;var n=Zs(e,t);if(e.tag!==0&&n===2){var i=uu(e);i!==0&&(t=i,n=Uu(e,i))}if(n===1)throw n=Sr,ci(e,0),An(e,t),pt(e,Re()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ei(e,at,ln),pt(e,Re()),null}function xd(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===0&&(co=Re()+500,Nl&&Wn())}}function xi(e){bn!==null&&bn.tag===0&&!(ce&6)&&Zi();var t=ce;ce|=1;var n=bt.transition,i=pe;try{if(bt.transition=null,pe=1,e)return e()}finally{pe=i,bt.transition=n,ce=t,!(ce&6)&&Wn()}}function Sd(){yt=Gi.current,xe(Gi)}function ci(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,aw(n)),De!==null)for(n=De.return;n!==null;){var i=n;switch(ed(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Bs();break;case 3:ao(),xe(dt),xe(et),ud();break;case 5:ad(i);break;case 4:ao();break;case 13:xe(Ne);break;case 19:xe(Ne);break;case 10:od(i.type._context);break;case 22:case 23:Sd()}n=n.return}if(ze=e,De=e=zn(e.current,null),je=yt=t,Ge=0,Sr=null,yd=Al=vi=0,at=Yo=null,ri!==null){for(t=0;t<ri.length;t++)if(n=ri[t],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,r=n.pending;if(r!==null){var s=r.next;r.next=o,i.next=s}n.pending=i}ri=null}return e}function Ky(e,t){do{var n=De;try{if(id(),vs.current=Ks,Ws){for(var i=ke.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ws=!1}if(yi=0,Be=Ve=ke=null,Wo=!1,yr=0,gd.current=null,n===null||n.return===null){Ge=1,Sr=t,De=null;break}e:{var r=e,s=n.return,a=n,l=t;if(t=je,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=kp(s);if(g!==null){g.flags&=-257,_p(g,s,a,r,t),g.mode&1&&Ip(r,u,t),t=g,l=u;var v=t.updateQueue;if(v===null){var T=new Set;T.add(l),t.updateQueue=T}else v.add(l);break e}else{if(!(t&1)){Ip(r,u,t),Td();break e}l=Error(F(426))}}else if(Te&&a.mode&1){var w=kp(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),_p(w,s,a,r,t),td(uo(l,a));break e}}r=l=uo(l,a),Ge!==4&&(Ge=2),Yo===null?Yo=[r]:Yo.push(r),r=s;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var x=Ry(r,l,t);Sp(r,x);break e;case 1:a=l;var y=r.type,S=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Gn===null||!Gn.has(S)))){r.flags|=65536,t&=-t,r.lanes|=t;var E=My(r,a,t);Sp(r,E);break e}}r=r.return}while(r!==null)}Qy(n)}catch(N){t=N,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function Yy(){var e=Ys.current;return Ys.current=Ks,e===null?Ks:e}function Td(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),ze===null||!(vi&268435455)&&!(Al&268435455)||An(ze,je)}function Zs(e,t){var n=ce;ce|=2;var i=Yy();(ze!==e||je!==t)&&(ln=null,ci(e,t));do try{Mw();break}catch(o){Ky(e,o)}while(!0);if(id(),ce=n,Ys.current=i,De!==null)throw Error(F(261));return ze=null,je=0,Ge}function Mw(){for(;De!==null;)Xy(De)}function Dw(){for(;De!==null&&!r1();)Xy(De)}function Xy(e){var t=ev(e.alternate,e,yt);e.memoizedProps=e.pendingProps,t===null?Qy(e):De=t,gd.current=null}function Qy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=kw(n,t),n!==null){n.flags&=32767,De=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ge=6,De=null;return}}else if(n=Iw(n,t,yt),n!==null){De=n;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Ge===0&&(Ge=5)}function ei(e,t,n){var i=pe,o=bt.transition;try{bt.transition=null,pe=1,Lw(e,t,n,i)}finally{bt.transition=o,pe=i}return null}function Lw(e,t,n,i){do Zi();while(bn!==null);if(ce&6)throw Error(F(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(m1(e,r),e===ze&&(De=ze=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qr||(Qr=!0,tv(Ds,function(){return Zi(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=bt.transition,bt.transition=null;var s=pe;pe=1;var a=ce;ce|=4,gd.current=null,Aw(e,n),jy(n,e),tw(mu),Fs=!!hu,mu=hu=null,e.current=n,Pw(n),s1(),ce=a,pe=s,bt.transition=r}else e.current=n;if(Qr&&(Qr=!1,bn=e,Qs=o),r=e.pendingLanes,r===0&&(Gn=null),u1(n.stateNode),pt(e,Re()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Xs)throw Xs=!1,e=Lu,Lu=null,e;return Qs&1&&e.tag!==0&&Zi(),r=e.pendingLanes,r&1?e===Fu?Xo++:(Xo=0,Fu=e):Xo=0,Wn(),null}function Zi(){if(bn!==null){var e=Rg(Qs),t=bt.transition,n=pe;try{if(bt.transition=null,pe=16>e?16:e,bn===null)var i=!1;else{if(e=bn,bn=null,Qs=0,ce&6)throw Error(F(331));var o=ce;for(ce|=4,O=e.current;O!==null;){var r=O,s=r.child;if(O.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(O=u;O!==null;){var d=O;switch(d.tag){case 0:case 11:case 15:Ko(8,d,r)}var p=d.child;if(p!==null)p.return=d,O=p;else for(;O!==null;){d=O;var h=d.sibling,g=d.return;if(Hy(d),d===u){O=null;break}if(h!==null){h.return=g,O=h;break}O=g}}}var v=r.alternate;if(v!==null){var T=v.child;if(T!==null){v.child=null;do{var w=T.sibling;T.sibling=null,T=w}while(T!==null)}}O=r}}if(r.subtreeFlags&2064&&s!==null)s.return=r,O=s;else e:for(;O!==null;){if(r=O,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Ko(9,r,r.return)}var x=r.sibling;if(x!==null){x.return=r.return,O=x;break e}O=r.return}}var y=e.current;for(O=y;O!==null;){s=O;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,O=S;else e:for(s=y;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_l(9,a)}}catch(N){be(a,a.return,N)}if(a===s){O=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,O=E;break e}O=a.return}}if(ce=o,Wn(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Sl,e)}catch{}i=!0}return i}finally{pe=n,bt.transition=t}}return!1}function zp(e,t,n){t=uo(n,t),t=Ry(e,t,1),e=Vn(e,t,1),t=ot(),e!==null&&(kr(e,1,t),pt(e,t))}function be(e,t,n){if(e.tag===3)zp(e,e,n);else for(;t!==null;){if(t.tag===3){zp(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Gn===null||!Gn.has(i))){e=uo(n,e),e=My(t,e,1),t=Vn(t,e,1),e=ot(),t!==null&&(kr(t,1,e),pt(t,e));break}}t=t.return}}function Fw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&n,ze===e&&(je&n)===n&&(Ge===4||Ge===3&&(je&130023424)===je&&500>Re()-vd?ci(e,0):yd|=n),pt(e,t)}function Zy(e,t){t===0&&(e.mode&1?(t=Or,Or<<=1,!(Or&130023424)&&(Or=4194304)):t=1);var n=ot();e=hn(e,t),e!==null&&(kr(e,t,n),pt(e,n))}function Uw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zy(e,n)}function Vw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(F(314))}i!==null&&i.delete(t),Zy(e,n)}var ev;ev=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||dt.current)ut=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ut=!1,Nw(e,t,n);ut=!!(e.flags&131072)}else ut=!1,Te&&t.flags&1048576&&oy(t,Hs,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ss(e,t),e=t.pendingProps;var o=ro(t,et.current);Qi(t,n),o=dd(null,t,i,e,o,n);var r=fd();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(i)?(r=!0,zs(t)):r=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,sd(t),o.updater=kl,t.stateNode=o,o._reactInternals=t,Cu(t,i,e,n),t=ku(null,t,i,!0,r,n)):(t.tag=0,Te&&r&&Zc(t),nt(null,t,o,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ss(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=Bw(i),e=Ot(i,e),o){case 0:t=Iu(null,t,i,e,n);break e;case 1:t=bp(null,t,i,e,n);break e;case 11:t=Ap(null,t,i,e,n);break e;case 14:t=Pp(null,t,i,Ot(i.type,e),n);break e}throw Error(F(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Ot(i,o),Iu(e,t,i,o,n);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Ot(i,o),bp(e,t,i,o,n);case 3:e:{if(Uy(t),e===null)throw Error(F(387));i=t.pendingProps,r=t.memoizedState,o=r.element,cy(e,t),js(t,i,null,n);var s=t.memoizedState;if(i=s.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){o=uo(Error(F(423)),t),t=Rp(e,t,i,n,o);break e}else if(i!==o){o=uo(Error(F(424)),t),t=Rp(e,t,i,n,o);break e}else for(vt=Un(t.stateNode.containerInfo.firstChild),xt=t,Te=!0,$t=null,n=ay(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),i===o){t=mn(e,t,n);break e}nt(e,t,i,n)}t=t.child}return t;case 5:return dy(t),e===null&&Tu(t),i=t.type,o=t.pendingProps,r=e!==null?e.memoizedProps:null,s=o.children,gu(i,o)?s=null:r!==null&&gu(i,r)&&(t.flags|=32),Fy(e,t),nt(e,t,s,n),t.child;case 6:return e===null&&Tu(t),null;case 13:return Vy(e,t,n);case 4:return ld(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=lo(t,null,i,n):nt(e,t,i,n),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Ot(i,o),Ap(e,t,i,o,n);case 7:return nt(e,t,t.pendingProps,n),t.child;case 8:return nt(e,t,t.pendingProps.children,n),t.child;case 12:return nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,r=t.memoizedProps,s=o.value,ge($s,i._currentValue),i._currentValue=s,r!==null)if(Yt(r.value,s)){if(r.children===o.children&&!dt.current){t=mn(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){s=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=dn(-1,n&-n),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),wu(r.return,n,t),a.lanes|=n;break}l=l.next}}else if(r.tag===10)s=r.type===t.type?null:r.child;else if(r.tag===18){if(s=r.return,s===null)throw Error(F(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),wu(s,n,t),s=r.sibling}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===t){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}nt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,Qi(t,n),o=Dt(o),i=i(o),t.flags|=1,nt(e,t,i,n),t.child;case 14:return i=t.type,o=Ot(i,t.pendingProps),o=Ot(i.type,o),Pp(e,t,i,o,n);case 15:return Dy(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Ot(i,o),Ss(e,t),t.tag=1,ft(i)?(e=!0,zs(t)):e=!1,Qi(t,n),by(t,i,o),Cu(t,i,o,n),ku(null,t,i,!0,e,n);case 19:return Gy(e,t,n);case 22:return Ly(e,t,n)}throw Error(F(156,t.tag))};function tv(e,t){return _g(e,t)}function Gw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,n,i){return new Gw(e,t,n,i)}function wd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bw(e){if(typeof e=="function")return wd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zc)return 11;if(e===Oc)return 14}return 2}function zn(e,t){var n=e.alternate;return n===null?(n=At(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Es(e,t,n,i,o,r){var s=2;if(i=e,typeof e=="function")wd(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ai:return di(n.children,o,r,t);case Bc:s=8,o|=8;break;case Wa:return e=At(12,n,t,o|2),e.elementType=Wa,e.lanes=r,e;case Ka:return e=At(13,n,t,o),e.elementType=Ka,e.lanes=r,e;case Ya:return e=At(19,n,t,o),e.elementType=Ya,e.lanes=r,e;case dg:return Pl(n,o,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ug:s=10;break e;case cg:s=9;break e;case zc:s=11;break e;case Oc:s=14;break e;case In:s=16,i=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=At(s,n,t,o),t.elementType=e,t.type=i,t.lanes=r,t}function di(e,t,n,i){return e=At(7,e,i,t),e.lanes=n,e}function Pl(e,t,n,i){return e=At(22,e,i,t),e.elementType=dg,e.lanes=n,e.stateNode={isHidden:!1},e}function Ca(e,t,n){return e=At(6,e,null,t),e.lanes=n,e}function Na(e,t,n){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zw(e,t,n,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ed(e,t,n,i,o,r,s,a,l){return e=new zw(e,t,n,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=At(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sd(r),e}function Ow(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_i,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function nv(e){if(!e)return Hn;e=e._reactInternals;e:{if(wi(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(ft(n))return ny(e,n,t)}return t}function iv(e,t,n,i,o,r,s,a,l){return e=Ed(n,i,!0,e,o,r,s,a,l),e.context=nv(null),n=e.current,i=ot(),o=Bn(n),r=dn(i,o),r.callback=t??null,Vn(n,r,o),e.current.lanes=o,kr(e,o,i),pt(e,i),e}function bl(e,t,n,i){var o=t.current,r=ot(),s=Bn(o);return n=nv(n),t.context===null?t.context=n:t.pendingContext=n,t=dn(r,s),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Vn(o,t,s),e!==null&&(Jt(e,o,s,r),ys(e,o,s)),s}function el(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Op(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cd(e,t){Op(e,t),(e=e.alternate)&&Op(e,t)}function Hw(){return null}var ov=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nd(e){this._internalRoot=e}Rl.prototype.render=Nd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));bl(e,t,null,null)};Rl.prototype.unmount=Nd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xi(function(){bl(null,e,null,null)}),t[pn]=null}};function Rl(e){this._internalRoot=e}Rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_n.length&&t!==0&&t<_n[n].priority;n++);_n.splice(n,0,e),n===0&&Ug(e)}};function Id(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ml(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hp(){}function $w(e,t,n,i,o){if(o){if(typeof i=="function"){var r=i;i=function(){var u=el(s);r.call(u)}}var s=iv(t,i,e,0,null,!1,!1,"",Hp);return e._reactRootContainer=s,e[pn]=s.current,fr(e.nodeType===8?e.parentNode:e),xi(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var a=i;i=function(){var u=el(l);a.call(u)}}var l=Ed(e,0,!1,null,null,!1,!1,"",Hp);return e._reactRootContainer=l,e[pn]=l.current,fr(e.nodeType===8?e.parentNode:e),xi(function(){bl(t,l,n,i)}),l}function Dl(e,t,n,i,o){var r=n._reactRootContainer;if(r){var s=r;if(typeof o=="function"){var a=o;o=function(){var l=el(s);a.call(l)}}bl(t,s,e,o)}else s=$w(n,t,e,o,i);return el(s)}Mg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Go(t.pendingLanes);n!==0&&(qc(t,n|1),pt(t,Re()),!(ce&6)&&(co=Re()+500,Wn()))}break;case 13:xi(function(){var i=hn(e,1);if(i!==null){var o=ot();Jt(i,e,1,o)}}),Cd(e,1)}};jc=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var n=ot();Jt(t,e,134217728,n)}Cd(e,134217728)}};Dg=function(e){if(e.tag===13){var t=Bn(e),n=hn(e,t);if(n!==null){var i=ot();Jt(n,e,t,i)}Cd(e,t)}};Lg=function(){return pe};Fg=function(e,t){var n=pe;try{return pe=e,t()}finally{pe=n}};su=function(e,t,n){switch(t){case"input":if(Za(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=Cl(i);if(!o)throw Error(F(90));pg(i),Za(i,o)}}}break;case"textarea":mg(e,n);break;case"select":t=n.value,t!=null&&Wi(e,!!n.multiple,t,!1)}};wg=xd;Eg=xi;var qw={usingClientEntryPoint:!1,Events:[Ar,Mi,Cl,Sg,Tg,xd]},Mo={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jw={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ig(e),e===null?null:e.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||Hw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zr.isDisabled&&Zr.supportsFiber)try{Sl=Zr.inject(jw),nn=Zr}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qw;Tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Id(t))throw Error(F(200));return Ow(e,t,null,n)};Tt.createRoot=function(e,t){if(!Id(e))throw Error(F(299));var n=!1,i="",o=ov;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Ed(e,1,!1,null,null,n,!1,i,o),e[pn]=t.current,fr(e.nodeType===8?e.parentNode:e),new Nd(t)};Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Ig(t),e=e===null?null:e.stateNode,e};Tt.flushSync=function(e){return xi(e)};Tt.hydrate=function(e,t,n){if(!Ml(t))throw Error(F(200));return Dl(null,e,t,!0,n)};Tt.hydrateRoot=function(e,t,n){if(!Id(e))throw Error(F(405));var i=n!=null&&n.hydratedSources||null,o=!1,r="",s=ov;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=iv(t,null,e,1,n??null,o,!1,r,s),e[pn]=t.current,fr(e),i)for(e=0;e<i.length;e++)n=i[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Rl(t)};Tt.render=function(e,t,n){if(!Ml(t))throw Error(F(200));return Dl(null,e,t,!1,n)};Tt.unmountComponentAtNode=function(e){if(!Ml(e))throw Error(F(40));return e._reactRootContainer?(xi(function(){Dl(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1};Tt.unstable_batchedUpdates=xd;Tt.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Ml(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return Dl(e,t,n,!1,i)};Tt.version="18.3.1-next-f1338f8080-20240426";function rv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rv)}catch(e){console.error(e)}}rv(),rg.exports=Tt;var Jw=rg.exports,$p=Jw;ja.createRoot=$p.createRoot,ja.hydrateRoot=$p.hydrateRoot;var Ce=(e=>(e.MBTI_16="MBTI_16",e.JUNG_8="JUNG_8",e))(Ce||{});const fi={standard:{name:"",multiplier:1,icon:"",color:"bg-emerald-600/90 border-emerald-400"},truth:{name:"",multiplier:1.2,icon:"",color:"bg-sky-600/90 border-sky-400"},dare:{name:"",multiplier:1.2,icon:"",color:"bg-amber-600/90 border-amber-400"},deep:{name:"",multiplier:1.5,icon:"",color:"bg-indigo-600/90 border-indigo-400"}},tl=["INTJ","INTP","ENTJ","ENTP","INFJ","INFP","ENFJ","ENFP","ISTJ","ISFJ","ESTJ","ESFJ","ISTP","ISFP","ESTP","ESFP"],qt={" (NT)":{types:["INTJ","INTP","ENTJ","ENTP"],color:"bg-purple-100 dark:bg-purple-900/40 border-purple-200 dark:border-purple-500/50 text-purple-800 dark:text-purple-200",hexColor:"#a855f7"}," (NF)":{types:["INFJ","INFP","ENFJ","ENFP"],color:"bg-green-100 dark:bg-green-900/40 border-green-200 dark:border-green-500/50 text-green-800 dark:text-green-200",hexColor:"#22c55e"}," (SJ)":{types:["ISTJ","ISFJ","ESTJ","ESFJ"],color:"bg-blue-100 dark:bg-blue-900/40 border-blue-200 dark:border-blue-500/50 text-blue-800 dark:text-blue-200",hexColor:"#3b82f6"}," (SP)":{types:["ISTP","ISFP","ESTP","ESFP"],color:"bg-amber-100 dark:bg-yellow-900/40 border-amber-200 dark:border-yellow-500/50 text-amber-800 dark:text-yellow-200",hexColor:"#eab308"}},nl={INTJ:"",INTP:"",ENTJ:"",ENTP:"",INFJ:"",INFP:"",ENFJ:"",ENFP:"",ISTJ:"",ISFJ:"",ESTJ:"",ESFJ:"",ISTP:"",ISFP:"",ESTP:"",ESFP:"",Hub:""},Ww={INTJ:["",""],INTP:["",""],ENTJ:["",""],ENTP:["",""],INFJ:["",""],INFP:["",""],ENFJ:["",""],ENFP:["",""],ISTJ:["",""],ISFJ:["",""],ESTJ:["",""],ESFJ:["",""],ISTP:["",""],ISFP:["",""],ESTP:["",""],ESFP:["",""]},Qo={INTJ:["Ni","Te","Fi","Se","Ne","Ti","Fe","Si"],INTP:["Ti","Ne","Si","Fe","Te","Ni","Se","Fi"],ENTJ:["Te","Ni","Se","Fi","Ti","Ne","Si","Fe"],ENTP:["Ne","Ti","Fe","Si","Ni","Te","Fi","Se"],INFJ:["Ni","Fe","Ti","Se","Ne","Fi","Te","Si"],INFP:["Fi","Ne","Si","Te","Fe","Ni","Se","Ti"],ENFJ:["Fe","Ni","Se","Ti","Fi","Ne","Si","Te"],ENFP:["Ne","Fi","Te","Si","Ni","Fe","Ti","Se"],ISTJ:["Si","Te","Fi","Ne","Se","Ti","Fe","Ni"],ISFJ:["Si","Fe","Ti","Ne","Se","Fi","Te","Ni"],ESTJ:["Te","Si","Ne","Fi","Ti","Se","Ni","Fe"],ESFJ:["Fe","Si","Ne","Ti","Fi","Se","Ni","Te"],ISTP:["Ti","Se","Ni","Fe","Te","Si","Ne","Fi"],ISFP:["Fi","Se","Ni","Te","Fe","Si","Ne","Ti"],ESTP:["Se","Ti","Fe","Ni","Si","Te","Fi","Ne"],ESFP:["Se","Fi","Te","Ni","Si","Fe","Ti","Ne"]},kd=[{id:"Te",name:"",color:"#3b82f6",desc:"",textColor:"text-blue-100",borderColor:"border-blue-500",bgColor:"bg-blue-600"},{id:"Ti",name:"",color:"#0ea5e9",desc:"",textColor:"text-sky-100",borderColor:"border-sky-500",bgColor:"bg-sky-600"},{id:"Fe",name:"",color:"#ec4899",desc:"",textColor:"text-pink-100",borderColor:"border-pink-500",bgColor:"bg-pink-600"},{id:"Fi",name:"",color:"#f43f5e",desc:"",textColor:"text-rose-100",borderColor:"border-rose-500",bgColor:"bg-rose-600"},{id:"Se",name:"",color:"#eab308",desc:"",textColor:"text-yellow-100",borderColor:"border-yellow-500",bgColor:"bg-yellow-600"},{id:"Si",name:"",color:"#f97316",desc:"",textColor:"text-orange-100",borderColor:"border-orange-500",bgColor:"bg-orange-600"},{id:"Ne",name:"",color:"#a855f7",desc:"",textColor:"text-purple-100",borderColor:"border-purple-500",bgColor:"bg-purple-600"},{id:"Ni",name:"",color:"#6366f1",desc:"",textColor:"text-indigo-100",borderColor:"border-indigo-500",bgColor:"bg-indigo-600"},{id:"?",name:"",color:"#ffffff",desc:"",textColor:"text-slate-900",borderColor:"border-white",bgColor:"bg-white"}],Kw=(e,t)=>[{q:1,r:0},{q:-1,r:0},{q:0,r:1},{q:0,r:-1}].map(i=>t.find(o=>o.q===e.q+i.q&&o.r===e.r+i.r)).filter(i=>i!==void 0),Yw=(e,t)=>[{q:1,r:0},{q:-1,r:0},{q:0,r:1},{q:0,r:-1},{q:1,r:-1},{q:-1,r:1}].map(i=>t.find(o=>o.q===e.q+i.q&&o.r===e.r+i.r)).filter(i=>i!==void 0);var Xw={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Qw,Zw;function eE(){return{geminiUrl:Qw,vertexUrl:Zw}}function tE(e,t,n,i){var o,r;if(!(e!=null&&e.baseUrl)){const s=eE();return t?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(r=s.geminiUrl)!==null&&r!==void 0?r:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sn{}function G(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const r=t[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(e,t,n){for(let r=0;r<t.length-1;r++){const s=t[r];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[a])){const l=e[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];f(d,t.slice(r+1),n[u])}else for(const u of l)f(u,t.slice(r+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in e||(e[a]=[{}]);const l=e[a];f(l[0],t.slice(r+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function c(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const o=t[i];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in e){const s=e[r];return Array.isArray(s)?s.map(a=>c(a,t.slice(i+1),n)):n}else return n}else e=e[o]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function nE(e,t){for(const[n,i]of Object.entries(t)){const o=n.split("."),r=i.split("."),s=new Set;let a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&r.length>a)for(let l=a;l<r.length;l++){const u=r[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}Gu(e,o,r,0,s)}}function Gu(e,t,n,i,o){if(i>=t.length||typeof e!="object"||e===null)return;const r=t[i];if(r.endsWith("[]")){const s=r.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(const l of a[s])Gu(l,t,n,i+1,o)}else if(r==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const s=e,a=Object.keys(s).filter(u=>!u.startsWith("_")&&!o.has(u)),l={};for(const u of a)l[u]=s[u];for(const[u,d]of Object.entries(l)){const p=[];for(const h of n.slice(i))h==="*"?p.push(u):p.push(h);f(s,p,d)}for(const u of a)delete s[u]}}else{const s=e;r in s&&Gu(s[r],t,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _d(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iE(e){const t={},n=c(e,["operationName"]);n!=null&&f(t,["operationName"],n);const i=c(e,["resourceName"]);return i!=null&&f(t,["_url","resourceName"],i),t}function oE(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],sE(s)),t}function rE(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],lE(s)),t}function sE(e){const t={},n=c(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>aE(s))),f(t,["generatedVideos"],r)}const i=c(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=c(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function lE(e){const t={},n=c(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>uE(s))),f(t,["generatedVideos"],r)}const i=c(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=c(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function aE(e){const t={},n=c(e,["video"]);return n!=null&&f(t,["video"],mE(n)),t}function uE(e){const t={},n=c(e,["_self"]);return n!=null&&f(t,["video"],gE(n)),t}function cE(e){const t={},n=c(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function dE(e){const t={},n=c(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function fE(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],pE(s)),t}function pE(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["parent"]);i!=null&&f(t,["parent"],i);const o=c(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function sv(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],hE(s)),t}function hE(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["parent"]);i!=null&&f(t,["parent"],i);const o=c(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function mE(e){const t={},n=c(e,["uri"]);n!=null&&f(t,["uri"],n);const i=c(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],_d(i));const o=c(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function gE(e){const t={},n=c(e,["gcsUri"]);n!=null&&f(t,["uri"],n);const i=c(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],_d(i));const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qp;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qp||(qp={}));var jp;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(jp||(jp={}));var Jp;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Jp||(Jp={}));var Rn;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Rn||(Rn={}));var Wp;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Wp||(Wp={}));var Kp;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Kp||(Kp={}));var Yp;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Yp||(Yp={}));var Xp;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Xp||(Xp={}));var Qp;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Qp||(Qp={}));var Zp;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(Zp||(Zp={}));var eh;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(eh||(eh={}));var th;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(th||(th={}));var nh;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(nh||(nh={}));var ih;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(ih||(ih={}));var oh;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(oh||(oh={}));var rh;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(rh||(rh={}));var sh;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sh||(sh={}));var lh;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(lh||(lh={}));var ah;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ah||(ah={}));var il;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(il||(il={}));var uh;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uh||(uh={}));var ch;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ch||(ch={}));var dh;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dh||(dh={}));var Bu;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bu||(Bu={}));var fh;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(fh||(fh={}));var ph;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ph||(ph={}));var hh;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(hh||(hh={}));var mh;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(mh||(mh={}));var gh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(gh||(gh={}));var yh;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(yh||(yh={}));var vh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(vh||(vh={}));var xh;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(xh||(xh={}));var Sh;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Sh||(Sh={}));var Th;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Th||(Th={}));var wh;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(wh||(wh={}));var Eh;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Eh||(Eh={}));var Ch;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ch||(Ch={}));var Nh;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Nh||(Nh={}));var Ih;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Ih||(Ih={}));var kh;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(kh||(kh={}));var _h;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(_h||(_h={}));var Ah;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Ah||(Ah={}));var Ph;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ph||(Ph={}));var bh;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(bh||(bh={}));var Rh;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Rh||(Rh={}));var Mh;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Mh||(Mh={}));var Dh;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Dh||(Dh={}));var Lh;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Lh||(Lh={}));var Fh;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Fh||(Fh={}));var Uh;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Uh||(Uh={}));var Vh;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Vh||(Vh={}));var Gh;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Gh||(Gh={}));var Bh;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Bh||(Bh={}));var zh;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zh||(zh={}));var Oh;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Oh||(Oh={}));var Bi;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Bi||(Bi={}));class zu{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Do{get text(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const p=[];for(const h of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,u+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const p of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&d.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,n,i,o,r,s,a,l,u;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,n,i,o,r,s,a,l,u;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class Hh{}class $h{}class yE{}class vE{}class xE{}class SE{}class qh{}class jh{}class Jh{}class TE{}class ol{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new ol;let o;const r=t;return n?o=rE(r):o=oE(r),Object.assign(i,o),i}}class Wh{}class Kh{}class Yh{}class Xh{}class wE{}class EE{}class CE{}class Ad{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new Ad,r=fE(t);return Object.assign(i,r),i}}class NE{}class IE{}class kE{}class Qh{}class _E{get text(){var t,n,i;let o="",r=!1;const s=[];for(const a of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var t,n,i;let o="";const r=[];for(const s of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&r.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class AE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Pd{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new Pd,r=sv(t);return Object.assign(i,r),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function de(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function lv(e,t){const n=de(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function av(e){return Array.isArray(e)?e.map(t=>rl(t)):[rl(e)]}function rl(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function uv(e){const t=rl(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function cv(e){const t=rl(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Zh(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function dv(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Zh(t)):[Zh(e)]}function Ou(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function em(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function tm(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Qe(e){if(e==null)throw new Error("ContentUnion is required");return Ou(e)?e:{role:"user",parts:dv(e)}}function bd(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Qe(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Qe(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Qe(n)):[Qe(t)]}function Rt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(em(e)||tm(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Qe(e)]}const t=[],n=[],i=Ou(e[0]);for(const o of e){const r=Ou(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(o);else{if(em(o)||tm(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:dv(n)}),t}function PE(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(Rn).includes(n[0].toUpperCase())?n[0].toUpperCase():Rn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(Rn).includes(i.toUpperCase())?i.toUpperCase():Rn.TYPE_UNSPECIFIED})}}function eo(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=e.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,e=r[1]):r[1].type==="null"&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&PE(e.type,t);for(const[s,a]of Object.entries(e))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(Rn).includes(a.toUpperCase())?a.toUpperCase():Rn.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=eo(a);else if(i.includes(s)){const l=[];for(const u of a){if(u.type=="null"){t.nullable=!0;continue}l.push(eo(u))}t[s]=l}else if(o.includes(s)){const l={};for(const[u,d]of Object.entries(a))l[u]=eo(d);t[s]=l}else{if(s==="additionalProperties")continue;t[s]=a}return t}function Rd(e){return eo(e)}function Md(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Dd(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function yo(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=eo(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=eo(t.response));return e}function vo(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function bE(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function Tn(e,t){if(typeof t!="string")throw new Error("name must be a string");return bE(e,t,"cachedContents")}function fv(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Kn(e){return _d(e)}function RE(e){return e!=null&&typeof e=="object"&&"name"in e}function ME(e){return e!=null&&typeof e=="object"&&"video"in e}function DE(e){return e!=null&&typeof e=="object"&&"uri"in e}function pv(e){var t;let n;if(RE(e)&&(n=e.name),!(DE(e)&&(n=e.uri,n===void 0))&&!(ME(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function hv(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function mv(e){for(const t of["models","tunedModels","publisherModels"])if(LE(e,t))return e[t];return[]}function LE(e,t){return e!==null&&typeof e=="object"&&t in e}function FE(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function UE(e,t={}){const n=[],i=new Set;for(const o of e){const r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const s=FE(o,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function gv(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function VE(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function yv(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let r=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function xo(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function vv(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GE(e){const t={},n=c(e,["responsesFile"]);n!=null&&f(t,["fileName"],n);const i=c(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>xC(s))),f(t,["inlinedResponses"],r)}const o=c(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["inlinedEmbedContentResponses"],r)}return t}function BE(e){const t={},n=c(e,["predictionsFormat"]);n!=null&&f(t,["format"],n);const i=c(e,["gcsDestination","outputUriPrefix"]);i!=null&&f(t,["gcsUri"],i);const o=c(e,["bigqueryDestination","outputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function zE(e){const t={},n=c(e,["format"]);n!=null&&f(t,["predictionsFormat"],n);const i=c(e,["gcsUri"]);i!=null&&f(t,["gcsDestination","outputUriPrefix"],i);const o=c(e,["bigqueryUri"]);if(o!=null&&f(t,["bigqueryDestination","outputUri"],o),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Cs(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["metadata","displayName"]);i!=null&&f(t,["displayName"],i);const o=c(e,["metadata","state"]);o!=null&&f(t,["state"],vv(o));const r=c(e,["metadata","createTime"]);r!=null&&f(t,["createTime"],r);const s=c(e,["metadata","endTime"]);s!=null&&f(t,["endTime"],s);const a=c(e,["metadata","updateTime"]);a!=null&&f(t,["updateTime"],a);const l=c(e,["metadata","model"]);l!=null&&f(t,["model"],l);const u=c(e,["metadata","output"]);return u!=null&&f(t,["dest"],GE(yv(u))),t}function Hu(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=c(e,["state"]);o!=null&&f(t,["state"],vv(o));const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["createTime"]);s!=null&&f(t,["createTime"],s);const a=c(e,["startTime"]);a!=null&&f(t,["startTime"],a);const l=c(e,["endTime"]);l!=null&&f(t,["endTime"],l);const u=c(e,["updateTime"]);u!=null&&f(t,["updateTime"],u);const d=c(e,["model"]);d!=null&&f(t,["model"],d);const p=c(e,["inputConfig"]);p!=null&&f(t,["src"],OE(p));const h=c(e,["outputConfig"]);h!=null&&f(t,["dest"],BE(yv(h)));const g=c(e,["completionStats"]);return g!=null&&f(t,["completionStats"],g),t}function OE(e){const t={},n=c(e,["instancesFormat"]);n!=null&&f(t,["format"],n);const i=c(e,["gcsSource","uris"]);i!=null&&f(t,["gcsUri"],i);const o=c(e,["bigquerySource","inputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function HE(e,t){const n={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(t,["fileName"]);i!=null&&f(n,["fileName"],i);const o=c(t,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>vC(e,s))),f(n,["requests","requests"],r)}return n}function $E(e){const t={},n=c(e,["format"]);n!=null&&f(t,["instancesFormat"],n);const i=c(e,["gcsUri"]);i!=null&&f(t,["gcsSource","uris"],i);const o=c(e,["bigqueryUri"]);if(o!=null&&f(t,["bigquerySource","inputUri"],o),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function qE(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function jE(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],xo(e,i)),n}function JE(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],xo(e,i)),n}function WE(e){const t={},n=c(e,["content"]);n!=null&&f(t,["content"],n);const i=c(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],KE(i));const o=c(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);const r=c(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);const s=c(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);const a=c(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);const l=c(e,["index"]);l!=null&&f(t,["index"],l);const u=c(e,["logprobsResult"]);u!=null&&f(t,["logprobsResult"],u);const d=c(e,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["safetyRatings"],h)}const p=c(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function KE(e){const t={},n=c(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function xv(e){const t={},n=c(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>IC(r))),f(t,["parts"],o)}const i=c(e,["role"]);return i!=null&&f(t,["role"],i),t}function YE(e,t){const n={},i=c(e,["displayName"]);if(t!==void 0&&i!=null&&f(t,["batch","displayName"],i),c(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function XE(e,t){const n={},i=c(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const o=c(e,["dest"]);return t!==void 0&&o!=null&&f(t,["outputConfig"],zE(VE(o))),n}function nm(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["src"]);o!=null&&f(n,["batch","inputConfig"],HE(e,gv(e,o)));const r=c(t,["config"]);return r!=null&&YE(r,n),n}function QE(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["model"],de(e,i));const o=c(t,["src"]);o!=null&&f(n,["inputConfig"],$E(gv(e,o)));const r=c(t,["config"]);return r!=null&&XE(r,n),n}function ZE(e,t){const n={},i=c(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["batch","displayName"],i),n}function eC(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["src"]);o!=null&&f(n,["batch","inputConfig"],lC(e,o));const r=c(t,["config"]);return r!=null&&ZE(r,n),n}function tC(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],xo(e,i)),n}function nC(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],xo(e,i)),n}function iC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["name"]);i!=null&&f(t,["name"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);return r!=null&&f(t,["error"],r),t}function oC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["name"]);i!=null&&f(t,["name"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);return r!=null&&f(t,["error"],r),t}function rC(e,t){const n={},i=c(t,["contents"]);if(i!=null){let r=bd(e,i);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["requests[]","request","content"],r)}const o=c(t,["config"]);return o!=null&&(f(n,["_self"],sC(o,n)),nE(n,{"requests[].*":"requests[].request.*"})),n}function sC(e,t){const n={},i=c(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);const o=c(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);const r=c(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function lC(e,t){const n={},i=c(t,["fileName"]);i!=null&&f(n,["file_name"],i);const o=c(t,["inlinedRequests"]);return o!=null&&f(n,["requests"],rC(e,o)),n}function aC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function uC(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const i=c(e,["args"]);i!=null&&f(t,["args"],i);const o=c(e,["name"]);if(o!=null&&f(t,["name"],o),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function cC(e){const t={},n=c(e,["mode"]);n!=null&&f(t,["mode"],n);const i=c(e,["allowedFunctionNames"]);if(i!=null&&f(t,["allowedFunctionNames"],i),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function dC(e,t,n){const i={},o=c(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],xv(Qe(o)));const r=c(t,["temperature"]);r!=null&&f(i,["temperature"],r);const s=c(t,["topP"]);s!=null&&f(i,["topP"],s);const a=c(t,["topK"]);a!=null&&f(i,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const d=c(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);const p=c(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const h=c(t,["logprobs"]);h!=null&&f(i,["logprobs"],h);const g=c(t,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);const v=c(t,["frequencyPenalty"]);v!=null&&f(i,["frequencyPenalty"],v);const T=c(t,["seed"]);T!=null&&f(i,["seed"],T);const w=c(t,["responseMimeType"]);w!=null&&f(i,["responseMimeType"],w);const x=c(t,["responseSchema"]);x!=null&&f(i,["responseSchema"],Rd(x));const y=c(t,["responseJsonSchema"]);if(y!=null&&f(i,["responseJsonSchema"],y),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=c(t,["safetySettings"]);if(n!==void 0&&S!=null){let H=S;Array.isArray(H)&&(H=H.map($=>kC($))),f(n,["safetySettings"],H)}const E=c(t,["tools"]);if(n!==void 0&&E!=null){let H=vo(E);Array.isArray(H)&&(H=H.map($=>AC(yo($)))),f(n,["tools"],H)}const N=c(t,["toolConfig"]);if(n!==void 0&&N!=null&&f(n,["toolConfig"],_C(N)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(t,["cachedContent"]);n!==void 0&&C!=null&&f(n,["cachedContent"],Tn(e,C));const I=c(t,["responseModalities"]);I!=null&&f(i,["responseModalities"],I);const _=c(t,["mediaResolution"]);_!=null&&f(i,["mediaResolution"],_);const P=c(t,["speechConfig"]);if(P!=null&&f(i,["speechConfig"],Md(P)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=c(t,["thinkingConfig"]);R!=null&&f(i,["thinkingConfig"],R);const L=c(t,["imageConfig"]);L!=null&&f(i,["imageConfig"],yC(L));const ee=c(t,["enableEnhancedCivicAnswers"]);return ee!=null&&f(i,["enableEnhancedCivicAnswers"],ee),i}function fC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>WE(u))),f(t,["candidates"],l)}const o=c(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);const r=c(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);const s=c(e,["responseId"]);s!=null&&f(t,["responseId"],s);const a=c(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function pC(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],xo(e,i)),n}function hC(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],xo(e,i)),n}function mC(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function gC(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function yC(e){const t={},n=c(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const i=c(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),c(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function vC(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["request","model"],de(e,i));const o=c(t,["contents"]);if(o!=null){let a=Rt(o);Array.isArray(a)&&(a=a.map(l=>xv(l))),f(n,["request","contents"],a)}const r=c(t,["metadata"]);r!=null&&f(n,["metadata"],r);const s=c(t,["config"]);return s!=null&&f(n,["request","generationConfig"],dC(e,s,c(n,["request"],{}))),n}function xC(e){const t={},n=c(e,["response"]);n!=null&&f(t,["response"],fC(n));const i=c(e,["error"]);return i!=null&&f(t,["error"],i),t}function SC(e,t){const n={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=c(e,["pageToken"]);if(t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),c(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function TC(e,t){const n={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=c(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);const r=c(e,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),n}function wC(e){const t={},n=c(e,["config"]);return n!=null&&SC(n,t),t}function EC(e){const t={},n=c(e,["config"]);return n!=null&&TC(n,t),t}function CC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Cs(s))),f(t,["batchJobs"],r)}return t}function NC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Hu(s))),f(t,["batchJobs"],r)}return t}function IC(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=c(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=c(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],aC(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],uC(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],qE(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const p=c(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const h=c(e,["videoMetadata"]);return h!=null&&f(t,["videoMetadata"],h),t}function kC(e){const t={},n=c(e,["category"]);if(n!=null&&f(t,["category"],n),c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function _C(e){const t={},n=c(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],cC(n));const i=c(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],i),t}function AC(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=c(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],mC(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],gC(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gn;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(gn||(gn={}));class Ei{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,r;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PC extends Sn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ei(gn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=nm(this.apiClient,t),i=n._url,o=G("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const d of l){const p=Object.assign({},d);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=h,p.request=g}u.push(p)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const r=this.getGcsUri(t),s=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(s)i.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=QE(this.apiClient,t);return a=G("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Hu(d))}else{const u=nm(this.apiClient,t);return a=G("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Cs(d))}}async createEmbeddingsInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=eC(this.apiClient,t);return r=G("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>Cs(l))}}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=hC(this.apiClient,t);return a=G("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Hu(d))}else{const u=pC(this.apiClient,t);return a=G("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Cs(d))}}async cancel(t){var n,i,o,r;let s="",a={};if(this.apiClient.isVertexAI()){const l=JE(this.apiClient,t);s=G("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=jE(this.apiClient,t);s=G("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=EC(t);return a=G("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=NC(d),h=new Qh;return Object.assign(h,p),h})}else{const u=wC(t);return a=G("batches",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=CC(d),h=new Qh;return Object.assign(h,p),h})}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=nC(this.apiClient,t);return a=G("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>oC(d))}else{const u=tC(this.apiClient,t);return a=G("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>iC(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bC(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function im(e){const t={},n=c(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>eN(r))),f(t,["parts"],o)}const i=c(e,["role"]);return i!=null&&f(t,["role"],i),t}function RC(e,t){const n={},i=c(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=c(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);const r=c(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const s=c(e,["contents"]);if(t!==void 0&&s!=null){let d=Rt(s);Array.isArray(d)&&(d=d.map(p=>im(p))),f(t,["contents"],d)}const a=c(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],im(Qe(a)));const l=c(e,["tools"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>nN(p))),f(t,["tools"],d)}const u=c(e,["toolConfig"]);if(t!==void 0&&u!=null&&f(t,["toolConfig"],tN(u)),c(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function MC(e,t){const n={},i=c(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=c(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);const r=c(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const s=c(e,["contents"]);if(t!==void 0&&s!=null){let p=Rt(s);Array.isArray(p)&&(p=p.map(h=>h)),f(t,["contents"],p)}const a=c(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Qe(a));const l=c(e,["tools"]);if(t!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>iN(h))),f(t,["tools"],p)}const u=c(e,["toolConfig"]);t!==void 0&&u!=null&&f(t,["toolConfig"],u);const d=c(e,["kmsKeyName"]);return t!==void 0&&d!=null&&f(t,["encryption_spec","kmsKeyName"],d),n}function DC(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["model"],lv(e,i));const o=c(t,["config"]);return o!=null&&RC(o,n),n}function LC(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["model"],lv(e,i));const o=c(t,["config"]);return o!=null&&MC(o,n),n}function FC(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],Tn(e,i)),n}function UC(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],Tn(e,i)),n}function VC(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function GC(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function BC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function zC(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const i=c(e,["args"]);i!=null&&f(t,["args"],i);const o=c(e,["name"]);if(o!=null&&f(t,["name"],o),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function OC(e){const t={},n=c(e,["mode"]);n!=null&&f(t,["mode"],n);const i=c(e,["allowedFunctionNames"]);if(i!=null&&f(t,["allowedFunctionNames"],i),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function HC(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&f(t,["description"],n);const i=c(e,["name"]);i!=null&&f(t,["name"],i);const o=c(e,["parameters"]);o!=null&&f(t,["parameters"],o);const r=c(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const s=c(e,["response"]);s!=null&&f(t,["response"],s);const a=c(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function $C(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],Tn(e,i)),n}function qC(e,t){const n={},i=c(t,["name"]);return i!=null&&f(n,["_url","name"],Tn(e,i)),n}function jC(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function JC(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function WC(e,t){const n={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=c(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function KC(e,t){const n={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=c(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function YC(e){const t={},n=c(e,["config"]);return n!=null&&WC(n,t),t}function XC(e){const t={},n=c(e,["config"]);return n!=null&&KC(n,t),t}function QC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function ZC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function eN(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=c(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=c(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],BC(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],zC(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],bC(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const p=c(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const h=c(e,["videoMetadata"]);return h!=null&&f(t,["videoMetadata"],h),t}function tN(e){const t={},n=c(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],OC(n));const i=c(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],i),t}function nN(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=c(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],jC(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],JC(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function iN(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>HC(h))),f(t,["functionDeclarations"],p)}const i=c(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=c(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const r=c(e,["computerUse"]);if(r!=null&&f(t,["computerUse"],r),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(e,["codeExecution"]);s!=null&&f(t,["codeExecution"],s);const a=c(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const l=c(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],l);const u=c(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=c(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function oN(e,t){const n={},i=c(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=c(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function rN(e,t){const n={},i=c(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=c(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function sN(e,t){const n={},i=c(t,["name"]);i!=null&&f(n,["_url","name"],Tn(e,i));const o=c(t,["config"]);return o!=null&&oN(o,n),n}function lN(e,t){const n={},i=c(t,["name"]);i!=null&&f(n,["_url","name"],Tn(e,i));const o=c(t,["config"]);return o!=null&&rN(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aN extends Sn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ei(gn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=LC(this.apiClient,t);return a=G("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{const u=DC(this.apiClient,t);return a=G("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=qC(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{const u=$C(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=UC(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=GC(d),h=new Yh;return Object.assign(h,p),h})}else{const u=FC(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=VC(d),h=new Yh;return Object.assign(h,p),h})}}async update(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=lN(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{const u=sN(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=XC(t);return a=G("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=ZC(d),h=new Xh;return Object.assign(h,p),h})}else{const u=YC(t);return a=G("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=QC(d),h=new Xh;return Object.assign(h,p),h})}}}function sl(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function om(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ne(e){return this instanceof ne?(this.v=e,this):new ne(e)}function Wt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(v){return Promise.resolve(v).then(g,p)}}function a(g,v){i[g]&&(o[g]=function(T){return new Promise(function(w,x){r.push([g,T,w,x])>1||l(g,T)})},v&&(o[g]=v(o[g])))}function l(g,v){try{u(i[g](v))}catch(T){h(r[0][3],T)}}function u(g){g.value instanceof ne?Promise.resolve(g.value.v).then(d,p):h(r[0][2],g)}function d(g){l("next",g)}function p(g){l("throw",g)}function h(g,v){g(v),r.shift(),r.length&&l(r[0][0],r[0][1])}}function Kt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof om=="function"?om(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(s){return new Promise(function(a,l){s=e[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(u){r({value:u,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Sv(n)}function Sv(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function cN(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function rm(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let r=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),r&&!Sv(e[i])&&(r=!1),i++;r?t.push(...o):t.pop()}return t}class dN{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new fN(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class fN{constructor(t,n,i,o={},r=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),cN(r)}async sendMessage(t){var n;await this.sendPromise;const i=Qe(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,s,a;const l=await o,u=(s=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,d=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];d!=null&&(h=(a=d.slice(p))!==null&&a!==void 0?a:[]);const g=u?[u]:[];this.recordHistory(i,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=Qe(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const r=await o;return this.processStreamResponse(r,i)}getHistory(t=!1){const n=t?rm(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return Wt(this,arguments,function*(){var o,r,s,a,l,u;const d=[];try{for(var p=!0,h=Kt(t),g;g=yield ne(h.next()),o=g.done,!o;p=!0){a=g.value,p=!1;const v=a;if(uN(v)){const T=(u=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;T!==void 0&&d.push(T)}yield yield ne(v)}}catch(v){r={error:v}}finally{try{!p&&!o&&(s=h.return)&&(yield ne(s.call(h)))}finally{if(r)throw r.error}}this.recordHistory(n,d)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(r=>r.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...rm(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ll extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Ll.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pN(e){const t={},n=c(e,["file"]);return n!=null&&f(t,["file"],n),t}function hN(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function mN(e){const t={},n=c(e,["name"]);return n!=null&&f(t,["_url","file"],pv(n)),t}function gN(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function yN(e){const t={},n=c(e,["name"]);return n!=null&&f(t,["_url","file"],pv(n)),t}function vN(e,t){const n={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=c(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function xN(e){const t={},n=c(e,["config"]);return n!=null&&vN(n,t),t}function SN(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["files"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TN extends Sn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ei(gn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xN(t);return r=G("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=SN(l),d=new NE;return Object.assign(d,u),d})}}async createInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pN(t);return r=G("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=hN(l),d=new IE;return Object.assign(d,u),d})}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yN(t);return r=G("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mN(t);return r=G("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=gN(l),d=new kE;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ns(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function wN(e){const t={},n=c(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>VN(r))),f(t,["parts"],o)}const i=c(e,["role"]);return i!=null&&f(t,["role"],i),t}function EN(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function CN(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const i=c(e,["args"]);i!=null&&f(t,["args"],i);const o=c(e,["name"]);if(o!=null&&f(t,["name"],o),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function NN(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&f(t,["description"],n);const i=c(e,["name"]);i!=null&&f(t,["name"],i);const o=c(e,["parameters"]);o!=null&&f(t,["parameters"],o);const r=c(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const s=c(e,["response"]);s!=null&&f(t,["response"],s);const a=c(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function IN(e){const t={},n=c(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);const i=c(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);const o=c(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);const r=c(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);const s=c(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);const a=c(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);const l=c(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(t,["maxOutputTokens"],u);const d=c(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);const p=c(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);const h=c(e,["responseLogprobs"]);h!=null&&f(t,["responseLogprobs"],h);const g=c(e,["responseMimeType"]);g!=null&&f(t,["responseMimeType"],g);const v=c(e,["responseModalities"]);v!=null&&f(t,["responseModalities"],v);const T=c(e,["responseSchema"]);T!=null&&f(t,["responseSchema"],T);const w=c(e,["routingConfig"]);w!=null&&f(t,["routingConfig"],w);const x=c(e,["seed"]);x!=null&&f(t,["seed"],x);const y=c(e,["speechConfig"]);y!=null&&f(t,["speechConfig"],y);const S=c(e,["stopSequences"]);S!=null&&f(t,["stopSequences"],S);const E=c(e,["temperature"]);E!=null&&f(t,["temperature"],E);const N=c(e,["thinkingConfig"]);N!=null&&f(t,["thinkingConfig"],N);const C=c(e,["topK"]);C!=null&&f(t,["topK"],C);const I=c(e,["topP"]);if(I!=null&&f(t,["topP"],I),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function kN(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function _N(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function AN(e,t){const n={},i=c(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const o=c(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);const r=c(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const s=c(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);const a=c(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=c(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const p=c(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Dd(p));const h=c(e,["thinkingConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","thinkingConfig"],h);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],wN(Qe(v)));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let C=vo(T);Array.isArray(C)&&(C=C.map(I=>BN(yo(I)))),f(t,["setup","tools"],C)}const w=c(e,["sessionResumption"]);t!==void 0&&w!=null&&f(t,["setup","sessionResumption"],GN(w));const x=c(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&f(t,["setup","inputAudioTranscription"],x);const y=c(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","outputAudioTranscription"],y);const S=c(e,["realtimeInputConfig"]);t!==void 0&&S!=null&&f(t,["setup","realtimeInputConfig"],S);const E=c(e,["contextWindowCompression"]);t!==void 0&&E!=null&&f(t,["setup","contextWindowCompression"],E);const N=c(e,["proactivity"]);if(t!==void 0&&N!=null&&f(t,["setup","proactivity"],N),c(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function PN(e,t){const n={},i=c(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],IN(i));const o=c(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);const r=c(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const s=c(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);const a=c(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=c(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const p=c(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Dd(p));const h=c(e,["thinkingConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","thinkingConfig"],h);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],Qe(v));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let I=vo(T);Array.isArray(I)&&(I=I.map(_=>zN(yo(_)))),f(t,["setup","tools"],I)}const w=c(e,["sessionResumption"]);t!==void 0&&w!=null&&f(t,["setup","sessionResumption"],w);const x=c(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&f(t,["setup","inputAudioTranscription"],x);const y=c(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","outputAudioTranscription"],y);const S=c(e,["realtimeInputConfig"]);t!==void 0&&S!=null&&f(t,["setup","realtimeInputConfig"],S);const E=c(e,["contextWindowCompression"]);t!==void 0&&E!=null&&f(t,["setup","contextWindowCompression"],E);const N=c(e,["proactivity"]);t!==void 0&&N!=null&&f(t,["setup","proactivity"],N);const C=c(e,["explicitVadSignal"]);return t!==void 0&&C!=null&&f(t,["setup","explicitVadSignal"],C),n}function bN(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["setup","model"],de(e,i));const o=c(t,["config"]);return o!=null&&f(n,["config"],AN(o,n)),n}function RN(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["setup","model"],de(e,i));const o=c(t,["config"]);return o!=null&&f(n,["config"],PN(o,n)),n}function MN(e){const t={},n=c(e,["musicGenerationConfig"]);return n!=null&&f(t,["musicGenerationConfig"],n),t}function DN(e){const t={},n=c(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["weightedPrompts"],i)}return t}function LN(e){const t={},n=c(e,["media"]);if(n!=null){let u=av(n);Array.isArray(u)&&(u=u.map(d=>Ns(d))),f(t,["mediaChunks"],u)}const i=c(e,["audio"]);i!=null&&f(t,["audio"],Ns(cv(i)));const o=c(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);const r=c(e,["video"]);r!=null&&f(t,["video"],Ns(uv(r)));const s=c(e,["text"]);s!=null&&f(t,["text"],s);const a=c(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);const l=c(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function FN(e){const t={},n=c(e,["media"]);if(n!=null){let u=av(n);Array.isArray(u)&&(u=u.map(d=>d)),f(t,["mediaChunks"],u)}const i=c(e,["audio"]);i!=null&&f(t,["audio"],cv(i));const o=c(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);const r=c(e,["video"]);r!=null&&f(t,["video"],uv(r));const s=c(e,["text"]);s!=null&&f(t,["text"],s);const a=c(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);const l=c(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function UN(e){const t={},n=c(e,["setupComplete"]);n!=null&&f(t,["setupComplete"],n);const i=c(e,["serverContent"]);i!=null&&f(t,["serverContent"],i);const o=c(e,["toolCall"]);o!=null&&f(t,["toolCall"],o);const r=c(e,["toolCallCancellation"]);r!=null&&f(t,["toolCallCancellation"],r);const s=c(e,["usageMetadata"]);s!=null&&f(t,["usageMetadata"],ON(s));const a=c(e,["goAway"]);a!=null&&f(t,["goAway"],a);const l=c(e,["sessionResumptionUpdate"]);l!=null&&f(t,["sessionResumptionUpdate"],l);const u=c(e,["voiceActivityDetectionSignal"]);return u!=null&&f(t,["voiceActivityDetectionSignal"],u),t}function VN(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=c(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=c(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],EN(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],CN(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],Ns(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const p=c(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const h=c(e,["videoMetadata"]);return h!=null&&f(t,["videoMetadata"],h),t}function GN(e){const t={},n=c(e,["handle"]);if(n!=null&&f(t,["handle"],n),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function BN(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=c(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],kN(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],_N(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function zN(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>NN(h))),f(t,["functionDeclarations"],p)}const i=c(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=c(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const r=c(e,["computerUse"]);if(r!=null&&f(t,["computerUse"],r),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(e,["codeExecution"]);s!=null&&f(t,["codeExecution"],s);const a=c(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const l=c(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],l);const u=c(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=c(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function ON(e){const t={},n=c(e,["promptTokenCount"]);n!=null&&f(t,["promptTokenCount"],n);const i=c(e,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);const o=c(e,["candidatesTokenCount"]);o!=null&&f(t,["responseTokenCount"],o);const r=c(e,["toolUsePromptTokenCount"]);r!=null&&f(t,["toolUsePromptTokenCount"],r);const s=c(e,["thoughtsTokenCount"]);s!=null&&f(t,["thoughtsTokenCount"],s);const a=c(e,["totalTokenCount"]);a!=null&&f(t,["totalTokenCount"],a);const l=c(e,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["promptTokensDetails"],g)}const u=c(e,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["cacheTokensDetails"],g)}const d=c(e,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["responseTokensDetails"],g)}const p=c(e,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["toolUsePromptTokensDetails"],g)}const h=c(e,["trafficType"]);return h!=null&&f(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HN(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function $N(e){const t={},n=c(e,["content"]);n!=null&&f(t,["content"],n);const i=c(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],qN(i));const o=c(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);const r=c(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);const s=c(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);const a=c(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);const l=c(e,["index"]);l!=null&&f(t,["index"],l);const u=c(e,["logprobsResult"]);u!=null&&f(t,["logprobsResult"],u);const d=c(e,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["safetyRatings"],h)}const p=c(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function qN(e){const t={},n=c(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function jN(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["contents"]);if(o!=null){let r=Rt(o);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["contents"],r)}return n}function JN(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(t,["tokensInfo"],o)}return t}function WN(e){const t={},n=c(e,["values"]);n!=null&&f(t,["values"],n);const i=c(e,["statistics"]);return i!=null&&f(t,["statistics"],KN(i)),t}function KN(e){const t={},n=c(e,["truncated"]);n!=null&&f(t,["truncated"],n);const i=c(e,["token_count"]);return i!=null&&f(t,["tokenCount"],i),t}function Fl(e){const t={},n=c(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ok(r))),f(t,["parts"],o)}const i=c(e,["role"]);return i!=null&&f(t,["role"],i),t}function YN(e){const t={},n=c(e,["controlType"]);n!=null&&f(t,["controlType"],n);const i=c(e,["enableControlImageComputation"]);return i!=null&&f(t,["computeControl"],i),t}function XN(e){const t={};if(c(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function QN(e,t){const n={},i=c(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],Qe(i));const o=c(e,["tools"]);if(t!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Cv(a))),f(t,["tools"],s)}const r=c(e,["generationConfig"]);return t!==void 0&&r!=null&&f(t,["generationConfig"],HI(r)),n}function ZN(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["contents"]);if(o!=null){let s=Rt(o);Array.isArray(s)&&(s=s.map(a=>Fl(a))),f(n,["contents"],s)}const r=c(t,["config"]);return r!=null&&XN(r),n}function eI(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["contents"]);if(o!=null){let s=Rt(o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const r=c(t,["config"]);return r!=null&&QN(r,n),n}function tI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["totalTokens"]);i!=null&&f(t,["totalTokens"],i);const o=c(e,["cachedContentTokenCount"]);return o!=null&&f(t,["cachedContentTokenCount"],o),t}function nI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["totalTokens"]);return i!=null&&f(t,["totalTokens"],i),t}function iI(e,t){const n={},i=c(t,["model"]);return i!=null&&f(n,["_url","name"],de(e,i)),n}function oI(e,t){const n={},i=c(t,["model"]);return i!=null&&f(n,["_url","name"],de(e,i)),n}function rI(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function sI(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function lI(e,t){const n={},i=c(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const o=c(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);const r=c(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const s=c(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);const a=c(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);const l=c(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);const u=c(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&f(t,["parameters","safetySetting"],u);const d=c(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const p=c(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);const h=c(e,["includeRaiReason"]);t!==void 0&&h!=null&&f(t,["parameters","includeRaiReason"],h);const g=c(e,["language"]);t!==void 0&&g!=null&&f(t,["parameters","language"],g);const v=c(e,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const T=c(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T);const w=c(e,["addWatermark"]);t!==void 0&&w!=null&&f(t,["parameters","addWatermark"],w);const x=c(e,["labels"]);t!==void 0&&x!=null&&f(t,["labels"],x);const y=c(e,["editMode"]);t!==void 0&&y!=null&&f(t,["parameters","editMode"],y);const S=c(e,["baseSteps"]);return t!==void 0&&S!=null&&f(t,["parameters","editConfig","baseSteps"],S),n}function aI(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const r=c(t,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>ck(l))),f(n,["instances[0]","referenceImages"],a)}const s=c(t,["config"]);return s!=null&&lI(s,n),n}function uI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Ul(r))),f(t,["generatedImages"],o)}return t}function cI(e,t){const n={},i=c(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);const o=c(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);const r=c(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function dI(e,t){const n={},i=c(e,["taskType"]);t!==void 0&&i!=null&&f(t,["instances[]","task_type"],i);const o=c(e,["title"]);t!==void 0&&o!=null&&f(t,["instances[]","title"],o);const r=c(e,["outputDimensionality"]);t!==void 0&&r!=null&&f(t,["parameters","outputDimensionality"],r);const s=c(e,["mimeType"]);t!==void 0&&s!=null&&f(t,["instances[]","mimeType"],s);const a=c(e,["autoTruncate"]);return t!==void 0&&a!=null&&f(t,["parameters","autoTruncate"],a),n}function fI(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["contents"]);if(o!=null){let a=bd(e,o);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const r=c(t,["config"]);r!=null&&cI(r,n);const s=c(t,["model"]);return s!==void 0&&f(n,["requests[]","model"],de(e,s)),n}function pI(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["contents"]);if(o!=null){let s=bd(e,o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}const r=c(t,["config"]);return r!=null&&dI(r,n),n}function hI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["embeddings"],r)}const o=c(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function mI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>WN(s))),f(t,["embeddings"],r)}const o=c(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function gI(e){const t={},n=c(e,["endpoint"]);n!=null&&f(t,["name"],n);const i=c(e,["deployedModelId"]);return i!=null&&f(t,["deployedModelId"],i),t}function yI(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function vI(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const i=c(e,["args"]);i!=null&&f(t,["args"],i);const o=c(e,["name"]);if(o!=null&&f(t,["name"],o),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function xI(e){const t={},n=c(e,["mode"]);n!=null&&f(t,["mode"],n);const i=c(e,["allowedFunctionNames"]);if(i!=null&&f(t,["allowedFunctionNames"],i),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function SI(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&f(t,["description"],n);const i=c(e,["name"]);i!=null&&f(t,["name"],i);const o=c(e,["parameters"]);o!=null&&f(t,["parameters"],o);const r=c(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const s=c(e,["response"]);s!=null&&f(t,["response"],s);const a=c(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function TI(e,t,n){const i={},o=c(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],Fl(Qe(o)));const r=c(t,["temperature"]);r!=null&&f(i,["temperature"],r);const s=c(t,["topP"]);s!=null&&f(i,["topP"],s);const a=c(t,["topK"]);a!=null&&f(i,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const d=c(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);const p=c(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const h=c(t,["logprobs"]);h!=null&&f(i,["logprobs"],h);const g=c(t,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);const v=c(t,["frequencyPenalty"]);v!=null&&f(i,["frequencyPenalty"],v);const T=c(t,["seed"]);T!=null&&f(i,["seed"],T);const w=c(t,["responseMimeType"]);w!=null&&f(i,["responseMimeType"],w);const x=c(t,["responseSchema"]);x!=null&&f(i,["responseSchema"],Rd(x));const y=c(t,["responseJsonSchema"]);if(y!=null&&f(i,["responseJsonSchema"],y),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=c(t,["safetySettings"]);if(n!==void 0&&S!=null){let H=S;Array.isArray(H)&&(H=H.map($=>dk($))),f(n,["safetySettings"],H)}const E=c(t,["tools"]);if(n!==void 0&&E!=null){let H=vo(E);Array.isArray(H)&&(H=H.map($=>vk(yo($)))),f(n,["tools"],H)}const N=c(t,["toolConfig"]);if(n!==void 0&&N!=null&&f(n,["toolConfig"],yk(N)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(t,["cachedContent"]);n!==void 0&&C!=null&&f(n,["cachedContent"],Tn(e,C));const I=c(t,["responseModalities"]);I!=null&&f(i,["responseModalities"],I);const _=c(t,["mediaResolution"]);_!=null&&f(i,["mediaResolution"],_);const P=c(t,["speechConfig"]);if(P!=null&&f(i,["speechConfig"],Md(P)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=c(t,["thinkingConfig"]);R!=null&&f(i,["thinkingConfig"],R);const L=c(t,["imageConfig"]);L!=null&&f(i,["imageConfig"],WI(L));const ee=c(t,["enableEnhancedCivicAnswers"]);return ee!=null&&f(i,["enableEnhancedCivicAnswers"],ee),i}function wI(e,t,n){const i={},o=c(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],Qe(o));const r=c(t,["temperature"]);r!=null&&f(i,["temperature"],r);const s=c(t,["topP"]);s!=null&&f(i,["topP"],s);const a=c(t,["topK"]);a!=null&&f(i,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const d=c(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);const p=c(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const h=c(t,["logprobs"]);h!=null&&f(i,["logprobs"],h);const g=c(t,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);const v=c(t,["frequencyPenalty"]);v!=null&&f(i,["frequencyPenalty"],v);const T=c(t,["seed"]);T!=null&&f(i,["seed"],T);const w=c(t,["responseMimeType"]);w!=null&&f(i,["responseMimeType"],w);const x=c(t,["responseSchema"]);x!=null&&f(i,["responseSchema"],Rd(x));const y=c(t,["responseJsonSchema"]);y!=null&&f(i,["responseJsonSchema"],y);const S=c(t,["routingConfig"]);S!=null&&f(i,["routingConfig"],S);const E=c(t,["modelSelectionConfig"]);E!=null&&f(i,["modelConfig"],E);const N=c(t,["safetySettings"]);if(n!==void 0&&N!=null){let re=N;Array.isArray(re)&&(re=re.map(J=>J)),f(n,["safetySettings"],re)}const C=c(t,["tools"]);if(n!==void 0&&C!=null){let re=vo(C);Array.isArray(re)&&(re=re.map(J=>Cv(yo(J)))),f(n,["tools"],re)}const I=c(t,["toolConfig"]);n!==void 0&&I!=null&&f(n,["toolConfig"],I);const _=c(t,["labels"]);n!==void 0&&_!=null&&f(n,["labels"],_);const P=c(t,["cachedContent"]);n!==void 0&&P!=null&&f(n,["cachedContent"],Tn(e,P));const R=c(t,["responseModalities"]);R!=null&&f(i,["responseModalities"],R);const L=c(t,["mediaResolution"]);L!=null&&f(i,["mediaResolution"],L);const ee=c(t,["speechConfig"]);ee!=null&&f(i,["speechConfig"],Md(ee));const H=c(t,["audioTimestamp"]);H!=null&&f(i,["audioTimestamp"],H);const $=c(t,["thinkingConfig"]);$!=null&&f(i,["thinkingConfig"],$);const se=c(t,["imageConfig"]);if(se!=null&&f(i,["imageConfig"],KI(se)),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function sm(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["contents"]);if(o!=null){let s=Rt(o);Array.isArray(s)&&(s=s.map(a=>Fl(a))),f(n,["contents"],s)}const r=c(t,["config"]);return r!=null&&f(n,["generationConfig"],TI(e,r,n)),n}function lm(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["contents"]);if(o!=null){let s=Rt(o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const r=c(t,["config"]);return r!=null&&f(n,["generationConfig"],wI(e,r,n)),n}function am(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>$N(u))),f(t,["candidates"],l)}const o=c(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);const r=c(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);const s=c(e,["responseId"]);s!=null&&f(t,["responseId"],s);const a=c(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function um(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),f(t,["candidates"],u)}const o=c(e,["createTime"]);o!=null&&f(t,["createTime"],o);const r=c(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const s=c(e,["promptFeedback"]);s!=null&&f(t,["promptFeedback"],s);const a=c(e,["responseId"]);a!=null&&f(t,["responseId"],a);const l=c(e,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function EI(e,t){const n={};if(c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const o=c(e,["aspectRatio"]);t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o);const r=c(e,["guidanceScale"]);if(t!==void 0&&r!=null&&f(t,["parameters","guidanceScale"],r),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&f(t,["parameters","safetySetting"],s);const a=c(e,["personGeneration"]);t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a);const l=c(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&f(t,["parameters","includeSafetyAttributes"],l);const u=c(e,["includeRaiReason"]);t!==void 0&&u!=null&&f(t,["parameters","includeRaiReason"],u);const d=c(e,["language"]);t!==void 0&&d!=null&&f(t,["parameters","language"],d);const p=c(e,["outputMimeType"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","mimeType"],p);const h=c(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&f(t,["parameters","outputOptions","compressionQuality"],h),c(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=c(e,["imageSize"]);if(t!==void 0&&g!=null&&f(t,["parameters","sampleImageSize"],g),c(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function CI(e,t){const n={},i=c(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const o=c(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);const r=c(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const s=c(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);const a=c(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);const l=c(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);const u=c(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&f(t,["parameters","safetySetting"],u);const d=c(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const p=c(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);const h=c(e,["includeRaiReason"]);t!==void 0&&h!=null&&f(t,["parameters","includeRaiReason"],h);const g=c(e,["language"]);t!==void 0&&g!=null&&f(t,["parameters","language"],g);const v=c(e,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const T=c(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T);const w=c(e,["addWatermark"]);t!==void 0&&w!=null&&f(t,["parameters","addWatermark"],w);const x=c(e,["labels"]);t!==void 0&&x!=null&&f(t,["labels"],x);const y=c(e,["imageSize"]);t!==void 0&&y!=null&&f(t,["parameters","sampleImageSize"],y);const S=c(e,["enhancePrompt"]);return t!==void 0&&S!=null&&f(t,["parameters","enhancePrompt"],S),n}function NI(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const r=c(t,["config"]);return r!=null&&EI(r,n),n}function II(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const r=c(t,["config"]);return r!=null&&CI(r,n),n}function kI(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>GI(s))),f(t,["generatedImages"],r)}const o=c(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],wv(o)),t}function _I(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Ul(s))),f(t,["generatedImages"],r)}const o=c(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],Ev(o)),t}function AI(e,t){const n={},i=c(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i),c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=c(e,["durationSeconds"]);if(t!==void 0&&o!=null&&f(t,["parameters","durationSeconds"],o),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=c(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const s=c(e,["resolution"]);t!==void 0&&s!=null&&f(t,["parameters","resolution"],s);const a=c(e,["personGeneration"]);if(t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a),c(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(e,["negativePrompt"]);t!==void 0&&l!=null&&f(t,["parameters","negativePrompt"],l);const u=c(e,["enhancePrompt"]);if(t!==void 0&&u!=null&&f(t,["parameters","enhancePrompt"],u),c(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=c(e,["lastFrame"]);t!==void 0&&d!=null&&f(t,["instances[0]","lastFrame"],Vl(d));const p=c(e,["referenceImages"]);if(t!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>bk(g))),f(t,["instances[0]","referenceImages"],h)}if(c(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function PI(e,t){const n={},i=c(e,["numberOfVideos"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const o=c(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);const r=c(e,["fps"]);t!==void 0&&r!=null&&f(t,["parameters","fps"],r);const s=c(e,["durationSeconds"]);t!==void 0&&s!=null&&f(t,["parameters","durationSeconds"],s);const a=c(e,["seed"]);t!==void 0&&a!=null&&f(t,["parameters","seed"],a);const l=c(e,["aspectRatio"]);t!==void 0&&l!=null&&f(t,["parameters","aspectRatio"],l);const u=c(e,["resolution"]);t!==void 0&&u!=null&&f(t,["parameters","resolution"],u);const d=c(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const p=c(e,["pubsubTopic"]);t!==void 0&&p!=null&&f(t,["parameters","pubsubTopic"],p);const h=c(e,["negativePrompt"]);t!==void 0&&h!=null&&f(t,["parameters","negativePrompt"],h);const g=c(e,["enhancePrompt"]);t!==void 0&&g!=null&&f(t,["parameters","enhancePrompt"],g);const v=c(e,["generateAudio"]);t!==void 0&&v!=null&&f(t,["parameters","generateAudio"],v);const T=c(e,["lastFrame"]);t!==void 0&&T!=null&&f(t,["instances[0]","lastFrame"],Xt(T));const w=c(e,["referenceImages"]);if(t!==void 0&&w!=null){let S=w;Array.isArray(S)&&(S=S.map(E=>Rk(E))),f(t,["instances[0]","referenceImages"],S)}const x=c(e,["mask"]);t!==void 0&&x!=null&&f(t,["instances[0]","mask"],Pk(x));const y=c(e,["compressionQuality"]);return t!==void 0&&y!=null&&f(t,["parameters","compressionQuality"],y),n}function bI(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],LI(s)),t}function RI(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],FI(s)),t}function MI(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const r=c(t,["image"]);r!=null&&f(n,["instances[0]","image"],Vl(r));const s=c(t,["video"]);s!=null&&f(n,["instances[0]","video"],Nv(s));const a=c(t,["source"]);a!=null&&UI(a,n);const l=c(t,["config"]);return l!=null&&AI(l,n),n}function DI(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const r=c(t,["image"]);r!=null&&f(n,["instances[0]","image"],Xt(r));const s=c(t,["video"]);s!=null&&f(n,["instances[0]","video"],Iv(s));const a=c(t,["source"]);a!=null&&VI(a,n);const l=c(t,["config"]);return l!=null&&PI(l,n),n}function LI(e){const t={},n=c(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>zI(s))),f(t,["generatedVideos"],r)}const i=c(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=c(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function FI(e){const t={},n=c(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>OI(s))),f(t,["generatedVideos"],r)}const i=c(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=c(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function UI(e,t){const n={},i=c(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);const o=c(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],Vl(o));const r=c(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],Nv(r)),n}function VI(e,t){const n={},i=c(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);const o=c(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],Xt(o));const r=c(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],Iv(r)),n}function GI(e){const t={},n=c(e,["_self"]);n!=null&&f(t,["image"],YI(n));const i=c(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const o=c(e,["_self"]);return o!=null&&f(t,["safetyAttributes"],wv(o)),t}function Ul(e){const t={},n=c(e,["_self"]);n!=null&&f(t,["image"],Tv(n));const i=c(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const o=c(e,["_self"]);o!=null&&f(t,["safetyAttributes"],Ev(o));const r=c(e,["prompt"]);return r!=null&&f(t,["enhancedPrompt"],r),t}function BI(e){const t={},n=c(e,["_self"]);n!=null&&f(t,["mask"],Tv(n));const i=c(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(t,["labels"],o)}return t}function zI(e){const t={},n=c(e,["video"]);return n!=null&&f(t,["video"],_k(n)),t}function OI(e){const t={},n=c(e,["_self"]);return n!=null&&f(t,["video"],Ak(n)),t}function HI(e){const t={},n=c(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);const i=c(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);const o=c(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);const r=c(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);const s=c(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);const a=c(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);const l=c(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(t,["maxOutputTokens"],u);const d=c(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);const p=c(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);const h=c(e,["responseLogprobs"]);h!=null&&f(t,["responseLogprobs"],h);const g=c(e,["responseMimeType"]);g!=null&&f(t,["responseMimeType"],g);const v=c(e,["responseModalities"]);v!=null&&f(t,["responseModalities"],v);const T=c(e,["responseSchema"]);T!=null&&f(t,["responseSchema"],T);const w=c(e,["routingConfig"]);w!=null&&f(t,["routingConfig"],w);const x=c(e,["seed"]);x!=null&&f(t,["seed"],x);const y=c(e,["speechConfig"]);y!=null&&f(t,["speechConfig"],y);const S=c(e,["stopSequences"]);S!=null&&f(t,["stopSequences"],S);const E=c(e,["temperature"]);E!=null&&f(t,["temperature"],E);const N=c(e,["thinkingConfig"]);N!=null&&f(t,["thinkingConfig"],N);const C=c(e,["topK"]);C!=null&&f(t,["topK"],C);const I=c(e,["topP"]);if(I!=null&&f(t,["topP"],I),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function $I(e,t){const n={},i=c(t,["model"]);return i!=null&&f(n,["_url","name"],de(e,i)),n}function qI(e,t){const n={},i=c(t,["model"]);return i!=null&&f(n,["_url","name"],de(e,i)),n}function jI(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function JI(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function WI(e){const t={},n=c(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const i=c(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),c(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function KI(e){const t={},n=c(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const i=c(e,["imageSize"]);i!=null&&f(t,["imageSize"],i);const o=c(e,["outputMimeType"]);o!=null&&f(t,["imageOutputOptions","mimeType"],o);const r=c(e,["outputCompressionQuality"]);return r!=null&&f(t,["imageOutputOptions","compressionQuality"],r),t}function YI(e){const t={},n=c(e,["bytesBase64Encoded"]);n!=null&&f(t,["imageBytes"],Kn(n));const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Tv(e){const t={},n=c(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);const i=c(e,["bytesBase64Encoded"]);i!=null&&f(t,["imageBytes"],Kn(i));const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Vl(e){const t={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(e,["imageBytes"]);n!=null&&f(t,["bytesBase64Encoded"],Kn(n));const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Xt(e){const t={},n=c(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);const i=c(e,["imageBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Kn(i));const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function XI(e,t,n){const i={},o=c(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const r=c(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);const s=c(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=c(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],hv(e,a)),i}function QI(e,t,n){const i={},o=c(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const r=c(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);const s=c(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=c(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],hv(e,a)),i}function ZI(e,t){const n={},i=c(t,["config"]);return i!=null&&XI(e,i,n),n}function ek(e,t){const n={},i=c(t,["config"]);return i!=null&&QI(e,i,n),n}function tk(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["_self"]);if(o!=null){let r=mv(o);Array.isArray(r)&&(r=r.map(s=>$u(s))),f(t,["models"],r)}return t}function nk(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["_self"]);if(o!=null){let r=mv(o);Array.isArray(r)&&(r=r.map(s=>qu(s))),f(t,["models"],r)}return t}function ik(e){const t={},n=c(e,["maskMode"]);n!=null&&f(t,["maskMode"],n);const i=c(e,["segmentationClasses"]);i!=null&&f(t,["maskClasses"],i);const o=c(e,["maskDilation"]);return o!=null&&f(t,["dilation"],o),t}function $u(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=c(e,["description"]);o!=null&&f(t,["description"],o);const r=c(e,["version"]);r!=null&&f(t,["version"],r);const s=c(e,["_self"]);s!=null&&f(t,["tunedModelInfo"],xk(s));const a=c(e,["inputTokenLimit"]);a!=null&&f(t,["inputTokenLimit"],a);const l=c(e,["outputTokenLimit"]);l!=null&&f(t,["outputTokenLimit"],l);const u=c(e,["supportedGenerationMethods"]);u!=null&&f(t,["supportedActions"],u);const d=c(e,["temperature"]);d!=null&&f(t,["temperature"],d);const p=c(e,["maxTemperature"]);p!=null&&f(t,["maxTemperature"],p);const h=c(e,["topP"]);h!=null&&f(t,["topP"],h);const g=c(e,["topK"]);g!=null&&f(t,["topK"],g);const v=c(e,["thinking"]);return v!=null&&f(t,["thinking"],v),t}function qu(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=c(e,["description"]);o!=null&&f(t,["description"],o);const r=c(e,["versionId"]);r!=null&&f(t,["version"],r);const s=c(e,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>gI(h))),f(t,["endpoints"],p)}const a=c(e,["labels"]);a!=null&&f(t,["labels"],a);const l=c(e,["_self"]);l!=null&&f(t,["tunedModelInfo"],Sk(l));const u=c(e,["defaultCheckpointId"]);u!=null&&f(t,["defaultCheckpointId"],u);const d=c(e,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>h)),f(t,["checkpoints"],p)}return t}function ok(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=c(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=c(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],yI(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],vI(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],HN(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const p=c(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const h=c(e,["videoMetadata"]);return h!=null&&f(t,["videoMetadata"],h),t}function rk(e){const t={},n=c(e,["productImage"]);return n!=null&&f(t,["image"],Xt(n)),t}function sk(e,t){const n={},i=c(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const o=c(e,["baseSteps"]);t!==void 0&&o!=null&&f(t,["parameters","baseSteps"],o);const r=c(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const s=c(e,["seed"]);t!==void 0&&s!=null&&f(t,["parameters","seed"],s);const a=c(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&f(t,["parameters","safetySetting"],a);const l=c(e,["personGeneration"]);t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l);const u=c(e,["addWatermark"]);t!==void 0&&u!=null&&f(t,["parameters","addWatermark"],u);const d=c(e,["outputMimeType"]);t!==void 0&&d!=null&&f(t,["parameters","outputOptions","mimeType"],d);const p=c(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","compressionQuality"],p);const h=c(e,["enhancePrompt"]);t!==void 0&&h!=null&&f(t,["parameters","enhancePrompt"],h);const g=c(e,["labels"]);return t!==void 0&&g!=null&&f(t,["labels"],g),n}function lk(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["source"]);o!=null&&uk(o,n);const r=c(t,["config"]);return r!=null&&sk(r,n),n}function ak(e){const t={},n=c(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ul(o))),f(t,["generatedImages"],i)}return t}function uk(e,t){const n={},i=c(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);const o=c(e,["personImage"]);t!==void 0&&o!=null&&f(t,["instances[0]","personImage","image"],Xt(o));const r=c(e,["productImages"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>rk(a))),f(t,["instances[0]","productImages"],s)}return n}function ck(e){const t={},n=c(e,["referenceImage"]);n!=null&&f(t,["referenceImage"],Xt(n));const i=c(e,["referenceId"]);i!=null&&f(t,["referenceId"],i);const o=c(e,["referenceType"]);o!=null&&f(t,["referenceType"],o);const r=c(e,["maskImageConfig"]);r!=null&&f(t,["maskImageConfig"],ik(r));const s=c(e,["controlImageConfig"]);s!=null&&f(t,["controlImageConfig"],YN(s));const a=c(e,["styleImageConfig"]);a!=null&&f(t,["styleImageConfig"],a);const l=c(e,["subjectImageConfig"]);return l!=null&&f(t,["subjectImageConfig"],l),t}function wv(e){const t={},n=c(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);const i=c(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const o=c(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function Ev(e){const t={},n=c(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);const i=c(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const o=c(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function dk(e){const t={},n=c(e,["category"]);if(n!=null&&f(t,["category"],n),c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function fk(e){const t={},n=c(e,["image"]);return n!=null&&f(t,["image"],Xt(n)),t}function pk(e,t){const n={},i=c(e,["mode"]);t!==void 0&&i!=null&&f(t,["parameters","mode"],i);const o=c(e,["maxPredictions"]);t!==void 0&&o!=null&&f(t,["parameters","maxPredictions"],o);const r=c(e,["confidenceThreshold"]);t!==void 0&&r!=null&&f(t,["parameters","confidenceThreshold"],r);const s=c(e,["maskDilation"]);t!==void 0&&s!=null&&f(t,["parameters","maskDilation"],s);const a=c(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&f(t,["parameters","binaryColorThreshold"],a);const l=c(e,["labels"]);return t!==void 0&&l!=null&&f(t,["labels"],l),n}function hk(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["source"]);o!=null&&gk(o,n);const r=c(t,["config"]);return r!=null&&pk(r,n),n}function mk(e){const t={},n=c(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>BI(o))),f(t,["generatedMasks"],i)}return t}function gk(e,t){const n={},i=c(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);const o=c(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],Xt(o));const r=c(e,["scribbleImage"]);return t!==void 0&&r!=null&&f(t,["instances[0]","scribble"],fk(r)),n}function yk(e){const t={},n=c(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],xI(n));const i=c(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],i),t}function vk(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=c(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],jI(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],JI(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function Cv(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>SI(h))),f(t,["functionDeclarations"],p)}const i=c(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=c(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const r=c(e,["computerUse"]);if(r!=null&&f(t,["computerUse"],r),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(e,["codeExecution"]);s!=null&&f(t,["codeExecution"],s);const a=c(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const l=c(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],l);const u=c(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=c(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function xk(e){const t={},n=c(e,["baseModel"]);n!=null&&f(t,["baseModel"],n);const i=c(e,["createTime"]);i!=null&&f(t,["createTime"],i);const o=c(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function Sk(e){const t={},n=c(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(t,["baseModel"],n);const i=c(e,["createTime"]);i!=null&&f(t,["createTime"],i);const o=c(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function Tk(e,t){const n={},i=c(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const o=c(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);const r=c(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function wk(e,t){const n={},i=c(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const o=c(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);const r=c(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function Ek(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","name"],de(e,i));const o=c(t,["config"]);return o!=null&&Tk(o,n),n}function Ck(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["config"]);return o!=null&&wk(o,n),n}function Nk(e,t){const n={},i=c(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const o=c(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&f(t,["parameters","safetySetting"],o);const r=c(e,["personGeneration"]);t!==void 0&&r!=null&&f(t,["parameters","personGeneration"],r);const s=c(e,["includeRaiReason"]);t!==void 0&&s!=null&&f(t,["parameters","includeRaiReason"],s);const a=c(e,["outputMimeType"]);t!==void 0&&a!=null&&f(t,["parameters","outputOptions","mimeType"],a);const l=c(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&f(t,["parameters","outputOptions","compressionQuality"],l);const u=c(e,["enhanceInputImage"]);t!==void 0&&u!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],u);const d=c(e,["imagePreservationFactor"]);t!==void 0&&d!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],d);const p=c(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);const h=c(e,["numberOfImages"]);t!==void 0&&h!=null&&f(t,["parameters","sampleCount"],h);const g=c(e,["mode"]);return t!==void 0&&g!=null&&f(t,["parameters","mode"],g),n}function Ik(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["_url","model"],de(e,i));const o=c(t,["image"]);o!=null&&f(n,["instances[0]","image"],Xt(o));const r=c(t,["upscaleFactor"]);r!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],r);const s=c(t,["config"]);return s!=null&&Nk(s,n),n}function kk(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Ul(r))),f(t,["generatedImages"],o)}return t}function _k(e){const t={},n=c(e,["uri"]);n!=null&&f(t,["uri"],n);const i=c(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],Kn(i));const o=c(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function Ak(e){const t={},n=c(e,["gcsUri"]);n!=null&&f(t,["uri"],n);const i=c(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Kn(i));const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Pk(e){const t={},n=c(e,["image"]);n!=null&&f(t,["_self"],Xt(n));const i=c(e,["maskMode"]);return i!=null&&f(t,["maskMode"],i),t}function bk(e){const t={},n=c(e,["image"]);n!=null&&f(t,["image"],Vl(n));const i=c(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function Rk(e){const t={},n=c(e,["image"]);n!=null&&f(t,["image"],Xt(n));const i=c(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function Nv(e){const t={},n=c(e,["uri"]);n!=null&&f(t,["uri"],n);const i=c(e,["videoBytes"]);i!=null&&f(t,["encodedVideo"],Kn(i));const o=c(e,["mimeType"]);return o!=null&&f(t,["encoding"],o),t}function Iv(e){const t={},n=c(e,["uri"]);n!=null&&f(t,["gcsUri"],n);const i=c(e,["videoBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Kn(i));const o=c(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mk(e,t){const n={},i=c(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["displayName"],i),n}function Dk(e){const t={},n=c(e,["config"]);return n!=null&&Mk(n,t),t}function Lk(e,t){const n={},i=c(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function Fk(e){const t={},n=c(e,["name"]);n!=null&&f(t,["_url","name"],n);const i=c(e,["config"]);return i!=null&&Lk(i,t),t}function Uk(e){const t={},n=c(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function Vk(e,t){const n={},i=c(e,["customMetadata"]);if(t!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["customMetadata"],r)}const o=c(e,["chunkingConfig"]);return t!==void 0&&o!=null&&f(t,["chunkingConfig"],o),n}function Gk(e){const t={},n=c(e,["name"]);n!=null&&f(t,["name"],n);const i=c(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=c(e,["done"]);o!=null&&f(t,["done"],o);const r=c(e,["error"]);r!=null&&f(t,["error"],r);const s=c(e,["response"]);return s!=null&&f(t,["response"],zk(s)),t}function Bk(e){const t={},n=c(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);const i=c(e,["fileName"]);i!=null&&f(t,["fileName"],i);const o=c(e,["config"]);return o!=null&&Vk(o,t),t}function zk(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["parent"]);i!=null&&f(t,["parent"],i);const o=c(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function Ok(e,t){const n={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=c(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function Hk(e){const t={},n=c(e,["config"]);return n!=null&&Ok(n,t),t}function $k(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["fileSearchStores"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["fileSearchStores"],r)}return t}function kv(e,t){const n={},i=c(e,["mimeType"]);t!==void 0&&i!=null&&f(t,["mimeType"],i);const o=c(e,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);const r=c(e,["customMetadata"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(t,["customMetadata"],a)}const s=c(e,["chunkingConfig"]);return t!==void 0&&s!=null&&f(t,["chunkingConfig"],s),n}function qk(e){const t={},n=c(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);const i=c(e,["config"]);return i!=null&&kv(i,t),t}function jk(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jk="Content-Type",Wk="X-Server-Timeout",Kk="User-Agent",ju="x-goog-api-client",Yk="1.34.0",Xk=`google-genai-sdk/${Yk}`,Qk="v1beta1",Zk="v1beta";class e_{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Qk,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Zk,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[s,a]of Object.entries(t.queryParams))o.searchParams.append(s,String(a));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.unaryApiCall(o,r,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,r]of Object.entries(n))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.streamApiCall(o,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,o){if(n&&n.timeout||o){const r=new AbortController,s=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>r.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),t.signal=s}return n&&n.extraBody!==null&&t_(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await cm(o),new zu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await cm(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return Wt(this,arguments,function*(){var i;const o=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:d}=yield ne(o.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=r.decode(d,{stream:!0});try{const v=JSON.parse(p);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),w=T.status,x=T.code,y=`got status: ${w}. ${JSON.stringify(v)}`;if(x>=400&&x<600)throw new Ll({message:y,status:x})}}catch(v){if(v.name==="ApiError")throw v}s+=p;let h=-1,g=0;for(;;){h=-1,g=0;for(const w of l){const x=s.indexOf(w);x!==-1&&(h===-1||x<h)&&(h=x,g=w.length)}if(h===-1)break;const v=s.substring(0,h);s=s.substring(h+g);const T=v.trim();if(T.startsWith(a)){const w=T.substring(a.length).trim();try{const x=new Response(w,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ne(new zu(x))}catch(x){throw new Error(`exception parsing stream chunk ${w}. ${x}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=Xk+" "+this.clientOptions.userAgentExtra;return t[Kk]=n,t[ju]=n,t[Jk]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[o,r]of Object.entries(t.headers))i.append(o,r);t.timeout&&t.timeout>0&&i.append(Wk,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const r=this.clientOptions.uploader,s=await r.stat(t);o.sizeBytes=String(s.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const l={file:o},u=this.getFileName(t),d=G("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,u,l,n==null?void 0:n.httpOptions);return r.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,i){var o;const r=this.clientOptions.uploader,s=await r.stat(n),a=String(s.size),l=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${t}:uploadToFileSearchStore`,d=this.getFileName(n),p={};i!=null&&kv(i,p);const h=await this.fetchUploadUrl(u,a,l,d,p,i==null?void 0:i.httpOptions);return r.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,o,r,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const u=await this.request({path:t,body:JSON.stringify(r),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function cm(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Ll({message:o,status:n}):new Error(o)}}function t_(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const r=JSON.parse(e.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,s){const a=Object.assign({},r);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const u=s[l],d=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=i(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n_="mcp_used/unknown";let i_=!1;function _v(e){for(const t of e)if(o_(t)||typeof t=="object"&&"inputSchema"in t)return!0;return i_}function Av(e){var t;const n=(t=e[ju])!==null&&t!==void 0?t:"";e[ju]=(n+` ${n_}`).trimStart()}function o_(e){return e!==null&&typeof e=="object"&&e instanceof Ld}function r_(e){return Wt(this,arguments,function*(n,i=100){let o,r=0;for(;r<i;){const s=yield ne(n.listTools({cursor:o}));for(const a of s.tools)yield yield ne(a),r++;if(!s.nextCursor)break;o=s.nextCursor}})}class Ld{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Ld(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const r={},s=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,Kt(r_(d))),u;u=await l.next(),t=u.done,!t;a=!0){o=u.value,a=!1;const p=o;s.push(p);const h=p.name;if(r[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);r[h]=d}}catch(p){n={error:p}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),UE(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const s=await o.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function s_(e,t,n){const i=new AE;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),t(i)}class l_{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=c_(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const d=new Promise(S=>{u=S}),p=t.callbacks,h=function(){u({})},g=this.apiClient,v={onopen:h,onmessage:S=>{s_(g,p.onmessage,S)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(S){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(S){}},T=this.webSocketFactory.create(l,u_(s),v);T.connect(),await d;const y={setup:{model:de(this.apiClient,t.model)}};return T.send(JSON.stringify(y)),new a_(T,this.apiClient)}}class a_{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=DN(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=MN(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Bi.PLAY)}pause(){this.sendPlaybackControl(Bi.PAUSE)}stop(){this.sendPlaybackControl(Bi.STOP)}resetContext(){this.sendPlaybackControl(Bi.RESET_CONTEXT)}close(){this.conn.close()}}function u_(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function c_(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function f_(e,t,n){const i=new _E;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const r=JSON.parse(o);if(e.isVertexAI()){const s=UN(r);Object.assign(i,s)}else Object.assign(i,r);t(i)}class p_{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new l_(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,r,s,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&_v(t.config.tools)&&Av(p);const h=y_(p);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,d);else{const P=this.apiClient.getApiKey();let R="BidiGenerateContent",L="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",L="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${R}?${L}=${P}`}let g=()=>{};const v=new Promise(P=>{g=P}),T=t.callbacks,w=function(){var P;(P=T==null?void 0:T.onopen)===null||P===void 0||P.call(T),g({})},x=this.apiClient,y={onopen:w,onmessage:P=>{f_(x,T.onmessage,P)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(P){}},S=this.webSocketFactory.create(d,g_(h),y);S.connect(),await v;let E=de(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const P=this.apiClient.getProject(),R=this.apiClient.getLocation();E=`projects/${P}/locations/${R}/`+E}let N={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[il.AUDIO]}:t.config.responseModalities=[il.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C=(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],I=[];for(const P of C)if(this.isCallableTool(P)){const R=P;I.push(await R.tool())}else I.push(P);I.length>0&&(t.config.tools=I);const _={model:E,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?N=RN(this.apiClient,_):N=bN(this.apiClient,_),delete N.config,S.send(JSON.stringify(N)),new m_(S,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const h_={turnComplete:!0};class m_{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Rt(n.turns),t.isVertexAI()||(i=i.map(o=>Fl(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(d_)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},h_),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:FN(t)}:n={realtimeInput:LN(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function g_(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function y_(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dm=10;function fm(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const s of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(to(s)){o=!0;break}if(!o)return!0;const r=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function to(e){return"callTool"in e&&typeof e.callTool=="function"}function v_(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>to(o)))!==null&&i!==void 0?i:!1}function pm(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,o)=>{if(to(i))return;const r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(o)}),n}function hm(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x_ extends Sn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,r,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!v_(n)||fm(n.config))return await this.generateContentInternal(l);const u=pm(n);if(u.length>0){const T=u.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let d,p;const h=Rt(l.contents),g=(r=(o=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:dm;let v=0;for(;v<g&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const T=d.candidates[0].content,w=[];for(const x of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(to(x)){const S=await x.callTool(d.functionCalls);w.push(...S)}v++,p={role:"user",parts:w},l.contents=Rt(l.contents),l.contents.push(T),l.contents.push(p),hm(l.config)&&(h.push(T),h.push(p))}return hm(l.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async n=>{var i,o,r,s,a;if(this.maybeMoveToResponseJsonSchem(n),fm(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const l=pm(n);if(l.length>0){const p=l.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(r=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,d=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let r;const s=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((o=l==null?void 0:l.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=l==null?void 0:l.safetyAttributes:s.push(l);let a;return r?a={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ei(gn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,r,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(r=n.source)===null||r===void 0?void 0:r.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const r=(n=t.config)===null||n===void 0?void 0:n.tools;if(!r)return t;const s=await Promise.all(r.map(async l=>to(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(a.config.tools=s,t.config&&t.config.tools&&_v(t.config.tools)){const l=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),Av(u),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(t){var n,i,o;const r=new Map;for(const s of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(to(s)){const a=s,l=await a.tool();for(const u of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!u.name)throw new Error("Function declaration name is required.");if(r.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);r.set(u.name,a)}}return r}async processAfcStream(t){var n,i,o;const r=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:dm;let s=!1,a=0;const l=await this.initAfcToolsMap(t);return function(u,d,p){return Wt(this,arguments,function*(){for(var h,g,v,T,w,x;a<r;){s&&(a++,s=!1);const N=yield ne(u.processParamsMaybeAddMcpUsage(p)),C=yield ne(u.generateContentStreamInternal(N)),I=[],_=[];try{for(var y=!0,S=(g=void 0,Kt(C)),E;E=yield ne(S.next()),h=E.done,!h;y=!0){T=E.value,y=!1;const P=T;if(yield yield ne(P),P.candidates&&(!((w=P.candidates[0])===null||w===void 0)&&w.content)){_.push(P.candidates[0].content);for(const R of(x=P.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(a<r&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(R.functionCall.name)){const L=yield ne(d.get(R.functionCall.name).callTool([R.functionCall]));I.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(P){g={error:P}}finally{try{!y&&!h&&(v=S.return)&&(yield ne(v.call(S)))}finally{if(g)throw g.error}}if(I.length>0){s=!0;const P=new Do;P.candidates=[{content:{role:"user",parts:I}}],yield yield ne(P);const R=[];R.push(..._),R.push({role:"user",parts:I});const L=Rt(p.contents).concat(R);p.contents=L}else break}})}(this,l,t)}async generateContentInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=lm(this.apiClient,t);return a=G("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=um(d),h=new Do;return Object.assign(h,p),h})}else{const u=sm(this.apiClient,t);return a=G("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=am(d),h=new Do;return Object.assign(h,p),h})}}async generateContentStreamInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=lm(this.apiClient,t);return a=G("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return Wt(this,arguments,function*(){var h,g,v,T;try{for(var w=!0,x=Kt(p),y;y=yield ne(x.next()),h=y.done,!h;w=!0){T=y.value,w=!1;const S=T,E=um(yield ne(S.json()));E.sdkHttpResponse={headers:S.headers};const N=new Do;Object.assign(N,E),yield yield ne(N)}}catch(S){g={error:S}}finally{try{!w&&!h&&(v=x.return)&&(yield ne(v.call(x)))}finally{if(g)throw g.error}}})})}else{const u=sm(this.apiClient,t);return a=G("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Wt(this,arguments,function*(){var h,g,v,T;try{for(var w=!0,x=Kt(p),y;y=yield ne(x.next()),h=y.done,!h;w=!0){T=y.value,w=!1;const S=T,E=am(yield ne(S.json()));E.sdkHttpResponse={headers:S.headers};const N=new Do;Object.assign(N,E),yield yield ne(N)}}catch(S){g={error:S}}finally{try{!w&&!h&&(v=x.return)&&(yield ne(v.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=pI(this.apiClient,t);return a=G("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=mI(d),h=new Hh;return Object.assign(h,p),h})}else{const u=fI(this.apiClient,t);return a=G("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=hI(d),h=new Hh;return Object.assign(h,p),h})}}async generateImagesInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=II(this.apiClient,t);return a=G("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=_I(d),h=new $h;return Object.assign(h,p),h})}else{const u=NI(this.apiClient,t);return a=G("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=kI(d),h=new $h;return Object.assign(h,p),h})}}async editImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const a=aI(this.apiClient,t);return r=G("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=uI(l),d=new yE;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const a=Ik(this.apiClient,t);return r=G("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=kk(l),d=new vE;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const a=lk(this.apiClient,t);return r=G("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=ak(l),d=new xE;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const a=hk(this.apiClient,t);return r=G("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=mk(l),d=new SE;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=qI(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>qu(d))}else{const u=$I(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>$u(d))}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=ek(this.apiClient,t);return a=G("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=nk(d),h=new qh;return Object.assign(h,p),h})}else{const u=ZI(this.apiClient,t);return a=G("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=tk(d),h=new qh;return Object.assign(h,p),h})}}async update(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Ck(this.apiClient,t);return a=G("{model}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>qu(d))}else{const u=Ek(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>$u(d))}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=oI(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=sI(d),h=new jh;return Object.assign(h,p),h})}else{const u=iI(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=rI(d),h=new jh;return Object.assign(h,p),h})}}async countTokens(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=eI(this.apiClient,t);return a=G("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=nI(d),h=new Jh;return Object.assign(h,p),h})}else{const u=ZN(this.apiClient,t);return a=G("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=tI(d),h=new Jh;return Object.assign(h,p),h})}}async computeTokens(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const a=jN(this.apiClient,t);return r=G("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=JN(l),d=new TE;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=DI(this.apiClient,t);return a=G("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const p=RI(d),h=new ol;return Object.assign(h,p),h})}else{const u=MI(this.apiClient,t);return a=G("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{const p=bI(d),h=new ol;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S_ extends Sn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=dE(t);return a=G("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else{const u=cE(t);return a=G("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const a=iE(t);return r=G("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T_(e){const t={},n=c(e,["data"]);if(n!=null&&f(t,["data"],n),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function w_(e){const t={},n=c(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>b_(r))),f(t,["parts"],o)}const i=c(e,["role"]);return i!=null&&f(t,["role"],i),t}function E_(e,t,n){const i={},o=c(t,["expireTime"]);n!==void 0&&o!=null&&f(n,["expireTime"],o);const r=c(t,["newSessionExpireTime"]);n!==void 0&&r!=null&&f(n,["newSessionExpireTime"],r);const s=c(t,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);const a=c(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],P_(e,a));const l=c(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),i}function C_(e,t){const n={},i=c(t,["config"]);return i!=null&&f(n,["config"],E_(e,i,n)),n}function N_(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=c(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function I_(e){const t={},n=c(e,["id"]);n!=null&&f(t,["id"],n);const i=c(e,["args"]);i!=null&&f(t,["args"],i);const o=c(e,["name"]);if(o!=null&&f(t,["name"],o),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function k_(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function __(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function A_(e,t){const n={},i=c(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const o=c(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);const r=c(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const s=c(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);const a=c(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=c(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const p=c(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Dd(p));const h=c(e,["thinkingConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","thinkingConfig"],h);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],w_(Qe(v)));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let C=vo(T);Array.isArray(C)&&(C=C.map(I=>M_(yo(I)))),f(t,["setup","tools"],C)}const w=c(e,["sessionResumption"]);t!==void 0&&w!=null&&f(t,["setup","sessionResumption"],R_(w));const x=c(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&f(t,["setup","inputAudioTranscription"],x);const y=c(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","outputAudioTranscription"],y);const S=c(e,["realtimeInputConfig"]);t!==void 0&&S!=null&&f(t,["setup","realtimeInputConfig"],S);const E=c(e,["contextWindowCompression"]);t!==void 0&&E!=null&&f(t,["setup","contextWindowCompression"],E);const N=c(e,["proactivity"]);if(t!==void 0&&N!=null&&f(t,["setup","proactivity"],N),c(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function P_(e,t){const n={},i=c(t,["model"]);i!=null&&f(n,["setup","model"],de(e,i));const o=c(t,["config"]);return o!=null&&f(n,["config"],A_(o,n)),n}function b_(e){const t={},n=c(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=c(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=c(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const r=c(e,["fileData"]);r!=null&&f(t,["fileData"],N_(r));const s=c(e,["functionCall"]);s!=null&&f(t,["functionCall"],I_(s));const a=c(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const l=c(e,["inlineData"]);l!=null&&f(t,["inlineData"],T_(l));const u=c(e,["text"]);u!=null&&f(t,["text"],u);const d=c(e,["thought"]);d!=null&&f(t,["thought"],d);const p=c(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const h=c(e,["videoMetadata"]);return h!=null&&f(t,["videoMetadata"],h),t}function R_(e){const t={},n=c(e,["handle"]);if(n!=null&&f(t,["handle"],n),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function M_(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=c(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const r=c(e,["fileSearch"]);r!=null&&f(t,["fileSearch"],r);const s=c(e,["codeExecution"]);if(s!=null&&f(t,["codeExecution"],s),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],k_(a));const l=c(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],__(l));const u=c(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D_(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(r=>`${n}.${r}`);t.push(...o)}else t.push(n)}return t.join(",")}function L_(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(e.bidiGenerateContentSetup=r,n=r):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const r=D_(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)r?e.fieldMask=r:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(u=>s.includes(u)?`generationConfig.${u}`:u));const l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class F_ extends Sn{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=C_(this.apiClient,t);r=G("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=L_(a,t.config);return o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U_(e,t){const n={},i=c(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function V_(e){const t={},n=c(e,["name"]);n!=null&&f(t,["_url","name"],n);const i=c(e,["config"]);return i!=null&&U_(i,t),t}function G_(e){const t={},n=c(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function B_(e,t){const n={},i=c(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=c(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function z_(e){const t={},n=c(e,["parent"]);n!=null&&f(t,["_url","parent"],n);const i=c(e,["config"]);return i!=null&&B_(i,t),t}function O_(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=c(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=c(e,["documents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["documents"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H_ extends Sn{constructor(t){super(),this.apiClient=t,this.list=async n=>new Ei(gn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=G_(t);return r=G("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=V_(t);o=G("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=z_(t);return r=G("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=O_(l),d=new wE;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $_ extends Sn{constructor(t,n=new H_(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new Ei(gn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Dk(t);return r=G("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Uk(t);return r=G("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Fk(t);o=G("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Hk(t);return r=G("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=$k(l),d=new EE;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qk(t);return r=G("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=jk(l),d=new CE;return Object.assign(d,u),d})}}async importFile(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Bk(t);return r=G("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=Gk(l),d=new Ad;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Pv=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Pv=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const q_=()=>Pv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ju(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Wu=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ft extends Error{}class rt extends Ft{constructor(t,n,i,o){super(`${rt.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.error=n}static makeMessage(t,n,i){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new Gl({message:i,cause:Wu(n)});const r=n;return t===400?new Rv(t,r,i,o):t===401?new Mv(t,r,i,o):t===403?new Dv(t,r,i,o):t===404?new Lv(t,r,i,o):t===409?new Fv(t,r,i,o):t===422?new Uv(t,r,i,o):t===429?new Vv(t,r,i,o):t>=500?new Gv(t,r,i,o):new rt(t,r,i,o)}}class Ku extends rt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Gl extends rt{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class bv extends Gl{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Rv extends rt{}class Mv extends rt{}class Dv extends rt{}class Lv extends rt{}class Fv extends rt{}class Uv extends rt{}class Vv extends rt{}class Gv extends rt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j_=/^[a-z][a-z0-9+.-]*:/i,J_=e=>j_.test(e);let Yu=e=>(Yu=Array.isArray,Yu(e));const W_=Yu;let K_=W_;const mm=K_;function Y_(e){if(!e)return!0;for(const t in e)return!1;return!0}function X_(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const Q_=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Ft(`${e} must be an integer`);if(t<0)throw new Ft(`${e} must be a positive integer`);return t},Z_=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eA=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ki="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const nA=()=>{var e,t,n,i,o;const r=tA();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":ym(Deno.build.os),"X-Stainless-Arch":gm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":ym((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":gm((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const s=iA();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function iA(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,r=i[2]||0,s=i[3]||0;return{browser:t,version:`${o}.${r}.${s}`}}}return null}const gm=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",ym=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let es;const oA=()=>es??(es=nA());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bv(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function sA(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Bv({start(){},async pull(n){const{done:i,value:o}=await t.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function zv(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function lA(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const i=e.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aA=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ov=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ia(e,t,n){return Ov(),new File(e,t??"unknown_file",n)}function uA(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const cA=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hv=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",dA=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Hv(e),fA=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function pA(e,t,n){if(Ov(),e=await e,dA(e))return e instanceof File?e:Ia([await e.arrayBuffer()],e.name);if(fA(e)){const o=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Ia(await Xu(o),t,n)}const i=await Xu(e);if(t||(t=uA(e)),!(n!=null&&n.type)){const o=i.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Ia(i,t,n)}async function Xu(e){var t,n,i,o,r;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(Hv(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(cA(e))try{for(var a=!0,l=Kt(e),u;u=await l.next(),t=u.done,!t;a=!0){o=u.value,a=!1;const d=o;s.push(...await Xu(d))}}catch(d){n={error:d}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}else{const d=(r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof e}${d?`; constructor: ${d}`:""}${hA(e)}`)}return s}function hA(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $v{constructor(t){this._client=t}}$v._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qv(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const vm=Object.freeze(Object.create(null)),mA=(e=qv)=>function(n,...i){if(n.length===1)return n[0];let o=!1;const r=[],s=n.reduce((d,p,h)=>{var g,v,T;/[?#]/.test(p)&&(o=!0);const w=i[h];let x=(o?encodeURIComponent:e)(""+w);return h!==i.length&&(w==null||typeof w=="object"&&w.toString===((T=Object.getPrototypeOf((v=Object.getPrototypeOf((g=w.hasOwnProperty)!==null&&g!==void 0?g:vm))!==null&&v!==void 0?v:vm))===null||T===void 0?void 0:T.toString))&&(x=w+"",r.push({start:d.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),d+p+(h===i.length?"":x)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)r.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(r.sort((d,p)=>d.start-p.start),r.length>0){let d=0;const p=r.reduce((h,g)=>{const v=" ".repeat(g.start-d),T="^".repeat(g.length);return d=g.start+g.length,h+v+T},"");throw new Ft(`Path parameters result in path with invalid segments:
${r.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s},ts=mA(qv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jv extends $v{create(t,n){var i;const{api_version:o=this._client.apiVersion}=t,r=sl(t,["api_version"]);if("model"in r&&"agent_config"in r)throw new Ft("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Ft("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ts`/${o}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(ts`/${o}/interactions/${t}`,i)}cancel(t,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(ts`/${o}/interactions/${t}/cancel`,i)}get(t,n={},i){var o;const r=n??{},{api_version:s=this._client.apiVersion}=r,a=sl(r,["api_version"]);return this._client.get(ts`/${s}/interactions/${t}`,Object.assign(Object.assign({query:a},i),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}jv._key=Object.freeze(["interactions"]);class Jv extends jv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gA(e){let t=0;for(const o of e)t+=o.length;const n=new Uint8Array(t);let i=0;for(const o of e)n.set(o,i),i+=o.length;return n}let ns;function Fd(e){let t;return(ns??(t=new globalThis.TextEncoder,ns=t.encode.bind(t)))(e)}let is;function xm(e){let t;return(is??(t=new globalThis.TextDecoder,is=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Fd(t):t;this.buffer=gA([this.buffer,n]);const i=[];let o;for(;(o=yA(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(xm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=xm(this.buffer.subarray(0,r));i.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Bl.NEWLINE_CHARS=new Set([`
`,"\r"]);Bl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function yA(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function vA(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ll={off:0,error:200,warn:300,info:400,debug:500},Sm=(e,t,n)=>{if(e){if(X_(ll,e))return e;tt(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(ll))}`)}};function zo(){}function os(e,t,n){return!t||ll[e]>ll[n]?zo:t[e].bind(t)}const xA={error:zo,warn:zo,info:zo,debug:zo};let Tm=new WeakMap;function tt(e){var t;const n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return xA;const o=Tm.get(n);if(o&&o[0]===i)return o[1];const r={error:os("error",n,i),warn:os("warn",n,i),info:os("info",n,i),debug:os("debug",n,i)};return Tm.set(n,[i,r]),r}const ti=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zi{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let o=!1;const r=i?tt(i):console;function s(){return Wt(this,arguments,function*(){var l,u,d,p;if(o)throw new Ft("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var g=!0,v=Kt(SA(t,n)),T;T=yield ne(v.next()),l=T.done,!l;g=!0){p=T.value,g=!1;const w=p;if(!h)if(w.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield ne(JSON.parse(w.data))}catch(x){throw r.error("Could not parse message into JSON:",w.data),r.error("From chunk:",w.raw),x}}}catch(w){u={error:w}}finally{try{!g&&!l&&(d=v.return)&&(yield ne(d.call(v)))}finally{if(u)throw u.error}}h=!0}catch(w){if(Ju(w))return yield ne(void 0);throw w}finally{h||n.abort()}})}return new zi(s,n,i)}static fromReadableStream(t,n,i){let o=!1;function r(){return Wt(this,arguments,function*(){var l,u,d,p;const h=new Bl,g=zv(t);try{for(var v=!0,T=Kt(g),w;w=yield ne(T.next()),l=w.done,!l;v=!0){p=w.value,v=!1;const x=p;for(const y of h.decode(x))yield yield ne(y)}}catch(x){u={error:x}}finally{try{!v&&!l&&(d=T.return)&&(yield ne(d.call(T)))}finally{if(u)throw u.error}}for(const x of h.flush())yield yield ne(x)})}function s(){return Wt(this,arguments,function*(){var l,u,d,p;if(o)throw new Ft("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var g=!0,v=Kt(r()),T;T=yield ne(v.next()),l=T.done,!l;g=!0){p=T.value,g=!1;const w=p;h||w&&(yield yield ne(JSON.parse(w)))}}catch(w){u={error:w}}finally{try{!g&&!l&&(d=v.return)&&(yield ne(d.call(v)))}finally{if(u)throw u.error}}h=!0}catch(w){if(Ju(w))return yield ne(void 0);throw w}finally{h||n.abort()}})}return new zi(s,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),o=r=>({next:()=>{if(r.length===0){const s=i.next();t.push(s),n.push(s)}return r.shift()}});return[new zi(()=>o(t),this.controller,this.client),new zi(()=>o(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return Bv({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:r}=await n.next();if(r)return i.close();const s=Fd(JSON.stringify(o)+`
`);i.enqueue(s)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function SA(e,t){return Wt(this,arguments,function*(){var i,o,r,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ft("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ft("Attempted to iterate over a response with no body");const a=new wA,l=new Bl,u=zv(e.body);try{for(var d=!0,p=Kt(TA(u)),h;h=yield ne(p.next()),i=h.done,!i;d=!0){s=h.value,d=!1;const g=s;for(const v of l.decode(g)){const T=a.decode(v);T&&(yield yield ne(T))}}}catch(g){o={error:g}}finally{try{!d&&!i&&(r=p.return)&&(yield ne(r.call(p)))}finally{if(o)throw o.error}}for(const g of l.flush()){const v=a.decode(g);v&&(yield yield ne(v))}})}function TA(e){return Wt(this,arguments,function*(){var n,i,o,r;let s=new Uint8Array;try{for(var a=!0,l=Kt(e),u;u=yield ne(l.next()),n=u.done,!n;a=!0){r=u.value,a=!1;const d=r;if(d==null)continue;const p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Fd(d):d;let h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let g;for(;(g=vA(s))!==-1;)yield yield ne(s.slice(0,g)),s=s.slice(g)}}catch(d){i={error:d}}finally{try{!a&&!n&&(o=l.return)&&(yield ne(o.call(l)))}finally{if(i)throw i.error}}s.length>0&&(yield yield ne(s))})}class wA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=EA(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function EA(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function CA(e,t){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:r}=t,s=await(async()=>{var a;if(t.options.stream)return tt(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):zi.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return tt(e).debug(`[${i}] response parsed`,ti({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-r})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ud extends Promise{constructor(t,n,i=CA){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new Ud(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wv=Symbol("brand.privateNullableHeaders");function*NA(e){if(!e)return;if(Wv in e){const{values:i,nulls:o}=e;yield*i.entries();for(const r of o)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():mm(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const r=mm(i[1])?i[1]:[i[1]];let s=!1;for(const a of r)a!==void 0&&(t&&!s&&(s=!0,yield[o,null]),yield[o,a])}}const Lo=e=>{const t=new Headers,n=new Set;for(const i of e){const o=new Set;for(const[r,s]of NA(i)){const a=r.toLowerCase();o.has(a)||(t.delete(r),o.add(a)),s===null?(t.delete(r),n.add(a)):(t.append(r,s),n.delete(a))}}return{[Wv]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ka=e=>{var t,n,i,o,r,s;if(typeof globalThis.process<"u")return(i=(n=(t=Xw)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(r=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||r===void 0?void 0:r.call(o,e))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Kv;class zl{constructor(t){var n,i,o,r,s,a,l,{baseURL:u=ka("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=ka("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,h=sl(t,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:d,apiVersion:p},h),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:zl.DEFAULT_TIMEOUT,this.logger=(o=g.logger)!==null&&o!==void 0?o:console;const v="warn";this.logLevel=v,this.logLevel=(s=(r=Sm(g.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:Sm(ka("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:rA(),this.encoder=aA,this._options=g,this.apiKey=d,this.apiVersion=p,this.clientAdapter=g.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=Lo([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Lo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Lo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Ft(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ki}`}defaultIdempotencyKey(){return`stainless-node-retry-${q_()}`}makeStatusError(t,n,i,o){return rt.generate(t,n,i,o)}buildURL(t,n,i){const o=!this.baseURLOverridden()&&i||this.baseURL,r=J_(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return Y_(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:n},o)))}request(t,n=null){return new Ud(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var o,r,s;const a=await t,l=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:d,timeout:p}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:d,options:a});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,v=Date.now();if(tt(this).debug(`[${h}] sending request`,ti({retryOfRequestLogID:i,method:a.method,url:d,options:a,headers:u.headers})),!((r=a.signal)===null||r===void 0)&&r.aborted)throw new Ku;const T=new AbortController,w=await this.fetchWithTimeout(d,u,p,T).catch(Wu),x=Date.now();if(w instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Ku;const E=Ju(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return tt(this).info(`[${h}] connection ${E?"timed out":"failed"} - ${S}`),tt(this).debug(`[${h}] connection ${E?"timed out":"failed"} (${S})`,ti({retryOfRequestLogID:i,url:d,durationMs:x-v,message:w.message})),this.retryRequest(a,n,i??h);throw tt(this).info(`[${h}] connection ${E?"timed out":"failed"} - error; no more retries left`),tt(this).debug(`[${h}] connection ${E?"timed out":"failed"} (error; no more retries left)`,ti({retryOfRequestLogID:i,url:d,durationMs:x-v,message:w.message})),E?new bv:new Gl({cause:w})}const y=`[${h}${g}] ${u.method} ${d} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${x-v}ms`;if(!w.ok){const S=await this.shouldRetry(w);if(n&&S){const P=`retrying, ${n} attempts remaining`;return await lA(w.body),tt(this).info(`${y} - ${P}`),tt(this).debug(`[${h}] response error (${P})`,ti({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:x-v})),this.retryRequest(a,n,i??h,w.headers)}const E=S?"error; no more retries left":"error; not retryable";tt(this).info(`${y} - ${E}`);const N=await w.text().catch(P=>Wu(P).message),C=Z_(N),I=C?void 0:N;throw tt(this).debug(`[${h}] response error (${E})`,ti({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,message:I,durationMs:Date.now()-v})),this.makeStatusError(w.status,C,I,w.headers)}return tt(this).info(y),tt(this).debug(`[${h}] response start`,ti({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:x-v})),{response:w,options:a,controller:T,requestLogID:h,retryOfRequestLogID:i,startTime:v}}async fetchWithTimeout(t,n,i,o){const r=n||{},{signal:s,method:a}=r,l=sl(r,["signal","method"]);s&&s.addEventListener("abort",()=>o.abort());const u=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,t,p)}finally{clearTimeout(u)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,o){var r;let s;const a=o==null?void 0:o.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(s=u)}const l=o==null?void 0:o.get("retry-after");if(l&&!s){const u=parseFloat(l);Number.isNaN(u)?s=Date.parse(l)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){const u=(r=t.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await eA(s),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const r=n-t,s=Math.min(.5*Math.pow(2,r),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,o,r;const s=Object.assign({},t),{method:a,path:l,query:u,defaultBaseURL:d}=s,p=this.buildURL(l,u,d);"timeout"in s&&Q_("timeout",s.timeout),s.timeout=(i=s.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:s}),v=await this.buildHeaders({options:t,method:a,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(r=s.fetchOptions)!==null&&r!==void 0?r:{}),url:p,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:o}){let r={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);const s=await this.authHeaders(t);let a=Lo([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),oA()),this._options.defaultHeaders,i,t.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=Lo([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:sA(t)}:this.encoder({body:t,headers:i})}}zl.DEFAULT_TIMEOUT=6e4;class Oe extends zl{constructor(){super(...arguments),this.interactions=new Jv(this)}}Kv=Oe;Oe.GeminiNextGenAPIClient=Kv;Oe.GeminiNextGenAPIClientError=Ft;Oe.APIError=rt;Oe.APIConnectionError=Gl;Oe.APIConnectionTimeoutError=bv;Oe.APIUserAbortError=Ku;Oe.NotFoundError=Lv;Oe.ConflictError=Fv;Oe.RateLimitError=Vv;Oe.BadRequestError=Rv;Oe.AuthenticationError=Mv;Oe.InternalServerError=Gv;Oe.PermissionDeniedError=Dv;Oe.UnprocessableEntityError=Uv;Oe.toFile=pA;Oe.Interactions=Jv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IA(e,t){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function kA(e,t){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function _A(e,t){const n={},i=c(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function AA(e,t){const n={},i=c(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function PA(e,t,n){const i={};if(c(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=c(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&f(t,["displayName"],o),c(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=c(e,["epochCount"]);t!==void 0&&r!=null&&f(t,["tuningTask","hyperparameters","epochCount"],r);const s=c(e,["learningRateMultiplier"]);if(s!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),c(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=c(e,["batchSize"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","batchSize"],a);const l=c(e,["learningRate"]);if(t!==void 0&&l!=null&&f(t,["tuningTask","hyperparameters","learningRate"],l),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function bA(e,t,n){const i={};let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=c(e,["validationDataset"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec"],wm(g))}else if(o==="PREFERENCE_TUNING"){const g=c(e,["validationDataset"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec"],wm(g))}const r=c(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&f(t,["tunedModelDisplayName"],r);const s=c(e,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);let a=c(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=c(e,["epochCount"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=c(e,["epochCount"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=c(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=c(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=c(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=c(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=c(e,["adapterSize"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(d==="PREFERENCE_TUNING"){const g=c(e,["adapterSize"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(c(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=c(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);const h=c(e,["beta"]);return t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),i}function RA(e,t){const n={},i=c(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=c(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const r=c(e,["trainingDataset"]);r!=null&&HA(r);const s=c(e,["config"]);return s!=null&&PA(s,n),n}function MA(e,t){const n={},i=c(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=c(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const r=c(e,["trainingDataset"]);r!=null&&$A(r,n,t);const s=c(e,["config"]);return s!=null&&bA(s,n,t),n}function DA(e,t){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function LA(e,t){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function FA(e,t,n){const i={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const r=c(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const s=c(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),i}function UA(e,t,n){const i={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const r=c(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const s=c(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),i}function VA(e,t){const n={},i=c(e,["config"]);return i!=null&&FA(i,n),n}function GA(e,t){const n={},i=c(e,["config"]);return i!=null&&UA(i,n),n}function BA(e,t){const n={},i=c(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=c(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const r=c(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Yv(a))),f(n,["tuningJobs"],s)}return n}function zA(e,t){const n={},i=c(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=c(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const r=c(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Qu(a))),f(n,["tuningJobs"],s)}return n}function OA(e,t){const n={},i=c(e,["name"]);i!=null&&f(n,["model"],i);const o=c(e,["name"]);return o!=null&&f(n,["endpoint"],o),n}function HA(e,t){const n={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(n,["examples","examples"],o)}return n}function $A(e,t,n){const i={};let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=c(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=c(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=c(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=c(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(c(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Yv(e,t){const n={},i=c(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=c(e,["name"]);o!=null&&f(n,["name"],o);const r=c(e,["state"]);r!=null&&f(n,["state"],fv(r));const s=c(e,["createTime"]);s!=null&&f(n,["createTime"],s);const a=c(e,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const l=c(e,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);const u=c(e,["updateTime"]);u!=null&&f(n,["updateTime"],u);const d=c(e,["description"]);d!=null&&f(n,["description"],d);const p=c(e,["baseModel"]);p!=null&&f(n,["baseModel"],p);const h=c(e,["_self"]);return h!=null&&f(n,["tunedModel"],OA(h)),n}function Qu(e,t){const n={},i=c(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=c(e,["name"]);o!=null&&f(n,["name"],o);const r=c(e,["state"]);r!=null&&f(n,["state"],fv(r));const s=c(e,["createTime"]);s!=null&&f(n,["createTime"],s);const a=c(e,["startTime"]);a!=null&&f(n,["startTime"],a);const l=c(e,["endTime"]);l!=null&&f(n,["endTime"],l);const u=c(e,["updateTime"]);u!=null&&f(n,["updateTime"],u);const d=c(e,["error"]);d!=null&&f(n,["error"],d);const p=c(e,["description"]);p!=null&&f(n,["description"],p);const h=c(e,["baseModel"]);h!=null&&f(n,["baseModel"],h);const g=c(e,["tunedModel"]);g!=null&&f(n,["tunedModel"],g);const v=c(e,["preTunedModel"]);v!=null&&f(n,["preTunedModel"],v);const T=c(e,["supervisedTuningSpec"]);T!=null&&f(n,["supervisedTuningSpec"],T);const w=c(e,["preferenceOptimizationSpec"]);w!=null&&f(n,["preferenceOptimizationSpec"],w);const x=c(e,["tuningDataStats"]);x!=null&&f(n,["tuningDataStats"],x);const y=c(e,["encryptionSpec"]);y!=null&&f(n,["encryptionSpec"],y);const S=c(e,["partnerModelTuningSpec"]);S!=null&&f(n,["partnerModelTuningSpec"],S);const E=c(e,["customBaseModel"]);E!=null&&f(n,["customBaseModel"],E);const N=c(e,["experiment"]);N!=null&&f(n,["experiment"],N);const C=c(e,["labels"]);C!=null&&f(n,["labels"],C);const I=c(e,["outputUri"]);I!=null&&f(n,["outputUri"],I);const _=c(e,["pipelineJob"]);_!=null&&f(n,["pipelineJob"],_);const P=c(e,["serviceAccount"]);P!=null&&f(n,["serviceAccount"],P);const R=c(e,["tunedModelDisplayName"]);R!=null&&f(n,["tunedModelDisplayName"],R);const L=c(e,["veoTuningSpec"]);return L!=null&&f(n,["veoTuningSpec"],L),n}function qA(e,t){const n={},i=c(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=c(e,["name"]);o!=null&&f(n,["name"],o);const r=c(e,["metadata"]);r!=null&&f(n,["metadata"],r);const s=c(e,["done"]);s!=null&&f(n,["done"],s);const a=c(e,["error"]);return a!=null&&f(n,["error"],a),n}function wm(e,t){const n={},i=c(e,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const o=c(e,["vertexDatasetResource"]);return o!=null&&f(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jA extends Sn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ei(gn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),r=await this.tuneMldevInternal(o);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:Bu.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=LA(t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>Qu(d))}else{const u=DA(t);return a=G("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>Yv(d))}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=GA(t);return a=G("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=zA(d),h=new Wh;return Object.assign(h,p),h})}else{const u=VA(t);return a=G("tunedModels",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=BA(d),h=new Wh;return Object.assign(h,p),h})}}async cancel(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=kA(t);return a=G("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=AA(d),h=new Kh;return Object.assign(h,p),h})}else{const u=IA(t);return a=G("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),s.then(d=>{const p=_A(d),h=new Kh;return Object.assign(h,p),h})}}async tuneInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const a=MA(t,t);return r=G("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>Qu(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RA(t);return r=G("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>qA(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JA{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const WA=1024*1024*8,KA=3,YA=1e3,XA=2,al="x-goog-upload-status";async function QA(e,t,n){var i;const o=await Xv(e,t,n),r=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[al])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function ZA(e,t,n){var i;const o=await Xv(e,t,n),r=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[al])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=sv(r),a=new Pd;return Object.assign(a,s),a}async function Xv(e,t,n){var i,o;let r=0,s=0,a=new zu(new Response),l="upload";for(r=e.size;s<r;){const u=Math.min(WA,r-s),d=e.slice(s,s+u);s+u>=r&&(l+=", finalize");let p=0,h=YA;for(;p<KA&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[al]));)p++,await t2(h),h=h*XA;if(s+=u,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[al])!=="active")break;if(r<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function e2(e){return{size:e.size,type:e.type}}function t2(e){return new Promise(t=>setTimeout(t,e))}class n2{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await QA(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await ZA(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await e2(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i2{create(t,n,i){return new o2(t,n,i)}}class o2{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Em="x-goog-api-key";class r2{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Em)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Em,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2="gl-node/";class l2{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Oe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=tE(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const o=new r2(this.apiKey);this.apiClient=new e_({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:s2+"web",uploader:new n2,downloader:new JA}),this.models=new x_(this.apiClient),this.live=new p_(this.apiClient,o,new i2),this.batches=new PC(this.apiClient),this.chats=new dN(this.models,this.apiClient),this.caches=new aN(this.apiClient),this.files=new TN(this.apiClient),this.operations=new S_(this.apiClient),this.authTokens=new F_(this.apiClient),this.tunings=new jA(this.apiClient),this.fileSearchStores=new $_(this.apiClient)}}const Qv={ESTJ:{type:"ESTJ",othersSee:"ESTJESTJESTJ",functions:"Te-Si-Ne-FiTi-Se-Ni-Fe",bestState:"ESTJ",growth:"",features:""},INTP:{type:"INTP",othersSee:"INTP",functions:"Ti-Ne-Si-FeTe-Ni-Se-Fi",bestState:"INTP",growth:"",features:""},ISFP:{type:"ISFP",othersSee:"ISFP",functions:"Fi-Se-Ni-Te, Fe-Si-Ne-Ti",bestState:"ISFP",growth:"",features:""},ENTP:{type:"ENTP",othersSee:"ENTP",functions:"Ne-Ti-Fe-SiNi-Te-Fi-Se",bestState:"",growth:"",features:""},ISTP:{type:"ISTP",othersSee:"ISTP",functions:"Ti-Se-Ni-Fe, Te-Si-Ne-Fi",bestState:"ISTP",growth:"",features:""},ENFJ:{type:"ENFJ",othersSee:"ENFJ",functions:"Fe-Ni-Se-TiFi-Ne-Si-Te",bestState:"ENFJ",growth:"",features:""},ENTJ:{type:"ENTJ",othersSee:"ENTJENTJ",functions:"Te-Ni-Se-FiTi-Ne-Si-Fe",bestState:"ENTJ",growth:"",features:""},ESTP:{type:"ESTP",othersSee:"ESTP",functions:"Se-Ti-Fe-NiSi-Te-Fi-Ne",bestState:"ESTP",growth:"",features:""},INFJ:{type:"INFJ",othersSee:"INFJ",functions:"Ni-Fe-Ti-Se, Ne-Fi-Te-Si",bestState:"",growth:"",features:""},ISTJ:{type:"ISTJ",othersSee:"ISTJ",functions:"Si-Te-Fi-NeSe-Ti-Fe-Ni",bestState:"ISTJ",growth:"",features:""},ENFP:{type:"ENFP",othersSee:"ENFPENFP",functions:"Ne-Fi-Te-SiNi-Fe-Ti-Se",bestState:"",growth:"",features:""},ESFP:{type:"ESFP",othersSee:"ESFP",functions:"Se-Fi-Te-NiSi-Fe-Ti-Ne",bestState:"",growth:"",features:""},INTJ:{type:"INTJ",othersSee:"INTJ",functions:"Ni-Te-Fi-Se, Ne-Ti-Fe-Si",bestState:"",growth:"",features:""},ESFJ:{type:"ESFJ",othersSee:"ESFJ",functions:"Fe-Si-Ne-TiFi-Se-Ni-Te",bestState:"",growth:"",features:""},INFP:{type:"INFP",othersSee:"INFP",functions:"Fi-Ne-Si-TeFe-Ni-Se-Ti",bestState:"",growth:"",features:""},ISFJ:{type:"ISFJ",othersSee:"ISFJ",functions:"Si-Fe-Ti-Ne, Se-Fi-Te-Ni",bestState:"",growth:"",features:""}},Zv=[{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Te"},{title:"",description:"30",functionId:"Te"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Te"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Ti"},{title:"",description:"/",functionId:"Fe"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Ti"},{title:"",description:"",functionId:"Fi"},{title:"",description:"",functionId:"Fi"},{title:"",description:"vs",functionId:"Fe"},{title:"",description:"",functionId:"Fi"},{title:"",description:"3",functionId:"Fi"},{title:"",description:"/",functionId:"Fi"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Fe"},{title:"",description:"",functionId:"Fi"},{title:"",description:"103",functionId:"Se"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Fi"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Fi"},{title:"",description:"30",functionId:"Se"},{title:"",description:"10",functionId:"Se"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Se"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Si"},{title:"",description:"",functionId:"Si"},{title:"",description:"......",functionId:"Ne"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Ni"},{title:"",description:"",functionId:"Ne"},{title:"",description:"",functionId:"Ni"}],a2=(e,t=4)=>[...Zv.filter(o=>o.functionId===e)].sort(()=>Math.random()-.5).slice(0,t).map((o,r)=>({category:["standard","truth","dare","deep"][r%4],title:o.title,description:o.description,multiplier:[1,1.2,1.2,1.5][r%4],scoreType:["expression","insight","expression","trust"][r%4],durationSeconds:60})),Cm={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ii=e=>Cm&&Cm[e]||"",Mn={gemini:ii("VITE_GEMINI_KEY")||ii("VITE_API_KEY"),groq:ii("VITE_GROQ_KEY"),openRouter:ii("VITE_OPENROUTER_KEY"),zhipu:ii("VITE_ZHIPU_KEY")},ul={ENFJ:`
[] (Fe - Ni)
[] 
[] 
[ / ] Ti / Se(Ti)
[] 
`,ENFP:`
[] (Ne - Fi)
[] 
[] 
[ / ] Si / Te(Si)
[] 
`,ENTJ:`
[] (Te - Ni)
[] 
[] 
[ / ] Fi / Se(Fi)
[] 
`,ENTP:`
[] (Ne - Ti)
[] 
[] 
[ / ] Si / Fe(Si)
[] 
`,ESFJ:`
[] (Fe - Si)
[] 
[] 
[ / ] Ti / Ne(Ti)
[] 
`,ESFP:`
[] (Se - Fi)
[] 
[] 
[ / ] Ni / Te(Ni)
[] 
`,ESTJ:`
[] (Te - Si)
[] 
[] 
[ / ] Fi / Ne(Fi)
[] 
`,ESTP:`
[] (Se - Ti)
[] 
[] 
[ / ] Ni / Fe(Ni)
[] 
`,INFJ:`
[] (Ni - Fe)
[] 
[] 
[ / ] Se / Ti(Se)
[] 
`,INFP:`
[] (Fi - Ne)
[] 
[] 
[ / ] Te / Si(Te)
[] 
`,INTJ:`
[] (Ni - Te)
[] 
[] 
[ / ] Se / Fi(Se)
[] 
`,INTP:`
[] (Ti - Ne)
[] 
[] 
[ / ] Fe / Si(Fe)
[] 
`,ISFJ:`
[] (Si - Fe)
[] 
[] 
[ / ] Ne / Ti(Ne)
[] 
`,ISFP:`
[] (Fi - Se)
[] 
[] 
[ / ] Te / Ni(Te)
[] 
`,ISTJ:`
[] (Si - Te)
[] 
[] 
[ / ] Ne / Fi(Ne)
[] 
`,ISTP:`
[] (Ti - Se)
[] 
[] 
[ / ] Fe / Ni(Fe)
[] 
`},u2=`
[]
 AI  MBTI 

[]

1. ** (Trust) **
2. ** (Insight) ** / 
3. ** (Expression) **

[]
    - FeNi
- 
- **  ** 16 
`.trim(),c2=`
[]
 MBTI  4 

[]
1. ** (Flow State) ** ENTJ  TeINFJ  Ni
2. ** (Growth Zone) ** /  INTP  FeESTJ  Fi

[ - !]
    - **  ** 
-  **  ** 
- 

[]
1. "standard"()
2. "truth"()(Score: Insight)
3. "dare"() INTJ  Se ESFP  Ti(Score: Expression)
4. "deep"()(Score: Trust)

[]
 JSON  keys: "standard", "truth", "dare", "deep"
 Value 
{
    "title": " ()",
        "description": "",
            "scoreType": "trust" | "insight" | "expression",
                "durationSeconds": 45 - 90
}
`.trim(),d2=`
[]


[]
1. **  **
2. **  ** NF  ST 
3. **  **

[ - !]
 JSON 
{
    "groupAnalysis": "150-200",
    "playerAnalysis": {
        "ID": "150

1.  ****[]
2.  ****[][]
3.  ****"
    }
}

1. **  ID **  key
2.  emoji  (\\n) 
3. 
`.trim(),rs={geminiKey:"",openRouterKey:"",groqKey:"",geminiModel:"gemini-2.5-flash",openRouterModel:"anthropic/claude-3-haiku",groqModel:"llama3-70b-8192",systemPersona:u2,taskPromptTemplate:c2,reportPromptTemplate:d2,zhipuKey:""},f2=()=>{if(typeof window>"u")return rs;const e=localStorage.getItem("PSYCHEPOLY_AI_CONFIG_V2");if(e)try{return{...rs,...JSON.parse(e)}}catch{return rs}return rs};let ht=f2();const p2=()=>ht,h2=e=>{ht={...ht,...e},localStorage.setItem("PSYCHEPOLY_AI_CONFIG_V2",JSON.stringify(ht))},m2=async(e,t,n,i)=>{var l,u,d;const o=ht.groqKey||Mn.groq;if(!o)throw new Error("Skipped: No Groq Key");const r=[{type:"text",text:t}];i&&r.push({type:"image_url",image_url:{url:i.startsWith("data:")?i:`data: image / jpeg; base64, ${i} `}});const s=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${o} `,"Content-Type":"application/json"},body:JSON.stringify({model:ht.groqModel,messages:[{role:"system",content:e},{role:"user",content:r}],response_format:{type:"json_object"}})});if(!s.ok)throw new Error(`Groq ${s.statusText} `);return((d=(u=(l=(await s.json()).choices)==null?void 0:l[0])==null?void 0:u.message)==null?void 0:d.content)||"{}"},g2=async(e,t,n,i)=>{var l,u,d;const o=ht.openRouterKey||Mn.openRouter;if(!o)throw new Error("Skipped: No OpenRouter Key");const r=[{type:"text",text:t}];i&&r.push({type:"image_url",image_url:{url:i.startsWith("data:")?i:`data: image / jpeg; base64, ${i} `}});const s=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${o} `,"Content-Type":"application/json","HTTP-Referer":window.location.href,"X-Title":"PsychePoly"},body:JSON.stringify({model:ht.openRouterModel,messages:[{role:"system",content:e},{role:"user",content:r}],response_format:{type:"json_object"}})});if(!s.ok)throw new Error(`OpenRouter ${s.statusText} `);return((d=(u=(l=(await s.json()).choices)==null?void 0:l[0])==null?void 0:u.message)==null?void 0:d.content)||"{}"},y2=async(e,t,n,i)=>{const o=ht.geminiKey||Mn.gemini;if(!o)throw new Error("Skipped: No Gemini Key");const r=new l2({apiKey:o}),s=i?{inlineData:{data:i.split(",")[1]||i,mimeType:"image/jpeg"}}:null;return(await r.models.generateContent({model:ht.geminiModel,contents:[{role:"user",parts:[...s?[s]:[],{text:t}]}],config:{systemInstruction:e,responseMimeType:"application/json"}})).text||"{}"},v2=async(e,t,n)=>{var s,a,l;const i=ht.zhipuKey||Mn.zhipu;if(!i)throw new Error("Skipped: No Zhipu Key");const o=await fetch("https://open.bigmodel.cn/api/paas/v4/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${i} `,"Content-Type":"application/json"},body:JSON.stringify({model:"glm-4-flash",messages:[{role:"system",content:e},{role:"user",content:t}],response_format:{type:"json_object"},temperature:.7})});if(!o.ok)throw new Error(`Zhipu ${o.statusText} `);return((l=(a=(s=(await o.json()).choices)==null?void 0:s[0])==null?void 0:a.message)==null?void 0:l.content)||"{}"},x2=async(e,t,n)=>{const i=`${e} 

${t} 

Respond in JSON.`,o=await fetch(`https://text.pollinations.ai/${encodeURIComponent(i)}`);if(!o.ok)throw new Error(`Pollinations ${o.statusText}`);let r=await o.text();return r=r.replace(/```json/g,"").replace(/```/g,"").trim(),r},br=e=>{try{const t=e.indexOf("{"),n=e.indexOf("[");let i="",o=-1;if(t!==-1&&(n===-1||t<n)?(i="{",o=t):n!==-1&&(i="[",o=n),o===-1)return e.trim();const r=i==="{"?"}":"]",s=e.lastIndexOf(r);if(s!==-1&&s>o)return e.substring(o,s+1)}catch(t){console.warn("JSON extraction lookup failed",t)}return e.trim()},Ci=async(e,t,n)=>{let i=t||ht.systemPersona;i.toLowerCase().includes("json")||(i+=`

IMPORTANT: You MUST respond strictly in valid raw JSON format.`);const o=[],r=ii("VITE_PLATFORM")==="china"||ii("VITE_PLATFORM")==="vercel",s=[{name:"Groq",call:()=>m2(i,e,!0,n)},{name:"OpenRouter",call:()=>g2(i,e,!0,n)},{name:"Zhipu",call:()=>v2(i,e)},{name:"Gemini",call:()=>y2(i,e,!0,n)},{name:"Pollinations",call:()=>x2(i,e)}];if(r){const a=s.findIndex(l=>l.name==="Zhipu");if(a>-1){const[l]=s.splice(a,1);s.unshift(l)}}for(const a of s)try{return console.log(`Calling [${a.name}]...`),await a.call()}catch(l){o.push(`${a.name}: ${l.message}`)}throw console.error("All AI providers failed:",o),new Error("ALL_AI_FAILED")},ex=e=>e.map(t=>`${t.id}|${t.name}|${t.mbti}|${t.trustScore}|${t.insightScore}|${t.expressionScore}`).join(`
`),tx=e=>{const t=Array.from(new Set(e.map(i=>i.mbti)));let n=`
[]
`;return t.forEach(i=>{ul[i]&&(n+=`--- ${i} ---
${ul[i].trim()}
`)}),n},S2=(e,t)=>{var i;const n={};e.forEach(o=>n[o.id]=[]);for(const o of t){if(!o.taskDetails||!o.taskDetails.includes(":"))continue;const r=e.find(s=>s.name===o.author);if(r){const s=(i=o.taskDetails.split(":")[1])==null?void 0:i.trim();s&&n[r.id].push(s)}}return e.map(o=>{const r=n[o.id].slice(-5);return`[ ${o.name}(${o.id})]: (${r.join("; ")||""})`}).join(`
`)},nx=async(e,t)=>{const n=" 20 ",i=`: ${t}`;try{return(await Ci(i,n,e)).trim()||""}catch{return""}},T2=(e,t)=>{const n=ex(e),i=t.filter(o=>o.taskDetails&&o.taskDetails.includes(":")).slice(-15).map(o=>{var r;return`[${o.author}]: ${(r=o.taskDetails)==null?void 0:r.split(":")[1]}`}).join(`
`);return`[(ID|Name|MBTI|T|I|E)]
${n}

[]
${i||"..."}`},w2=async e=>{const t=`
     MBTI 
     4 0100 3  MBTI 
    
    []
    1. 1 (/E-I): (I)(E)
    2. 2 (/S-N): (S)(N)
    3. 3 (/T-F): (T)(F)
    4. 4 (/J-P): (J)(P)
     40-60
    
     JSON 
  `.trim(),n=e.map(i=>`${i.q}: ${i.val}`).join(`
`);try{const i=await Ci(n,t);return JSON.parse(br(i))}catch{return[{type:"ISFP",percentage:70,reason:""},{type:"INFP",percentage:50,reason:""},{type:"INFJ",percentage:30,reason:""}]}},E2=async(e,t)=>{const n=`
     MBTI 
    
    
    [ -  JSON]
    {
      "type": "MBTI",
      "title": "",
      "nickname": "",
      "description": "50-100",
      "strengths": ["1", "2", "3", "4"],
      "growth": ["1", "2", "3"],
      "socialTip": "",
      "monologue": ""
    }
    `.trim(),i=`: ${e}
:
${t.map(o=>`${o.q}: ${o.val}`).join(`
`)}`;try{const o=await Ci(i,n);return JSON.parse(br(o))}catch(o){throw console.error("Detailed report failed",o),o}},Zu=async(e,t,n,i=[])=>{const o=T2(t,i),r=Zv.filter(p=>p.functionId===e).sort(()=>Math.random()-.5).slice(0,2),s=r.length>0?`
[ ()]:
${r.map(p=>`- ${p.title}: ${p.description}`).join(`
`)}
`:"",a=ul[n.mbti]?`
[ ${n.mbti}  ()]
${ul[n.mbti]}
`:"";let l=`: "${e}" ().`;const u=nl[e];u&&(e==="Hub"?l=`
                []
                
                
            `:l=`
                []
                ${e}${u}
                 MBTI  (${e})  ${u} 
                
            `);const d=`
        []
        : ${n.name} (: ${n.mbti}).
        ${l}
        ${a}
        ${s}
        
        ${o}
        ${tx([n])}

        ${ht.taskPromptTemplate}
    `;try{const p=await Ci(d),h=JSON.parse(br(p)),g={};return["standard","truth","dare","deep"].forEach(T=>{const w=h[T]||{},x=fi[T];g[T]={category:T,title:w.title||"",description:w.description||"AI ",scoreType:w.scoreType||"expression",durationSeconds:w.durationSeconds||60,multiplier:x.multiplier}}),g}catch{console.warn("Falling back to Static Data from Local Library");const h=a2(e,4),g={};return["standard","truth","dare","deep"].forEach((v,T)=>{const w=h[T]||{title:"",description:"",scoreType:"expression",durationSeconds:60},x=fi[v];g[v]={category:v,title:w.title,description:w.description,scoreType:w.scoreType,durationSeconds:w.durationSeconds,multiplier:x.multiplier}}),g}},C2=async(e,t,n,i)=>{const o=`
    
     ${e.mbti} 
    
    []
    : ${t.title}
    : ${t.description}
    : ${t.scoreType}

    []
    : "${n||""}"
    ${i?`AI : "${i}"`:""}

    []
    1.  80 
    2. 0-5
    3. 

    []
     JSON :
    {
      "feedback": "...",
      "scores": { "trust": 3, "insight": 4, "expression": 2 }
    }
    `.trim(),r="";try{const s=await Ci(r,o),a=JSON.parse(br(s));return{feedback:a.feedback||"",scores:a.scores||{trust:3,insight:3,expression:3}}}catch{return{feedback:"",scores:{trust:3,insight:3,expression:3}}}},N2=async(e,t,n=[])=>{const i=ex(e),o=S2(e,n),r=tx(e);let s=ht.reportPromptTemplate;const a=`
        [: ]
        (ID|Name|MBTI|T|I|E):
        ${i}

        []:
        ${o}

        ${r}
    `;s.includes("{players_placeholder}")?s=s.replace("{players_placeholder}",i).replace("{logs_placeholder}",o+r):s=`${a}

[]
${s}`;try{const l=await Ci(s),u=JSON.parse(br(l)),d={};return e.forEach(p=>{var g;let h=(g=u.playerAnalysis)==null?void 0:g[p.id];if(!h&&u.playerAnalysis){const v=Object.keys(u.playerAnalysis).find(T=>T.includes(p.name));v&&(h=u.playerAnalysis[v])}d[p.id]=h||`${p.name} ... `}),{groupAnalysis:u.groupAnalysis||"",playerAnalysis:d}}catch(l){console.error("Report Generation Fail",l);const u={};return e.forEach(d=>{const p=Qv[d.mbti];p?u[d.id]=`AI ...

 **** ${d.mbti} ${p.bestState}

 ****${p.growth}

 ****${p.othersSee}`:u[d.id]=""}),{groupAnalysis:"AI ",playerAnalysis:u}}},I2=async(e,t)=>{const n=t.map(r=>`${r.type} (${r.percentage}%): ${r.reason}`).join(`
`),i=`
 "${e.name}" 
 MBTI 

[]:
${n}
`.trim(),o=` "${e.name}" ${e.mbti}`;try{const r=await Ci(o,i);return{groupAnalysis:` ${e.name} `,playerAnalysis:{[e.mbti]:r}}}catch{const s=Qv[e.mbti];return{groupAnalysis:"",playerAnalysis:{[e.mbti]:s?`
${s.type} ${s.othersSee}


${s.bestState}


${s.growth}`:" AI "}}}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ix=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:r,iconNode:s,...a},l)=>A.createElement("svg",{ref:l,..._2,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:ix("lucide",o),...a},[...s.map(([u,d])=>A.createElement(u,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=(e,t)=>{const n=A.forwardRef(({className:i,...o},r)=>A.createElement(A2,{ref:r,iconNode:t,className:ix(`lucide-${k2(e)}`,i),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=q("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=q("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=q("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=q("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=q("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=q("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=q("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=q("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=q("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=q("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=q("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=q("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=q("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=q("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=q("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=q("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=q("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=q("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=q("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=q("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=q("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=q("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=q("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=q("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=q("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=q("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=q("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=q("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=q("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=q("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=q("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=q("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=q("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=q("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=q("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=q("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=q("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=q("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Bd=A.createContext({});function zd(e){const t=A.useRef(null);return t.current===null&&(t.current=e()),t.current}const Od=typeof window<"u",hx=Od?A.useLayoutEffect:A.useEffect,ql=A.createContext(null);function Hd(e,t){e.indexOf(t)===-1&&e.push(t)}function $d(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const yn=(e,t,n)=>n>t?t:n<e?e:n;let qd=()=>{};const vn={},mx=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function gx(e){return typeof e=="object"&&e!==null}const yx=e=>/^0[^.\s]+$/u.test(e);function jd(e){let t;return()=>(t===void 0&&(t=e()),t)}const Mt=e=>e,cP=(e,t)=>n=>t(e(n)),Rr=(...e)=>e.reduce(cP),Tr=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class Jd{constructor(){this.subscriptions=[]}add(t){return Hd(this.subscriptions,t),()=>$d(this.subscriptions,t)}notify(t,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,i);else for(let r=0;r<o;r++){const s=this.subscriptions[r];s&&s(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const rn=e=>e*1e3,Pt=e=>e/1e3;function vx(e,t){return t?e*(1e3/t):0}const xx=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,dP=1e-7,fP=12;function pP(e,t,n,i,o){let r,s,a=0;do s=t+(n-t)/2,r=xx(s,i,o)-e,r>0?n=s:t=s;while(Math.abs(r)>dP&&++a<fP);return s}function Mr(e,t,n,i){if(e===t&&n===i)return Mt;const o=r=>pP(r,0,1,e,n);return r=>r===0||r===1?r:xx(o(r),t,i)}const Sx=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Tx=e=>t=>1-e(1-t),wx=Mr(.33,1.53,.69,.99),Wd=Tx(wx),Ex=Sx(Wd),Cx=e=>(e*=2)<1?.5*Wd(e):.5*(2-Math.pow(2,-10*(e-1))),Kd=e=>1-Math.sin(Math.acos(e)),Nx=Tx(Kd),Ix=Sx(Kd),hP=Mr(.42,0,1,1),mP=Mr(0,0,.58,1),kx=Mr(.42,0,.58,1),gP=e=>Array.isArray(e)&&typeof e[0]!="number",_x=e=>Array.isArray(e)&&typeof e[0]=="number",yP={linear:Mt,easeIn:hP,easeInOut:kx,easeOut:mP,circIn:Kd,circInOut:Ix,circOut:Nx,backIn:Wd,backInOut:Ex,backOut:wx,anticipate:Cx},vP=e=>typeof e=="string",km=e=>{if(_x(e)){qd(e.length===4);const[t,n,i,o]=e;return Mr(t,n,i,o)}else if(vP(e))return yP[e];return e},ss=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xP(e,t){let n=new Set,i=new Set,o=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(u.schedule(d),e()),d(a)}const u={schedule:(d,p=!1,h=!1)=>{const v=h&&o?n:i;return p&&s.add(d),v.has(d)||v.add(d),d},cancel:d=>{i.delete(d),s.delete(d)},process:d=>{if(a=d,o){r=!0;return}o=!0,[n,i]=[i,n],n.forEach(l),n.clear(),o=!1,r&&(r=!1,u.process(d))}};return u}const SP=40;function Ax(e,t){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,s=ss.reduce((S,E)=>(S[E]=xP(r),S),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:d,update:p,preRender:h,render:g,postRender:v}=s,T=()=>{const S=vn.useManualTiming?o.timestamp:performance.now();n=!1,vn.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(S-o.timestamp,SP),1)),o.timestamp=S,o.isProcessing=!0,a.process(o),l.process(o),u.process(o),d.process(o),p.process(o),h.process(o),g.process(o),v.process(o),o.isProcessing=!1,n&&t&&(i=!1,e(T))},w=()=>{n=!0,i=!0,o.isProcessing||e(T)};return{schedule:ss.reduce((S,E)=>{const N=s[E];return S[E]=(C,I=!1,_=!1)=>(n||w(),N.schedule(C,I,_)),S},{}),cancel:S=>{for(let E=0;E<ss.length;E++)s[ss[E]].cancel(S)},state:o,steps:s}}const{schedule:we,cancel:$n,state:qe,steps:Pa}=Ax(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mt,!0);let ks;function TP(){ks=void 0}const ct={now:()=>(ks===void 0&&ct.set(qe.isProcessing||vn.useManualTiming?qe.timestamp:performance.now()),ks),set:e=>{ks=e,queueMicrotask(TP)}},Px=e=>t=>typeof t=="string"&&t.startsWith(e),bx=Px("--"),wP=Px("var(--"),Yd=e=>wP(e)?EP.test(e.split("/*")[0].trim()):!1,EP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,To={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wr={...To,transform:e=>yn(0,1,e)},ls={...To,default:1},Zo=e=>Math.round(e*1e5)/1e5,Xd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CP(e){return e==null}const NP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qd=(e,t)=>n=>!!(typeof n=="string"&&NP.test(n)&&n.startsWith(e)||t&&!CP(n)&&Object.prototype.hasOwnProperty.call(n,t)),Rx=(e,t,n)=>i=>{if(typeof i!="string")return i;const[o,r,s,a]=i.match(Xd);return{[e]:parseFloat(o),[t]:parseFloat(r),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},IP=e=>yn(0,255,e),ba={...To,transform:e=>Math.round(IP(e))},ai={test:Qd("rgb","red"),parse:Rx("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+ba.transform(e)+", "+ba.transform(t)+", "+ba.transform(n)+", "+Zo(wr.transform(i))+")"};function kP(e){let t="",n="",i="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,i+=i,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const oc={test:Qd("#"),parse:kP,transform:ai.transform},Dr=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Nn=Dr("deg"),sn=Dr("%"),Q=Dr("px"),_P=Dr("vh"),AP=Dr("vw"),_m={...sn,parse:e=>sn.parse(e)/100,transform:e=>sn.transform(e*100)},Oi={test:Qd("hsl","hue"),parse:Rx("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+sn.transform(Zo(t))+", "+sn.transform(Zo(n))+", "+Zo(wr.transform(i))+")"},Me={test:e=>ai.test(e)||oc.test(e)||Oi.test(e),parse:e=>ai.test(e)?ai.parse(e):Oi.test(e)?Oi.parse(e):oc.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ai.transform(e):Oi.transform(e),getAnimatableNone:e=>{const t=Me.parse(e);return t.alpha=0,Me.transform(t)}},PP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bP(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Xd))==null?void 0:t.length)||0)+(((n=e.match(PP))==null?void 0:n.length)||0)>0}const Mx="number",Dx="color",RP="var",MP="var(",Am="${}",DP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Er(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},o=[];let r=0;const a=t.replace(DP,l=>(Me.test(l)?(i.color.push(r),o.push(Dx),n.push(Me.parse(l))):l.startsWith(MP)?(i.var.push(r),o.push(RP),n.push(l)):(i.number.push(r),o.push(Mx),n.push(parseFloat(l))),++r,Am)).split(Am);return{values:n,split:a,indexes:i,types:o}}function Lx(e){return Er(e).values}function Fx(e){const{split:t,types:n}=Er(e),i=t.length;return o=>{let r="";for(let s=0;s<i;s++)if(r+=t[s],o[s]!==void 0){const a=n[s];a===Mx?r+=Zo(o[s]):a===Dx?r+=Me.transform(o[s]):r+=o[s]}return r}}const LP=e=>typeof e=="number"?0:Me.test(e)?Me.getAnimatableNone(e):e;function FP(e){const t=Lx(e);return Fx(e)(t.map(LP))}const qn={test:bP,parse:Lx,createTransformer:Fx,getAnimatableNone:FP};function Ra(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function UP({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let o=0,r=0,s=0;if(!t)o=r=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=Ra(l,a,e+1/3),r=Ra(l,a,e),s=Ra(l,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(r*255),blue:Math.round(s*255),alpha:i}}function cl(e,t){return n=>n>0?t:e}const Ie=(e,t,n)=>e+(t-e)*n,Ma=(e,t,n)=>{const i=e*e,o=n*(t*t-i)+i;return o<0?0:Math.sqrt(o)},VP=[oc,ai,Oi],GP=e=>VP.find(t=>t.test(e));function Pm(e){const t=GP(e);if(!t)return!1;let n=t.parse(e);return t===Oi&&(n=UP(n)),n}const bm=(e,t)=>{const n=Pm(e),i=Pm(t);if(!n||!i)return cl(e,t);const o={...n};return r=>(o.red=Ma(n.red,i.red,r),o.green=Ma(n.green,i.green,r),o.blue=Ma(n.blue,i.blue,r),o.alpha=Ie(n.alpha,i.alpha,r),ai.transform(o))},rc=new Set(["none","hidden"]);function BP(e,t){return rc.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function zP(e,t){return n=>Ie(e,t,n)}function Zd(e){return typeof e=="number"?zP:typeof e=="string"?Yd(e)?cl:Me.test(e)?bm:$P:Array.isArray(e)?Ux:typeof e=="object"?Me.test(e)?bm:OP:cl}function Ux(e,t){const n=[...e],i=n.length,o=e.map((r,s)=>Zd(r)(r,t[s]));return r=>{for(let s=0;s<i;s++)n[s]=o[s](r);return n}}function OP(e,t){const n={...e,...t},i={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(i[o]=Zd(e[o])(e[o],t[o]));return o=>{for(const r in i)n[r]=i[r](o);return n}}function HP(e,t){const n=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const r=t.types[o],s=e.indexes[r][i[r]],a=e.values[s]??0;n[o]=a,i[r]++}return n}const $P=(e,t)=>{const n=qn.createTransformer(t),i=Er(e),o=Er(t);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?rc.has(e)&&!o.values.length||rc.has(t)&&!i.values.length?BP(e,t):Rr(Ux(HP(i,o),o.values),n):cl(e,t)};function Vx(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ie(e,t,n):Zd(e)(e,t)}const qP=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>we.update(t,n),stop:()=>$n(t),now:()=>qe.isProcessing?qe.timestamp:ct.now()}},Gx=(e,t,n=10)=>{let i="";const o=Math.max(Math.round(t/n),2);for(let r=0;r<o;r++)i+=Math.round(e(r/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},dl=2e4;function ef(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<dl;)t+=n,i=e.next(t);return t>=dl?1/0:t}function jP(e,t=100,n){const i=n({...e,keyframes:[0,t]}),o=Math.min(ef(i),dl);return{type:"keyframes",ease:r=>i.next(o*r).value/t,duration:Pt(o)}}const JP=5;function Bx(e,t,n){const i=Math.max(t-JP,0);return vx(n-e(i),t-i)}const Pe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Da=.001;function WP({duration:e=Pe.duration,bounce:t=Pe.bounce,velocity:n=Pe.velocity,mass:i=Pe.mass}){let o,r,s=1-t;s=yn(Pe.minDamping,Pe.maxDamping,s),e=yn(Pe.minDuration,Pe.maxDuration,Pt(e)),s<1?(o=u=>{const d=u*s,p=d*e,h=d-n,g=sc(u,s),v=Math.exp(-p);return Da-h/g*v},r=u=>{const p=u*s*e,h=p*n+n,g=Math.pow(s,2)*Math.pow(u,2)*e,v=Math.exp(-p),T=sc(Math.pow(u,2),s);return(-o(u)+Da>0?-1:1)*((h-g)*v)/T}):(o=u=>{const d=Math.exp(-u*e),p=(u-n)*e+1;return-Da+d*p},r=u=>{const d=Math.exp(-u*e),p=(n-u)*(e*e);return d*p});const a=5/e,l=YP(o,r,a);if(e=rn(e),isNaN(l))return{stiffness:Pe.stiffness,damping:Pe.damping,duration:e};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:s*2*Math.sqrt(i*u),duration:e}}}const KP=12;function YP(e,t,n){let i=n;for(let o=1;o<KP;o++)i=i-e(i)/t(i);return i}function sc(e,t){return e*Math.sqrt(1-t*t)}const XP=["duration","bounce"],QP=["stiffness","damping","mass"];function Rm(e,t){return t.some(n=>e[n]!==void 0)}function ZP(e){let t={velocity:Pe.velocity,stiffness:Pe.stiffness,damping:Pe.damping,mass:Pe.mass,isResolvedFromDuration:!1,...e};if(!Rm(e,QP)&&Rm(e,XP))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,r=2*yn(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:Pe.mass,stiffness:o,damping:r}}else{const n=WP(e);t={...t,...n,mass:Pe.mass},t.isResolvedFromDuration=!0}return t}function fl(e=Pe.visualDuration,t=Pe.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:o}=n;const r=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:u,mass:d,duration:p,velocity:h,isResolvedFromDuration:g}=ZP({...n,velocity:-Pt(n.velocity||0)}),v=h||0,T=u/(2*Math.sqrt(l*d)),w=s-r,x=Pt(Math.sqrt(l/d)),y=Math.abs(w)<5;i||(i=y?Pe.restSpeed.granular:Pe.restSpeed.default),o||(o=y?Pe.restDelta.granular:Pe.restDelta.default);let S;if(T<1){const N=sc(x,T);S=C=>{const I=Math.exp(-T*x*C);return s-I*((v+T*x*w)/N*Math.sin(N*C)+w*Math.cos(N*C))}}else if(T===1)S=N=>s-Math.exp(-x*N)*(w+(v+x*w)*N);else{const N=x*Math.sqrt(T*T-1);S=C=>{const I=Math.exp(-T*x*C),_=Math.min(N*C,300);return s-I*((v+T*x*w)*Math.sinh(_)+N*w*Math.cosh(_))/N}}const E={calculatedDuration:g&&p||null,next:N=>{const C=S(N);if(g)a.done=N>=p;else{let I=N===0?v:0;T<1&&(I=N===0?rn(v):Bx(S,N,C));const _=Math.abs(I)<=i,P=Math.abs(s-C)<=o;a.done=_&&P}return a.value=a.done?s:C,a},toString:()=>{const N=Math.min(ef(E),dl),C=Gx(I=>E.next(N*I).value,N,30);return N+"ms "+C},toTransition:()=>{}};return E}fl.applyToOptions=e=>{const t=jP(e,100,fl);return e.ease=t.ease,e.duration=rn(t.duration),e.type="keyframes",e};function lc({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:r=500,modifyTarget:s,min:a,max:l,restDelta:u=.5,restSpeed:d}){const p=e[0],h={done:!1,value:p},g=_=>a!==void 0&&_<a||l!==void 0&&_>l,v=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let T=n*t;const w=p+T,x=s===void 0?w:s(w);x!==w&&(T=x-p);const y=_=>-T*Math.exp(-_/i),S=_=>x+y(_),E=_=>{const P=y(_),R=S(_);h.done=Math.abs(P)<=u,h.value=h.done?x:R};let N,C;const I=_=>{g(h.value)&&(N=_,C=fl({keyframes:[h.value,v(h.value)],velocity:Bx(S,_,h.value),damping:o,stiffness:r,restDelta:u,restSpeed:d}))};return I(0),{calculatedDuration:null,next:_=>{let P=!1;return!C&&N===void 0&&(P=!0,E(_),I(_)),N!==void 0&&_>=N?C.next(_-N):(!P&&E(_),h)}}}function eb(e,t,n){const i=[],o=n||vn.mix||Vx,r=e.length-1;for(let s=0;s<r;s++){let a=o(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||Mt:t;a=Rr(l,a)}i.push(a)}return i}function tb(e,t,{clamp:n=!0,ease:i,mixer:o}={}){const r=e.length;if(qd(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=eb(t,i,o),l=a.length,u=d=>{if(s&&d<e[0])return t[0];let p=0;if(l>1)for(;p<e.length-2&&!(d<e[p+1]);p++);const h=Tr(e[p],e[p+1],d);return a[p](h)};return n?d=>u(yn(e[0],e[r-1],d)):u}function nb(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const o=Tr(0,t,i);e.push(Ie(n,1,o))}}function ib(e){const t=[0];return nb(t,e.length-1),t}function ob(e,t){return e.map(n=>n*t)}function rb(e,t){return e.map(()=>t||kx).splice(0,e.length-1)}function er({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const o=gP(i)?i.map(km):km(i),r={done:!1,value:t[0]},s=ob(n&&n.length===t.length?n:ib(t),e),a=tb(s,t,{ease:Array.isArray(o)?o:rb(t,o)});return{calculatedDuration:e,next:l=>(r.value=a(l),r.done=l>=e,r)}}const sb=e=>e!==null;function tf(e,{repeat:t,repeatType:n="loop"},i,o=1){const r=e.filter(sb),a=o<0||t&&n!=="loop"&&t%2===1?0:r.length-1;return!a||i===void 0?r[a]:i}const lb={decay:lc,inertia:lc,tween:er,keyframes:er,spring:fl};function zx(e){typeof e.type=="string"&&(e.type=lb[e.type])}class nf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const ab=e=>e/100;class of extends nf{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,o;const{motionValue:n}=this.options;n&&n.updatedAt!==ct.now()&&this.tick(ct.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(i=this.options).onStop)==null||o.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;zx(t);const{type:n=er,repeat:i=0,repeatDelay:o=0,repeatType:r,velocity:s=0}=t;let{keyframes:a}=t;const l=n||er;l!==er&&typeof a[0]!="number"&&(this.mixKeyframes=Rr(ab,Vx(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=ef(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:o,mixKeyframes:r,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:d,repeat:p,repeatType:h,repeatDelay:g,type:v,onUpdate:T,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?x<0:x>o;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let S=this.currentTime,E=i;if(p){const _=Math.min(this.currentTime,o)/a;let P=Math.floor(_),R=_%1;!R&&_>=1&&(R=1),R===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(h==="reverse"?(R=1-R,g&&(R-=g/a)):h==="mirror"&&(E=s)),S=yn(0,1,R)*a}const N=y?{done:!1,value:d[0]}:E.next(S);r&&(N.value=r(N.value));let{done:C}=N;!y&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return I&&v!==lc&&(N.value=tf(d,this.options,w,this.speed)),T&&T(N.value),I&&this.finish(),N}then(t,n){return this.finished.then(t,n)}get duration(){return Pt(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Pt(t)}get time(){return Pt(this.currentTime)}set time(t){var n;t=rn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ct.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Pt(this.currentTime))}play(){var o,r;if(this.isStopped)return;const{driver:t=qP,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),(r=(o=this.options).onPlay)==null||r.call(o);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ct.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function ub(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const ui=e=>e*180/Math.PI,ac=e=>{const t=ui(Math.atan2(e[1],e[0]));return uc(t)},cb={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ac,rotateZ:ac,skewX:e=>ui(Math.atan(e[1])),skewY:e=>ui(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},uc=e=>(e=e%360,e<0&&(e+=360),e),Mm=ac,Dm=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Lm=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),db={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Dm,scaleY:Lm,scale:e=>(Dm(e)+Lm(e))/2,rotateX:e=>uc(ui(Math.atan2(e[6],e[5]))),rotateY:e=>uc(ui(Math.atan2(-e[2],e[0]))),rotateZ:Mm,rotate:Mm,skewX:e=>ui(Math.atan(e[4])),skewY:e=>ui(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function cc(e){return e.includes("scale")?1:0}function dc(e,t){if(!e||e==="none")return cc(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=db,o=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=cb,o=a}if(!o)return cc(t);const r=i[t],s=o[1].split(",").map(pb);return typeof r=="function"?r(s):s[r]}const fb=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return dc(n,t)};function pb(e){return parseFloat(e.trim())}const wo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Eo=new Set(wo),Fm=e=>e===To||e===Q,hb=new Set(["x","y","z"]),mb=wo.filter(e=>!hb.has(e));function gb(e){const t=[];return mb.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const pi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>dc(t,"x"),y:(e,{transform:t})=>dc(t,"y")};pi.translateX=pi.x;pi.translateY=pi.y;const hi=new Set;let fc=!1,pc=!1,hc=!1;function Ox(){if(pc){const e=Array.from(hi).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const o=gb(i);o.length&&(n.set(i,o),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([r,s])=>{var a;(a=i.getValue(r))==null||a.set(s)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}pc=!1,fc=!1,hi.forEach(e=>e.complete(hc)),hi.clear()}function Hx(){hi.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(pc=!0)})}function yb(){hc=!0,Hx(),Ox(),hc=!1}class rf{constructor(t,n,i,o,r,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=o,this.element=r,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(hi.add(this),fc||(fc=!0,we.read(Hx),we.resolveKeyframes(Ox))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:o}=this;if(t[0]===null){const r=o==null?void 0:o.get(),s=t[t.length-1];if(r!==void 0)t[0]=r;else if(i&&n){const a=i.readValue(n,s);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=s),o&&r===void 0&&o.set(t[0])}ub(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),hi.delete(this)}cancel(){this.state==="scheduled"&&(hi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const vb=e=>e.startsWith("--");function xb(e,t,n){vb(t)?e.style.setProperty(t,n):e.style[t]=n}const Sb=jd(()=>window.ScrollTimeline!==void 0),Tb={};function wb(e,t){const n=jd(e);return()=>Tb[t]??n()}const $x=wb(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Oo=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,Um={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Oo([0,.65,.55,1]),circOut:Oo([.55,0,1,.45]),backIn:Oo([.31,.01,.66,-.59]),backOut:Oo([.33,1.53,.69,.99])};function qx(e,t){if(e)return typeof e=="function"?$x()?Gx(e,t):"ease-out":_x(e)?Oo(e):Array.isArray(e)?e.map(n=>qx(n,t)||Um.easeOut):Um[e]}function Eb(e,t,n,{delay:i=0,duration:o=300,repeat:r=0,repeatType:s="loop",ease:a="easeOut",times:l}={},u=void 0){const d={[t]:n};l&&(d.offset=l);const p=qx(a,o);Array.isArray(p)&&(d.easing=p);const h={delay:i,duration:o,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:r+1,direction:s==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function jx(e){return typeof e=="function"&&"applyToOptions"in e}function Cb({type:e,...t}){return jx(e)&&$x()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Nb extends nf{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:o,pseudoElement:r,allowFlatten:s=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!r,this.allowFlatten=s,this.options=t,qd(typeof t.type!="string");const u=Cb(t);this.animation=Eb(n,i,o,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const d=tf(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):xb(n,i,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return Pt(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Pt(t)}get time(){return Pt(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=rn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Sb()?(this.animation.timeline=t,Mt):n(this)}}const Jx={anticipate:Cx,backInOut:Ex,circInOut:Ix};function Ib(e){return e in Jx}function kb(e){typeof e.ease=="string"&&Ib(e.ease)&&(e.ease=Jx[e.ease])}const Vm=10;class _b extends Nb{constructor(t){kb(t),zx(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:o,element:r,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new of({...s,autoplay:!1}),l=rn(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Vm).value,a.sample(l).value,Vm),a.stop()}}const Gm=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(qn.test(e)||e==="0")&&!e.startsWith("url("));function Ab(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Pb(e,t,n,i){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],s=Gm(o,t),a=Gm(r,t);return!s||!a?!1:Ab(e)||(n==="spring"||jx(n))&&i}function mc(e){e.duration=0,e.type="keyframes"}const bb=new Set(["opacity","clipPath","filter","transform"]),Rb=jd(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Mb(e){var d;const{motionValue:t,name:n,repeatDelay:i,repeatType:o,damping:r,type:s}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return Rb()&&n&&bb.has(n)&&(n!=="transform"||!u)&&!l&&!i&&o!=="mirror"&&r!==0&&s!=="inertia"}const Db=40;class Lb extends nf{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:r=0,repeatType:s="loop",keyframes:a,name:l,motionValue:u,element:d,...p}){var v;super(),this.stop=()=>{var T,w;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=ct.now();const h={autoplay:t,delay:n,type:i,repeat:o,repeatDelay:r,repeatType:s,name:l,motionValue:u,element:d,...p},g=(d==null?void 0:d.KeyframeResolver)||rf;this.keyframeResolver=new g(a,(T,w,x)=>this.onKeyframesResolved(T,w,h,!x),l,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,i,o){this.keyframeResolver=void 0;const{name:r,type:s,velocity:a,delay:l,isHandoff:u,onUpdate:d}=i;this.resolvedAt=ct.now(),Pb(t,r,s,a)||((vn.instantAnimations||!l)&&(d==null||d(tf(t,i,n))),t[0]=t[t.length-1],mc(i),i.repeat=0);const h={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>Db?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},g=!u&&Mb(h)?new _b({...h,element:h.motionValue.owner.current}):new of(h);g.finished.then(()=>this.notifyFinished()).catch(Mt),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),yb()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Fb=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ub(e){const t=Fb.exec(e);if(!t)return[,];const[,n,i,o]=t;return[`--${n??i}`,o]}function Wx(e,t,n=1){const[i,o]=Ub(e);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const s=r.trim();return mx(s)?parseFloat(s):s}return Yd(o)?Wx(o,t,n+1):o}function sf(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Kx=new Set(["width","height","top","left","right","bottom",...wo]),Vb={test:e=>e==="auto",parse:e=>e},Yx=e=>t=>t.test(e),Xx=[To,Q,sn,Nn,AP,_P,Vb],Bm=e=>Xx.find(Yx(e));function Gb(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||yx(e):!0}const Bb=new Set(["brightness","contrast","saturate","opacity"]);function zb(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Xd)||[];if(!i)return e;const o=n.replace(i,"");let r=Bb.has(t)?1:0;return i!==n&&(r*=100),t+"("+r+o+")"}const Ob=/\b([a-z-]*)\(.*?\)/gu,gc={...qn,getAnimatableNone:e=>{const t=e.match(Ob);return t?t.map(zb).join(" "):e}},zm={...To,transform:Math.round},Hb={rotate:Nn,rotateX:Nn,rotateY:Nn,rotateZ:Nn,scale:ls,scaleX:ls,scaleY:ls,scaleZ:ls,skew:Nn,skewX:Nn,skewY:Nn,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:wr,originX:_m,originY:_m,originZ:Q},lf={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q,...Hb,zIndex:zm,fillOpacity:wr,strokeOpacity:wr,numOctaves:zm},$b={...lf,color:Me,backgroundColor:Me,outlineColor:Me,fill:Me,stroke:Me,borderColor:Me,borderTopColor:Me,borderRightColor:Me,borderBottomColor:Me,borderLeftColor:Me,filter:gc,WebkitFilter:gc},Qx=e=>$b[e];function Zx(e,t){let n=Qx(e);return n!==gc&&(n=qn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const qb=new Set(["auto","none","0"]);function jb(e,t,n){let i=0,o;for(;i<e.length&&!o;){const r=e[i];typeof r=="string"&&!qb.has(r)&&Er(r).values.length&&(o=e[i]),i++}if(o&&n)for(const r of t)e[r]=Zx(n,o)}class Jb extends rf{constructor(t,n,i,o,r){super(t,n,i,o,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),Yd(u))){const d=Wx(u,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Kx.has(i)||t.length!==2)return;const[o,r]=t,s=Bm(o),a=Bm(r);if(s!==a)if(Fm(s)&&Fm(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else pi[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let o=0;o<t.length;o++)(t[o]===null||Gb(t[o]))&&i.push(o);i.length&&jb(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pi[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(i,o).jump(o,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const r=i.length-1,s=i[r];i[r]=pi[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Wb(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const o=(n==null?void 0:n[e])??i.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const eS=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function tS(e){return gx(e)&&"offsetHeight"in e}const Om=30,Kb=e=>!isNaN(parseFloat(e));class Yb{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const o=ct.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ct.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Kb(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Jd);const i=this.events[t].add(n);return t==="change"?()=>{i(),we.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ct.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Om)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Om);return vx(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fo(e,t){return new Yb(e,t)}const{schedule:af}=Ax(queueMicrotask,!1),zt={x:!1,y:!1};function nS(){return zt.x||zt.y}function Xb(e){return e==="x"||e==="y"?zt[e]?null:(zt[e]=!0,()=>{zt[e]=!1}):zt.x||zt.y?null:(zt.x=zt.y=!0,()=>{zt.x=zt.y=!1})}function iS(e,t){const n=Wb(e),i=new AbortController,o={passive:!0,...t,signal:i.signal};return[n,o,()=>i.abort()]}function Hm(e){return!(e.pointerType==="touch"||nS())}function Qb(e,t,n={}){const[i,o,r]=iS(e,n),s=a=>{if(!Hm(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const d=p=>{Hm(p)&&(u(p),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,o)};return i.forEach(a=>{a.addEventListener("pointerenter",s,o)}),r}const oS=(e,t)=>t?e===t?!0:oS(e,t.parentElement):!1,uf=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Zb=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function eR(e){return Zb.has(e.tagName)||e.tabIndex!==-1}const _s=new WeakSet;function $m(e){return t=>{t.key==="Enter"&&e(t)}}function La(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const tR=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=$m(()=>{if(_s.has(n))return;La(n,"down");const o=$m(()=>{La(n,"up")}),r=()=>La(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",r,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function qm(e){return uf(e)&&!nS()}function nR(e,t,n={}){const[i,o,r]=iS(e,n),s=a=>{const l=a.currentTarget;if(!qm(a))return;_s.add(l);const u=t(l,a),d=(g,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",h),_s.has(l)&&_s.delete(l),qm(g)&&typeof u=="function"&&u(g,{success:v})},p=g=>{d(g,l===window||l===document||n.useGlobalTarget||oS(l,g.target))},h=g=>{d(g,!1)};window.addEventListener("pointerup",p,o),window.addEventListener("pointercancel",h,o)};return i.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",s,o),tS(a)&&(a.addEventListener("focus",u=>tR(u,o)),!eR(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function rS(e){return gx(e)&&"ownerSVGElement"in e}function iR(e){return rS(e)&&e.tagName==="svg"}const Ze=e=>!!(e&&e.getVelocity),oR=[...Xx,Me,qn],rR=e=>oR.find(Yx(e)),cf=A.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function jm(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function sR(...e){return t=>{let n=!1;const i=e.map(o=>{const r=jm(o,t);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let o=0;o<i.length;o++){const r=i[o];typeof r=="function"?r():jm(e[o],null)}}}}function lR(...e){return A.useCallback(sR(...e),e)}class aR extends A.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,o=tS(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=o-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function uR({children:e,isPresent:t,anchorX:n,root:i}){const o=A.useId(),r=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=A.useContext(cf),l=lR(r,e==null?void 0:e.ref);return A.useInsertionEffect(()=>{const{width:u,height:d,top:p,left:h,right:g}=s.current;if(t||!r.current||!u||!d)return;const v=n==="left"?`left: ${h}`:`right: ${g}`;r.current.dataset.motionPopId=o;const T=document.createElement("style");a&&(T.nonce=a);const w=i??document.head;return w.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${v}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(T)&&w.removeChild(T)}},[t]),m.jsx(aR,{isPresent:t,childRef:r,sizeRef:s,children:A.cloneElement(e,{ref:l})})}const cR=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:o,presenceAffectsLayout:r,mode:s,anchorX:a,root:l})=>{const u=zd(dR),d=A.useId();let p=!0,h=A.useMemo(()=>(p=!1,{id:d,initial:t,isPresent:n,custom:o,onExitComplete:g=>{u.set(g,!0);for(const v of u.values())if(!v)return;i&&i()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,i]);return r&&p&&(h={...h}),A.useMemo(()=>{u.forEach((g,v)=>u.set(v,!1))},[n]),A.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),s==="popLayout"&&(e=m.jsx(uR,{isPresent:n,anchorX:a,root:l,children:e})),m.jsx(ql.Provider,{value:h,children:e})};function dR(){return new Map}function sS(e=!0){const t=A.useContext(ql);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=t,r=A.useId();A.useEffect(()=>{if(e)return o(r)},[e]);const s=A.useCallback(()=>e&&i&&i(r),[r,i,e]);return!n&&i?[!1,s]:[!0]}const as=e=>e.key||"";function Jm(e){const t=[];return A.Children.forEach(e,n=>{A.isValidElement(n)&&t.push(n)}),t}const It=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:r="sync",propagate:s=!1,anchorX:a="left",root:l})=>{const[u,d]=sS(s),p=A.useMemo(()=>Jm(e),[e]),h=s&&!u?[]:p.map(as),g=A.useRef(!0),v=A.useRef(p),T=zd(()=>new Map),[w,x]=A.useState(p),[y,S]=A.useState(p);hx(()=>{g.current=!1,v.current=p;for(let C=0;C<y.length;C++){const I=as(y[C]);h.includes(I)?T.delete(I):T.get(I)!==!0&&T.set(I,!1)}},[y,h.length,h.join("-")]);const E=[];if(p!==w){let C=[...p];for(let I=0;I<y.length;I++){const _=y[I],P=as(_);h.includes(P)||(C.splice(I,0,_),E.push(_))}return r==="wait"&&E.length&&(C=E),S(Jm(C)),x(p),null}const{forceRender:N}=A.useContext(Bd);return m.jsx(m.Fragment,{children:y.map(C=>{const I=as(C),_=s&&!u?!1:p===y||h.includes(I),P=()=>{if(T.has(I))T.set(I,!0);else return;let R=!0;T.forEach(L=>{L||(R=!1)}),R&&(N==null||N(),S(v.current),s&&(d==null||d()),i&&i())};return m.jsx(cR,{isPresent:_,initial:!g.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:r,root:l,onExitComplete:_?void 0:P,anchorX:a,children:C},I)})})},lS=A.createContext({strict:!1}),Wm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},po={};for(const e in Wm)po[e]={isEnabled:t=>Wm[e].some(n=>!!t[n])};function fR(e){for(const t in e)po[t]={...po[t],...e[t]}}const pR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pR.has(e)}let aS=e=>!pl(e);function hR(e){typeof e=="function"&&(aS=t=>t.startsWith("on")?!pl(t):e(t))}try{hR(require("@emotion/is-prop-valid").default)}catch{}function mR(e,t,n){const i={};for(const o in e)o==="values"&&typeof e.values=="object"||(aS(o)||n===!0&&pl(o)||!t&&!pl(o)||e.draggable&&o.startsWith("onDrag"))&&(i[o]=e[o]);return i}const jl=A.createContext({});function Jl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Cr(e){return typeof e=="string"||Array.isArray(e)}const df=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ff=["initial",...df];function Wl(e){return Jl(e.animate)||ff.some(t=>Cr(e[t]))}function uS(e){return!!(Wl(e)||e.variants)}function gR(e,t){if(Wl(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Cr(n)?n:void 0,animate:Cr(i)?i:void 0}}return e.inherit!==!1?t:{}}function yR(e){const{initial:t,animate:n}=gR(e,A.useContext(jl));return A.useMemo(()=>({initial:t,animate:n}),[Km(t),Km(n)])}function Km(e){return Array.isArray(e)?e.join(" "):e}function Ym(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Fo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Q.test(e))e=parseFloat(e);else return e;const n=Ym(e,t.target.x),i=Ym(e,t.target.y);return`${n}% ${i}%`}},vR={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,o=qn.parse(e);if(o.length>5)return i;const r=qn.createTransformer(e),s=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;o[0+s]/=a,o[1+s]/=l;const u=Ie(a,l,.5);return typeof o[2+s]=="number"&&(o[2+s]/=u),typeof o[3+s]=="number"&&(o[3+s]/=u),r(o)}},yc={borderRadius:{...Fo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fo,borderTopRightRadius:Fo,borderBottomLeftRadius:Fo,borderBottomRightRadius:Fo,boxShadow:vR};function cS(e,{layout:t,layoutId:n}){return Eo.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!yc[e]||e==="opacity")}const xR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SR=wo.length;function TR(e,t,n){let i="",o=!0;for(let r=0;r<SR;r++){const s=wo[r],a=e[s];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(s.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=eS(a,lf[s]);if(!l){o=!1;const d=xR[s]||s;i+=`${d}(${u}) `}n&&(t[s]=u)}}return i=i.trim(),n?i=n(t,o?"":i):o&&(i="none"),i}function pf(e,t,n){const{style:i,vars:o,transformOrigin:r}=e;let s=!1,a=!1;for(const l in t){const u=t[l];if(Eo.has(l)){s=!0;continue}else if(bx(l)){o[l]=u;continue}else{const d=eS(u,lf[l]);l.startsWith("origin")?(a=!0,r[l]=d):i[l]=d}}if(t.transform||(s||n?i.transform=TR(t,e.transform,n):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:d=0}=r;i.transformOrigin=`${l} ${u} ${d}`}}const hf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dS(e,t,n){for(const i in t)!Ze(t[i])&&!cS(i,n)&&(e[i]=t[i])}function wR({transformTemplate:e},t){return A.useMemo(()=>{const n=hf();return pf(n,t,e),Object.assign({},n.vars,n.style)},[t])}function ER(e,t){const n=e.style||{},i={};return dS(i,n,e),Object.assign(i,wR(e,t)),i}function CR(e,t){const n={},i=ER(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const NR={offset:"stroke-dashoffset",array:"stroke-dasharray"},IR={offset:"strokeDashoffset",array:"strokeDasharray"};function kR(e,t,n=1,i=0,o=!0){e.pathLength=1;const r=o?NR:IR;e[r.offset]=Q.transform(-i);const s=Q.transform(t),a=Q.transform(n);e[r.array]=`${s} ${a}`}function fS(e,{attrX:t,attrY:n,attrScale:i,pathLength:o,pathSpacing:r=1,pathOffset:s=0,...a},l,u,d){if(pf(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:h}=e;p.transform&&(h.transform=p.transform,delete p.transform),(h.transform||p.transformOrigin)&&(h.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),i!==void 0&&(p.scale=i),o!==void 0&&kR(p,o,r,s,!1)}const pS=()=>({...hf(),attrs:{}}),hS=e=>typeof e=="string"&&e.toLowerCase()==="svg";function _R(e,t,n,i){const o=A.useMemo(()=>{const r=pS();return fS(r,t,hS(i),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};dS(r,e.style,e),o.style={...r,...o.style}}return o}const AR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mf(e){return typeof e!="string"||e.includes("-")?!1:!!(AR.indexOf(e)>-1||/[A-Z]/u.test(e))}function PR(e,t,n,{latestValues:i},o,r=!1){const a=(mf(e)?_R:CR)(t,i,o,e),l=mR(t,typeof e=="string",r),u=e!==A.Fragment?{...l,...a,ref:n}:{},{children:d}=t,p=A.useMemo(()=>Ze(d)?d.get():d,[d]);return A.createElement(e,{...u,children:p})}function Xm(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function gf(e,t,n,i){if(typeof t=="function"){const[o,r]=Xm(i);t=t(n!==void 0?n:e.custom,o,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,r]=Xm(i);t=t(n!==void 0?n:e.custom,o,r)}return t}function As(e){return Ze(e)?e.get():e}function bR({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,o){return{latestValues:RR(n,i,o,e),renderState:t()}}function RR(e,t,n,i){const o={},r=i(e,{});for(const h in r)o[h]=As(r[h]);let{initial:s,animate:a}=e;const l=Wl(e),u=uS(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const p=d?a:s;if(p&&typeof p!="boolean"&&!Jl(p)){const h=Array.isArray(p)?p:[p];for(let g=0;g<h.length;g++){const v=gf(e,h[g]);if(v){const{transitionEnd:T,transition:w,...x}=v;for(const y in x){let S=x[y];if(Array.isArray(S)){const E=d?S.length-1:0;S=S[E]}S!==null&&(o[y]=S)}for(const y in T)o[y]=T[y]}}}return o}const mS=e=>(t,n)=>{const i=A.useContext(jl),o=A.useContext(ql),r=()=>bR(e,t,i,o);return n?r():zd(r)};function yf(e,t,n){var r;const{style:i}=e,o={};for(const s in i)(Ze(i[s])||t.style&&Ze(t.style[s])||cS(s,e)||((r=n==null?void 0:n.getValue(s))==null?void 0:r.liveStyle)!==void 0)&&(o[s]=i[s]);return o}const MR=mS({scrapeMotionValuesFromProps:yf,createRenderState:hf});function gS(e,t,n){const i=yf(e,t,n);for(const o in e)if(Ze(e[o])||Ze(t[o])){const r=wo.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[r]=e[o]}return i}const DR=mS({scrapeMotionValuesFromProps:gS,createRenderState:pS}),LR=Symbol.for("motionComponentSymbol");function Hi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function FR(e,t,n){return A.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Hi(n)&&(n.current=i))},[t])}const vf=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),UR="framerAppearId",yS="data-"+vf(UR),vS=A.createContext({});function VR(e,t,n,i,o){var T,w;const{visualElement:r}=A.useContext(jl),s=A.useContext(lS),a=A.useContext(ql),l=A.useContext(cf).reducedMotion,u=A.useRef(null);i=i||s.renderer,!u.current&&i&&(u.current=i(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,p=A.useContext(vS);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&GR(u.current,n,o,p);const h=A.useRef(!1);A.useInsertionEffect(()=>{d&&h.current&&d.update(n,a)});const g=n[yS],v=A.useRef(!!g&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,g))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,g)));return hx(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),v.current&&d.animationState&&d.animationState.animateChanges())}),A.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,g)}),v.current=!1),d.enteringChildren=void 0)}),d}function GR(e,t,n,i){const{layoutId:o,layout:r,drag:s,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:xS(e.parent)),e.projection.setOptions({layoutId:o,layout:r,alwaysMeasureLayout:!!s||a&&Hi(a),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:l,layoutRoot:u})}function xS(e){if(e)return e.options.allowProjection!==!1?e.projection:xS(e.parent)}function Fa(e,{forwardMotionProps:t=!1}={},n,i){n&&fR(n);const o=mf(e)?DR:MR;function r(a,l){let u;const d={...A.useContext(cf),...a,layoutId:BR(a)},{isStatic:p}=d,h=yR(a),g=o(a,p);if(!p&&Od){zR();const v=OR(d);u=v.MeasureLayout,h.visualElement=VR(e,g,d,i,v.ProjectionNode)}return m.jsxs(jl.Provider,{value:h,children:[u&&h.visualElement?m.jsx(u,{visualElement:h.visualElement,...d}):null,PR(e,a,FR(g,h.visualElement,l),g,p,t)]})}r.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const s=A.forwardRef(r);return s[LR]=e,s}function BR({layoutId:e}){const t=A.useContext(Bd).id;return t&&e!==void 0?t+"-"+e:e}function zR(e,t){A.useContext(lS).strict}function OR(e){const{drag:t,layout:n}=po;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function HR(e,t){if(typeof Proxy>"u")return Fa;const n=new Map,i=(r,s)=>Fa(r,s,e,t),o=(r,s)=>i(r,s);return new Proxy(o,{get:(r,s)=>s==="create"?i:(n.has(s)||n.set(s,Fa(s,void 0,e,t)),n.get(s))})}function SS({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function $R({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function qR(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Ua(e){return e===void 0||e===1}function vc({scale:e,scaleX:t,scaleY:n}){return!Ua(e)||!Ua(t)||!Ua(n)}function ni(e){return vc(e)||TS(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function TS(e){return Qm(e.x)||Qm(e.y)}function Qm(e){return e&&e!=="0%"}function hl(e,t,n){const i=e-n,o=t*i;return n+o}function Zm(e,t,n,i,o){return o!==void 0&&(e=hl(e,o,i)),hl(e,n,i)+t}function xc(e,t=0,n=1,i,o){e.min=Zm(e.min,t,n,i,o),e.max=Zm(e.max,t,n,i,o)}function wS(e,{x:t,y:n}){xc(e.x,t.translate,t.scale,t.originPoint),xc(e.y,n.translate,n.scale,n.originPoint)}const e0=.999999999999,t0=1.0000000000001;function jR(e,t,n,i=!1){const o=n.length;if(!o)return;t.x=t.y=1;let r,s;for(let a=0;a<o;a++){r=n[a],s=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&qi(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,wS(e,s)),i&&ni(r.latestValues)&&qi(e,r.latestValues))}t.x<t0&&t.x>e0&&(t.x=1),t.y<t0&&t.y>e0&&(t.y=1)}function $i(e,t){e.min=e.min+t,e.max=e.max+t}function n0(e,t,n,i,o=.5){const r=Ie(e.min,e.max,o);xc(e,t,n,r,i)}function qi(e,t){n0(e.x,t.x,t.scaleX,t.scale,t.originX),n0(e.y,t.y,t.scaleY,t.scale,t.originY)}function ES(e,t){return SS(qR(e.getBoundingClientRect(),t))}function JR(e,t,n){const i=ES(e,n),{scroll:o}=t;return o&&($i(i.x,o.offset.x),$i(i.y,o.offset.y)),i}const i0=()=>({translate:0,scale:1,origin:0,originPoint:0}),ji=()=>({x:i0(),y:i0()}),o0=()=>({min:0,max:0}),Ue=()=>({x:o0(),y:o0()}),Sc={current:null},CS={current:!1};function WR(){if(CS.current=!0,!!Od)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Sc.current=e.matches;e.addEventListener("change",t),t()}else Sc.current=!1}const KR=new WeakMap;function YR(e,t,n){for(const i in t){const o=t[i],r=n[i];if(Ze(o))e.addValue(i,o);else if(Ze(r))e.addValue(i,fo(o,{owner:e}));else if(r!==o)if(e.hasValue(i)){const s=e.getValue(i);s.liveStyle===!0?s.jump(o):s.hasAnimated||s.set(o)}else{const s=e.getStaticValue(i);e.addValue(i,fo(s!==void 0?s:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const r0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class XR{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:r,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ct.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,we.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Wl(n),this.isVariantNode=uS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in p){const g=p[h];l[h]!==void 0&&Ze(g)&&g.set(l[h])}}mount(t){var n;this.current=t,KR.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),CS.current||WR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sc.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),$n(this.notifyUpdate),$n(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Eo.has(t);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&we.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),r&&r(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in po){const n=po[t];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[t]&&o&&i(this.props)&&(this.features[t]=new o(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<r0.length;i++){const o=r0[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const r="on"+o,s=t[r];s&&(this.propEventSubscriptions[o]=this.on(o,s))}this.prevMotionValues=YR(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=fo(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(mx(i)||yx(i))?i=parseFloat(i):!rR(i)&&qn.test(n)&&(i=Zx(t,n)),this.setBaseTarget(t,Ze(i)?i.get():i)),Ze(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const s=gf(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);s&&(i=s[t])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Ze(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Jd),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){af.render(this.render)}}class NS extends XR{constructor(){super(...arguments),this.KeyframeResolver=Jb}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ze(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function IS(e,{style:t,vars:n},i,o){const r=e.style;let s;for(s in t)r[s]=t[s];o==null||o.applyProjectionStyles(r,i);for(s in n)r.setProperty(s,n[s])}function QR(e){return window.getComputedStyle(e)}class ZR extends NS{constructor(){super(...arguments),this.type="html",this.renderInstance=IS}readValueFromInstance(t,n){var i;if(Eo.has(n))return(i=this.projection)!=null&&i.isProjecting?cc(n):fb(t,n);{const o=QR(t),r=(bx(n)?o.getPropertyValue(n):o[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return ES(t,n)}build(t,n,i){pf(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return yf(t,n,i)}}const kS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eM(e,t,n,i){IS(e,t,void 0,i);for(const o in t.attrs)e.setAttribute(kS.has(o)?o:vf(o),t.attrs[o])}class tM extends NS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ue}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Eo.has(n)){const i=Qx(n);return i&&i.default||0}return n=kS.has(n)?n:vf(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return gS(t,n,i)}build(t,n,i){fS(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,o){eM(t,n,i,o)}mount(t){this.isSVGTag=hS(t.tagName),super.mount(t)}}const nM=(e,t)=>mf(e)?new tM(t):new ZR(t,{allowProjection:e!==A.Fragment});function no(e,t,n){const i=e.getProps();return gf(i,t,n!==void 0?n:i.custom,e)}const Tc=e=>Array.isArray(e);function iM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fo(n))}function oM(e){return Tc(e)?e[e.length-1]||0:e}function rM(e,t){const n=no(e,t);let{transitionEnd:i={},transition:o={},...r}=n||{};r={...r,...i};for(const s in r){const a=oM(r[s]);iM(e,s,a)}}function sM(e){return!!(Ze(e)&&e.add)}function wc(e,t){const n=e.getValue("willChange");if(sM(n))return n.add(t);if(!n&&vn.WillChange){const i=new vn.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function _S(e){return e.props[yS]}const lM=e=>e!==null;function aM(e,{repeat:t,repeatType:n="loop"},i){const o=e.filter(lM),r=t&&n!=="loop"&&t%2===1?0:o.length-1;return o[r]}const uM={type:"spring",stiffness:500,damping:25,restSpeed:10},cM=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),dM={type:"keyframes",duration:.8},fM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pM=(e,{keyframes:t})=>t.length>2?dM:Eo.has(e)?e.startsWith("scale")?cM(t[1]):uM:fM;function hM({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:r,repeatType:s,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const xf=(e,t,n,i={},o,r)=>s=>{const a=sf(i,e)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-rn(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:h=>{t.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:r?void 0:o};hM(a)||Object.assign(d,pM(e,d)),d.duration&&(d.duration=rn(d.duration)),d.repeatDelay&&(d.repeatDelay=rn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(mc(d),d.delay===0&&(p=!0)),(vn.instantAnimations||vn.skipAnimations)&&(p=!0,mc(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,p&&!r&&t.get()!==void 0){const h=aM(d.keyframes,a);if(h!==void 0){we.update(()=>{d.onUpdate(h),d.onComplete()});return}}return a.isSync?new of(d):new Lb(d)};function mM({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function AS(e,t,{delay:n=0,transitionOverride:i,type:o}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:s,...a}=t;i&&(r=i);const l=[],u=o&&e.animationState&&e.animationState.getState()[o];for(const d in a){const p=e.getValue(d,e.latestValues[d]??null),h=a[d];if(h===void 0||u&&mM(u,d))continue;const g={delay:n,...sf(r||{},d)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(h)&&h===v&&!g.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const x=_S(e);if(x){const y=window.MotionHandoffAnimation(x,d,we);y!==null&&(g.startTime=y,T=!0)}}wc(e,d),p.start(xf(d,p,h,e.shouldReduceMotion&&Kx.has(d)?{type:!1}:g,e,T));const w=p.animation;w&&l.push(w)}return s&&Promise.all(l).then(()=>{we.update(()=>{s&&rM(e,s)})}),l}function PS(e,t,n,i=0,o=1){const r=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),s=e.size,a=(s-1)*i;return typeof n=="function"?n(r,s):o===1?r*i:a-r*i}function Ec(e,t,n={}){var l;const i=no(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const r=i?()=>Promise.all(AS(e,i,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:h}=o;return gM(e,t,u,d,p,h,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[u,d]=a==="beforeChildren"?[r,s]:[s,r];return u().then(()=>d())}else return Promise.all([r(),s(n.delay)])}function gM(e,t,n=0,i=0,o=0,r=1,s){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Ec(l,t,{...s,delay:n+(typeof i=="function"?0:i)+PS(e.variantChildren,l,i,o,r)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function yM(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const o=t.map(r=>Ec(e,r,n));i=Promise.all(o)}else if(typeof t=="string")i=Ec(e,t,n);else{const o=typeof t=="function"?no(e,t,n.custom):t;i=Promise.all(AS(e,o,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function bS(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const vM=ff.length;function RS(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?RS(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<vM;n++){const i=ff[n],o=e.props[i];(Cr(o)||o===!1)&&(t[i]=o)}return t}const xM=[...df].reverse(),SM=df.length;function TM(e){return t=>Promise.all(t.map(({animation:n,options:i})=>yM(e,n,i)))}function wM(e){let t=TM(e),n=s0(),i=!0;const o=l=>(u,d)=>{var h;const p=no(e,d,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(p){const{transition:g,transitionEnd:v,...T}=p;u={...u,...T,...v}}return u};function r(l){t=l(e)}function s(l){const{props:u}=e,d=RS(e.parent)||{},p=[],h=new Set;let g={},v=1/0;for(let w=0;w<SM;w++){const x=xM[w],y=n[x],S=u[x]!==void 0?u[x]:d[x],E=Cr(S),N=x===l?y.isActive:null;N===!1&&(v=w);let C=S===d[x]&&S!==u[x]&&E;if(C&&i&&e.manuallyAnimateOnMount&&(C=!1),y.protectedKeys={...g},!y.isActive&&N===null||!S&&!y.prevProp||Jl(S)||typeof S=="boolean")continue;const I=EM(y.prevProp,S);let _=I||x===l&&y.isActive&&!C&&E||w>v&&E,P=!1;const R=Array.isArray(S)?S:[S];let L=R.reduce(o(x),{});N===!1&&(L={});const{prevResolvedValues:ee={}}=y,H={...ee,...L},$=J=>{_=!0,h.has(J)&&(P=!0,h.delete(J)),y.needsAnimating[J]=!0;const D=e.getValue(J);D&&(D.liveStyle=!1)};for(const J in H){const D=L[J],V=ee[J];if(g.hasOwnProperty(J))continue;let z=!1;Tc(D)&&Tc(V)?z=!bS(D,V):z=D!==V,z?D!=null?$(J):h.add(J):D!==void 0&&h.has(J)?$(J):y.protectedKeys[J]=!0}y.prevProp=S,y.prevResolvedValues=L,y.isActive&&(g={...g,...L}),i&&e.blockInitialAnimation&&(_=!1);const se=C&&I;_&&(!se||P)&&p.push(...R.map(J=>{const D={type:x};if(typeof J=="string"&&i&&!se&&e.manuallyAnimateOnMount&&e.parent){const{parent:V}=e,z=no(V,J);if(V.enteringChildren&&z){const{delayChildren:te}=z.transition||{};D.delay=PS(V.enteringChildren,e,te)}}return{animation:J,options:D}}))}if(h.size){const w={};if(typeof u.initial!="boolean"){const x=no(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(w.transition=x.transition)}h.forEach(x=>{const y=e.getBaseTarget(x),S=e.getValue(x);S&&(S.liveStyle=!0),w[x]=y??null}),p.push({animation:w})}let T=!!p.length;return i&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(T=!1),i=!1,T?t(p):Promise.resolve()}function a(l,u){var p;if(n[l].isActive===u)return Promise.resolve();(p=e.variantChildren)==null||p.forEach(h=>{var g;return(g=h.animationState)==null?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:r,getState:()=>n,reset:()=>{n=s0()}}}function EM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!bS(t,e):!1}function Qn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function s0(){return{animate:Qn(!0),whileInView:Qn(),whileHover:Qn(),whileTap:Qn(),whileDrag:Qn(),whileFocus:Qn(),exit:Qn()}}class Yn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class CM extends Yn{constructor(t){super(t),t.animationState||(t.animationState=wM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Jl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let NM=0;class IM extends Yn{constructor(){super(...arguments),this.id=NM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const kM={animation:{Feature:CM},exit:{Feature:IM}};function Nr(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function Lr(e){return{point:{x:e.pageX,y:e.pageY}}}const _M=e=>t=>uf(t)&&e(t,Lr(t));function tr(e,t,n,i){return Nr(e,t,_M(n),i)}const MS=1e-4,AM=1-MS,PM=1+MS,DS=.01,bM=0-DS,RM=0+DS;function it(e){return e.max-e.min}function MM(e,t,n){return Math.abs(e-t)<=n}function l0(e,t,n,i=.5){e.origin=i,e.originPoint=Ie(t.min,t.max,e.origin),e.scale=it(n)/it(t),e.translate=Ie(n.min,n.max,e.origin)-e.originPoint,(e.scale>=AM&&e.scale<=PM||isNaN(e.scale))&&(e.scale=1),(e.translate>=bM&&e.translate<=RM||isNaN(e.translate))&&(e.translate=0)}function nr(e,t,n,i){l0(e.x,t.x,n.x,i?i.originX:void 0),l0(e.y,t.y,n.y,i?i.originY:void 0)}function a0(e,t,n){e.min=n.min+t.min,e.max=e.min+it(t)}function DM(e,t,n){a0(e.x,t.x,n.x),a0(e.y,t.y,n.y)}function u0(e,t,n){e.min=t.min-n.min,e.max=e.min+it(t)}function ml(e,t,n){u0(e.x,t.x,n.x),u0(e.y,t.y,n.y)}function Ct(e){return[e("x"),e("y")]}const LS=({current:e})=>e?e.ownerDocument.defaultView:null,c0=(e,t)=>Math.abs(e-t);function LM(e,t){const n=c0(e.x,t.x),i=c0(e.y,t.y);return Math.sqrt(n**2+i**2)}class FS{constructor(t,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:r=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Ga(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=LM(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:T}=h,{timestamp:w}=qe;this.history.push({...T,timestamp:w});const{onStart:x,onMove:y}=this.handlers;g||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Va(g,this.transformPagePoint),we.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:v,onSessionEnd:T,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ga(h.type==="pointercancel"?this.lastMoveEventInfo:Va(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(h,x),T&&T(h,x)},!uf(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=s,this.contextWindow=o||window;const a=Lr(t),l=Va(a,this.transformPagePoint),{point:u}=l,{timestamp:d}=qe;this.history=[{...u,timestamp:d}];const{onSessionStart:p}=n;p&&p(t,Ga(l,this.history)),this.removeListeners=Rr(tr(this.contextWindow,"pointermove",this.handlePointerMove),tr(this.contextWindow,"pointerup",this.handlePointerUp),tr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),$n(this.updatePoint)}}function Va(e,t){return t?{point:t(e.point)}:e}function d0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ga({point:e},t){return{point:e,delta:d0(e,US(t)),offset:d0(e,FM(t)),velocity:UM(t,.1)}}function FM(e){return e[0]}function US(e){return e[e.length-1]}function UM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const o=US(e);for(;n>=0&&(i=e[n],!(o.timestamp-i.timestamp>rn(t)));)n--;if(!i)return{x:0,y:0};const r=Pt(o.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const s={x:(o.x-i.x)/r,y:(o.y-i.y)/r};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function VM(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?Ie(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?Ie(n,e,i.max):Math.min(e,n)),e}function f0(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function GM(e,{top:t,left:n,bottom:i,right:o}){return{x:f0(e.x,n,o),y:f0(e.y,t,i)}}function p0(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function BM(e,t){return{x:p0(e.x,t.x),y:p0(e.y,t.y)}}function zM(e,t){let n=.5;const i=it(e),o=it(t);return o>i?n=Tr(t.min,t.max-i,e.min):i>o&&(n=Tr(e.min,e.max-o,t.min)),yn(0,1,n)}function OM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Cc=.35;function HM(e=Cc){return e===!1?e=0:e===!0&&(e=Cc),{x:h0(e,"left","right"),y:h0(e,"top","bottom")}}function h0(e,t,n){return{min:m0(e,t),max:m0(e,n)}}function m0(e,t){return typeof e=="number"?e:e[t]||0}const $M=new WeakMap;class qM{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ue(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Lr(p).point)},s=(p,h)=>{const{drag:g,dragPropagation:v,onDragStart:T}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Xb(g),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ct(x=>{let y=this.getAxisMotionValue(x).get()||0;if(sn.test(y)){const{projection:S}=this.visualElement;if(S&&S.layout){const E=S.layout.layoutBox[x];E&&(y=it(E)*(parseFloat(y)/100))}}this.originPoint[x]=y}),T&&we.postRender(()=>T(p,h)),wc(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(p,h)=>{this.latestPointerEvent=p,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:T,onDrag:w}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:x}=h;if(v&&this.currentDirection===null){this.currentDirection=jM(x),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),w&&w(p,h)},l=(p,h)=>{this.latestPointerEvent=p,this.latestPanInfo=h,this.stop(p,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ct(p=>{var h;return this.getAnimationState(p)==="paused"&&((h=this.getAxisMotionValue(p).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new FS(t,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:i,contextWindow:LS(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,o=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!o||!i)return;const{velocity:s}=o;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&we.postRender(()=>a(i,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:o}=this.getProps();if(!i||!us(t,o,this.currentDirection))return;const r=this.getAxisMotionValue(t);let s=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(s=VM(s,this.constraints[t],this.elastic[t])),r.set(s)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,o=this.constraints;t&&Hi(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=GM(i.layoutBox,t):this.constraints=!1,this.elastic=HM(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ct(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=OM(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Hi(t))return!1;const i=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const r=JR(i,o.root,this.visualElement.getTransformPagePoint());let s=BM(o.layout.layoutBox,r);if(n){const a=n($R(s));this.hasMutatedConstraints=!!a,a&&(s=SS(a))}return s}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:r,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Ct(d=>{if(!us(d,n,this.currentDirection))return;let p=l&&l[d]||{};s&&(p={min:0,max:0});const h=o?200:1e6,g=o?40:1e7,v={type:"inertia",velocity:i?t[d]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...r,...p};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return wc(this.visualElement,t),i.start(xf(t,i,0,n,this.visualElement,!1))}stopAnimation(){Ct(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ct(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Ct(n=>{const{drag:i}=this.getProps();if(!us(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,r=this.getAxisMotionValue(n);if(o&&o.layout){const{min:s,max:a}=o.layout.layoutBox[n];r.set(t[n]-Ie(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Hi(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Ct(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const l=a.get();o[s]=zM({min:l,max:l},this.constraints[s])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ct(s=>{if(!us(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];a.set(Ie(l,u,o[s]))})}addListeners(){if(!this.visualElement.current)return;$M.set(this.visualElement,this);const t=this.visualElement.current,n=tr(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Hi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,r=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),we.read(i);const s=Nr(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ct(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=l[d].translate,p.set(p.get()+l[d].translate))}),this.visualElement.render())});return()=>{s(),n(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:r=!1,dragElastic:s=Cc,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:r,dragElastic:s,dragMomentum:a}}}function us(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function jM(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class JM extends Yn{constructor(t){super(t),this.removeGroupControls=Mt,this.removeListeners=Mt,this.controls=new qM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mt}unmount(){this.removeGroupControls(),this.removeListeners()}}const g0=e=>(t,n)=>{e&&we.postRender(()=>e(t,n))};class WM extends Yn{constructor(){super(...arguments),this.removePointerDownListener=Mt}onPointerDown(t){this.session=new FS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LS(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:g0(t),onStart:g0(n),onMove:i,onEnd:(r,s)=>{delete this.session,o&&we.postRender(()=>o(r,s))}}}mount(){this.removePointerDownListener=tr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ps={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Ba=!1;class KM extends A.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:r}=t;r&&(n.group&&n.group.add(r),i&&i.register&&o&&i.register(r),Ba&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Ps.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:o,isPresent:r}=this.props,{projection:s}=i;return s&&(s.isPresent=r,Ba=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==r?s.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?s.promote():s.relegate()||we.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),af.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=t;Ba=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function VS(e){const[t,n]=sS(),i=A.useContext(Bd);return m.jsx(KM,{...e,layoutGroup:i,switchLayoutGroup:A.useContext(vS),isPresent:t,safeToRemove:n})}function YM(e,t,n){const i=Ze(e)?e:fo(e);return i.start(xf("",i,t,n)),i.animation}const XM=(e,t)=>e.depth-t.depth;class QM{constructor(){this.children=[],this.isDirty=!1}add(t){Hd(this.children,t),this.isDirty=!0}remove(t){$d(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(XM),this.isDirty=!1,this.children.forEach(t)}}function ZM(e,t){const n=ct.now(),i=({timestamp:o})=>{const r=o-n;r>=t&&($n(i),e(r-t))};return we.setup(i,!0),()=>$n(i)}const GS=["TopLeft","TopRight","BottomLeft","BottomRight"],eD=GS.length,y0=e=>typeof e=="string"?parseFloat(e):e,v0=e=>typeof e=="number"||Q.test(e);function tD(e,t,n,i,o,r){o?(e.opacity=Ie(0,n.opacity??1,nD(i)),e.opacityExit=Ie(t.opacity??1,0,iD(i))):r&&(e.opacity=Ie(t.opacity??1,n.opacity??1,i));for(let s=0;s<eD;s++){const a=`border${GS[s]}Radius`;let l=x0(t,a),u=x0(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||v0(l)===v0(u)?(e[a]=Math.max(Ie(y0(l),y0(u),i),0),(sn.test(u)||sn.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Ie(t.rotate||0,n.rotate||0,i))}function x0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const nD=BS(0,.5,Nx),iD=BS(.5,.95,Mt);function BS(e,t,n){return i=>i<e?0:i>t?1:n(Tr(e,t,i))}function S0(e,t){e.min=t.min,e.max=t.max}function Bt(e,t){S0(e.x,t.x),S0(e.y,t.y)}function T0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function w0(e,t,n,i,o){return e-=t,e=hl(e,1/n,i),o!==void 0&&(e=hl(e,1/o,i)),e}function oD(e,t=0,n=1,i=.5,o,r=e,s=e){if(sn.test(t)&&(t=parseFloat(t),t=Ie(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=Ie(r.min,r.max,i);e===r&&(a-=t),e.min=w0(e.min,t,n,a,o),e.max=w0(e.max,t,n,a,o)}function E0(e,t,[n,i,o],r,s){oD(e,t[n],t[i],t[o],t.scale,r,s)}const rD=["x","scaleX","originX"],sD=["y","scaleY","originY"];function C0(e,t,n,i){E0(e.x,t,rD,n?n.x:void 0,i?i.x:void 0),E0(e.y,t,sD,n?n.y:void 0,i?i.y:void 0)}function N0(e){return e.translate===0&&e.scale===1}function zS(e){return N0(e.x)&&N0(e.y)}function I0(e,t){return e.min===t.min&&e.max===t.max}function lD(e,t){return I0(e.x,t.x)&&I0(e.y,t.y)}function k0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function OS(e,t){return k0(e.x,t.x)&&k0(e.y,t.y)}function _0(e){return it(e.x)/it(e.y)}function A0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class aD{constructor(){this.members=[]}add(t){Hd(this.members,t),t.scheduleRender()}remove(t){if($d(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const r=this.members[o];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uD(e,t,n){let i="";const o=e.x.translate/t.x,r=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((o||r||s)&&(i=`translate3d(${o}px, ${r}px, ${s}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:p,rotateY:h,skewX:g,skewY:v}=n;u&&(i=`perspective(${u}px) ${i}`),d&&(i+=`rotate(${d}deg) `),p&&(i+=`rotateX(${p}deg) `),h&&(i+=`rotateY(${h}deg) `),g&&(i+=`skewX(${g}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const za=["","X","Y","Z"],cD=1e3;let dD=0;function Oa(e,t,n,i){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),i&&(i[e]=0))}function HS(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=_S(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",we,!(o||r))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&HS(i)}function $S({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(s={},a=t==null?void 0:t()){this.id=dD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hD),this.nodes.forEach(vD),this.nodes.forEach(xD),this.nodes.forEach(mD)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new QM)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Jd),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=rS(s)&&!iR(s),this.instance=s;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let d,p=0;const h=()=>this.root.updateBlockedByResize=!1;we.read(()=>{p=window.innerWidth}),e(s,()=>{const g=window.innerWidth;g!==p&&(p=g,this.root.updateBlockedByResize=!0,d&&d(),d=ZM(h,250),Ps.hasAnimatedSinceResize&&(Ps.hasAnimatedSinceResize=!1,this.nodes.forEach(R0)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||CD,{onLayoutAnimationStart:T,onLayoutAnimationComplete:w}=u.getProps(),x=!this.targetLayout||!OS(this.targetLayout,g),y=!p&&h;if(this.options.layoutRoot||this.resumeFrom||y||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...sf(v,"layout"),onPlay:T,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(d,y)}else p||R0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$n(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SD),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&HS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(P0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(b0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(yD),this.nodes.forEach(fD),this.nodes.forEach(pD)):this.nodes.forEach(b0),this.clearAllSnapshots();const a=ct.now();qe.delta=yn(0,1e3/60,a-qe.timestamp),qe.timestamp=a,qe.isProcessing=!0,Pa.update.process(qe),Pa.preRender.process(qe),Pa.render.process(qe),qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,af.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gD),this.sharedNodes.forEach(TD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,we.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){we.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!it(this.snapshot.measuredBox.x)&&!it(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!zS(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&this.instance&&(a||ni(this.latestValues)||d)&&(o(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),ND(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return Ue();const a=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(ID))){const{scroll:d}=this.root;d&&($i(a.x,d.offset.x),$i(a.y,d.offset.y))}return a}removeElementScroll(s){var l;const a=Ue();if(Bt(a,s),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:p,options:h}=d;d!==this.root&&p&&h.layoutScroll&&(p.wasRoot&&Bt(a,s),$i(a.x,p.offset.x),$i(a.y,p.offset.y))}return a}applyTransform(s,a=!1){const l=Ue();Bt(l,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&qi(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ni(d.latestValues)&&qi(l,d.latestValues)}return ni(this.latestValues)&&qi(l,this.latestValues),l}removeTransform(s){const a=Ue();Bt(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ni(u.latestValues))continue;vc(u.latestValues)&&u.updateSnapshot();const d=Ue(),p=u.measurePageBox();Bt(d,p),C0(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ni(this.latestValues)&&C0(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!this.layout||!(d||p))return;this.resolvedRelativeTargetAt=qe.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ue(),this.targetWithTransforms=Ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bt(this.target,this.layout.layoutBox),wS(this.target,this.targetDelta)):Bt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||vc(this.parent.latestValues)||TS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,a,l){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),ml(this.relativeTargetOrigin,a,l),Bt(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const s=this.getLead(),a=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===qe.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Bt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,h=this.treeScale.y;jR(this.layoutCorrected,this.treeScale,this.path,a),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Ue());const{target:g}=s;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(T0(this.prevProjectionDelta.x,this.projectionDelta.x),T0(this.prevProjectionDelta.y,this.projectionDelta.y)),nr(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==h||!A0(this.projectionDelta.x,this.prevProjectionDelta.x)||!A0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ji(),this.projectionDelta=ji(),this.projectionDeltaWithTransform=ji()}setAnimationOrigin(s,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},p=ji();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Ue(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,T=g!==v,w=this.getStack(),x=!w||w.members.length<=1,y=!!(T&&!x&&this.options.crossfade===!0&&!this.path.some(ED));this.animationProgress=0;let S;this.mixTargetDelta=E=>{const N=E/1e3;M0(p.x,s.x,N),M0(p.y,s.y,N),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ml(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wD(this.relativeTarget,this.relativeTargetOrigin,h,N),S&&lD(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Ue()),Bt(S,this.relativeTarget)),T&&(this.animationValues=d,tD(d,u,this.latestValues,N,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&($n(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=we.update(()=>{Ps.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fo(0)),this.currentAnimation=YM(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),s.onUpdate&&s.onUpdate(d)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=s;if(!(!a||!l||!u)){if(this!==s&&this.layout&&u&&qS(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ue();const p=it(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+p;const h=it(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+h}Bt(a,l),qi(a,d),nr(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new aD),this.sharedNodes.get(s).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Oa("z",s,u,this.animationValues);for(let d=0;d<za.length;d++)Oa(`rotate${za[d]}`,s,u,this.animationValues),Oa(`skew${za[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}applyProjectionStyles(s,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=As(a==null?void 0:a.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=As(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ni(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let p=uD(this.projectionDeltaWithTransform,this.treeScale,d);l&&(p=l(d,p)),s.transform=p;const{x:h,y:g}=this.projectionDelta;s.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?s.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:s.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in yc){if(d[v]===void 0)continue;const{correct:T,applyTo:w,isCSSVariable:x}=yc[v],y=p==="none"?d[v]:T(d[v],u);if(w){const S=w.length;for(let E=0;E<S;E++)s[w[E]]=y}else x?this.options.visualElement.renderState.vars[v]=y:s[v]=y}this.options.layoutId&&(s.pointerEvents=u===this?As(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(P0),this.root.sharedNodes.clear()}}}function fD(e){e.updateLayout()}function pD(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=e.layout,{animationType:r}=e.options,s=t.source!==e.layout.source;r==="size"?Ct(p=>{const h=s?t.measuredBox[p]:t.layoutBox[p],g=it(h);h.min=i[p].min,h.max=h.min+g}):qS(r,t.layoutBox,i)&&Ct(p=>{const h=s?t.measuredBox[p]:t.layoutBox[p],g=it(i[p]);h.max=h.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+g)});const a=ji();nr(a,i,t.layoutBox);const l=ji();s?nr(l,e.applyTransform(o,!0),t.measuredBox):nr(l,i,t.layoutBox);const u=!zS(a);let d=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:h,layout:g}=p;if(h&&g){const v=Ue();ml(v,t.layoutBox,h.layoutBox);const T=Ue();ml(T,i,g.layoutBox),OS(v,T)||(d=!0),p.options.layoutRoot&&(e.relativeTarget=T,e.relativeTargetOrigin=v,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function hD(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function mD(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function gD(e){e.clearSnapshot()}function P0(e){e.clearMeasurements()}function b0(e){e.isLayoutDirty=!1}function yD(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function R0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function vD(e){e.resolveTargetDelta()}function xD(e){e.calcProjection()}function SD(e){e.resetSkewAndRotation()}function TD(e){e.removeLeadSnapshot()}function M0(e,t,n){e.translate=Ie(t.translate,0,n),e.scale=Ie(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function D0(e,t,n,i){e.min=Ie(t.min,n.min,i),e.max=Ie(t.max,n.max,i)}function wD(e,t,n,i){D0(e.x,t.x,n.x,i),D0(e.y,t.y,n.y,i)}function ED(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const CD={duration:.45,ease:[.4,0,.1,1]},L0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),F0=L0("applewebkit/")&&!L0("chrome/")?Math.round:Mt;function U0(e){e.min=F0(e.min),e.max=F0(e.max)}function ND(e){U0(e.x),U0(e.y)}function qS(e,t,n){return e==="position"||e==="preserve-aspect"&&!MM(_0(t),_0(n),.2)}function ID(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const kD=$S({attachResizeListener:(e,t)=>Nr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ha={current:void 0},jS=$S({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ha.current){const e=new kD({});e.mount(window),e.setOptions({layoutScroll:!0}),Ha.current=e}return Ha.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),_D={pan:{Feature:WM},drag:{Feature:JM,ProjectionNode:jS,MeasureLayout:VS}};function V0(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,r=i[o];r&&we.postRender(()=>r(t,Lr(t)))}class AD extends Yn{mount(){const{current:t}=this.node;t&&(this.unmount=Qb(t,(n,i)=>(V0(this.node,i,"Start"),o=>V0(this.node,o,"End"))))}unmount(){}}class PD extends Yn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rr(Nr(this.node.current,"focus",()=>this.onFocus()),Nr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function G0(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),r=i[o];r&&we.postRender(()=>r(t,Lr(t)))}class bD extends Yn{mount(){const{current:t}=this.node;t&&(this.unmount=nR(t,(n,i)=>(G0(this.node,i,"Start"),(o,{success:r})=>G0(this.node,o,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Nc=new WeakMap,$a=new WeakMap,RD=e=>{const t=Nc.get(e.target);t&&t(e)},MD=e=>{e.forEach(RD)};function DD({root:e,...t}){const n=e||document;$a.has(n)||$a.set(n,{});const i=$a.get(n),o=JSON.stringify(t);return i[o]||(i[o]=new IntersectionObserver(MD,{root:e,...t})),i[o]}function LD(e,t,n){const i=DD(t);return Nc.set(e,n),i.observe(e),()=>{Nc.delete(e),i.unobserve(e)}}const FD={some:0,all:1};class UD extends Yn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:r}=t,s={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:FD[o]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),h=u?d:p;h&&h(l)};return LD(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(VD(t,n))&&this.startObserver()}unmount(){}}function VD({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const GD={inView:{Feature:UD},tap:{Feature:bD},focus:{Feature:PD},hover:{Feature:AD}},BD={layout:{ProjectionNode:jS,MeasureLayout:VS}},zD={...kM,...GD,..._D,...BD},fe=HR(zD,nM),Ic=({onClose:e})=>{const[t,n]=A.useState("keys"),[i,o]=A.useState(p2()),r=A.useRef(null),s=()=>{h2(i),e(),alert(`AI 
: Groq -> OpenRouter -> Zhipu -> Gemini -> Pollinations`)},a=()=>{confirm(" prompt ")&&(localStorage.removeItem("PSYCHEPOLY_AI_CONFIG_V2"),window.location.reload())},l=()=>{const h="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,2)),g=document.createElement("a");g.setAttribute("href",h),g.setAttribute("download","psychepoly_ai_config.json"),document.body.appendChild(g),g.click(),g.remove()},u=()=>{var h;(h=r.current)==null||h.click()},d=h=>{var T;const g=(T=h.target.files)==null?void 0:T[0];if(!g)return;const v=new FileReader;v.onload=w=>{var x;try{const y=(x=w.target)==null?void 0:x.result,S=JSON.parse(y);S.geminiModel||S.systemPersona?(o({...i,...S}),alert("")):alert("")}catch{alert("JSON ")}},v.readAsText(g),r.current&&(r.current.value="")},p=(h,g,v,T,w,x,y,S)=>m.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:`text-xs font-bold ${g} flex items-center gap-1`,children:h}),m.jsx("input",{type:"text",value:x,onChange:E=>y(E.target.value),className:"bg-slate-900 border border-slate-700 rounded px-2 py-0.5 text-[10px] text-slate-400 w-32 text-right",placeholder:"Model ID"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"password",value:v,onChange:E=>T(E.target.value),className:`w-full bg-slate-900 border rounded-lg px-3 py-2 text-sm text-white outline-none font-mono ${v?"border-slate-700":w?"border-teal-500/50":"border-slate-800"}`,placeholder:w?" Key ()":S}),!v&&w&&m.jsxs("div",{className:"absolute right-3 top-2.5 flex items-center gap-1 text-[10px] text-teal-500 pointer-events-none",children:[m.jsx(nP,{size:12})," "]})]})]});return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-teal-500/20 rounded-lg text-teal-400",children:m.jsx(U2,{size:24})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-bold text-white",children:"AI "}),m.jsx("p",{className:"text-[10px] text-slate-400",children:": Groq > OpenRouter > Zhipu > Gemini > P"})]})]}),m.jsx("button",{onClick:e,className:"text-slate-500 hover:text-white transition",children:m.jsx($l,{size:24})})]}),m.jsxs("div",{className:"flex border-b border-slate-800",children:[m.jsxs("button",{onClick:()=>n("keys"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 border-b-2 transition ${t==="keys"?"border-teal-500 text-teal-400 bg-slate-800/50":"border-transparent text-slate-500 hover:text-white"}`,children:[m.jsx(H2,{size:16})," API  & "]}),m.jsxs("button",{onClick:()=>n("prompts"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 border-b-2 transition ${t==="prompts"?"border-teal-500 text-teal-400 bg-slate-800/50":"border-transparent text-slate-500 hover:text-white"}`,children:[m.jsx(W2,{size:16})," Prompt "]})]}),m.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1 custom-scrollbar",children:[t==="keys"&&m.jsxs("div",{className:"space-y-6",children:[p("1. Groq (G) - ","text-orange-400",i.groqKey,h=>o({...i,groqKey:h}),!!Mn.groq,i.groqModel,h=>o({...i,groqModel:h}),"gsk_..."),p("2. OpenRouter (O) - ","text-blue-400",i.openRouterKey,h=>o({...i,openRouterKey:h}),!!Mn.openRouter,i.openRouterModel,h=>o({...i,openRouterModel:h}),"sk-or-..."),p("3. Zhipu () - ","text-red-400",i.zhipuKey,h=>o({...i,zhipuKey:h}),!!Mn.zhipu,"glm-4-flash",h=>{}," API Key..."),p("4. Gemini (Flash 2.0) - ","text-teal-400",i.geminiKey,h=>o({...i,geminiKey:h}),!!Mn.gemini,i.geminiModel,h=>o({...i,geminiModel:h}),"AIza..."),m.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg flex items-center gap-3 text-xs text-slate-400",children:[m.jsx(L2,{size:16}),m.jsxs("span",{children:[" Key  ",m.jsx("strong",{children:"Pollinations.ai (P)"}),""]})]})]}),t==="prompts"&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-xs font-bold text-purple-400 uppercase tracking-wider flex items-center gap-1",children:"System Persona ()"}),m.jsx("textarea",{value:i.systemPersona,onChange:h=>o({...i,systemPersona:h.target.value}),className:"w-full h-32 bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-xs text-slate-300 focus:border-purple-500 outline-none resize-none font-mono leading-relaxed",placeholder:"[]... []..."}),m.jsx("p",{className:"text-[10px] text-slate-500",children:" AI "})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-xs font-bold text-green-400 uppercase tracking-wider flex items-center gap-1",children:"Task Generation Instruction ()"}),m.jsx("textarea",{value:i.taskPromptTemplate,onChange:h=>o({...i,taskPromptTemplate:h.target.value}),className:"w-full h-40 bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-xs text-slate-300 focus:border-green-500 outline-none resize-none font-mono"}),m.jsx("p",{className:"text-[10px] text-slate-500",children:" JSON  (keys: standard, truth, dare, deep)"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-xs font-bold text-yellow-400 uppercase tracking-wider flex items-center gap-1",children:"Report & Analysis Instruction ()"}),m.jsx("textarea",{value:i.reportPromptTemplate,onChange:h=>o({...i,reportPromptTemplate:h.target.value}),className:"w-full h-40 bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-xs text-slate-300 focus:border-yellow-500 outline-none resize-none font-mono"}),m.jsx("p",{className:"text-[10px] text-slate-500",children:"Te, Ti, Fe"})]})]})]}),m.jsxs("div",{className:"p-5 border-t border-slate-800 flex flex-wrap gap-3 bg-slate-900/50 rounded-b-2xl",children:[m.jsx("input",{type:"file",ref:r,className:"hidden",accept:".json",onChange:d}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:u,className:"px-3 py-2 bg-slate-800 text-slate-400 rounded-lg text-xs font-bold hover:bg-slate-700 hover:text-white flex items-center gap-1 transition",title:"",children:[m.jsx(sP,{size:14})," "]}),m.jsxs("button",{onClick:l,className:"px-3 py-2 bg-slate-800 text-slate-400 rounded-lg text-xs font-bold hover:bg-slate-700 hover:text-white flex items-center gap-1 transition",title:"",children:[m.jsx(lx,{size:14})," "]})]}),m.jsx("div",{className:"flex-1"}),m.jsxs("button",{onClick:a,className:"px-4 py-2 bg-slate-800 text-slate-400 rounded-lg text-sm font-bold hover:text-white flex items-center gap-2 transition",children:[m.jsx(fx,{size:16})," "]}),m.jsxs("button",{onClick:s,className:"px-6 py-2 bg-teal-600 hover:bg-teal-500 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 shadow-lg transition",children:[m.jsx(tP,{size:16})," "]})]})]})})},B0={INTJ:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},INTP:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ENTJ:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ENTP:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},INFJ:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},INFP:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ENFJ:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ENFP:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ISTJ:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ISFJ:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ESTJ:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ESFJ:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ISTP:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ISFP:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ESTP:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""},ESFP:{title:"",nickname:"",description:"",strengths:["","","",""],growth:["","",""],socialTip:""}},OD=({playerName:e,mbtiType:t,analysisResults:n,onBackToHub:i,answers:o})=>{const[r,s]=A.useState(t),[a,l]=A.useState(null),[u,d]=A.useState(!1);A.useEffect(()=>{(async()=>{d(!0);try{const T=await E2(r,o);l(T)}catch(T){console.error("Failed to fetch detailed AI report",T);const w=B0[r]||B0.INTJ;l({type:r,title:w.title,nickname:w.nickname,description:w.description,strengths:w.strengths,growth:w.growth,socialTip:w.socialTip,monologue:""})}finally{d(!1)}})()},[r]);const p=nl[r]||"",h=Qo[r]||[];let g="#14b8a6";return Object.entries(qt).forEach(([v,T])=>{T.types.includes(r)&&(g=T.hexColor)}),m.jsxs("div",{className:"min-h-screen bg-slate-950 text-white overflow-y-auto selection:bg-teal-500/30",children:[m.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[m.jsx(fe.div,{animate:{scale:[1,1.2,1],rotate:[0,90,0]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute top-[-20%] right-[-10%] w-[60%] h-[60%] rounded-full blur-[120px] opacity-20",style:{backgroundColor:g}}),m.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] bg-blue-600/10 rounded-full blur-[100px]"})]}),m.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto px-6 py-10",children:[m.jsxs("div",{className:"flex flex-col items-center mb-10",children:[m.jsx("div",{className:"inline-block px-4 py-2 bg-white/5 rounded-full border border-white/10 mb-6 backdrop-blur-md",children:m.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-teal-400 uppercase",children:""})}),m.jsx("div",{className:"flex items-center gap-2 p-1.5 bg-white/5 backdrop-blur-2xl rounded-2xl border border-white/10 w-full max-w-sm",children:n.slice(0,3).map(v=>m.jsxs("button",{onClick:()=>s(v.type),className:`flex-1 py-3 rounded-xl transition-all duration-300 relative ${r===v.type?"bg-white shadow-xl scale-105 z-10":"hover:bg-white/5"}`,children:[m.jsx("div",{className:`text-sm font-black ${r===v.type?"text-slate-900":"text-slate-500"}`,children:v.type}),m.jsxs("div",{className:`text-[9px] font-bold ${r===v.type?"text-teal-600":"text-slate-600"}`,children:[v.percentage,"%"]}),r===v.type&&m.jsx(fe.div,{layoutId:"active-tab",className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-teal-500 rounded-full"})]},v.type))})]}),m.jsx(It,{mode:"wait",children:u?m.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(cx,{size:48,className:"text-teal-500 animate-spin mb-6"}),m.jsxs("p",{className:"text-slate-400 font-medium animate-pulse",children:["AI  ",r," ..."]})]},"loading"):a&&m.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[m.jsxs("div",{className:"text-center",children:[m.jsxs("h1",{className:"text-4xl md:text-6xl font-black mb-4 tracking-tighter",children:[e," ",m.jsx("span",{className:"text-slate-500",children:"x"})," ",m.jsx("span",{style:{color:g},children:r})]}),m.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-slate-900 border border-white/10 text-xs font-bold shadow-inner",children:[m.jsx(So,{size:12,className:"text-yellow-400"}),a.title]})]}),m.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-[2.5rem] border border-white/10 p-8 shadow-2xl relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-10",children:m.jsx(Z2,{size:80,style:{color:g}})}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-lg rotate-3",style:{backgroundColor:g},children:r[0]}),m.jsxs("div",{className:"text-left",children:[m.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:""}),m.jsx("div",{className:"text-sm font-bold text-slate-200",children:a.nickname})]})]}),m.jsx("p",{className:"text-lg text-slate-300 leading-relaxed font-medium mb-8",children:a.description}),m.jsxs("div",{className:"p-6 bg-white/5 rounded-3xl border border-white/5 italic text-slate-400 text-sm leading-relaxed text-center quote-mark relative",children:[m.jsx("span",{className:"text-2xl text-slate-600 absolute -top-2 left-4 opacity-50",children:""}),a.monologue,m.jsx("span",{className:"text-2xl text-slate-600 absolute -bottom-6 right-4 opacity-50",children:""})]})]})]}),m.jsx("div",{className:"grid grid-cols-4 gap-3",children:h.slice(0,4).map((v,T)=>{const w=kd.find(x=>x.id===v);return m.jsxs("div",{className:"bg-slate-900/50 backdrop-blur rounded-2xl border border-white/5 p-3 text-center group hover:bg-white/5 transition-colors",children:[m.jsx("div",{className:"text-xs font-black mb-1",style:{color:w==null?void 0:w.color},children:v}),m.jsx("div",{className:"text-[8px] text-slate-600 uppercase font-black",children:["","","",""][T]})]},T)})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-teal-500/5 rounded-3xl border border-teal-500/10 p-6",children:[m.jsxs("h3",{className:"text-teal-400 font-black text-sm uppercase tracking-widest mb-4 flex items-center gap-2",children:[m.jsx(Vd,{size:16})," "]}),m.jsx("ul",{className:"space-y-3",children:a.strengths.map((v,T)=>m.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-300 font-medium",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-teal-500 mt-1.5 shrink-0"}),v]},T))})]}),m.jsxs("div",{className:"bg-amber-500/5 rounded-3xl border border-amber-500/10 p-6",children:[m.jsxs("h3",{className:"text-amber-400 font-black text-sm uppercase tracking-widest mb-4 flex items-center gap-2",children:[m.jsx(Gd,{size:16})," "]}),m.jsx("ul",{className:"space-y-3",children:a.growth.map((v,T)=>m.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-300 font-medium",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 mt-1.5 shrink-0"}),v]},T))})]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[m.jsxs("div",{className:"flex-1 bg-white/5 rounded-2xl p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-xl shadow-inner",children:""}),m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase",children:""}),m.jsx("div",{className:"text-sm font-bold text-slate-300",children:p})]})]}),m.jsxs("div",{className:"flex-[2] bg-gradient-to-r from-teal-500/10 to-blue-500/10 rounded-2xl p-4 flex items-center gap-4 border border-white/5",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-teal-400",children:m.jsx(ax,{size:20})}),m.jsxs("div",{className:"text-sm font-medium text-slate-300 italic",children:['"',a.socialTip,'"']})]})]})]},r)}),m.jsxs("div",{className:"mt-12 pt-10 border-t border-white/5 flex flex-col gap-4",children:[m.jsxs("button",{onClick:i,className:"w-full py-4 bg-white text-slate-900 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-teal-400 transition-colors shadow-2xl flex items-center justify-center gap-2",children:[m.jsx(ox,{size:18})," MBTI HUB"]}),m.jsx("p",{className:"text-center text-slate-600 text-[10px] font-bold uppercase tracking-[0.3em]",children:"RAINBOW BOAT  ALPHA 0.2"})]})]})]})},qa=[{id:1,text:"...",left:" ()",right:" ()",dimension:"E-I"},{id:2,text:"...",left:"",right:"",dimension:"S-N"},{id:3,text:"...",left:"",right:"TA",dimension:"T-F"},{id:4,text:"...",left:"Excel",right:"",dimension:"J-P"}],HD=({onClose:e})=>m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-2xl flex flex-col max-h-[90vh] overflow-hidden",children:[m.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(rx,{className:"text-teal-600 dark:text-teal-400"}),m.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:""})]}),m.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-800 dark:hover:text-white transition",children:m.jsx($l,{size:24})})]}),m.jsxs("div",{className:"p-8 overflow-y-auto custom-scrollbar prose dark:prose-invert max-w-none text-slate-700 dark:text-slate-300 space-y-8",children:[m.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-6 rounded-2xl border border-teal-100 dark:border-teal-800/50",children:[m.jsx("h3",{className:"mt-0 text-teal-800 dark:text-teal-200 flex items-center gap-2",children:" "}),m.jsx("p",{className:"mb-0 text-sm leading-relaxed",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h4",{className:"flex items-center gap-2 text-indigo-600 dark:text-indigo-400 mb-0",children:[m.jsx(K2,{size:20})," 1. "]}),m.jsxs("ul",{className:"text-sm space-y-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"AI "})," ",m.jsx(Ol,{size:14,className:"inline"}),"  API Key  Gemini/Groq ",m.jsx("strong",{children:"Zhipu ()"}),""]}),m.jsxs("li",{children:[m.jsx("strong",{children:""}),""]}),m.jsxs("li",{children:[m.jsx("strong",{children:""})," AI "]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h4",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400 mb-0",children:[m.jsx(So,{size:20})," 2. "]}),m.jsxs("ul",{className:"text-sm space-y-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:""}),""]}),m.jsxs("li",{children:[m.jsx("strong",{children:" (?)"}),""]}),m.jsxs("li",{children:[m.jsx("strong",{children:""}),""]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h4",{className:"flex items-center gap-2 text-teal-600 dark:text-teal-400 mb-0",children:[m.jsx(Hl,{size:20})," 3. "]}),m.jsxs("ul",{className:"text-sm space-y-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:""}),"AI  AI "]}),m.jsxs("li",{children:[m.jsx("strong",{children:""}),""]})]})]}),m.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl text-[11px] text-slate-500 border border-slate-200 dark:border-slate-700 italic",children:" "})]}),m.jsx("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950 flex justify-end",children:m.jsx("button",{onClick:e,className:"px-6 py-2 bg-teal-600 hover:bg-teal-500 text-white rounded-lg font-bold",children:""})})]})}),$D=({onComplete:e,isDarkMode:t,toggleTheme:n,initialStep:i="setup",isSoloTest:o=!1,isMobile:r=!1,onBackToHub:s,onShowQuickReport:a})=>{var ie;const[l,u]=A.useState(i),[d,p]=A.useState([{id:"p1",name:"",mbti:""}]),[h,g]=A.useState(0),[v,T]=A.useState(null),w=A.useRef(null),x=A.useRef(null),[y,S]=A.useState({1:50,2:50,3:50,4:50}),[E,N]=A.useState([]),[C,I]=A.useState(Ce.JUNG_8),[_,P]=A.useState(0),[R,L]=A.useState(40),[ee,H]=A.useState(!1),[$,se]=A.useState(!1),[re,J]=A.useState(!1),[D,V]=A.useState("");A.useEffect(()=>{let B=null;return v!==null&&navigator.mediaDevices.getUserMedia({video:{width:{ideal:300},height:{ideal:300}}}).then(W=>{B=W,w.current&&(w.current.srcObject=B,w.current.play())}).catch(W=>{console.error("Camera error:",W),T(null),alert("")}),()=>{B&&B.getTracks().forEach(W=>W.stop())}},[v]);const z=B=>{if(w.current&&x.current){const W=x.current.getContext("2d");if(W){const Ee=Math.min(w.current.videoWidth,w.current.videoHeight),Xn=(w.current.videoWidth-Ee)/2,me=(w.current.videoHeight-Ee)/2;W.drawImage(w.current,Xn,me,Ee,Ee,0,0,300,300);const Co=x.current.toDataURL("image/jpeg"),Fr=[...d];Fr[B].avatarImage=Co,p(Fr),T(null)}}},te=()=>{d.length<16&&p([...d,{id:`p${Date.now()}`,name:"",mbti:""}])},Z=B=>{if(d.length>1){const W=[...d];W.splice(B,1),p(W)}},he=(B,W)=>{const Ee=[...d];Ee[B].name=W,p(Ee)},ye=(B,W)=>{const Ee=[...d];Ee[B].mbti=W,p(Ee)},Ut=B=>{g(B),S({1:50,2:50,3:50,4:50}),u("quiz")},Le=async()=>{u("analyzing");const B=qa.map(Ee=>({q:Ee.text,val:y[Ee.id]})),W=await w2(B);N(W),u("results")},mt=()=>d.every(B=>B.name.trim()!==""&&B.mbti!==""),j=()=>{mt()&&e(d,C,_,R)};if(l==="quiz")return m.jsx("div",{className:"flex flex-col items-center justify-center h-full p-4 overflow-y-auto",children:m.jsxs("div",{className:"w-full max-w-xl bg-white dark:bg-slate-800/90 backdrop-blur p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-2xl",children:[m.jsxs("h3",{className:"text-xl font-bold mb-6 text-center text-teal-600 dark:text-teal-300",children:[d[h].name||""," "]}),m.jsx("div",{className:"space-y-8",children:qa.map(B=>m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"text-slate-800 dark:text-white font-medium text-lg",children:B.text}),m.jsxs("div",{className:"relative pt-1",children:[m.jsx("input",{type:"range",min:"0",max:"100",value:y[B.id],onChange:W=>S({...y,[B.id]:parseInt(W.target.value)}),className:"w-full h-2 bg-slate-200 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-teal-500 relative z-10"}),m.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 font-bold mt-2",children:[m.jsx("span",{children:B.left}),m.jsx("span",{children:B.right})]})]})]},B.id))}),m.jsxs("div",{className:"flex gap-4 mt-10",children:[m.jsx("button",{onClick:()=>o?s&&s():u("setup"),className:"flex-1 py-3 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white bg-slate-100 dark:bg-slate-700/50 rounded-xl",children:o?"":""}),m.jsx("button",{onClick:Le,className:"flex-1 py-3 bg-teal-600 rounded-xl font-bold text-white hover:bg-teal-500 shadow-lg shadow-teal-500/20",children:""})]})]})});if(l==="analyzing")return m.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[m.jsx(cx,{size:48,className:"text-teal-500 animate-spin mb-4"}),m.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-300",children:"AI ..."})]});if(re&&D){const B=qa.map(W=>({q:W.text,val:y[W.id]||50}));return m.jsx(OD,{playerName:((ie=d[h])==null?void 0:ie.name)||"",mbtiType:D,analysisResults:E,onBackToHub:()=>{J(!1),s&&s()},answers:B})}return l==="results"?m.jsx("div",{className:"flex flex-col items-center justify-center h-full p-4 overflow-y-auto",children:m.jsxs("div",{className:"w-full max-w-xl bg-white dark:bg-slate-800/90 backdrop-blur p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-2xl",children:[m.jsx("h3",{className:"text-xl font-bold mb-2 text-center text-slate-800 dark:text-white",children:""}),m.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 mb-6 text-sm",children:" AI "}),m.jsx("div",{className:`${r?"flex flex-row gap-2 overflow-x-auto no-scrollbar pb-2":"space-y-4"}`,children:E.slice(0,3).map((B,W)=>m.jsxs("button",{onClick:()=>{V(B.type),J(!0)},className:`${r?"min-w-[110px] flex-shrink-0 p-3":"w-full p-4"} bg-slate-50 dark:bg-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl border border-slate-200 dark:border-slate-600 hover:border-teal-500 transition text-left group relative overflow-hidden`,children:[m.jsxs("div",{className:`flex ${r?"flex-col items-start":"justify-between items-end"} mb-1 relative z-10`,children:[m.jsx("span",{className:`${r?"text-lg":"text-2xl"} font-bold text-slate-800 dark:text-white group-hover:text-teal-600 dark:group-hover:text-teal-300`,children:B.type}),m.jsxs("span",{className:`${r?"text-xs":"text-lg"} font-mono font-bold text-teal-600 dark:text-teal-400`,children:[B.percentage,"%"]})]}),m.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-teal-500/20 w-full",children:m.jsx("div",{className:"h-full bg-teal-500",style:{width:`${B.percentage}%`}})}),!r&&m.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 relative z-10 line-clamp-1",children:B.reason}),r&&m.jsx("div",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-tight",children:""})]},B.type))}),m.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200 dark:border-slate-700 text-center flex flex-col gap-3",children:[o&&m.jsx("button",{onClick:()=>s&&s(),className:"w-full py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-white rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:""}),m.jsxs("button",{onClick:()=>u("setup"),className:"text-slate-500 hover:text-slate-800 dark:hover:text-white text-sm",children:["",o?"":""]})]})]})}):m.jsxs("div",{className:"flex flex-col items-center min-h-screen p-4 overflow-y-auto bg-slate-50 dark:bg-slate-900 transition-colors duration-300 gpu-accelerated",children:[m.jsxs("div",{className:"w-full max-w-6xl bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-2xl my-4 relative gpu-accelerated",children:[m.jsxs("div",{className:"absolute top-6 right-6 flex gap-3 z-10",children:[m.jsxs("button",{onClick:()=>se(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-indigo-50 hover:bg-indigo-100 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 text-indigo-600 dark:text-indigo-300 text-xs font-bold transition",children:[m.jsx(rx,{size:16})," "]}),m.jsx("button",{onClick:n,className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 hover:text-amber-500 dark:hover:text-yellow-400 transition",children:t?m.jsx(tc,{size:18}):m.jsx(ec,{size:18})}),m.jsx("button",{onClick:()=>H(!0),className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 transition",title:"AI Settings",children:m.jsx(Ol,{size:18})})]}),m.jsxs("div",{className:"text-center mb-6 pt-2",children:[m.jsx("h2",{className:"text-3xl font-bold mb-2 text-transparent bg-clip-text bg-[linear-gradient(to_right,#ef4444,#f97316,#eab308,#22c55e,#3b82f6,#a855f7)] tracking-tight",children:""}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:""})]}),m.jsxs("div",{className:"flex flex-col gap-8",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("h4",{className:"text-teal-600 dark:text-teal-400 font-bold flex items-center gap-2",children:[m.jsx(ic,{size:18}),"  (",d.length,"/16)"]}),d.length<16&&m.jsxs("button",{onClick:te,className:"text-xs bg-teal-50 hover:bg-teal-100 dark:bg-teal-900/50 dark:hover:bg-teal-900 text-teal-700 dark:text-teal-200 px-3 py-1.5 rounded-full flex items-center gap-1 transition",children:[m.jsx(Q2,{size:12})," "]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:d.map((B,W)=>m.jsxs("div",{className:"bg-slate-100/60 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative transition hover:border-slate-400 dark:hover:border-slate-600 flex gap-4 items-start",children:[d.length>1&&m.jsx("button",{onClick:()=>Z(W),className:"absolute top-2 right-2 text-slate-400 hover:text-red-500 dark:text-slate-600 dark:hover:text-red-400 transition",children:m.jsx(rP,{size:14})}),m.jsxs("div",{className:"shrink-0 flex flex-col items-center gap-2",children:[m.jsxs("div",{className:"w-16 h-16 rounded-full bg-slate-200 dark:bg-slate-800 border-2 border-slate-300 dark:border-slate-600 overflow-hidden flex items-center justify-center relative group",children:[B.avatarImage?m.jsx("img",{src:B.avatarImage,alt:"Avatar",className:"w-full h-full object-cover"}):m.jsx(nc,{size:32,className:"text-slate-400 dark:text-slate-500"}),v===W?m.jsxs("div",{className:"absolute inset-0 bg-black z-10 flex flex-col items-center justify-center",children:[m.jsx("video",{ref:w,className:"absolute inset-0 w-full h-full object-cover opacity-50",autoPlay:!0,playsInline:!0,muted:!0}),m.jsx("button",{onClick:()=>z(W),className:"relative z-20 bg-white/20 p-1 rounded-full animate-pulse hover:bg-white/40",children:m.jsx(Nm,{size:16})}),m.jsx("canvas",{ref:x,width:"300",height:"300",className:"hidden"})]}):m.jsx("button",{onClick:()=>T(W),className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition",children:m.jsx(Nm,{size:20,className:"text-white"})})]}),B.avatarImage&&m.jsx("button",{onClick:()=>{const Ee=[...d];Ee[W].avatarImage=void 0,p(Ee)},className:"text-[10px] text-red-500 dark:text-red-400 hover:underline",children:""})]}),m.jsxs("div",{className:"flex flex-col gap-3 flex-1",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase block mb-1",children:""}),m.jsx("input",{type:"text",value:B.name,onChange:Ee=>he(W,Ee.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-800 dark:text-white text-sm focus:ring-1 focus:ring-teal-500 outline-none",placeholder:` ${W+1}`})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase",children:" (MBTI)"}),!B.mbti&&m.jsxs("button",{onClick:()=>Ut(W),className:"text-[10px] text-teal-600 dark:text-teal-400 hover:text-teal-500 dark:hover:text-teal-300 flex items-center gap-1",children:[m.jsx(So,{size:10})," AI "]})]}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.entries(qt).map(([Ee,Xn])=>m.jsxs("div",{className:`rounded-lg p-2 border ${Xn.color} flex flex-col gap-1`,children:[m.jsx("div",{className:"text-[10px] font-bold opacity-80 uppercase tracking-wide text-center mb-1 text-slate-700 dark:text-slate-300",children:Ee.split(" ")[0]}),m.jsx("div",{className:"grid grid-cols-2 gap-1",children:Xn.types.map(me=>m.jsx("button",{onClick:()=>ye(W,me),className:`text-[10px] py-1 rounded font-bold transition ${B.mbti===me?"bg-slate-800 text-white dark:bg-white dark:text-slate-900 shadow-md transform scale-105":"bg-black/5 hover:bg-black/10 dark:bg-black/20 dark:hover:bg-black/40 text-slate-600 dark:text-inherit"}`,children:me},me))})]},Ee))})]})]})]},B.id))})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-slate-200 dark:border-slate-700/50",children:[m.jsxs("div",{children:[m.jsxs("h4",{className:"text-blue-500 dark:text-blue-400 font-bold mb-3 flex items-center gap-2 text-sm",children:[m.jsx($2,{size:16})," "]}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("button",{onClick:()=>I(Ce.JUNG_8),className:`px-3 py-2 rounded-lg border text-left transition text-sm ${C===Ce.JUNG_8?"bg-blue-100 border-blue-500 text-blue-800 dark:bg-blue-600/20 dark:text-white":"bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 text-slate-500 dark:text-slate-400"}`,children:m.jsx("span",{className:"font-bold",children:""})}),m.jsx("button",{onClick:()=>I(Ce.MBTI_16),className:`px-3 py-2 rounded-lg border text-left transition text-sm ${C===Ce.MBTI_16?"bg-purple-100 border-purple-500 text-purple-800 dark:bg-purple-600/20 dark:text-white":"bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-700 text-slate-500 dark:text-slate-400"}`,children:m.jsx("span",{className:"font-bold",children:"MBTI "})})]})]}),m.jsxs("div",{children:[m.jsxs("h4",{className:"text-orange-500 dark:text-orange-400 font-bold mb-3 flex items-center gap-2 text-sm",children:[m.jsx(nc,{size:16})," : ",_]}),m.jsx("input",{type:"range",min:"0",max:"5",value:_,onChange:B=>P(parseInt(B.target.value)),className:"w-full h-1.5 bg-slate-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-orange-500"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-2",children:[m.jsx("span",{children:" Bot"}),m.jsx("span",{children:"5 Bots"})]})]}),m.jsxs("div",{children:[m.jsxs("h4",{className:"text-yellow-500 dark:text-yellow-400 font-bold mb-3 flex items-center gap-2 text-sm",children:[m.jsx(Hl,{size:16})," : ",R]}),m.jsx("input",{type:"range",min:"20",max:"100",step:"10",value:R,onChange:B=>L(parseInt(B.target.value)),className:"w-full h-1.5 bg-slate-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-2",children:[m.jsx("span",{children:" (20)"}),m.jsx("span",{children:" (100)"})]})]})]})]}),m.jsxs("button",{onClick:j,disabled:!mt(),className:"w-full mt-8 py-3.5 bg-gradient-to-r from-teal-600 to-blue-600 hover:from-teal-500 hover:to-blue-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-bold text-white text-lg transition shadow-lg hover:shadow-teal-500/20 flex items-center justify-center gap-2",children:[" ",m.jsx(li,{size:20})]}),m.jsx("div",{className:"flex justify-center mt-8",children:m.jsxs(fe.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>{console.log("Anchor clicked - returning to hub"),s&&s()},className:"flex items-center gap-2 px-6 py-2.5 text-slate-400 hover:text-teal-600 dark:text-slate-500 dark:hover:text-teal-400 transition-all duration-300 text-sm font-bold group bg-slate-100/50 dark:bg-slate-800/30 hover:bg-white dark:hover:bg-slate-800 rounded-full border border-transparent hover:border-teal-500/30 shadow-sm hover:shadow-md",children:[m.jsx(ox,{size:16,className:"group-hover:rotate-[20deg] group-hover:scale-110 transition-transform duration-300"}),""]})})]}),ee&&m.jsx(Ic,{onClose:()=>H(!1)}),$&&m.jsx(HD,{onClose:()=>se(!1)})]})},gl=60,kc=110,z0=(e,t,n)=>{let i=[];for(let o=0;o<6;o++){const r=2*Math.PI/6*(o+.5);i.push(`${e+n*Math.cos(r)},${t+n*Math.sin(r)}`)}return i.join(" ")},O0=(e,t)=>{const n=gl*(Math.sqrt(3)*e+Math.sqrt(3)/2*t),i=gl*(3/2*t);return{x:n+600,y:i+450}},H0=(e,t)=>{const n=(e-3)*kc+600,i=(t-3)*kc+450;return{x:n,y:i}},qD=({players:e,currentPlayerId:t,boardLayout:n,validMoves:i,onTileClick:o,gameMode:r,visibilityRadius:s,isMobile:a,isDarkMode:l})=>{const u=()=>n.map(P=>{const{x:R,y:L}=O0(P.q,P.r),ee=kd.find(D=>D.id===P.functionId),H=P.q===0&&P.r===0;let $=ee?ee.color:H?"#94a3b8":"#64748b";const se=e.filter(D=>D.position===P.index),re=i.includes(P.index),J=re;return m.jsxs("g",{className:`transition-all duration-300 ${re?"cursor-pointer":""}`,onClick:()=>re&&o(P.index),children:[m.jsx("polygon",{points:z0(R,L,gl-2),className:"fill-slate-200 stroke-slate-300 dark:fill-slate-900 dark:stroke-slate-700",style:{fill:H?l?"#334155":"#cbd5e1":void 0},stroke:J?"#2dd4bf":$,strokeWidth:J?6:H?3:2,strokeOpacity:J?1:.7}),m.jsx("polygon",{points:z0(R,L,gl-8),fill:$,fillOpacity:J?.6:.2}),m.jsx("text",{x:R,y:L+8,textAnchor:"middle",className:"fill-slate-600 dark:fill-slate-300",style:{fill:J?"#ffffff":$,pointerEvents:"none",userSelect:"none"},fontWeight:"bold",fontSize:H?"24":"18",children:P.functionId}),p(se,R,L,t,!1)]},P.index)}),d=()=>{const P=e.find(L=>L.id===t),R=n.find(L=>L.index===(P==null?void 0:P.position));return n.map(L=>{const{x:ee,y:H}=H0(L.q,L.r);let $=!1,se=999;R&&(se=Math.abs(L.q-R.q)+Math.abs(L.r-R.r),$=se<=s);const re=L.zone==="Hub",J=e.filter(he=>he.position===L.index),D=i.includes(L.index);let V="#64748b";L.zone==="NT"?V=qt[" (NT)"].hexColor:L.zone==="NF"?V=qt[" (NF)"].hexColor:L.zone==="SJ"?V=qt[" (SJ)"].hexColor:L.zone==="SP"?V=qt[" (SP)"].hexColor:re&&(V="#f59e0b");let z=V,te=1;$?re?z="#f59e0b":z=V:(z=V,te=.4);const Z=kc-6;return m.jsxs("g",{className:`transition-all duration-500 ${D?"cursor-pointer":""}`,onClick:()=>D&&o(L.index),children:[m.jsx("rect",{x:ee-Z/2,y:H-Z/2,width:Z,height:Z,rx:re?30:12,className:`
                        ${$?re?"fill-amber-50 dark:fill-amber-900/30":"fill-stone-50 dark:fill-slate-800":"fill-slate-200 dark:fill-slate-900"} 
                        transition-colors duration-500
                    `,fillOpacity:$?.9:.2,stroke:D?"#2dd4bf":z,strokeWidth:D?4:$?2:1,strokeOpacity:D?1:te,style:{filter:$?`drop-shadow(0 4px 6px ${z}40)`:"none"}}),$&&!re&&m.jsx("rect",{x:ee-Z/2+4,y:H-Z/2+4,width:Z-8,height:Z-8,rx:8,fill:z,fillOpacity:.05,stroke:"none"}),$&&m.jsx("g",{className:"animate-in fade-in zoom-in duration-500",children:L.functionId==="Hub"?m.jsxs(m.Fragment,{children:[m.jsx("text",{x:ee,y:H-5,textAnchor:"middle",className:"fill-slate-900 dark:fill-white",fontWeight:"bold",fontSize:"18",style:{pointerEvents:"none",userSelect:"none"},children:""}),m.jsx("text",{x:ee,y:H+18,textAnchor:"middle",className:"fill-slate-900 dark:fill-white",fontWeight:"bold",fontSize:"18",style:{pointerEvents:"none",userSelect:"none"},children:""})]}):m.jsxs(m.Fragment,{children:[m.jsx("text",{x:ee,y:H-5,textAnchor:"middle",fill:D?"#2dd4bf":z,fontWeight:"bold",fontSize:"18",style:{pointerEvents:"none",userSelect:"none"},children:L.functionId}),L.characterName&&m.jsx("text",{x:ee,y:H+18,textAnchor:"middle",className:"fill-slate-500 dark:fill-slate-400",fontSize:"12",style:{pointerEvents:"none",userSelect:"none"},children:L.characterName})]})}),p(J,ee,H,t,!0)]},L.index)})},p=(P,R,L,ee,H)=>P.length===0?null:m.jsx("g",{transform:`translate(${R}, ${L})`,children:P.map(($,se)=>{const re=P.length,J=H?35:32,D=2*Math.PI/(re||1),z=Math.PI/2+se*D,te=Math.cos(z)*J,Z=Math.sin(z)*J,he=H?10:12;return m.jsxs("g",{className:"transition-all duration-500",children:[m.jsx("circle",{cx:te,cy:Z,r:H?25:30,fill:$.color,fillOpacity:"0.2",className:"animate-pulse",style:{filter:"blur(8px)"}}),m.jsx("defs",{children:m.jsx("clipPath",{id:`clip-${$.id}`,children:m.jsx("circle",{cx:te,cy:Z,r:he})})}),m.jsx("circle",{cx:te,cy:Z,r:he+1,fill:$.color,stroke:"white",strokeWidth:"2",className:"shadow-md"}),$.avatar&&$.avatar.startsWith("data:")?m.jsx("image",{x:te-he,y:Z-he,width:he*2,height:he*2,href:$.avatar,clipPath:`url(#clip-${$.id})`,preserveAspectRatio:"xMidYMid slice"}):m.jsx("text",{x:te,y:Z+he/2-1,textAnchor:"middle",fill:"white",fontSize:he-2,fontWeight:"bold",children:$.name[0].toUpperCase()}),$.id===ee&&m.jsx("circle",{cx:te,cy:Z,r:he+6,stroke:$.color,strokeWidth:"3",fill:"none",className:"animate-ping",opacity:"0.8"})]},$.id)})}),[h,g]=Se.useState({x:0,y:0}),[v,T]=Se.useState(!1),w=Se.useRef({x:0,y:0}),x=e.find(P=>P.id===t),y=x?n[x.position]:null;Se.useEffect(()=>{g({x:0,y:0})},[t,x==null?void 0:x.position]);const S=P=>{if(!a)return;T(!0);const R="touches"in P?P.touches[0].clientX:P.clientX,L="touches"in P?P.touches[0].clientY:P.clientY;w.current={x:R,y:L}},E=P=>{if(!v||!a)return;const R="touches"in P?P.touches[0].clientX:P.clientX,L="touches"in P?P.touches[0].clientY:P.clientY,ee=R-w.current.x,H=L-w.current.y,$=500,se=P.currentTarget.getBoundingClientRect(),re=$/se.width,J=$/se.height;g(D=>({x:D.x-ee*re,y:D.y-H*J})),w.current={x:R,y:L}},N=()=>{T(!1)};let C={x:600,y:450};y&&(r===Ce.JUNG_8?C=O0(y.q,y.r):C=H0(y.q,y.r));const I=500,_=a?`${C.x-I/2+h.x} ${C.y-I/2+h.y} ${I} ${I}`:"0 0 1200 900";return m.jsxs("div",{className:`w-full h-full bg-stone-100 dark:bg-slate-900/50 rounded-2xl border border-slate-300 dark:border-slate-700 relative shadow-inner flex items-center justify-center transition-colors duration-300 ${a?"overflow-hidden touch-none":"overflow-hidden cursor-move"}`,onMouseDown:S,onMouseMove:E,onMouseUp:N,onMouseLeave:N,onTouchStart:S,onTouchMove:E,onTouchEnd:N,children:[!a&&m.jsx("div",{className:"absolute top-4 left-4 text-slate-500 dark:text-slate-500 text-xs font-mono z-10 bg-slate-100/80 dark:bg-slate-900/80 px-2 py-1 rounded",children:r===Ce.MBTI_16?"MBTI  (33) - ":" (Rainbow Ark)"}),m.jsx("svg",{viewBox:_,className:`w-full h-full animate-fade-in select-none ${a?"cursor-grab active:cursor-grabbing":"touch-pan-y"}`,style:{transition:a&&!v?"viewBox 0.3s ease-out":void 0},children:r===Ce.JUNG_8?u():d()}),a&&(Math.abs(h.x)>30||Math.abs(h.y)>30)&&m.jsx("button",{onClick:()=>g({x:0,y:0}),className:"absolute bottom-24 right-6 bg-teal-600 dark:bg-teal-500 text-white px-3 py-1.5 rounded-full border border-white dark:border-slate-800 shadow-2xl text-[10px] font-black uppercase tracking-widest animate-in fade-in slide-in-from-bottom-4 transition-all active:scale-95 z-50",children:""})]})};var jD=Object.defineProperty,yl=Object.getOwnPropertySymbols,JS=Object.prototype.hasOwnProperty,WS=Object.prototype.propertyIsEnumerable,$0=(e,t,n)=>t in e?jD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_c=(e,t)=>{for(var n in t||(t={}))JS.call(t,n)&&$0(e,n,t[n]);if(yl)for(var n of yl(t))WS.call(t,n)&&$0(e,n,t[n]);return e},Ac=(e,t)=>{var n={};for(var i in e)JS.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&yl)for(var i of yl(e))t.indexOf(i)<0&&WS.call(e,i)&&(n[i]=e[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Si;(e=>{const t=class le{constructor(l,u,d,p){if(this.version=l,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],l<le.MIN_VERSION||l>le.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let h=[];for(let v=0;v<this.size;v++)h.push(!1);for(let v=0;v<this.size;v++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(d);if(this.drawCodewords(g),p==-1){let v=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const w=this.getPenaltyScore();w<v&&(p=T,v=w),this.applyMask(T)}}o(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(l,u){const d=e.QrSegment.makeSegments(l);return le.encodeSegments(d,u)}static encodeBinary(l,u){const d=e.QrSegment.makeBytes(l);return le.encodeSegments([d],u)}static encodeSegments(l,u,d=1,p=40,h=-1,g=!0){if(!(le.MIN_VERSION<=d&&d<=p&&p<=le.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let v,T;for(v=d;;v++){const S=le.getNumDataCodewords(v,u)*8,E=s.getTotalBits(l,v);if(E<=S){T=E;break}if(v>=p)throw new RangeError("Data too long")}for(const S of[le.Ecc.MEDIUM,le.Ecc.QUARTILE,le.Ecc.HIGH])g&&T<=le.getNumDataCodewords(v,S)*8&&(u=S);let w=[];for(const S of l){n(S.mode.modeBits,4,w),n(S.numChars,S.mode.numCharCountBits(v),w);for(const E of S.getData())w.push(E)}o(w.length==T);const x=le.getNumDataCodewords(v,u)*8;o(w.length<=x),n(0,Math.min(4,x-w.length),w),n(0,(8-w.length%8)%8,w),o(w.length%8==0);for(let S=236;w.length<x;S^=253)n(S,8,w);let y=[];for(;y.length*8<w.length;)y.push(0);return w.forEach((S,E)=>y[E>>>3]|=S<<7-(E&7)),new le(v,u,y,h)}getModule(l,u){return 0<=l&&l<this.size&&0<=u&&u<this.size&&this.modules[u][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),u=l.length;for(let d=0;d<u;d++)for(let p=0;p<u;p++)d==0&&p==0||d==0&&p==u-1||d==u-1&&p==0||this.drawAlignmentPattern(l[d],l[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const u=this.errorCorrectionLevel.formatBits<<3|l;let d=u;for(let h=0;h<10;h++)d=d<<1^(d>>>9)*1335;const p=(u<<10|d)^21522;o(p>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,i(p,h));this.setFunctionModule(8,7,i(p,6)),this.setFunctionModule(8,8,i(p,7)),this.setFunctionModule(7,8,i(p,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,i(p,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,i(p,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,i(p,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let d=0;d<12;d++)l=l<<1^(l>>>11)*7973;const u=this.version<<12|l;o(u>>>18==0);for(let d=0;d<18;d++){const p=i(u,d),h=this.size-11+d%3,g=Math.floor(d/3);this.setFunctionModule(h,g,p),this.setFunctionModule(g,h,p)}}drawFinderPattern(l,u){for(let d=-4;d<=4;d++)for(let p=-4;p<=4;p++){const h=Math.max(Math.abs(p),Math.abs(d)),g=l+p,v=u+d;0<=g&&g<this.size&&0<=v&&v<this.size&&this.setFunctionModule(g,v,h!=2&&h!=4)}}drawAlignmentPattern(l,u){for(let d=-2;d<=2;d++)for(let p=-2;p<=2;p++)this.setFunctionModule(l+p,u+d,Math.max(Math.abs(p),Math.abs(d))!=1)}setFunctionModule(l,u,d){this.modules[u][l]=d,this.isFunction[u][l]=!0}addEccAndInterleave(l){const u=this.version,d=this.errorCorrectionLevel;if(l.length!=le.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const p=le.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],h=le.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],g=Math.floor(le.getNumRawDataModules(u)/8),v=p-g%p,T=Math.floor(g/p);let w=[];const x=le.reedSolomonComputeDivisor(h);for(let S=0,E=0;S<p;S++){let N=l.slice(E,E+T-h+(S<v?0:1));E+=N.length;const C=le.reedSolomonComputeRemainder(N,x);S<v&&N.push(0),w.push(N.concat(C))}let y=[];for(let S=0;S<w[0].length;S++)w.forEach((E,N)=>{(S!=T-h||N>=v)&&y.push(E[S])});return o(y.length==g),y}drawCodewords(l){if(l.length!=Math.floor(le.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let p=0;p<this.size;p++)for(let h=0;h<2;h++){const g=d-h,T=(d+1&2)==0?this.size-1-p:p;!this.isFunction[T][g]&&u<l.length*8&&(this.modules[T][g]=i(l[u>>>3],7-(u&7)),u++)}}o(u==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let p;switch(l){case 0:p=(d+u)%2==0;break;case 1:p=u%2==0;break;case 2:p=d%3==0;break;case 3:p=(d+u)%3==0;break;case 4:p=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:p=d*u%2+d*u%3==0;break;case 6:p=(d*u%2+d*u%3)%2==0;break;case 7:p=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&p&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let l=0;for(let h=0;h<this.size;h++){let g=!1,v=0,T=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[h][w]==g?(v++,v==5?l+=le.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,T),g||(l+=this.finderPenaltyCountPatterns(T)*le.PENALTY_N3),g=this.modules[h][w],v=1);l+=this.finderPenaltyTerminateAndCount(g,v,T)*le.PENALTY_N3}for(let h=0;h<this.size;h++){let g=!1,v=0,T=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][h]==g?(v++,v==5?l+=le.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,T),g||(l+=this.finderPenaltyCountPatterns(T)*le.PENALTY_N3),g=this.modules[w][h],v=1);l+=this.finderPenaltyTerminateAndCount(g,v,T)*le.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let g=0;g<this.size-1;g++){const v=this.modules[h][g];v==this.modules[h][g+1]&&v==this.modules[h+1][g]&&v==this.modules[h+1][g+1]&&(l+=le.PENALTY_N2)}let u=0;for(const h of this.modules)u=h.reduce((g,v)=>g+(v?1:0),u);const d=this.size*this.size,p=Math.ceil(Math.abs(u*20-d*10)/d)-1;return o(0<=p&&p<=9),l+=p*le.PENALTY_N4,o(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let d=[6];for(let p=this.size-7;d.length<l;p-=u)d.splice(1,0,p);return d}}static getNumRawDataModules(l){if(l<le.MIN_VERSION||l>le.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*l+128)*l+64;if(l>=2){const d=Math.floor(l/7)+2;u-=(25*d-10)*d-55,l>=7&&(u-=36)}return o(208<=u&&u<=29648),u}static getNumDataCodewords(l,u){return Math.floor(le.getNumRawDataModules(l)/8)-le.ECC_CODEWORDS_PER_BLOCK[u.ordinal][l]*le.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let u=[];for(let p=0;p<l-1;p++)u.push(0);u.push(1);let d=1;for(let p=0;p<l;p++){for(let h=0;h<u.length;h++)u[h]=le.reedSolomonMultiply(u[h],d),h+1<u.length&&(u[h]^=u[h+1]);d=le.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(l,u){let d=u.map(p=>0);for(const p of l){const h=p^d.shift();d.push(0),u.forEach((g,v)=>d[v]^=le.reedSolomonMultiply(g,h))}return d}static reedSolomonMultiply(l,u){if(l>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let p=7;p>=0;p--)d=d<<1^(d>>>7)*285,d^=(u>>>p&1)*l;return o(d>>>8==0),d}finderPenaltyCountPatterns(l){const u=l[1];o(u<=this.size*3);const d=u>0&&l[2]==u&&l[3]==u*3&&l[4]==u&&l[5]==u;return(d&&l[0]>=u*4&&l[6]>=u?1:0)+(d&&l[6]>=u*4&&l[0]>=u?1:0)}finderPenaltyTerminateAndCount(l,u,d){return l&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(l,u){u[0]==0&&(l+=this.size),u.pop(),u.unshift(l)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(a,l,u){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let d=l-1;d>=0;d--)u.push(a>>>d&1)}function i(a,l){return(a>>>l&1)!=0}function o(a){if(!a)throw new Error("Assertion error")}const r=class Ae{constructor(l,u,d){if(this.mode=l,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(l){let u=[];for(const d of l)n(d,8,u);return new Ae(Ae.Mode.BYTE,l.length,u)}static makeNumeric(l){if(!Ae.isNumeric(l))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<l.length;){const p=Math.min(l.length-d,3);n(parseInt(l.substring(d,d+p),10),p*3+1,u),d+=p}return new Ae(Ae.Mode.NUMERIC,l.length,u)}static makeAlphanumeric(l){if(!Ae.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=l.length;d+=2){let p=Ae.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d))*45;p+=Ae.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d+1)),n(p,11,u)}return d<l.length&&n(Ae.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d)),6,u),new Ae(Ae.Mode.ALPHANUMERIC,l.length,u)}static makeSegments(l){return l==""?[]:Ae.isNumeric(l)?[Ae.makeNumeric(l)]:Ae.isAlphanumeric(l)?[Ae.makeAlphanumeric(l)]:[Ae.makeBytes(Ae.toUtf8ByteArray(l))]}static makeEci(l){let u=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,u);else if(l<16384)n(2,2,u),n(l,14,u);else if(l<1e6)n(6,3,u),n(l,21,u);else throw new RangeError("ECI assignment value out of range");return new Ae(Ae.Mode.ECI,0,u)}static isNumeric(l){return Ae.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return Ae.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,u){let d=0;for(const p of l){const h=p.mode.numCharCountBits(u);if(p.numChars>=1<<h)return 1/0;d+=4+h+p.bitData.length}return d}static toUtf8ByteArray(l){l=encodeURI(l);let u=[];for(let d=0;d<l.length;d++)l.charAt(d)!="%"?u.push(l.charCodeAt(d)):(u.push(parseInt(l.substring(d+1,d+3),16)),d+=2);return u}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let s=r;e.QrSegment=r})(Si||(Si={}));(e=>{(t=>{const n=class{constructor(o,r){this.ordinal=o,this.formatBits=r}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Si||(Si={}));(e=>{(t=>{const n=class{constructor(o,r){this.modeBits=o,this.numBitsCharCount=r}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Si||(Si={}));var Ji=Si;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var JD={L:Ji.QrCode.Ecc.LOW,M:Ji.QrCode.Ecc.MEDIUM,Q:Ji.QrCode.Ecc.QUARTILE,H:Ji.QrCode.Ecc.HIGH},KS=128,YS="L",XS="#FFFFFF",QS="#000000",ZS=!1,eT=1,WD=4,KD=0,YD=.1;function tT(e,t=0){const n=[];return e.forEach(function(i,o){let r=null;i.forEach(function(s,a){if(!s&&r!==null){n.push(`M${r+t} ${o+t}h${a-r}v1H${r+t}z`),r=null;return}if(a===i.length-1){if(!s)return;r===null?n.push(`M${a+t},${o+t} h1v1H${a+t}z`):n.push(`M${r+t},${o+t} h${a+1-r}v1H${r+t}z`);return}s&&r===null&&(r=a)})}),n.join("")}function nT(e,t){return e.slice().map((n,i)=>i<t.y||i>=t.y+t.h?n:n.map((o,r)=>r<t.x||r>=t.x+t.w?o:!1))}function XD(e,t,n,i){if(i==null)return null;const o=e.length+n*2,r=Math.floor(t*YD),s=o/t,a=(i.width||r)*s,l=(i.height||r)*s,u=i.x==null?e.length/2-a/2:i.x*s,d=i.y==null?e.length/2-l/2:i.y*s,p=i.opacity==null?1:i.opacity;let h=null;if(i.excavate){let v=Math.floor(u),T=Math.floor(d),w=Math.ceil(a+u-v),x=Math.ceil(l+d-T);h={x:v,y:T,w,h:x}}const g=i.crossOrigin;return{x:u,y:d,h:l,w:a,excavation:h,opacity:p,crossOrigin:g}}function QD(e,t){return t!=null?Math.max(Math.floor(t),0):e?WD:KD}function iT({value:e,level:t,minVersion:n,includeMargin:i,marginSize:o,imageSettings:r,size:s,boostLevel:a}){let l=Se.useMemo(()=>{const v=(Array.isArray(e)?e:[e]).reduce((T,w)=>(T.push(...Ji.QrSegment.makeSegments(w)),T),[]);return Ji.QrCode.encodeSegments(v,JD[t],n,void 0,void 0,a)},[e,t,n,a]);const{cells:u,margin:d,numCells:p,calculatedImageSettings:h}=Se.useMemo(()=>{let g=l.getModules();const v=QD(i,o),T=g.length+v*2,w=XD(g,s,v,r);return{cells:g,margin:v,numCells:T,calculatedImageSettings:w}},[l,s,r,i,o]);return{qrcode:l,margin:d,cells:u,numCells:p,calculatedImageSettings:h}}var ZD=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),oT=Se.forwardRef(function(t,n){const i=t,{value:o,size:r=KS,level:s=YS,bgColor:a=XS,fgColor:l=QS,includeMargin:u=ZS,minVersion:d=eT,boostLevel:p,marginSize:h,imageSettings:g}=i,T=Ac(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=T,x=Ac(T,["style"]),y=g==null?void 0:g.src,S=Se.useRef(null),E=Se.useRef(null),N=Se.useCallback($=>{S.current=$,typeof n=="function"?n($):n&&(n.current=$)},[n]),[C,I]=Se.useState(!1),{margin:_,cells:P,numCells:R,calculatedImageSettings:L}=iT({value:o,level:s,minVersion:d,boostLevel:p,includeMargin:u,marginSize:h,imageSettings:g,size:r});Se.useEffect(()=>{if(S.current!=null){const $=S.current,se=$.getContext("2d");if(!se)return;let re=P;const J=E.current,D=L!=null&&J!==null&&J.complete&&J.naturalHeight!==0&&J.naturalWidth!==0;D&&L.excavation!=null&&(re=nT(P,L.excavation));const V=window.devicePixelRatio||1;$.height=$.width=r*V;const z=r/R*V;se.scale(z,z),se.fillStyle=a,se.fillRect(0,0,R,R),se.fillStyle=l,ZD?se.fill(new Path2D(tT(re,_))):P.forEach(function(te,Z){te.forEach(function(he,ye){he&&se.fillRect(ye+_,Z+_,1,1)})}),L&&(se.globalAlpha=L.opacity),D&&se.drawImage(J,L.x+_,L.y+_,L.w,L.h)}}),Se.useEffect(()=>{I(!1)},[y]);const ee=_c({height:r,width:r},w);let H=null;return y!=null&&(H=Se.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{I(!0)},ref:E,crossOrigin:L==null?void 0:L.crossOrigin})),Se.createElement(Se.Fragment,null,Se.createElement("canvas",_c({style:ee,height:r,width:r,ref:N,role:"img"},x)),H)});oT.displayName="QRCodeCanvas";var e5=Se.forwardRef(function(t,n){const i=t,{value:o,size:r=KS,level:s=YS,bgColor:a=XS,fgColor:l=QS,includeMargin:u=ZS,minVersion:d=eT,boostLevel:p,title:h,marginSize:g,imageSettings:v}=i,T=Ac(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:x,numCells:y,calculatedImageSettings:S}=iT({value:o,level:s,minVersion:d,boostLevel:p,includeMargin:u,marginSize:g,imageSettings:v,size:r});let E=x,N=null;v!=null&&S!=null&&(S.excavation!=null&&(E=nT(x,S.excavation)),N=Se.createElement("image",{href:v.src,height:S.h,width:S.w,x:S.x+w,y:S.y+w,preserveAspectRatio:"none",opacity:S.opacity,crossOrigin:S.crossOrigin}));const C=tT(E,w);return Se.createElement("svg",_c({height:r,width:r,viewBox:`0 0 ${y} ${y}`,ref:n,role:"img"},T),!!h&&Se.createElement("title",null,h),Se.createElement("path",{fill:a,d:`M0,0 h${y}v${y}H0z`,shapeRendering:"crispEdges"}),Se.createElement("path",{fill:l,d:C,shapeRendering:"crispEdges"}),N)});e5.displayName="QRCodeSVG";var rT={exports:{}};(function(e){var t=function(){var n=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function s(l,u){if(!r[l]){r[l]={};for(var d=0;d<l.length;d++)r[l][l.charAt(d)]=d}return r[l][u]}var a={compressToBase64:function(l){if(l==null)return"";var u=a._compress(l,6,function(d){return i.charAt(d)});switch(u.length%4){default:case 0:return u;case 1:return u+"===";case 2:return u+"==";case 3:return u+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:a._decompress(l.length,32,function(u){return s(i,l.charAt(u))})},compressToUTF16:function(l){return l==null?"":a._compress(l,15,function(u){return n(u+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:a._decompress(l.length,16384,function(u){return l.charCodeAt(u)-32})},compressToUint8Array:function(l){for(var u=a.compress(l),d=new Uint8Array(u.length*2),p=0,h=u.length;p<h;p++){var g=u.charCodeAt(p);d[p*2]=g>>>8,d[p*2+1]=g%256}return d},decompressFromUint8Array:function(l){if(l==null)return a.decompress(l);for(var u=new Array(l.length/2),d=0,p=u.length;d<p;d++)u[d]=l[d*2]*256+l[d*2+1];var h=[];return u.forEach(function(g){h.push(n(g))}),a.decompress(h.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":a._compress(l,6,function(u){return o.charAt(u)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),a._decompress(l.length,32,function(u){return s(o,l.charAt(u))}))},compress:function(l){return a._compress(l,16,function(u){return n(u)})},_compress:function(l,u,d){if(l==null)return"";var p,h,g={},v={},T="",w="",x="",y=2,S=3,E=2,N=[],C=0,I=0,_;for(_=0;_<l.length;_+=1)if(T=l.charAt(_),Object.prototype.hasOwnProperty.call(g,T)||(g[T]=S++,v[T]=!0),w=x+T,Object.prototype.hasOwnProperty.call(g,w))x=w;else{if(Object.prototype.hasOwnProperty.call(v,x)){if(x.charCodeAt(0)<256){for(p=0;p<E;p++)C=C<<1,I==u-1?(I=0,N.push(d(C)),C=0):I++;for(h=x.charCodeAt(0),p=0;p<8;p++)C=C<<1|h&1,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=h>>1}else{for(h=1,p=0;p<E;p++)C=C<<1|h,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=0;for(h=x.charCodeAt(0),p=0;p<16;p++)C=C<<1|h&1,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=h>>1}y--,y==0&&(y=Math.pow(2,E),E++),delete v[x]}else for(h=g[x],p=0;p<E;p++)C=C<<1|h&1,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=h>>1;y--,y==0&&(y=Math.pow(2,E),E++),g[w]=S++,x=String(T)}if(x!==""){if(Object.prototype.hasOwnProperty.call(v,x)){if(x.charCodeAt(0)<256){for(p=0;p<E;p++)C=C<<1,I==u-1?(I=0,N.push(d(C)),C=0):I++;for(h=x.charCodeAt(0),p=0;p<8;p++)C=C<<1|h&1,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=h>>1}else{for(h=1,p=0;p<E;p++)C=C<<1|h,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=0;for(h=x.charCodeAt(0),p=0;p<16;p++)C=C<<1|h&1,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=h>>1}y--,y==0&&(y=Math.pow(2,E),E++),delete v[x]}else for(h=g[x],p=0;p<E;p++)C=C<<1|h&1,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=h>>1;y--,y==0&&(y=Math.pow(2,E),E++)}for(h=2,p=0;p<E;p++)C=C<<1|h&1,I==u-1?(I=0,N.push(d(C)),C=0):I++,h=h>>1;for(;;)if(C=C<<1,I==u-1){N.push(d(C));break}else I++;return N.join("")},decompress:function(l){return l==null?"":l==""?null:a._decompress(l.length,32768,function(u){return l.charCodeAt(u)})},_decompress:function(l,u,d){var p=[],h=4,g=4,v=3,T="",w=[],x,y,S,E,N,C,I,_={val:d(0),position:u,index:1};for(x=0;x<3;x+=1)p[x]=x;for(S=0,N=Math.pow(2,2),C=1;C!=N;)E=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),S|=(E>0?1:0)*C,C<<=1;switch(S){case 0:for(S=0,N=Math.pow(2,8),C=1;C!=N;)E=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),S|=(E>0?1:0)*C,C<<=1;I=n(S);break;case 1:for(S=0,N=Math.pow(2,16),C=1;C!=N;)E=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),S|=(E>0?1:0)*C,C<<=1;I=n(S);break;case 2:return""}for(p[3]=I,y=I,w.push(I);;){if(_.index>l)return"";for(S=0,N=Math.pow(2,v),C=1;C!=N;)E=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),S|=(E>0?1:0)*C,C<<=1;switch(I=S){case 0:for(S=0,N=Math.pow(2,8),C=1;C!=N;)E=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),S|=(E>0?1:0)*C,C<<=1;p[g++]=n(S),I=g-1,h--;break;case 1:for(S=0,N=Math.pow(2,16),C=1;C!=N;)E=_.val&_.position,_.position>>=1,_.position==0&&(_.position=u,_.val=d(_.index++)),S|=(E>0?1:0)*C,C<<=1;p[g++]=n(S),I=g-1,h--;break;case 2:return w.join("")}if(h==0&&(h=Math.pow(2,v),v++),p[I])T=p[I];else if(I===g)T=y+y.charAt(0);else return null;w.push(T),p[g++]=y+T.charAt(0),h--,y=T,h==0&&(h=Math.pow(2,v),v++)}}};return a}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(rT);var t5=rT.exports;const sT=J0(t5),cs=({title:e,icon:t,player:n,gradientClass:i,borderColorClass:o,glowColor:r,desc:s})=>m.jsxs("div",{className:`relative w-full overflow-hidden rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-1 border-t border-white/20 ${i} group`,children:[m.jsx("div",{className:"absolute -top-12 -right-12 w-48 h-48 bg-white opacity-10 rounded-full blur-3xl pointer-events-none"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-full h-3/4 bg-gradient-to-t from-black/60 via-black/20 to-transparent pointer-events-none"}),m.jsxs("div",{className:"relative z-10 flex flex-col items-center p-5 text-center",children:[m.jsxs("div",{className:"w-full flex justify-center items-center relative mb-4",children:[m.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 text-white/80 group-hover:text-white group-hover:scale-110 transition-all duration-500 filter drop-shadow-md",children:t}),m.jsx("h3",{className:"text-2xl font-black text-white tracking-wider drop-shadow-md",children:e})]}),m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full mb-3",children:[m.jsxs("div",{className:"relative mb-3",children:[m.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full blur-md transform scale-110 group-hover:scale-125 transition duration-700"}),m.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white/90 relative z-10 shadow-2xl bg-slate-200 dark:bg-slate-700",children:n.avatar.startsWith("data:")?m.jsx("img",{src:n.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-4xl text-slate-500",children:n.name[0]})}),m.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-white text-slate-900 text-xs font-bold px-3 py-0.5 rounded-full shadow-lg z-20 border border-slate-200 whitespace-nowrap",children:n.mbti})]}),m.jsx("div",{className:"text-3xl font-bold text-white drop-shadow-md mt-2",children:n.name})]}),m.jsx("div",{className:"w-full bg-black/20 backdrop-blur-md border border-white/10 rounded-xl p-2.5 flex items-center justify-center",children:m.jsx("p",{className:"text-xs text-white/90 font-medium leading-snug",children:s})})]})]}),q0=({players:e,report:t,onReturnHome:n,startTime:i,gameMode:o})=>{const[r,s]=A.useState({awards:!0,group:!1,winner:!1}),[a,l]=A.useState({}),[u,d]=A.useState(!1);`${window.location.origin}${window.location.pathname}${sT.compressToEncodedURIComponent(JSON.stringify({players:e,report:t,startTime:i,gameMode:o}))}`;const p=[...e].sort((y,S)=>S.trustScore+S.insightScore+S.expressionScore-(y.trustScore+y.insightScore+y.expressionScore)),h=p[0],g=y=>[...e].sort((S,E)=>E[y]-S[y])[0],v=[...e].sort((y,S)=>S.totalRatingGiven-y.totalRatingGiven)[0],T=y=>{s(S=>({...S,[y]:!S[y]}))},w=y=>{l(S=>({...S,[y]:!S[y]}))},x=()=>{const y=new Date(i).toLocaleString("zh-CN"),S=Math.floor((Date.now()-i)/6e4),E=`
        <!DOCTYPE html>
        <html lang="zh-CN">
        <head>
            <meta charset="UTF-8">
            <title> -  (${y})</title>
            <style>
                body { font-family: sans-serif; background: #0f172a; color: #e2e8f0; padding: 40px; max-width: 800px; margin: 0 auto; }
                h1, h2 { color: #2dd4bf; border-bottom: 1px solid #334155; padding-bottom: 10px; }
                .card { background: #1e293b; padding: 20px; margin-bottom: 20px; border-radius: 12px; border: 1px solid #334155; }
                .highlight { color: #f59e0b; font-weight: bold; }
                .player-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; padding: 10px; background: #0f172a; border-radius: 8px; }
                .tag { font-size: 0.8em; padding: 2px 8px; border-radius: 12px; background: #334155; }
            </style>
        </head>
        <body>
            <h1>  - </h1>
            <div class="card">
                <p><strong>:</strong> ${y}</p>
                <p><strong>:</strong> ${S} </p>
                <p><strong>:</strong> ${o}</p>
                <p><strong>:</strong> ${e.length} </p>
            </div>

            <h2> </h2>
            <div class="card">
                <p> <strong> ():</strong> ${h.name}</p>
                <p> <strong> ():</strong> ${g("trustScore").name}</p>
                <p> <strong> ():</strong> ${g("insightScore").name}</p>
                <p> <strong> ():</strong> ${g("expressionScore").name}</p>
                <p> <strong> ():</strong> ${v.name}</p>
            </div>

            <h2> </h2>
            <div class="card">
                <p>${t.groupAnalysis}</p>
            </div>

            <h2> </h2>
            ${p.map(_=>`
                <div class="card">
                    <div class="player-row">
                        <strong>${_.name}</strong> <span class="tag">${_.mbti}</span>
                        <span style="margin-left:auto" class="highlight">: ${_.trustScore+_.insightScore+_.expressionScore}</span>
                    </div>
                    <p><em>"${t.playerAnalysis[_.id]||"..."}"</em></p>
                    <p style="font-size: 0.9em; opacity: 0.8">
                        : ${_.trustScore} | : ${_.insightScore} | : ${_.expressionScore}
                    </p>
                </div>
            `).join("")}
            
            <footer style="text-align: center; margin-top: 40px; color: #64748b; font-size: 0.8em;">
                Generated by Rainbow Boat
            </footer>
        </body>
        </html>
      `,N=new Blob([E],{type:"text/html"}),C=URL.createObjectURL(N),I=document.createElement("a");I.href=C,I.download=`__${new Date().toISOString().slice(0,10)}.html`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(C)};return m.jsx("div",{className:"min-h-screen w-full overflow-y-auto p-8 bg-slate-50/80 dark:bg-slate-900/80 text-slate-800 dark:text-white custom-scrollbar transition-colors duration-300 backdrop-blur-sm",children:m.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-20",children:[m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx(fe.div,{initial:{scale:0},animate:{scale:1},className:"inline-block p-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full shadow-lg mb-4",children:m.jsx(Hl,{size:48,className:"text-white"})}),m.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-[linear-gradient(to_right,#ef4444,#f97316,#eab308,#22c55e,#3b82f6,#a855f7)]",children:"  "}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-light tracking-wide",children:"  "})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center gap-2 px-2",children:[m.jsx(R2,{className:"text-teal-600 dark:text-teal-400"}),m.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:""})]}),m.jsx(It,{children:r.awards&&m.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx(cs,{title:"",icon:m.jsx(B2,{size:32}),player:g("trustScore"),gradientClass:"bg-gradient-to-br from-blue-400 to-blue-600",borderColorClass:"border-blue-300",glowColor:"#60a5fa",desc:`: ${g("trustScore").trustScore} - `}),m.jsx(cs,{title:"",icon:m.jsx(q2,{size:32}),player:g("insightScore"),gradientClass:"bg-gradient-to-br from-purple-400 to-purple-600",borderColorClass:"border-purple-300",glowColor:"#a855f7",desc:`: ${g("insightScore").insightScore} - `}),m.jsx(cs,{title:"",icon:m.jsx(So,{size:32}),player:g("expressionScore"),gradientClass:"bg-gradient-to-br from-orange-400 to-red-500",borderColorClass:"border-orange-300",glowColor:"#f97316",desc:`: ${g("expressionScore").expressionScore} - `}),m.jsx(cs,{title:"",icon:m.jsx(ax,{size:32}),player:v,gradientClass:"bg-gradient-to-br from-pink-400 to-rose-600",borderColorClass:"border-pink-300",glowColor:"#ec4899",desc:`: ${v.totalRatingGiven} - `})]})}),m.jsx("div",{className:"mt-12 flex justify-center",children:m.jsx("button",{onClick:()=>T("winner"),className:"relative group w-full max-w-3xl",children:m.jsx("div",{className:`w-full p-1 rounded-3xl transition-all duration-500 transform hover:scale-[1.02] ${r.winner?"bg-gradient-to-r from-yellow-300 via-amber-400 to-yellow-300 animate-pulse":"bg-slate-200 dark:bg-slate-700"}`,children:m.jsx("div",{className:`w-full h-full p-8 rounded-[22px] border-2 flex flex-col items-center shadow-2xl relative overflow-hidden ${r.winner?"bg-slate-50 dark:bg-slate-900 border-transparent":"bg-slate-100 dark:bg-slate-800 border-dashed border-slate-300 dark:border-slate-600"}`,children:r.winner?m.jsxs(fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"relative z-10 flex flex-col md:flex-row items-center gap-10 w-full justify-center",children:[m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-yellow-500/20 rounded-full blur-3xl -z-10"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-40 h-40 rounded-full overflow-hidden border-[6px] border-yellow-400 shadow-[0_0_30px_rgba(251,191,36,0.6)]",children:h.avatar.startsWith("data:")?m.jsx("img",{src:h.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 w-full h-full flex items-center justify-center font-bold text-5xl",children:h.name[0]})}),m.jsx("div",{className:"absolute -top-6 -right-6 text-7xl drop-shadow-lg filter animate-bounce",children:""})]}),m.jsxs("div",{className:"text-center md:text-left",children:[m.jsx("div",{className:"text-amber-500 dark:text-amber-400 font-black text-2xl mb-2 uppercase tracking-[0.2em]",children:""}),m.jsx("div",{className:"text-5xl font-black text-slate-900 dark:text-white mb-4 drop-shadow-sm",children:h.name}),m.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[m.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700",children:m.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-white",children:h.mbti})}),m.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 px-4 py-2 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[m.jsx("span",{className:"text-sm text-yellow-600 dark:text-yellow-500 mr-2",children:""}),m.jsx("span",{className:"text-2xl font-black text-yellow-600 dark:text-yellow-400",children:h.trustScore+h.insightScore+h.expressionScore})]})]})]})]}):m.jsxs("div",{className:"py-8 flex flex-col items-center text-slate-500 dark:text-slate-400",children:[m.jsx(Aa,{size:48,className:"mb-4 text-slate-400 dark:text-slate-500"}),m.jsx("span",{className:"font-bold text-xl",children:""})]})})})})})]}),m.jsxs("div",{className:"space-y-4 pt-8 border-t border-slate-200 dark:border-slate-700/50",children:[m.jsxs("button",{onClick:()=>T("group"),className:"w-full flex items-center justify-between p-6 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 hover:border-teal-500 transition group",children:[m.jsxs("span",{className:"font-bold text-xl flex items-center gap-3 text-teal-600 dark:text-teal-400 group-hover:scale-105 transition-transform",children:[m.jsx(P2,{})," "]}),r.group?m.jsx(M2,{}):m.jsx(Aa,{size:18,className:"text-slate-400"})]}),m.jsx(It,{children:r.group&&m.jsx(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:m.jsx("div",{className:"text-slate-700 dark:text-slate-200 leading-relaxed text-lg bg-slate-50 dark:bg-slate-900/80 p-8 rounded-2xl border border-slate-200 dark:border-slate-700/50 shadow-inner whitespace-pre-wrap",children:t.groupAnalysis||"AI ..."})})})]}),m.jsxs("div",{className:"space-y-4 pt-4",children:[m.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-blue-600 dark:text-blue-400 px-2",children:[m.jsx(nc,{}),"  ()"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map((y,S)=>m.jsxs(fe.div,{className:`bg-white dark:bg-slate-800/60 backdrop-blur rounded-xl border transition-all duration-300 ${a[y.id]?"border-teal-500 shadow-lg ring-1 ring-teal-500/20":"border-slate-200 dark:border-slate-700 hover:border-slate-400"}`,children:[m.jsxs("button",{onClick:()=>w(y.id),className:"w-full p-4 flex items-center gap-4 text-left",children:[m.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden bg-slate-200 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 shrink-0 shadow-sm",children:y.avatar.startsWith("data:")?m.jsx("img",{src:y.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-xl",children:y.name[0]})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:y.name}),m.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-900 text-slate-600 dark:text-slate-400 px-2 py-1 rounded-full font-mono border border-slate-200 dark:border-slate-700",children:y.mbti})]}),m.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:a[y.id]?m.jsxs(m.Fragment,{children:[m.jsx(j2,{size:12,className:"text-teal-500"})," "]}):m.jsxs(m.Fragment,{children:[m.jsx(Aa,{size:12})," ..."]})})]})]}),m.jsx(It,{children:a[y.id]&&m.jsx(fe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden px-4 pb-4 border-t border-slate-100 dark:border-slate-700/50",children:m.jsxs("div",{className:"pt-4",children:[m.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300 italic mb-4 bg-slate-50 dark:bg-slate-900/30 p-4 rounded-lg border-l-4 border-teal-500 whitespace-pre-wrap leading-relaxed",children:['"',t.playerAnalysis[y.id]||"AI ...",'"']}),m.jsxs("div",{className:"flex gap-2 text-xs font-mono opacity-90",children:[m.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded",children:[": ",y.trustScore]}),m.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-1 rounded",children:[": ",y.insightScore]}),m.jsxs("span",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-1 rounded",children:[": ",y.expressionScore]})]})]})})})]},y.id))})]}),m.jsxs("div",{className:"flex justify-center pt-8 gap-4",children:[m.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 text-white px-6 py-3 rounded-full font-bold transition shadow-lg border border-slate-600",children:[m.jsx(lx,{size:20})," "]}),m.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-full font-bold transition shadow-lg border border-purple-400",children:[m.jsx(Im,{size:20})," "]}),m.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-gradient-to-r from-teal-600 to-blue-600 hover:from-teal-500 hover:to-blue-500 text-white px-8 py-3 rounded-full font-bold transition shadow-lg transform hover:scale-105",children:[m.jsx(z2,{size:20})," "]})]}),u&&m.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/90 dark:bg-slate-950/95 backdrop-blur-md p-4 animate-in fade-in duration-300",children:m.jsxs("div",{className:"w-full max-w-5xl h-[85vh] flex flex-col bg-white dark:bg-slate-800 rounded-[2.5rem] overflow-hidden shadow-2xl border border-slate-200 dark:border-slate-700",children:[m.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-white dark:bg-slate-800 z-10",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"text-2xl font-black text-slate-800 dark:text-white flex items-center gap-2",children:[m.jsx(Im,{size:28,className:"text-purple-500"}),"   "]}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 font-medium",children:""})]}),m.jsx("button",{onClick:()=>d(!1),className:"w-12 h-12 flex items-center justify-center bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-white rounded-full transition-all group",children:m.jsx($l,{size:24,className:"group-hover:rotate-90 transition-transform"})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar bg-slate-50/50 dark:bg-slate-900/50",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:p.map(y=>{const S=`  - 


${t.groupAnalysis}

${y.name} 
${t.playerAnalysis[y.id]||""}

[]: ${y.trustScore+y.insightScore+y.expressionScore}
(:${y.trustScore} | :${y.insightScore} | :${y.expressionScore})`;return m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-8 border border-slate-100 dark:border-slate-700 flex flex-col items-center gap-6 hover:border-purple-500 dark:hover:border-purple-500 transition-all shadow-sm hover:shadow-xl group",children:[m.jsxs("div",{className:"flex items-center gap-4 w-full",children:[m.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 shadow-inner",children:y.avatar.startsWith("data:")?m.jsx("img",{src:y.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-black text-2xl text-slate-400",children:y.name[0]})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-black text-slate-800 dark:text-white text-xl",children:y.name}),m.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-black tracking-widest uppercase",children:y.mbti})]})]}),m.jsx("div",{className:"p-4 bg-white rounded-2xl shadow-xl ring-8 ring-slate-50 dark:ring-slate-900/50 group-hover:ring-purple-50 dark:group-hover:ring-purple-900/20 transition-all",children:m.jsx(oT,{value:S,size:200,level:"M",includeMargin:!1})}),m.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500 text-center font-bold leading-relaxed",children:["",m.jsx("br",{}),m.jsxs("span",{className:"text-purple-600 dark:text-purple-400 text-sm",children:['"',y.name,'"']}),m.jsx("br",{}),""]})]},y.id)})})})]})})]})})};let tn=[];const Pc=()=>{const e=window.speechSynthesis.getVoices();tn=e.filter(t=>t.lang==="zh-CN"||t.lang.includes("zh-SG")),tn.length===0&&(tn=e.filter(t=>t.lang.toLowerCase().includes("zh")&&!t.lang.toLowerCase().includes("hk")&&!t.lang.toLowerCase().includes("mo"))),tn.length===0&&(tn=e.filter(t=>t.lang.toLowerCase().includes("zh")))};typeof window<"u"&&window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=Pc),Pc());const n5=(e,t="system")=>{if(!window.speechSynthesis)return;window.speechSynthesis.cancel(),tn.length===0&&Pc();const n=new SpeechSynthesisUtterance(e);if(n.rate=1.2,n.pitch=1,tn.length>0)if(t==="system")n.voice=tn[0];else{let i=0;for(let r=0;r<t.length;r++)i=t.charCodeAt(r)+((i<<5)-i);const o=Math.abs(i)%tn.length;n.voice=tn[o],n.pitch=.8+Math.abs(i)%5/10}window.speechSynthesis.speak(n)};let Nt=null;const Sf=()=>"webkitSpeechRecognition"in window||"SpeechRecognition"in window,lT=(e,t)=>{if(!Sf())return null;const n=window.SpeechRecognition||window.webkitSpeechRecognition;Nt=new n,Nt.continuous=!0,Nt.interimResults=!0,Nt.lang="zh-CN",Nt.onresult=i=>{let o="";for(let r=i.resultIndex;r<i.results.length;++r)i.results[r].isFinal&&(o+=i.results[r][0].transcript);o&&e(o)},Nt.onerror=i=>{console.warn("Speech recognition error",i.error)},Nt.onend=()=>{t()};try{Nt.start()}catch{console.warn("Speech recognition already started")}return Nt},bc=()=>{Nt&&(Nt.stop(),Nt=null)},i5=({onSelectMode:e,onOpenConfig:t,isMobile:n})=>{const i=[{id:"test",title:"AI ",desc:" AI ",icon:m.jsx(So,{className:"text-teal-400",size:n?28:32}),color:"from-teal-600/20 to-emerald-600/20",borderColor:"border-teal-500/30",tag:"",tagColor:"bg-teal-500"},{id:"tasks",title:"",desc:"",icon:m.jsx(Hl,{className:"text-amber-400",size:n?28:32}),color:"from-amber-600/20 to-orange-600/20",borderColor:"border-amber-500/30",tag:"",tagColor:"bg-amber-500"},{id:"party",title:" Party",desc:"AI",icon:m.jsx(px,{className:"text-blue-400",size:n?28:32}),color:"from-blue-600/20 to-indigo-600/20",borderColor:"border-blue-500/30",tag:"",tagColor:"bg-blue-500"}];return m.jsxs("div",{className:"h-screen flex flex-col items-center justify-center px-4 md:px-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-500/10 rounded-full blur-[120px] pointer-events-none"}),m.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[120px] pointer-events-none"}),m.jsx("button",{onClick:t,className:"absolute top-4 right-4 md:top-6 md:right-6 p-2.5 md:p-3 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 backdrop-blur-sm rounded-xl border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-teal-600 dark:hover:text-white transition-all z-20 shadow-sm",title:"AI ",children:m.jsx(Ol,{size:n?18:20})}),m.jsxs(fe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-center mb-6 md:mb-10 relative z-10",children:[m.jsx("h1",{className:`${n?"text-4xl":"text-5xl md:text-6xl"} font-black mb-2 tracking-tighter`,children:m.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-blue-500 to-purple-500",children:"MBTI Hub"})}),m.jsx("p",{className:`text-slate-500 dark:text-slate-400 ${n?"text-sm":"text-lg md:text-xl"} font-medium`,children:""})]}),m.jsx("div",{className:`${n?"flex flex-col gap-3 w-full max-w-sm":"flex flex-row gap-6 w-full max-w-6xl"} h-auto max-h-[70vh] relative z-10`,children:i.map((o,r)=>m.jsxs(fe.button,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:r*.1},whileHover:n?{scale:1.02}:{y:-12,scale:1.05},whileTap:{scale:.98},onClick:()=>e(o.id),className:`group relative flex-1 flex ${n?"flex-row items-center gap-4 p-4 min-h-[100px]":"flex-col text-left p-8 min-h-[320px] justify-between"} rounded-[2rem] border-2 ${o.borderColor} bg-white dark:bg-slate-900/40 shadow-xl hover:shadow-2xl dark:shadow-none backdrop-blur-xl overflow-hidden transition-all cursor-pointer`,children:[m.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${o.color} opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none duration-500`}),m.jsx("div",{className:"absolute inset-0 bg-white/40 dark:bg-slate-900/40 group-hover:opacity-0 transition-opacity pointer-events-none duration-500"}),m.jsx("div",{className:`relative z-10 ${n?"p-3":"p-5 mb-4 w-fit"} bg-white dark:bg-slate-800 rounded-2xl group-hover:scale-110 group-hover:rotate-6 transition-all shadow-md group-hover:shadow-lg`,children:o.icon}),m.jsxs("div",{className:"relative z-10 flex-1 flex flex-col justify-center",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("h3",{className:`${n?"text-xl":"text-2xl"} font-black text-slate-800 dark:text-white group-hover:scale-105 transition-transform origin-left`,children:o.title}),m.jsx("span",{className:`${o.tagColor} text-white text-[10px] font-black px-2.5 py-1 rounded-full uppercase tracking-widest shadow-sm`,children:o.tag})]}),m.jsx("p",{className:`text-slate-500 dark:text-slate-400 ${n?"text-xs":"text-base"} leading-relaxed font-bold opacity-80 group-hover:opacity-100 transition-opacity`,children:o.desc})]}),!n&&m.jsxs("div",{className:"relative z-10 flex items-center gap-2 text-slate-400 group-hover:text-white font-black text-sm uppercase tracking-tighter self-end mt-4",children:["Enter ",m.jsx(li,{size:16})]})]},o.id))}),m.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:`mt-6 md:mt-10 flex items-center gap-2 text-slate-400 dark:text-slate-500 ${n?"text-[10px]":"text-xs"} bg-slate-100 dark:bg-slate-800/20 px-4 py-2 rounded-full border border-slate-200 dark:border-slate-700/30`,children:[m.jsx(O2,{size:n?12:14}),m.jsx("span",{children:""})]})]})};let io=null,j0=null,Ii=null,ir=null,Rc;const Tf=async e=>{try{ir=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),io=new(window.AudioContext||window.webkitAudioContext),Ii=io.createAnalyser(),Ii.fftSize=256,j0=io.createMediaStreamSource(ir),j0.connect(Ii);const t=new Uint8Array(Ii.frequencyBinCount),n=()=>{if(!Ii)return;Ii.getByteFrequencyData(t);let i=0;for(let s=0;s<t.length;s++)i+=t[s];const r=i/t.length/255;e(r),Rc=requestAnimationFrame(n)};n()}catch(t){console.error("Audio monitoring failed",t)}},vl=()=>{Rc&&cancelAnimationFrame(Rc),ir&&(ir.getTracks().forEach(e=>e.stop()),ir=null),io&&(io.close(),io=null)},o5=({onBack:e,isMobile:t,isDarkMode:n})=>{const[i,o]=A.useState("INTJ"),[r,s]=A.useState(0),[a,l]=A.useState(null),[u,d]=A.useState(!1),[p,h]=A.useState(null),[g,v]=A.useState("SELECTING"),[T,w]=A.useState(0),[x,y]=A.useState(""),[S,E]=A.useState(!1),[N,C]=A.useState(0),[I,_]=A.useState(new Set),[P,R]=A.useState(0),[L,ee]=A.useState(!1),H=A.useRef(null),$=A.useRef(null),[se,re]=A.useState(null),J=Qo[i]||[],D=J[r]||"Te",V=kd.find(j=>j.id===D),z={id:"solo-user",name:"",mbti:i,isBot:!1,avatar:"user",trustScore:0,insightScore:0,expressionScore:0,totalRatingGiven:0,position:0,previousPosition:null,stackIndex:r,skipUsedCount:0,color:"teal"},te=async(j,ie)=>{d(!0),h(null),v("SELECTING"),_(new Set),R(0);try{const B=await Zu(j,[z],{...z,mbti:ie});l(B)}catch(B){console.error(B)}finally{d(!1)}};A.useEffect(()=>{te(D,i)},[D,i]),A.useEffect(()=>{let j;return g==="EXECUTING"&&T>0?j=setInterval(()=>{w(ie=>ie-1)},1e3):T===0&&g==="EXECUTING"&&he(),()=>clearInterval(j)},[g,T]),A.useEffect(()=>{g==="EXECUTING"?(Tf(j=>C(j)),Sf()&&(E(!0),lT(j=>y(ie=>ie+" "+j),()=>E(!1)))):(vl(),bc(),E(!1))},[g]),A.useEffect(()=>{let j=null;return L&&(g==="SELECTING"||g==="EXECUTING")&&navigator.mediaDevices.getUserMedia({video:!0}).then(ie=>{j=ie,H.current&&(H.current.srcObject=ie)}).catch(ie=>{console.error("Camera error:",ie),ee(!1)}),()=>{j&&j.getTracks().forEach(ie=>ie.stop())}},[L,g]);const Z=j=>{h(j),w(j.durationSeconds),y(""),v("EXECUTING")},he=async()=>{v("FEEDBACK"),d(!0),p&&_(B=>new Set([...B,p.category]));let j="";if(L&&H.current&&$.current&&p){const B=$.current.getContext("2d");if(B){B.drawImage(H.current,0,0,300,300);const W=$.current.toDataURL("image/jpeg");j=await nx(W,p.title)}}const ie=await C2(z,p,x,j);re(ie),d(!1)},ye=()=>{re(null),h(null),v("SELECTING"),R(0)},Ut=()=>{const j=(r+1)%J.length;s(j),re(null),h(null),_(new Set),v("SELECTING"),R(0)},Le=a?Object.entries(a):[],mt=Le.filter(([j])=>!I.has(j));return m.jsxs("div",{className:"h-screen bg-stone-50 dark:bg-slate-950 text-slate-800 dark:text-white flex flex-col overflow-hidden transition-colors duration-300",children:[m.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-blue-500/5 dark:bg-blue-500/10 rounded-full blur-[120px] pointer-events-none"}),m.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/5 dark:bg-purple-500/10 rounded-full blur-[120px] pointer-events-none"}),m.jsxs("header",{className:"shrink-0 flex items-center justify-between p-4 md:p-6 relative z-10",children:[m.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-teal-600 dark:hover:text-white transition group font-medium",children:[m.jsx(b2,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),m.jsx("span",{className:t?"hidden":"",children:" Hub"})]}),m.jsxs("div",{className:"flex items-center gap-2 md:gap-4 bg-white dark:bg-slate-900/50 p-1.5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 px-2 md:px-3",children:[m.jsx(ux,{size:14,className:"text-teal-500 dark:text-teal-400"}),m.jsx("select",{value:i,onChange:j=>{o(j.target.value),s(0)},className:"bg-transparent text-sm font-black outline-none cursor-pointer text-slate-700 dark:text-slate-200",children:tl.map(j=>m.jsx("option",{value:j,className:"bg-white dark:bg-slate-900 text-slate-800 dark:text-white",children:j},j))})]}),!t&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-5 w-px bg-slate-200 dark:bg-slate-800"}),m.jsx("button",{onClick:()=>ee(!L),className:`p-1.5 rounded-lg transition-all ${L?"bg-teal-500/10 dark:bg-teal-500/20 text-teal-600 dark:text-teal-400":"bg-slate-50 dark:bg-slate-800 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:L?m.jsx(aP,{size:16}):m.jsx(lP,{size:16})})]}),m.jsx("button",{onClick:()=>te(D,i),className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition text-slate-400 dark:text-slate-500",children:m.jsx(dx,{size:16,className:u&&g==="SELECTING"?"animate-spin":""})})]})]}),m.jsx("div",{className:"shrink-0 flex items-center justify-center gap-1 md:gap-2 px-4 pb-4 overflow-x-auto no-scrollbar relative z-10 transition-all",children:J.map((j,ie)=>{const B=ie===r,W=ie<r;return m.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[m.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center text-[10px] md:text-xs font-black transition-all ${B?"bg-teal-500 text-white scale-110 shadow-lg shadow-teal-500/30":W?"bg-teal-50 dark:bg-slate-800 text-teal-600 dark:text-teal-400 border border-teal-200 dark:border-teal-500/30":"bg-white dark:bg-slate-900 text-slate-300 dark:text-slate-700 border border-slate-200 dark:border-slate-800"}`,children:j}),ie<J.length-1&&m.jsx("div",{className:`w-4 md:w-6 h-px ${ie<r?"bg-teal-500/50":"bg-slate-200 dark:bg-slate-800"}`})]},j)})}),m.jsx("main",{className:"flex-1 flex flex-col items-center justify-center px-4 overflow-hidden relative z-10",children:m.jsxs(It,{mode:"wait",children:[g==="SELECTING"&&m.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"w-full max-w-4xl flex flex-col items-center",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsxs("span",{className:"px-3 py-1 bg-teal-500/10 dark:bg-teal-500/10 border border-teal-200 dark:border-teal-500/20 rounded-full text-teal-600 dark:text-teal-400 text-[10px] md:text-xs font-black tracking-widest uppercase mb-2 inline-block",children:["LEVEL ",r+1,": ",V==null?void 0:V.name]}),m.jsx("h2",{className:`${t?"text-xl":"text-2xl"} font-black text-slate-800 dark:text-white`,children:""})]}),u?m.jsx("div",{className:`${t?"flex flex-col":"grid grid-cols-2"} gap-4 w-full h-[60vh]`,children:Array.from({length:4}).map((j,ie)=>m.jsx("div",{className:"flex-1 bg-white dark:bg-slate-900/50 rounded-3xl border border-slate-100 dark:border-slate-800 animate-pulse"},ie))}):m.jsx("div",{className:"w-full flex-1 flex flex-col justify-center",children:t?m.jsxs("div",{className:"w-full relative px-10",children:[m.jsx("div",{className:"overflow-hidden py-10",children:m.jsx(fe.div,{className:"flex",animate:{x:`-${P*100}%`},transition:{type:"spring",stiffness:200,damping:25},children:Le.map(([j,ie])=>{const B=fi[j],W=I.has(j);return m.jsx("div",{className:"w-full shrink-0 px-4",children:m.jsxs("button",{onClick:()=>!W&&Z(ie),disabled:W,className:`w-full aspect-[4/5] p-8 rounded-[3rem] border-4 ${W?"border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/40":"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/50 shadow-2xl"} text-left transition-all relative overflow-hidden flex flex-col justify-between`,children:[m.jsxs("div",{className:`absolute inset-0 bg-white/60 dark:bg-slate-950/80 backdrop-blur-sm flex flex-col items-center justify-center z-10 transition-opacity duration-500 ${W?"opacity-100":"opacity-0 pointer-events-none"}`,children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-teal-500 text-white flex items-center justify-center mb-4 shadow-lg shadow-teal-500/20",children:m.jsx(_a,{size:32})}),m.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-black tracking-widest text-[10px]",children:""})]}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:"text-5xl mb-6",children:B.icon}),m.jsx("div",{className:"px-3 py-1 bg-slate-100 dark:bg-white/10 rounded-full text-[10px] font-black uppercase text-slate-500 dark:text-slate-300 tracking-[0.2em] mb-4 inline-block",children:B.name}),m.jsx("h3",{className:"text-2xl font-black mb-3 text-slate-800 dark:text-white leading-tight",children:ie.title}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed font-bold opacity-80",children:ie.description})]}),m.jsxs("div",{className:"relative z-10 flex items-center gap-2 text-teal-500 font-black text-xs",children:["START CHALLENGE ",m.jsx(li,{size:14})]})]})},j)})})}),m.jsx("button",{onClick:()=>R(Math.max(0,P-1)),className:`absolute left-0 top-1/2 -translate-y-1/2 p-3 z-20 bg-white dark:bg-slate-800 rounded-full shadow-xl border border-slate-100 dark:border-slate-700 transition-all ${P===0?"opacity-0 scale-50":"opacity-100 scale-100"}`,children:m.jsx(D2,{size:24})}),m.jsx("button",{onClick:()=>R(Math.min(Le.length-1,P+1)),className:`absolute right-0 top-1/2 -translate-y-1/2 p-3 z-20 bg-white dark:bg-slate-800 rounded-full shadow-xl border border-slate-100 dark:border-slate-700 transition-all ${P===Le.length-1?"opacity-0 scale-50":"opacity-100 scale-100"}`,children:m.jsx(sx,{size:24})}),m.jsx("div",{className:"flex justify-center gap-2 mt-2",children:Le.map((j,ie)=>m.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${ie===P?"w-8 bg-teal-500":"w-1.5 bg-slate-200 dark:bg-slate-800"}`},ie))})]}):m.jsx("div",{className:"grid grid-cols-2 gap-8 w-full max-w-5xl mx-auto h-[60vh]",children:Le.map(([j,ie])=>{const B=fi[j],W=I.has(j);return m.jsxs(fe.button,{whileHover:W?{}:{scale:1.02,y:-8,boxShadow:"0 25px 50px -12px rgb(0 0 0 / 0.15)"},onClick:()=>!W&&Z(ie),disabled:W,className:`p-10 rounded-[3.5rem] border-2 bg-white dark:bg-slate-900/50 text-left transition-all group relative overflow-hidden flex flex-col justify-between ${W?"border-slate-100 dark:border-slate-800 opacity-40 grayscale":"border-slate-200 dark:border-slate-800 hover:border-teal-500/50 shadow-lg hover:shadow-2xl active:scale-95"}`,children:[W&&m.jsxs("div",{className:"absolute inset-0 bg-white/40 dark:bg-slate-950/60 backdrop-blur-sm flex flex-col items-center justify-center z-20",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-teal-500 text-white flex items-center justify-center mb-2",children:m.jsx(_a,{size:32})}),m.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-black tracking-widest text-xs",children:""})]}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[m.jsx("div",{className:"text-5xl group-hover:scale-125 transition-transform duration-500",children:B.icon}),m.jsx("div",{className:"px-3.5 py-1.5 bg-slate-100 dark:bg-white/5 rounded-full text-[10px] font-black uppercase tracking-[0.25em] text-slate-500 dark:text-slate-400 font-mono shadow-inner",children:B.name})]}),m.jsx("h3",{className:"text-3xl font-black mb-4 text-slate-800 dark:text-white group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors leading-tight",children:ie.title}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg leading-relaxed font-bold opacity-80 group-hover:opacity-100 transition-opacity line-clamp-3",children:ie.description})]}),m.jsxs("div",{className:"relative z-10 flex items-center gap-2 text-teal-500 font-black text-xs opacity-0 group-hover:opacity-100 transition-all translate-y-4 group-hover:translate-y-0",children:["START CHALLENGE ",m.jsx(li,{size:18})]}),m.jsx("div",{className:`absolute -bottom-12 -right-12 w-48 h-48 rounded-full bg-gradient-to-br ${W?"from-slate-100 to-slate-200":"from-teal-500/5 to-blue-500/5"} blur-2xl group-hover:scale-150 transition-transform duration-700 pointer-events-none`})]},j)})})})]},"selecting"),g==="EXECUTING"&&p&&m.jsxs(fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-2xl bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 shadow-2xl overflow-hidden p-6 md:p-10",children:[m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4 md:mb-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:`${t?"text-xl":"text-2xl"} font-black mb-2 text-transparent bg-clip-text bg-gradient-to-r from-teal-500 to-blue-600`,children:p.title}),m.jsxs("div",{className:"flex gap-2 flex-wrap",children:[m.jsxs("span",{className:"px-3 py-1 bg-teal-50 dark:bg-teal-900/20 rounded-full text-[10px] font-black text-teal-600 dark:text-teal-400 flex items-center gap-1.5 border border-teal-100 dark:border-teal-500/20",children:[m.jsx(oP,{size:12})," ",V==null?void 0:V.name]}),m.jsxs("span",{className:"px-3 py-1 bg-amber-50 dark:bg-amber-900/20 rounded-full text-[10px] font-black text-amber-600 dark:text-amber-400 flex items-center gap-1.5 border border-amber-100 dark:border-amber-500/20",children:[m.jsx(So,{size:12})," ",p.scoreType]})]})]}),m.jsxs("div",{className:"w-14 h-14 md:w-16 md:h-16 rounded-2xl bg-slate-50 dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 flex flex-col items-center justify-center shadow-inner",children:[m.jsx("span",{className:"text-[8px] font-black text-slate-400 dark:text-slate-500 uppercase",children:""}),m.jsxs("span",{className:"text-xl md:text-2xl font-black text-slate-700 dark:text-slate-200",children:[T,"s"]})]})]}),m.jsxs("p",{className:`${t?"text-base":"text-lg"} text-slate-600 dark:text-slate-300 leading-relaxed italic mb-6 font-medium`,children:['"',p.description,'"']}),m.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[m.jsxs("div",{className:"relative flex-1 bg-slate-50 dark:bg-black/40 border border-slate-200 dark:border-slate-800 rounded-2xl p-6 min-h-[120px] md:min-h-[150px] shadow-inner",children:[S&&m.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-1.5 text-red-500 animate-pulse text-[10px] font-black uppercase",children:[m.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full shadow-[0_0_8px_rgba(239,68,68,0.5)]"})," "]}),m.jsx("textarea",{className:"w-full h-full bg-transparent resize-none outline-none text-base md:text-lg leading-relaxed placeholder:text-slate-300 dark:placeholder:text-slate-800 font-bold text-slate-700 dark:text-slate-200",placeholder:"...",value:x,onChange:j=>y(j.target.value)}),m.jsx("div",{className:"absolute bottom-4 left-4 right-4 h-8 flex items-end gap-1 pointer-events-none",children:Array.from({length:40}).map((j,ie)=>m.jsx("div",{className:"flex-1 bg-teal-500/30 dark:bg-teal-500/20 rounded-t-full transition-all duration-150",style:{height:`${Math.random()*N*100}%`}},ie))})]}),m.jsxs("button",{onClick:he,className:"w-full py-4 md:py-5 bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 rounded-2xl font-black text-white shadow-xl shadow-teal-500/20 transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-3 text-lg",children:[" ",m.jsx(li,{size:22,className:"group-hover:translate-x-1 transition-transform"})]})]})]}),L&&!t&&m.jsxs("div",{className:"absolute top-10 right-10 w-48 h-36 rounded-2xl border-2 border-white dark:border-slate-800 shadow-2xl overflow-hidden group",children:[m.jsx("video",{ref:H,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700"}),m.jsx("div",{className:"absolute inset-0 bg-teal-500/10 pointer-events-none"}),m.jsxs("div",{className:"absolute bottom-2 left-2 flex items-center gap-1.5 text-white font-black text-[8px] uppercase tracking-widest drop-shadow-md",children:[m.jsx(Is,{size:10})," AI "]})]})]},"executing"),g==="FEEDBACK"&&m.jsx(fe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full max-w-2xl overflow-hidden rounded-[3rem] bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 shadow-2xl",children:u?m.jsxs("div",{className:"p-16 flex flex-col items-center justify-center text-center",children:[m.jsxs("div",{className:"w-16 h-16 mb-8 relative",children:[m.jsx("div",{className:"absolute inset-0 border-4 border-teal-500/10 rounded-full"}),m.jsx("div",{className:"absolute inset-0 border-4 border-teal-500 border-t-transparent rounded-full animate-spin"})]}),m.jsx("h2",{className:"text-2xl font-black mb-2 text-slate-800 dark:text-white",children:"..."}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:""})]}):se&&m.jsxs("div",{className:"flex flex-col",children:[m.jsxs("div",{className:`${t?"p-8":"p-12"} bg-gradient-to-br from-teal-500/5 to-blue-500/5 dark:from-teal-500/10 dark:to-blue-500/10 border-b border-slate-100 dark:border-slate-800 text-center relative overflow-hidden`,children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("div",{className:"w-16 h-16 bg-white dark:bg-slate-800 rounded-3xl rotate-12 flex items-center justify-center shadow-xl border border-slate-100 dark:border-slate-700 scale-110",children:m.jsx("div",{className:"-rotate-12 bg-teal-500 rounded-xl p-2.5",children:m.jsx(_a,{size:24,className:"text-white"})})})}),m.jsx("h2",{className:`${t?"text-2xl":"text-3xl"} font-black mb-2 text-slate-800 dark:text-white tracking-tight`,children:""}),m.jsx("p",{className:"text-teal-600 dark:text-teal-400 font-black uppercase tracking-[0.3em] text-[10px]",children:"Cognitive Evolution Achieved"})]}),m.jsxs("div",{className:`${t?"p-6":"p-10"}`,children:[m.jsx("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[{label:"",score:se.scores.trust,color:"text-teal-500",fill:"#14b8a6"},{label:"",score:se.scores.insight,color:"text-purple-500",fill:"#a855f7"},{label:"",score:se.scores.expression,color:"text-amber-500",fill:"#f59e0b"}].map((j,ie)=>m.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/40 border border-slate-100 dark:border-slate-800/60 p-4 rounded-2xl text-center shadow-sm",children:[m.jsx("div",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 mb-2 uppercase tracking-widest",children:j.label}),m.jsx("div",{className:"flex justify-center gap-1",children:Array.from({length:5}).map((B,W)=>m.jsx(Vd,{size:14,fill:W<j.score?j.fill:"none",stroke:W<j.score?j.fill:"#cbd5e1",strokeWidth:W<j.score?1:2},W))})]},ie))}),m.jsxs("div",{className:"p-6 md:p-8 bg-slate-50/80 dark:bg-slate-800/30 border border-slate-200/50 dark:border-slate-700/50 rounded-2xl mb-8 relative",children:[m.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 dark:opacity-10 pointer-events-none",children:m.jsx(Is,{size:64})}),m.jsxs("h4",{className:"text-slate-400 dark:text-teal-400/80 font-black mb-4 flex items-center gap-2 text-xs uppercase tracking-widest",children:[m.jsx(Is,{size:16})," "]}),m.jsxs("p",{className:`${t?"text-sm":"text-base"} text-slate-700 dark:text-slate-200 leading-relaxed font-bold italic`,children:['"',se.feedback,'"']})]}),m.jsxs("div",{className:"flex flex-col gap-4",children:[mt.length>0&&m.jsxs("button",{onClick:ye,className:"w-full py-4 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-white rounded-2xl font-black transition-all flex items-center justify-center gap-3 border-2 border-slate-100 dark:border-slate-700 shadow-sm",children:[m.jsx(fx,{size:18}),"  ",D," (",mt.length,")"]}),m.jsxs("button",{onClick:Ut,className:"w-full py-5 bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 text-white rounded-2xl font-black shadow-xl shadow-teal-500/20 transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-3 text-lg",children:["",J[(r+1)%J.length]," ",m.jsx(li,{size:22})]})]})]})]})},"feedback")]})}),m.jsx("canvas",{ref:$,width:"300",height:"300",className:"hidden"})]})},ds=["#ef4444","#f97316","#eab308","#84cc16","#06b6d4","#8b5cf6","#d946ef","#f43f5e","#be123c","#0f766e","#1d4ed8","#4338ca","#a21caf","#be185d","#881337","#7c2d12"],r5=()=>tl[Math.floor(Math.random()*tl.length)],s5=({value:e,rolling:t})=>m.jsxs("div",{className:"relative w-24 h-24 perspective-[800px] flex items-center justify-center pointer-events-none z-20",children:[m.jsx("style",{children:`
                .dice-wrap { width: 60px; height: 60px; position: relative; transform-style: preserve-3d; }
                .dice-wrap.spinning { animation: spin3d 0.5s infinite linear; }
                @keyframes spin3d {
                    0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg); }
                    100% { transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg); }
                }
                .face { position: absolute; width: 60px; height: 60px; background: rgba(20, 184, 166, 0.9); border: 2px solid #fff; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size: 24px; color: #fff; box-shadow: 0 0 15px rgba(45,212,191,0.5); border-radius: 8px; }
                .face:nth-child(1) { transform: rotateY(0deg) translateZ(30px); }
                .face:nth-child(2) { transform: rotateY(90deg) translateZ(30px); }
                .face:nth-child(3) { transform: rotateY(180deg) translateZ(30px); }
                .face:nth-child(4) { transform: rotateY(-90deg) translateZ(30px); }
                .face:nth-child(5) { transform: rotateX(90deg) translateZ(30px); }
                .face:nth-child(6) { transform: rotateX(-90deg) translateZ(30px); }
            `}),m.jsx("div",{className:`dice-wrap ${t?"spinning":""} transition-all duration-500`,children:[1,2,3,4,8,6].map((n,i)=>m.jsx("div",{className:"face",children:t?"?":i===0?e:n},i))})]}),l5=()=>{const[e,t]=A.useState(0),[n,i]=A.useState(!1);return A.useEffect(()=>((()=>{i(!0),Tf(r=>t(r))})(),()=>{vl(),i(!1)}),[]),m.jsx("div",{className:"absolute top-0 left-0 right-0 h-40 pointer-events-none flex items-center justify-center overflow-hidden opacity-40 z-0",children:m.jsx("div",{className:"relative w-full h-full flex items-center justify-center gap-1.5 px-4",children:Array.from({length:96}).map((o,r)=>{const s=r/96,a=Math.sin(s*Math.PI);return m.jsx("div",{className:`w-1 rounded-full transition-all duration-75 ${e>.05?"bg-teal-400 shadow-[0_0_10px_#2dd4bf]":"bg-slate-500/20"}`,style:{height:`${Math.max(4,e*200*a+Math.random()*10*a)}px`}},r)})})})},a5=({reviewer:e,actor:t,onSubmit:n,hasHighEnergyBonus:i})=>{const[o,r]=A.useState(5);return m.jsx(fe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md",children:m.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl border border-slate-700 shadow-2xl max-w-md w-full text-center",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-2 border-slate-500 relative",children:e.avatar.startsWith("data:")?m.jsx("img",{src:e.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"bg-slate-700 w-full h-full flex items-center justify-center font-bold text-2xl",children:e.name[0]})})}),m.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:""}),m.jsxs("p",{className:"text-slate-400 mb-6",children:[m.jsx("strong",{children:e.name})," ",m.jsx("strong",{children:t.name})," "]}),i&&m.jsx("div",{className:"mb-6 p-3 bg-red-500/20 border border-red-500/50 rounded-xl animate-pulse",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-500 font-bold",children:[m.jsx(Gd,{fill:"currentColor",size:20})," "]})}),m.jsx("div",{className:"flex justify-center gap-2 mb-8",children:[1,2,3,4,5].map(s=>m.jsx("button",{onClick:()=>r(s),className:"transition transform hover:scale-110",children:m.jsx(Vd,{size:40,fill:s<=o?"#fbbf24":"none",stroke:s<=o?"#fbbf24":"#475569"})},s))}),m.jsxs("div",{className:"text-xl font-bold text-yellow-500 mb-8",children:[o,"  - ",o===5?"":o>=3?"":""]}),m.jsx("button",{onClick:()=>n(o),className:"w-full py-4 bg-gradient-to-r from-teal-500 to-blue-600 rounded-xl font-bold text-white text-lg shadow-lg",children:""})]})})},u5=e=>{let t=[],n=0;const i=()=>{const o=Math.random();return o<.5?"NORMAL":o<.7?"DOUBLE":o<.8?"HALF":o<.9?"CLONE":"TRANSFER"};if(e===Ce.JUNG_8){const o=["Te","Ti","Fe","Fi","Se","Si","Ne","Ni"];let s=[];o.forEach(l=>{for(let u=0;u<7;u++)s.push(l)});for(let l=0;l<4;l++)s.push("?");for(let l=s.length-1;l>0;l--){const u=Math.floor(Math.random()*(l+1));[s[l],s[u]]=[s[u],s[l]]}const a=["FREEDOM","SUBSTITUTE","COMPANION","FREEDOM"];for(let l=-4;l<=4;l++){const u=Math.max(-4,-l-4),d=Math.min(4,-l+4);for(let p=u;p<=d;p++){const h=l===0&&p===0;let g=h?"?":s.pop()||"Te",v="NORMAL",T="NONE";g==="?"?h?T="FREEDOM":T=a.pop()||"FREEDOM":v=i(),t.push({index:n++,functionId:g,modifier:v,specialAbility:T,q:l,r:p})}}}else{const o=[{id:"NF",types:qt[" (NF)"].types,coords:[{q:0,r:0},{q:1,r:0},{q:2,r:0},{q:0,r:1},{q:0,r:2},{q:0,r:3},{q:1,r:3},{q:2,r:3}]},{id:"NT",types:qt[" (NT)"].types,coords:[{q:6,r:0},{q:5,r:0},{q:4,r:0},{q:6,r:1},{q:6,r:2},{q:3,r:0},{q:3,r:1},{q:3,r:2}]},{id:"SP",types:qt[" (SP)"].types,coords:[{q:6,r:6},{q:5,r:6},{q:4,r:6},{q:6,r:5},{q:6,r:4},{q:6,r:3},{q:5,r:3},{q:4,r:3}]},{id:"SJ",types:qt[" (SJ)"].types,coords:[{q:0,r:6},{q:1,r:6},{q:2,r:6},{q:0,r:5},{q:0,r:4},{q:3,r:6},{q:3,r:5},{q:3,r:4}]}];t.push({index:n++,functionId:"Hub",characterName:nl.Hub,q:3,r:3,zone:"Hub",modifier:"NORMAL",specialAbility:"FREEDOM"}),o.forEach(r=>{let s=[];r.types.forEach(a=>{s.push(a),s.push(a)});for(let a=s.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1));[s[a],s[l]]=[s[l],s[a]]}r.coords.forEach((a,l)=>{const u=s[l]||"INTJ",d=nl[u];t.push({index:n++,functionId:u,characterName:d,q:a.q,r:a.r,zone:r.id,modifier:i(),specialAbility:"NONE"})})})}return t};function c5(){var Df;const[e,t]=A.useState([]),[n,i]=A.useState([]),[o,r]=A.useState(!1),[s,a]=A.useState(!0),[l,u]=A.useState({players:[],currentPlayerIndex:0,gameMode:Ce.JUNG_8,turn:1,targetScore:40,logs:[],phase:"HUB",subPhase:"IDLE",currentTile:null,selectedTask:null,activeModifier:"NORMAL",activeSpecialAbility:"NONE",remainingSteps:0,sightRange:1,helperId:null,scoreTargetPlayerId:null,sharedHelpUsedCount:0,hasReselected:!1,pregeneratedTasks:null,movementState:"IDLE",diceValue:null,highestScore:0,snapshots:[],startTime:Date.now(),peerReviewQueue:[],currentReviewerId:null,accumulatedRating:0}),[d,p]=A.useState(!1),[h,g]=A.useState(!1),[v,T]=A.useState(0),[w,x]=A.useState(null),[y,S]=A.useState(0),[E,N]=A.useState(!1),[C,I]=A.useState(!1),[_,P]=A.useState(""),[R,L]=A.useState(!1),[ee,H]=A.useState(null),[$,se]=A.useState(0),[re,J]=A.useState(!1),[D,V]=A.useState(!1),[z,te]=A.useState(!1),Z=A.useRef(null),he=A.useRef(null),[ye,Ut]=A.useState(null),[Le,mt]=A.useState([]),[j,ie]=A.useState(!1),[B,W]=A.useState([]),[Ee,Xn]=A.useState("");A.useEffect(()=>{const k=()=>{const b=window.innerWidth<1024;p(b),b&&r(!0)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),A.useEffect(()=>{if(!d||l.phase!=="PLAYING"||l.movementState!=="IDLE"||l.remainingSteps===0)return;const k=l.players[l.currentPlayerIndex];if(k&&!k.isBot&&n.length===1){const b=setTimeout(()=>{Yl(n[0])},800);return()=>clearTimeout(b)}},[d,n,l.phase,l.movementState,l.remainingSteps]),A.useEffect(()=>{const b=new URLSearchParams(window.location.search).get("share_data");if(b)try{const M=sT.decompressFromEncodedURIComponent(b);if(M){const U=JSON.parse(M);H(U)}}catch(M){console.error("Failed to parse shared data",M)}},[]);const me=A.useRef(null);A.useEffect(()=>{me.current=new Audio("https://cdn.pixabay.com/audio/2024/09/25/audio_731ee076e0.mp3"),me.current.loop=!0,me.current.volume=.15},[]),A.useEffect(()=>{me.current&&(h?me.current.volume=R?.02:.2:me.current.pause())},[R,h]),A.useEffect(()=>{me.current&&(h?me.current.play().catch(k=>console.log("Audio autoplay blocked until interaction")):me.current.pause())},[h]),A.useEffect(()=>{const k=document.documentElement;s?k.classList.add("dark"):k.classList.remove("dark")},[s]);const Co=()=>a(!s);A.useEffect(()=>{if(l.phase!=="PLAYING")return;const k=l.players[l.currentPlayerIndex];if(!k||!k.isBot)return;let b;return l.subPhase==="IDLE"&&l.movementState==="IDLE"&&l.remainingSteps===0&&k.isBot&&(b=setTimeout(()=>Kl(),1500)),l.movementState==="IDLE"&&l.remainingSteps>0&&n.length>0&&k.isBot&&(b=setTimeout(()=>{const M=n[Math.floor(Math.random()*n.length)];Yl(M)},1500)),l.subPhase==="SELECTING_CARD"&&(b=setTimeout(()=>{const M=["standard","truth","dare","deep"],U=M[Math.floor(Math.random()*M.length)];Nf(U)},2e3)),l.subPhase==="VIEWING_TASK"&&(b=setTimeout(()=>{kf(),setTimeout(()=>{_f()},3e3)},2e3)),["SELECTING_SCORE_TARGET","SELECTING_SUBSTITUTE","SELECTING_COMPANION","CHOOSING_HELPER"].includes(l.subPhase)&&(b=setTimeout(()=>{const M=l.players.filter(K=>K.id!==k.id),U=M[Math.floor(Math.random()*M.length)];U&&(l.subPhase==="SELECTING_SCORE_TARGET"?Af(U.id):l.subPhase==="SELECTING_SUBSTITUTE"?Ef(U.id):l.subPhase==="SELECTING_COMPANION"?Cf(U.id):l.subPhase==="CHOOSING_HELPER"&&If(U.id))},2e3)),()=>clearTimeout(b)},[l.phase,l.subPhase,l.movementState,l.remainingSteps,l.currentPlayerIndex,n,D]),A.useEffect(()=>{if(l.subPhase==="PEER_REVIEW"&&l.currentReviewerId){const k=l.players.find(b=>b.id===l.currentReviewerId);if(k&&k.isBot){const b=setTimeout(()=>{Ql(Math.random()>.3?5:4)},1500);return()=>clearTimeout(b)}}},[l.subPhase,l.currentReviewerId]);const Fr=(k,b)=>{const M=b.find(oe=>oe.index===k.position);if(!M)return[];let U=[];l.gameMode===Ce.JUNG_8?U=Yw(M,b):U=Kw(M,b);const K=U.filter(oe=>oe.index!==k.previousPosition);if(l.movementState==="TELEPORTING")return b.filter(oe=>oe.functionId!=="Hub").map(oe=>oe.index);if(l.gameMode===Ce.MBTI_16)return K.map(oe=>oe.index);const Y=Qo[k.mbti]||[];let ue="?",X=k.stackIndex+1;for(let oe=0;oe<Y.length;oe++){const gt=(X+oe)%Y.length,Vt=Y[gt];if(K.some(He=>He.functionId===Vt)){ue=Vt;break}}return K.filter(oe=>oe.functionId===ue||oe.functionId==="?").map(oe=>oe.index)};A.useEffect(()=>{if(l.phase!=="PLAYING")return;const k=l.players[l.currentPlayerIndex];if(k)if(l.movementState==="IDLE"&&l.remainingSteps>0){const b=Fr(k,e);i(b)}else if(l.movementState==="TELEPORTING"){const b=e.filter(M=>M.index!==k.position).map(M=>M.index);i(b)}else l.remainingSteps===0&&l.movementState==="IDLE"&&i([])},[l.remainingSteps,l.movementState,l.currentPlayerIndex,l.players]);const wn=(k,b="system",M,U)=>{const K={id:Date.now().toString()+Math.random(),text:k,type:b,author:M,timestamp:Date.now(),taskDetails:U};if(u(Y=>({...Y,logs:[...Y.logs,K]})),M&&M!=="system"){const Y=l.players.find(ue=>ue.name===M);Y&&Y.isBot&&n5(k,M)}},uT=k=>{u(b=>({...b,snapshots:[...b.snapshots,k]}))},cT=(k,b,M,U)=>{u(ue=>({...ue,phase:"LOADING"}));let K=0;const Y=setInterval(()=>{K+=1,S(K),K>=100&&(clearInterval(Y),N(!0))},50);window.pendingGameConfig={humanPlayers:k,mode:b,botCount:M,targetScore:U}},dT=()=>{const k=window.pendingGameConfig;fT(k.humanPlayers,k.mode,k.botCount,k.targetScore)},fT=(k,b,M,U)=>{me.current&&me.current.play().catch(oe=>console.log("Audio play blocked:",oe));const K=u5(b);t(K);const Y=b===Ce.MBTI_16?3:0,ue=b===Ce.MBTI_16?3:0,X=K.find(oe=>oe.q===Y&&oe.r===ue),We=k.map((oe,gt)=>{let Vt=(X==null?void 0:X.index)||0;if(b===Ce.MBTI_16){const He=K.filter(Et=>Et.functionId===oe.mbti);He.length>0&&(Vt=He[Math.floor(Math.random()*He.length)].index)}return{id:`user-${gt}`,name:oe.name||`P${gt+1}`,mbti:oe.mbti,isBot:!1,avatar:oe.avatarImage||"user",color:ds[gt%ds.length],trustScore:0,insightScore:0,expressionScore:0,totalRatingGiven:0,position:Vt,previousPosition:null,stackIndex:0,skipUsedCount:0}});for(let oe=0;oe<M;oe++){const gt=r5(),Vt=Ww[gt]||[`Bot ${oe}`];let He=(X==null?void 0:X.index)||0;if(b===Ce.MBTI_16){const Et=K.filter(En=>En.functionId===gt);Et.length>0&&(He=Et[Math.floor(Math.random()*Et.length)].index)}We.push({id:`bot-${oe}`,name:Vt[0],mbti:gt,isBot:!0,avatar:"bot",color:ds[We.length%ds.length],trustScore:0,insightScore:0,expressionScore:0,totalRatingGiven:0,position:He,previousPosition:null,stackIndex:0,skipUsedCount:0})}u(oe=>({...oe,players:We,gameMode:b,targetScore:U,phase:"PLAYING",subPhase:"IDLE",logs:[{id:"0",text:"",type:"system",timestamp:Date.now()}],sightRange:1})),g(!0),me.current&&(me.current.volume=.2,me.current.play().catch(oe=>console.warn("Autoplay prevented:",oe)))},pT=k=>{k==="test"?(te(!0),u(b=>({...b,phase:"ONBOARDING"}))):k==="tasks"?(te(!1),u(b=>({...b,phase:"SOLO_TASKS"}))):(te(!1),u(b=>({...b,phase:"ONBOARDING"})))},Kl=k=>{const b=l.players[l.currentPlayerIndex];u(M=>({...M,movementState:"ROLLING"})),setTimeout(()=>{const M=k||Math.floor(Math.random()*8)+1,U=Math.random()>.5?2:1;u(K=>({...K,diceValue:M,remainingSteps:M,sightRange:U,movementState:"IDLE",activeModifier:"NORMAL",activeSpecialAbility:"NONE",helperId:null,scoreTargetPlayerId:null})),J(!1),wn(`${b.name}  ${M}  (: ${U})`,"action")},1e3)},Yl=k=>{if(!n.includes(k))return;const b=l.players[l.currentPlayerIndex],M=e.find(ue=>ue.index===k);if(!M)return;const U=Qo[b.mbti]||[];let K=b.stackIndex;if(l.gameMode===Ce.JUNG_8&&M.functionId!=="?")for(let ue=1;ue<U.length;ue++){const X=(b.stackIndex+ue)%U.length;if(U[X]===M.functionId){K=X;break}}const Y=l.movementState==="TELEPORTING";u(ue=>{const X=[...ue.players],We=X[ue.currentPlayerIndex];We.previousPosition=We.position,We.position=k,We.stackIndex=K;const oe=Y?0:ue.remainingSteps-1;return{...ue,players:X,currentTile:M,remainingSteps:oe,movementState:"MOVING_STEP",activeModifier:M.modifier,activeSpecialAbility:M.specialAbility}}),i([]),setTimeout(()=>{Y||l.remainingSteps===1?hT(M,Y):u(ue=>({...ue,movementState:"IDLE"}))},600)},hT=(k,b)=>{const M=l.players[l.currentPlayerIndex];if(u(U=>({...U,movementState:"IDLE"})),!b&&k.specialAbility!=="NONE"&&k.functionId==="?"){wf(k.specialAbility);return}if(l.gameMode===Ce.MBTI_16&&k.functionId==="Hub"&&!b){wf("FREEDOM");return}Zu(k.functionId,l.players,M,l.logs).then(U=>{u(K=>({...K,pregeneratedTasks:U}))}),u(U=>({...U,subPhase:"SELECTING_CARD",selectedTask:null,hasReselected:!1,scoreTargetPlayerId:U.scoreTargetPlayerId,helperId:U.helperId})),wn(` ${k.characterName||k.functionId}...`,"system")},wf=k=>{const b=l.players[l.currentPlayerIndex];if(k==="FREEDOM"){u(M=>({...M,movementState:"TELEPORTING"})),wn(`${b.name} `,"action");return}if(k==="SUBSTITUTE"){u(M=>({...M,subPhase:"SELECTING_SUBSTITUTE"})),wn(`${b.name} ...`,"action");return}if(k==="COMPANION"){u(M=>({...M,subPhase:"SELECTING_COMPANION"})),wn(`${b.name} ...`,"action");return}u(M=>({...M,subPhase:"SELECTING_CARD"}))},Ef=k=>{u(b=>({...b,helperId:k,subPhase:"IDLE",movementState:"TELEPORTING"})),wn("","system")},Cf=k=>{u(b=>({...b,helperId:k,subPhase:"IDLE",movementState:"TELEPORTING"})),wn("","system")},Xl=async k=>{if(!l.players[l.currentPlayerIndex].isBot){ye&&ye.getTracks().forEach(M=>M.stop());try{const M={video:{width:480,height:360,deviceId:k?{exact:k}:void 0}},U=await navigator.mediaDevices.getUserMedia(M);Ut(U),ie(!0);const Y=(await navigator.mediaDevices.enumerateDevices()).filter(ue=>ue.kind==="videoinput");if(W(Y),!k&&Y.length>0){const X=U.getVideoTracks()[0].getSettings();X.deviceId&&Xn(X.deviceId)}}catch(M){console.warn("Camera access denied or unavailable",M),ie(!1)}}},mT=async()=>{if(B.length<=1)return;const b=(B.findIndex(U=>U.deviceId===Ee)+1)%B.length,M=B[b];Xn(M.deviceId),await Xl(M.deviceId)},Nf=k=>{var M;const b=(M=l.pregeneratedTasks)==null?void 0:M[k];if(b)u(U=>({...U,subPhase:"VIEWING_TASK",selectedTask:b})),Xl();else{u(K=>({...K,subPhase:"VIEWING_TASK",selectedTask:null}));const U=l.currentTile;U&&Zu(U.functionId,l.players,l.players[l.currentPlayerIndex],l.logs).then(K=>{u(Y=>({...Y,selectedTask:K[k],pregeneratedTasks:K})),Xl()})}},gT=()=>{var K;if(l.hasReselected||!l.pregeneratedTasks)return;const k=["standard","truth","dare","deep"],b=(K=l.selectedTask)==null?void 0:K.category,M=k.filter(Y=>Y!==b),U=M[Math.floor(Math.random()*M.length)];u(Y=>({...Y,hasReselected:!0,selectedTask:Y.pregeneratedTasks[U]}))},yT=()=>{l.players[l.currentPlayerIndex],u(k=>{const b=[...k.players];return b[k.currentPlayerIndex].skipUsedCount+=1,{...k,players:b,subPhase:"IDLE"}}),bf()},vT=()=>{if(l.sharedHelpUsedCount>=3){alert("");return}u(k=>({...k,subPhase:"CHOOSING_HELPER"}))},If=k=>{u(b=>({...b,helperId:k,sharedHelpUsedCount:b.sharedHelpUsedCount+1,subPhase:"VIEWING_TASK"}))},kf=async()=>{if(!l.selectedTask)return;const k=l.players[l.currentPlayerIndex];P(""),J(!1),mt([]),k.isBot||Sf()&&(lT(M=>P(U=>U+" "+M),()=>L(!1)),L(!0),Tf(M=>{se(M),M>.4&&J(!0)})),u(M=>({...M,subPhase:"TASK_EXECUTION"})),T(l.selectedTask.durationSeconds);const b=setInterval(()=>{T(M=>M<=1?(clearInterval(b),0):M-1)},1e3)};A.useEffect(()=>{if(l.subPhase!=="TASK_EXECUTION"||!j||!ye)return;const k=setInterval(async()=>{var b;if(Z.current&&he.current){const M=Z.current,U=he.current,K=U.getContext("2d");if(K){U.width=M.videoWidth,U.height=M.videoHeight,K.drawImage(M,0,0,U.width,U.height);const Y=U.toDataURL("image/jpeg",.6),ue=await nx(Y,((b=l.selectedTask)==null?void 0:b.title)||"MBTI ");mt(X=>[...X.slice(-2),ue])}}},15e3);return()=>clearInterval(k)},[l.subPhase,j,ye]),A.useEffect(()=>{ye&&Z.current&&(Z.current.srcObject=ye)},[ye,l.subPhase]),A.useEffect(()=>{(l.subPhase==="IDLE"||l.subPhase==="SELECTING_CARD")&&(ye&&(ye.getTracks().forEach(k=>k.stop()),Ut(null),ie(!1)),R&&(bc(),vl(),L(!1)))},[l.subPhase]);const _f=()=>{var Y,ue;R&&(bc(),vl(),L(!1)),ye&&(ye.getTracks().forEach(X=>X.stop()),Ut(null),ie(!1));const k=l.players[l.currentPlayerIndex],b=`: ${((Y=l.selectedTask)==null?void 0:Y.title)||""}`,M=_.trim()?`: "${_.trim()}"`:k.isBot?"Bot ":"",U=Le.length>0?`| : ${Le.join("; ")}`:"";wn(`${k.name} `,"action",k.name,`${b}${M} ${U}`),uT(`${k.name}[${(ue=l.selectedTask)==null?void 0:ue.category}]${M} ${U}`);const K=l.players.filter(X=>X.id!==l.players[l.currentPlayerIndex].id);if(K.length===0){Ql(5);return}u(X=>({...X,subPhase:"PEER_REVIEW",peerReviewQueue:K.map(We=>We.id),currentReviewerId:K[0].id,accumulatedRating:0}))},Ql=k=>{const b=l.currentReviewerId;if(b&&u(M=>{const U=[...M.players],K=U.findIndex(Y=>Y.id===b);return K!==-1&&(U[K]={...U[K],totalRatingGiven:(U[K].totalRatingGiven||0)+k}),{...M,players:U}}),!(b&&l.peerReviewQueue.length>0&&(u(M=>{const U=M.peerReviewQueue.filter(Y=>Y!==b),K=U.length>0?U[0]:null;return K?{...M,accumulatedRating:M.accumulatedRating+k,peerReviewQueue:U,currentReviewerId:K}:{...M,accumulatedRating:M.accumulatedRating+k,peerReviewQueue:[],currentReviewerId:null}}),l.peerReviewQueue.length>1))){if(l.activeModifier==="CLONE"||l.activeModifier==="TRANSFER"){u(M=>({...M,subPhase:"SELECTING_SCORE_TARGET"}));return}Pf(k)}},Af=k=>{u(b=>({...b,scoreTargetPlayerId:k})),Pf(0)},Pf=k=>{l.players[l.currentPlayerIndex];const b=l.selectedTask;if(!b)return;const M=Math.max(1,l.players.length-1),K=(l.accumulatedRating+k)/M;let Y=Math.ceil(K*b.multiplier*2);const ue=l.activeModifier;l.activeSpecialAbility,ue==="DOUBLE"&&(Y*=2),ue==="HALF"&&(Y=Math.floor(Y/2)),re&&(Y+=5),u(X=>{let We=X.players.map(Et=>({...Et}));const oe=We[X.currentPlayerIndex],gt=X.activeModifier,Vt=X.activeSpecialAbility,He=(Et,En)=>{const Lf=We.findIndex(No=>No.id===Et);if(Lf!==-1){const No=We[Lf];b.scoreType==="trust"?No.trustScore+=En:b.scoreType==="insight"?No.insightScore+=En:No.expressionScore+=En}};if(Vt==="SUBSTITUTE"&&X.helperId)He(X.helperId,Y);else if(Vt==="COMPANION"&&X.helperId)He(oe.id,Y),He(X.helperId,Y);else if(X.helperId&&Vt==="NONE"&&gt==="NORMAL"){const Et=Math.ceil(Y/2),En=Math.floor(Y/2);He(oe.id,En),He(X.helperId,Et)}else gt==="TRANSFER"&&X.scoreTargetPlayerId?He(X.scoreTargetPlayerId,Y):(He(oe.id,Y),gt==="CLONE"&&X.scoreTargetPlayerId&&He(X.scoreTargetPlayerId,Y));return{...X,players:We}}),bf()},bf=()=>{u(k=>{const b=k.players[k.currentPlayerIndex];if(b.trustScore+b.insightScore+b.expressionScore>=k.targetScore)return Rf(k.players),k;const U=(k.currentPlayerIndex+1)%k.players.length;return{...k,currentPlayerIndex:U,subPhase:"IDLE",selectedTask:null,helperId:null,scoreTargetPlayerId:null,activeModifier:"NORMAL",activeSpecialAbility:"NONE",remainingSteps:0,turn:U===0?k.turn+1:k.turn,currentReviewerId:null,peerReviewQueue:[],accumulatedRating:0}})},Rf=async k=>{u(M=>({...M,players:k,phase:"ANALYSIS"}));const b=await N2(k,l.snapshots,l.logs);x(b),me.current&&(me.current.pause(),me.current.currentTime=0),g(!1)},xT=async(k,b)=>{const M={id:"solo-player",name:k.name,mbti:k.mbti,isBot:!1,avatar:"user",trustScore:0,insightScore:0,expressionScore:0,totalRatingGiven:0,position:0,previousPosition:null,stackIndex:0,skipUsedCount:0,color:"teal"};u(K=>({...K,players:[M],phase:"ANALYSIS",currentPlayerIndex:0,startTime:Date.now()}));const U=await I2(k,b);x(U)},ST=()=>{me.current&&(me.current.pause(),me.current.currentTime=0),g(!1)},Zl=()=>{u(k=>({players:[],currentPlayerIndex:0,gameMode:Ce.JUNG_8,turn:1,targetScore:40,logs:[],phase:"HUB",subPhase:"IDLE",currentTile:null,selectedTask:null,activeModifier:"NORMAL",activeSpecialAbility:"NONE",remainingSteps:0,sightRange:1,helperId:null,scoreTargetPlayerId:null,sharedHelpUsedCount:0,hasReselected:!1,pregeneratedTasks:null,movementState:"IDLE",diceValue:null,highestScore:0,snapshots:[],startTime:Date.now(),peerReviewQueue:[],currentReviewerId:null,accumulatedRating:0})),S(0),N(!1),t([]),i([]),x(null),H(null),te(!1),ST()};if(ee)return m.jsx(q0,{players:ee.players,report:ee.report,startTime:ee.startTime,gameMode:ee.gameMode,onReturnHome:()=>{window.history.pushState({},"",window.location.pathname),H(null)}});if(l.phase==="HUB")return m.jsxs("div",{className:`h-screen flex flex-col transition-colors duration-300 font-sans ${s?"dark bg-slate-900 text-white":"bg-stone-50 text-slate-800"} overflow-hidden`,children:[m.jsxs("header",{className:"h-16 flex items-center justify-between px-6 border-b border-slate-200 dark:border-white/5 shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-2 font-black text-xl tracking-tighter italic",children:[m.jsx(px,{className:"text-blue-500"})," RAINBOW BOAT"]}),m.jsx("div",{className:"flex items-center gap-3",children:m.jsx("button",{onClick:Co,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition",children:s?m.jsx(tc,{size:18}):m.jsx(ec,{size:18})})})]}),m.jsx("main",{className:"flex-1 relative overflow-hidden",children:m.jsx(i5,{onSelectMode:pT,onOpenConfig:()=>I(!0),isMobile:d})}),C&&m.jsx(Ic,{onClose:()=>I(!1)})]});if(l.phase==="SOLO_TASKS")return m.jsx(o5,{onBack:()=>u(k=>({...k,phase:"HUB"})),isMobile:d,isDarkMode:s});if(l.phase==="ONBOARDING")return m.jsx($D,{onComplete:cT,isDarkMode:s,toggleTheme:Co,initialStep:z?"quiz":"setup",isSoloTest:z,isMobile:d,onBackToHub:Zl,onShowQuickReport:xT});if(l.phase==="LOADING")return m.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center text-slate-800 dark:text-white relative font-sans transition-colors duration-300",children:m.jsxs("div",{className:"z-10 flex flex-col items-center w-full max-w-4xl px-8 text-center bg-white/10 dark:bg-black/20 backdrop-blur-md rounded-3xl p-16 shadow-2xl border border-white/10",children:[m.jsx(fe.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-8xl font-bold tracking-tight mb-4 text-transparent bg-clip-text bg-[linear-gradient(to_right,#ef4444,#f97316,#eab308,#22c55e,#3b82f6,#a855f7)] drop-shadow-lg",children:""}),m.jsx(l5,{}),m.jsx("div",{className:"w-full h-4 bg-slate-700 rounded-full overflow-hidden mb-12 mt-8 relative z-20",children:m.jsx(fe.div,{className:"h-full bg-gradient-to-r from-teal-400 to-blue-500",initial:{width:0},animate:{width:`${y}%`}})}),E&&m.jsxs(fe.button,{initial:{scale:.8},animate:{scale:1},onClick:dT,className:"mt-8 px-16 py-6 bg-white text-slate-900 rounded-full font-bold text-3xl shadow-2xl flex items-center gap-3",children:[m.jsx(X2,{size:32,fill:"currentColor"}),"  "]})]})});if(l.phase==="ANALYSIS"&&w)return m.jsx(q0,{players:l.players,report:w||{groupAnalysis:"",playerAnalysis:{}},onReturnHome:Zl,startTime:l.startTime,gameMode:l.gameMode});const Fe=l.players[l.currentPlayerIndex];if(!Fe)return m.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center text-white",children:"Loading Game State..."});const Mf=l.currentReviewerId?l.players.find(k=>k.id===l.currentReviewerId):null,TT=Qo[Fe.mbti]||[];return m.jsxs("div",{className:`h-screen w-full text-slate-800 dark:text-slate-200 font-sans flex flex-col overflow-hidden relative selection:bg-teal-500/30 transition-colors duration-300 ${s?"dark bg-slate-900":"bg-stone-50"} ${d&&l.phase==="SETUP"?"overflow-y-auto":"overflow-hidden"}`,children:[m.jsxs("header",{className:`${d?"h-14 px-3":"h-16 px-6"} bg-white/80 dark:bg-slate-900/60 backdrop-blur border-b border-slate-200 dark:border-white/5 flex items-center justify-between shrink-0 z-30 transition-colors duration-300`,children:[m.jsxs("div",{className:`flex items-center gap-3 ${d?"w-auto":"w-1/3"}`,children:[m.jsx("button",{onClick:Zl,className:"flex items-center gap-1 text-slate-500 hover:text-teal-600 dark:text-slate-400 dark:hover:text-white transition group",title:"Return to Home",children:m.jsx(J2,{size:d?14:16,className:"group-hover:-translate-x-1 transition"})}),m.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-800/50 pr-3 rounded-full border border-slate-200 dark:border-slate-700/50 overflow-hidden",children:[m.jsx("div",{className:`${d?"w-7 h-7":"w-10 h-10"} rounded-full border-2 border-teal-500/50 overflow-hidden shrink-0`,children:Fe.avatar.startsWith("data:")?m.jsx("img",{src:Fe.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 w-full h-full flex items-center justify-center font-bold text-xs",children:Fe.name[0]})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:`font-black text-slate-700 dark:text-white ${d?"text-[10px]":"text-sm"} truncate`,children:Fe.name}),m.jsx("div",{className:"text-[8px] font-bold text-teal-600 dark:text-teal-400 truncate",children:Fe.mbti})]})]})]}),!d&&m.jsxs("div",{className:"flex-1 flex justify-center px-4 overflow-hidden",children:[l.gameMode===Ce.JUNG_8&&m.jsx("div",{className:"flex items-center px-6 py-2 rounded-full bg-white/40 dark:bg-black/40 border border-slate-200 dark:border-white/5 backdrop-blur-md shadow-inner overflow-x-auto no-scrollbar max-w-xl",children:TT.map((k,b)=>{const M=b===Fe.stackIndex;return m.jsxs("div",{className:`flex flex-col items-center relative transition-all duration-500 ${M?"mx-3":"mx-1"}`,children:[M&&m.jsx("div",{className:"text-[9px] text-teal-600 dark:text-teal-400 font-bold mb-1 absolute -top-4",children:""}),m.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-[10px] font-bold rounded-full transition-all duration-500 ${M?"bg-teal-500 text-white scale-125 shadow-[0_0_15px_#14b8a6]":"bg-slate-200 dark:bg-slate-800 text-slate-500"}`,children:k})]},b)})}),l.gameMode===Ce.MBTI_16&&m.jsx("div",{className:"flex items-center px-6 py-2 rounded-full bg-white/40 dark:bg-black/40 border border-slate-200 dark:border-white/5 backdrop-blur-md shadow-inner overflow-x-auto no-scrollbar max-w-2xl",children:tl.map((k,b)=>{var Y;const M=((Y=l.currentTile)==null?void 0:Y.functionId)===k;let U="bg-slate-200 dark:bg-slate-800 text-slate-500";const K=Object.entries(qt).find(([ue,X])=>X.types.includes(k));if(K){const[ue,X]=K;M&&(X.hexColor==="#a855f7"?U="bg-purple-500 text-white shadow-[0_0_15px_#a855f7] scale-110":X.hexColor==="#22c55e"?U="bg-green-500 text-white shadow-[0_0_15px_#22c55e] scale-110":X.hexColor==="#3b82f6"?U="bg-blue-500 text-white shadow-[0_0_15px_#3b82f6] scale-110":X.hexColor==="#eab308"&&(U="bg-yellow-500 text-white shadow-[0_0_15px_#eab308] scale-110"))}return m.jsxs("div",{className:"flex flex-col items-center relative transition-all duration-500 mx-1 shrink-0",children:[M&&m.jsx("div",{className:"text-[9px] text-teal-600 dark:text-teal-400 font-bold mb-1 absolute -top-4",children:""}),m.jsx("div",{className:`px-2 py-1 flex items-center justify-center text-[10px] font-bold rounded-md transition-all duration-500 ${M?U:"bg-slate-200 dark:bg-slate-800 text-slate-500"}`,children:k})]},k)})})]}),m.jsxs("div",{className:`${d?"w-auto":"w-1/3"} flex items-center justify-end gap-1.5 md:gap-3`,children:[!d&&m.jsx("button",{onClick:()=>V(!D),className:`px-3 py-1 rounded-full text-xs font-bold border transition ${D?"bg-amber-500 text-white border-amber-600":"bg-slate-100 dark:bg-slate-800 text-slate-400 border-slate-300 dark:border-slate-700"}`,children:D?"":""}),m.jsxs("button",{onClick:()=>Rf(l.players),className:`${d?"p-2":"px-3 py-1.5"} rounded-lg bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/50 border border-red-200 dark:border-red-800/50 text-red-600 dark:text-red-300 transition flex items-center gap-1.5 text-xs font-bold`,children:[m.jsx(G2,{size:14})," ",!d&&""]}),m.jsx("button",{onClick:Co,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 transition transform active:scale-90",children:s?m.jsx(tc,{size:d?16:18}):m.jsx(ec,{size:d?16:18})}),!d&&m.jsx("button",{onClick:()=>I(!0),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 hover:text-teal-600 dark:hover:text-teal-400 transition",children:m.jsx(Ol,{size:18})}),m.jsx("button",{onClick:()=>g(!h),className:`p-2 rounded-full transition ${h?"text-teal-500":"text-slate-600 dark:text-slate-400"}`,children:m.jsx(Y2,{size:d?16:18})})]})]}),m.jsxs("main",{className:"flex-1 flex relative overflow-hidden",children:[(l.phase==="PLAYING"||l.phase==="SETUP")&&m.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[m.jsxs("div",{className:"flex-1 relative bg-transparent flex flex-col overflow-hidden",children:[m.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden cursor-grab active:cursor-grabbing",children:m.jsx(qD,{players:l.players,currentPlayerId:Fe.id,boardLayout:e,validMoves:n,onTileClick:Yl,gameMode:l.gameMode,visibilityRadius:l.sightRange,isMobile:d,isDarkMode:s})}),m.jsx(It,{children:l.remainingSteps>0&&l.movementState!=="ROLLING"&&m.jsx(fe.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},className:"absolute inset-0 pointer-events-none flex items-center justify-center z-10",children:m.jsx("div",{className:"text-[10rem] font-bold text-slate-900/10 dark:text-white/20 drop-shadow-lg select-none",children:l.remainingSteps})})}),m.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-20",children:m.jsxs("div",{className:"relative w-full h-full max-w-4xl max-h-[800px]",children:[m.jsxs("div",{className:`absolute bottom-20 right-8 pointer-events-auto transition-all duration-300 ${l.gameMode===Ce.MBTI_16?"translate-x-24":""}`,children:[D&&l.subPhase==="IDLE"&&l.remainingSteps===0&&m.jsxs("div",{className:"mb-6 p-4 bg-slate-800/80 rounded-2xl border border-amber-500/30 backdrop-blur shadow-xl",children:[m.jsx("h3",{className:"text-amber-400 font-bold mb-3 text-sm uppercase tracking-wider",children:""}),m.jsx("div",{className:"flex gap-2 justify-center",children:[1,2,3,4,5,6,7,8].map(k=>m.jsx("button",{onClick:()=>Kl(k),className:"w-12 h-12 rounded-xl bg-slate-700 hover:bg-amber-500 text-white font-bold text-xl transition shadow-lg border border-slate-600",children:k},k))})]}),l.subPhase==="IDLE"&&!Fe.isBot&&l.remainingSteps===0&&m.jsxs("button",{onClick:()=>Kl(),disabled:D||l.movementState!=="IDLE",className:`group relative w-24 h-24 rounded-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 flex items-center justify-center shadow-2xl transition hover:scale-105 active:scale-95 ${D?"opacity-50 cursor-not-allowed":""}`,children:[m.jsx("div",{className:"absolute inset-0 rounded-full border border-teal-500/30 animate-ping opacity-20"}),m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx(F2,{className:"text-teal-500 group-hover:text-teal-600 dark:group-hover:text-white transition mb-1",size:28}),m.jsx("span",{className:"text-[10px] text-teal-600/80 dark:text-teal-500/80 font-bold uppercase tracking-widest",children:""})]})]}),l.movementState==="ROLLING"&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center -translate-y-12",children:m.jsx(s5,{value:l.diceValue,rolling:!0})})]}),m.jsx(It,{children:l.movementState==="IDLE"&&(l.activeModifier!=="NORMAL"||l.activeSpecialAbility!=="NONE")&&l.subPhase==="SELECTING_CARD"&&m.jsx(fe.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:2,opacity:0},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white/90 dark:bg-black/80 backdrop-blur-md p-6 rounded-3xl border-2 border-amber-500 text-center shadow-[0_0_50px_rgba(245,158,11,0.5)] text-slate-800 dark:text-white",children:[m.jsxs("div",{className:"text-6xl mb-2",children:[l.activeModifier==="DOUBLE"&&" x2"," ",l.activeModifier==="HALF"&&" 2"," ",l.activeModifier==="CLONE"&&""," ",l.activeModifier==="TRANSFER"&&"",l.activeSpecialAbility==="FREEDOM"&&""," ",l.activeSpecialAbility==="SUBSTITUTE"&&""," ",l.activeSpecialAbility==="COMPANION"&&""]}),m.jsxs("div",{className:"text-2xl font-bold text-amber-500 dark:text-amber-400",children:[l.activeModifier==="DOUBLE"&&""," ",l.activeModifier==="HALF"&&""," ",l.activeModifier==="CLONE"&&""," ",l.activeModifier==="TRANSFER"&&"",l.activeSpecialAbility==="FREEDOM"&&""," ",l.activeSpecialAbility==="SUBSTITUTE"&&""," ",l.activeSpecialAbility==="COMPANION"&&""]})]})})}),m.jsx(It,{children:l.subPhase==="SELECTING_CARD"&&m.jsx(fe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"absolute inset-0 flex items-center justify-center pointer-events-auto",children:m.jsx("div",{className:"grid grid-cols-2 gap-6 p-8 bg-white/90 dark:bg-slate-900/80 backdrop-blur-xl rounded-3xl border border-slate-200 dark:border-slate-700 shadow-2xl",children:["standard","truth","dare","deep"].map(k=>{const b=fi[k];return m.jsxs("button",{onClick:()=>Nf(k),className:`w-40 h-48 rounded-2xl flex flex-col items-center justify-center gap-4 transition-all hover:-translate-y-2 hover:shadow-xl border ${b.color} bg-opacity-20 hover:bg-opacity-30 group`,children:[m.jsx("div",{className:"text-5xl group-hover:scale-110 transition",children:b.icon}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:b.name}),m.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-white/60",children:["x",b.multiplier," "]})]})]},k)})})})})]})}),m.jsx(It,{children:(l.subPhase==="VIEWING_TASK"||l.subPhase==="TASK_EXECUTION")&&m.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-md p-4 overflow-y-auto",children:m.jsxs("div",{className:`flex ${d?"flex-col":"flex-row"} gap-6 items-center w-full max-w-6xl justify-center`,children:[m.jsx("div",{className:"w-full max-w-lg bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-2xl overflow-hidden flex flex-col transition-all duration-300",children:l.selectedTask?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:`p-8 ${fi[l.selectedTask.category].color} bg-opacity-20 text-center relative`,children:[m.jsx("div",{className:"text-5xl mb-3",children:fi[l.selectedTask.category].icon}),m.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:l.selectedTask.title}),m.jsxs("div",{className:"flex justify-center gap-2",children:[m.jsxs("span",{className:"px-2 py-0.5 bg-black/10 dark:bg-black/20 rounded-full text-[10px] text-slate-600 dark:text-white/90",children:[" ",l.selectedTask.durationSeconds,"s"]}),m.jsxs("span",{className:"px-2 py-0.5 bg-black/10 dark:bg-black/20 rounded-full text-[10px] text-slate-600 dark:text-white/90",children:[" ",l.selectedTask.scoreType]})]}),m.jsx("button",{onClick:()=>u(k=>({...k,subPhase:"SELECTING_CARD"})),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:text-white/50 dark:hover:text-white",children:m.jsx($l,{size:18})})]}),m.jsxs("div",{className:"p-6 flex-1 flex flex-col min-h-0",children:[m.jsxs("p",{className:"text-md text-slate-600 dark:text-slate-300 leading-relaxed text-center mb-6 flex-shrink-0 italic",children:['"',l.selectedTask.description,'"']}),l.helperId&&m.jsxs("div",{className:"mb-4 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-500/30 p-2 rounded-lg flex items-center gap-3 justify-center text-indigo-700 dark:text-indigo-200 text-xs",children:[m.jsx(ic,{size:14})," ",m.jsxs("span",{children:[": ",m.jsx("strong",{children:(Df=l.players.find(k=>k.id===l.helperId))==null?void 0:Df.name})]})]}),l.subPhase==="VIEWING_TASK"?m.jsxs("div",{className:"space-y-4 pt-2",children:[m.jsxs("button",{onClick:kf,className:"w-full py-4 bg-gradient-to-r from-teal-600 to-blue-600 hover:brightness-110 rounded-2xl font-bold text-white shadow-lg transition-all text-lg flex items-center justify-center gap-2 group",children:[" ",m.jsx(li,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("button",{onClick:gT,disabled:l.hasReselected,className:"py-2.5 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 disabled:opacity-50 rounded-xl text-slate-500 dark:text-slate-300 text-[10px] font-bold flex flex-col items-center justify-center gap-1 transition-all",children:[m.jsx(dx,{size:14})," "]}),m.jsxs("button",{onClick:vT,className:"py-2.5 bg-indigo-50 hover:bg-indigo-100 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 rounded-xl text-indigo-600 dark:text-indigo-300 text-[10px] font-bold flex flex-col items-center justify-center gap-1 border border-indigo-200 dark:border-indigo-500/30 transition-all",children:[m.jsx(ic,{size:14}),"  (",3-l.sharedHelpUsedCount,")"]}),m.jsxs("button",{onClick:yT,className:"py-2.5 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 rounded-xl text-slate-500 dark:text-slate-400 text-[10px] font-bold flex flex-col items-center justify-center gap-1 transition-all",children:[m.jsx(iP,{size:14}),"  (-",Fe.skipUsedCount,")"]})]})]}):m.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[m.jsxs("div",{className:"flex-1 w-full bg-slate-50 dark:bg-black/20 rounded-2xl p-5 mb-4 border border-slate-200 dark:border-white/10 overflow-y-auto relative min-h-[200px]",children:[R&&m.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 text-red-500 animate-pulse font-bold text-[10px] z-20",children:[m.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"})," "]}),m.jsx("textarea",{className:"w-full h-full bg-transparent resize-none outline-none text-slate-700 dark:text-slate-200 text-lg leading-relaxed placeholder:text-slate-400 font-medium",placeholder:R?"...":"...",value:_,onChange:k=>P(k.target.value)})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"flex-1 bg-slate-100 dark:bg-slate-800 rounded-xl flex items-center justify-center overflow-hidden border-2 border-slate-200 dark:border-slate-700 h-16",children:[m.jsx("canvas",{ref:he,className:"hidden"}),m.jsxs("span",{className:"text-3xl font-mono font-black text-slate-800 dark:text-white",children:[v,"s"]})]}),m.jsx("button",{onClick:()=>_f(),className:"flex-[2] px-6 bg-teal-600 hover:bg-teal-500 text-white rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 text-md",children:""})]})]})]})]}):m.jsx("div",{className:"p-12 flex flex-col items-center justify-center space-y-4",children:m.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-teal-500 border-t-transparent animate-spin"})})}),j&&!d&&m.jsxs(fe.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},className:"w-72 bg-slate-900 rounded-3xl border border-slate-700 shadow-2xl overflow-hidden flex flex-col h-[520px] relative",children:[m.jsxs("div",{className:"p-3 bg-slate-800 border-b border-slate-700 flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest",children:"AI Observation"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[B.length>1&&m.jsx("button",{onClick:mT,className:"p-1.5 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-teal-400 transition",title:"",children:m.jsx(eP,{size:14})}),m.jsx(V2,{size:12,className:"text-teal-400"})]})]}),m.jsxs("div",{className:"flex-1 bg-black relative flex items-center justify-center overflow-hidden",children:[m.jsx("video",{ref:Z,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover",onLoadedMetadata:k=>k.currentTarget.play()}),m.jsxs("div",{className:"absolute inset-0 pointer-events-none border-[15px] border-transparent",children:[m.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t border-l border-teal-500/40"}),m.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-t border-r border-teal-500/40"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b border-l border-teal-500/40"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b border-r border-teal-500/40"}),m.jsx(fe.div,{animate:{top:["5%","95%","5%"]},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute left-2 right-2 h-px bg-teal-500/20 blur-[1px] z-10"})]})]}),m.jsxs("div",{className:"p-4 bg-slate-800/90 backdrop-blur-md",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(Is,{size:16,className:"text-teal-400"}),m.jsx("h4",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:""})]}),m.jsx("p",{className:"text-[9px] text-slate-400 leading-relaxed italic",children:" AI "})]})]})]})})}),m.jsxs(It,{children:[l.subPhase==="PEER_REVIEW"&&Mf&&m.jsx(a5,{reviewer:Mf,actor:Fe,hasHighEnergyBonus:re,onSubmit:Ql}),l.subPhase==="TASK_EXECUTION"&&R&&m.jsxs("div",{className:"absolute top-24 right-6 flex flex-col items-center gap-2",children:[m.jsxs("div",{className:"w-4 h-32 bg-slate-800 rounded-full overflow-hidden border border-slate-600 relative",children:[m.jsx("div",{className:"absolute bottom-0 w-full transition-all duration-100 bg-gradient-to-t from-green-500 via-yellow-400 to-red-500",style:{height:`${Math.min(100,$*200)}%`}}),m.jsx("div",{className:"absolute bottom-[40%] w-full h-[2px] bg-white opacity-50"})]}),m.jsx(uP,{size:16,className:$>.4?"text-red-500 animate-bounce":"text-slate-500"}),re&&m.jsx(Gd,{size:16,className:"text-yellow-400 fill-yellow-400 animate-pulse"})]})]}),m.jsx(It,{children:(l.subPhase==="SELECTING_SCORE_TARGET"||l.subPhase==="SELECTING_SUBSTITUTE"||l.subPhase==="SELECTING_COMPANION")&&m.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-6 rounded-2xl text-center border-2 border-amber-500/50 shadow-2xl",children:[m.jsxs("h3",{className:"font-bold text-amber-500 dark:text-amber-400 mb-2 text-xl",children:[l.subPhase==="SELECTING_SCORE_TARGET"&&(l.activeModifier==="CLONE"?" ":" "),l.subPhase==="SELECTING_SUBSTITUTE"&&" ",l.subPhase==="SELECTING_COMPANION"&&" "]}),m.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-60 overflow-y-auto mt-4",children:l.players.filter(k=>k.id!==Fe.id).map(k=>m.jsxs("button",{onClick:()=>{l.subPhase==="SELECTING_SCORE_TARGET"&&Af(k.id),l.subPhase==="SELECTING_SUBSTITUTE"&&Ef(k.id),l.subPhase==="SELECTING_COMPANION"&&Cf(k.id)},className:"p-3 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-xl flex flex-col items-center gap-2 border border-transparent hover:border-amber-500 transition",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-300 dark:bg-slate-600 overflow-hidden",children:k.avatar.startsWith("data:")?m.jsx("img",{src:k.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-slate-700 dark:text-white",children:k.name[0]})}),m.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:k.name})]},k.id))})]})})}),m.jsx(It,{children:l.subPhase==="CHOOSING_HELPER"&&m.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-6 rounded-2xl text-center",children:[m.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:""}),m.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:l.players.filter(k=>k.id!==Fe.id).map(k=>m.jsxs("button",{onClick:()=>If(k.id),className:"p-3 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 rounded-xl flex flex-col items-center gap-2",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-300 dark:bg-slate-600 overflow-hidden",children:k.avatar.startsWith("data:")?m.jsx("img",{src:k.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-slate-700 dark:text-white",children:k.name[0]})}),m.jsx("span",{className:"text-xs text-slate-800 dark:text-white",children:k.name})]},k.id))})]})})}),m.jsx("div",{className:`absolute ${d?"bottom-4 left-4 scale-75":"bottom-6 left-6"} z-40`,children:m.jsx("div",{className:`relative group ${d?"w-24 h-24":"w-32 h-32"}`,children:m.jsx("div",{className:"w-full h-full rounded-full overflow-hidden border-2 border-white dark:border-slate-700 shadow-xl bg-white dark:bg-black flex items-center justify-center",children:Fe.avatar.startsWith("data:")?m.jsx("img",{src:Fe.avatar,className:"w-full h-full object-cover"}):m.jsx("div",{className:"text-4xl font-bold text-slate-400 dark:text-slate-500",children:Fe.name[0]})})})}),d&&o&&m.jsxs("button",{onClick:()=>r(!1),className:"absolute bottom-6 right-6 z-[60] w-14 h-14 bg-teal-600 dark:bg-teal-500 text-white rounded-full flex items-center justify-center shadow-[0_8px_20px_rgba(20,184,166,0.3)] border-2 border-white dark:border-slate-800 transition-all active:scale-95 animate-in zoom-in-50 duration-300",children:[m.jsx(ux,{size:24}),m.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white dark:border-slate-800"})]})]}),m.jsxs("div",{className:`bg-white/95 dark:bg-slate-900/90 backdrop-blur-xl border-slate-200 dark:border-white/5 flex flex-col transition-all duration-500 z-50 shadow-2xl ${d?`fixed bottom-0 left-0 right-0 border-t rounded-t-[3rem] h-[60vh] transform ${o?"translate-y-full":"translate-y-0"}`:o?"w-16 border-l shrink-0":"w-64 border-l shrink-0"}`,children:[m.jsxs("div",{className:`${d?"h-14":"h-16"} flex items-center justify-between px-8 border-b border-slate-100 dark:border-white/5 shrink-0`,children:[m.jsx("span",{className:`font-black text-slate-800 dark:text-white ${d?"text-sm":"text-xs"} uppercase tracking-[0.2em]`,children:""}),m.jsx("button",{onClick:()=>r(!0),className:"p-2 text-slate-400 hover:text-teal-600 dark:text-slate-500 dark:hover:text-teal-400 transition-colors",children:m.jsx(sx,{size:24,className:d?"rotate-90":""})})]}),o?m.jsx("div",{className:"flex flex-col items-center gap-4 py-4",children:l.players.map(k=>m.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-[10px] border ${k.id===Fe.id?"border-teal-500 text-teal-500":"border-slate-300 dark:border-slate-700 text-slate-400"}`,children:k.name[0]},k.id))}):m.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[m.jsx("div",{className:`overflow-y-auto custom-scrollbar p-3 transition-all duration-300 ${l.players.length>6?"space-y-1.5":"space-y-3"}`,style:{maxHeight:"65%"},children:[...l.players].sort((k,b)=>b.trustScore+b.insightScore+b.expressionScore-(k.trustScore+k.insightScore+k.expressionScore)).map(k=>{const b=k.trustScore+k.insightScore+k.expressionScore,M=l.players.length>6;return m.jsxs("div",{className:`rounded-xl border transition-all ${M?"p-2":"p-3"} ${k.id===Fe.id?"bg-slate-50 dark:bg-slate-800 border-teal-500/30 shadow-lg":"bg-transparent border-slate-100 dark:border-slate-800/50"}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-700 dark:text-white overflow-hidden ring-1 ring-slate-300 dark:ring-slate-600 ${M?"w-6 h-6 text-[9px]":"w-8 h-8 text-[10px]"}`,children:k.avatar.startsWith("data:")?m.jsx("img",{src:k.avatar,className:"w-full h-full object-cover"}):k.name[0]}),m.jsxs("div",{className:"leading-tight",children:[m.jsx("div",{className:`font-bold text-slate-700 dark:text-slate-200 ${M?"text-[10px]":"text-xs"}`,children:k.name}),m.jsx("div",{className:"text-[9px] text-slate-400 dark:text-slate-500",children:k.mbti})]})]}),m.jsx("div",{className:`font-bold text-amber-500 ${M?"text-xs":"text-sm"}`,children:b})]}),m.jsxs("div",{className:"flex gap-1 text-[9px] text-slate-500",children:[m.jsxs("div",{className:"flex-1 bg-slate-100 dark:bg-slate-900/40 rounded px-1.5 py-0.5 flex justify-between",children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:k.trustScore})]}),m.jsxs("div",{className:"flex-1 bg-slate-100 dark:bg-slate-900/40 rounded px-1.5 py-0.5 flex justify-between",children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-purple-500 dark:text-purple-400",children:k.insightScore})]}),m.jsxs("div",{className:"flex-1 bg-slate-100 dark:bg-slate-900/40 rounded px-1.5 py-0.5 flex justify-between",children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-orange-500 dark:text-orange-400",children:k.expressionScore})]})]})]},k.id)})}),m.jsx("div",{className:"flex-1 bg-slate-50/50 dark:bg-slate-950/50 border-t border-slate-200 dark:border-slate-800 p-3 overflow-y-auto custom-scrollbar text-[10px] space-y-1.5 min-h-[150px]",children:l.logs.slice(-30).map(k=>m.jsxs("div",{className:"text-slate-500 dark:text-slate-400 leading-snug mb-1.5 border-b border-slate-200 dark:border-slate-900/50 pb-1",children:[m.jsx("span",{className:"text-teal-600 dark:text-teal-500 font-bold mr-1",children:k.author||""}),k.text,k.taskDetails&&m.jsx("div",{className:"text-[9px] text-slate-400 dark:text-slate-600 mt-0.5 italic line-clamp-2",children:k.taskDetails})]},k.id))})]})]})]}),C&&m.jsx(Ic,{onClose:()=>I(!1)})]})]})}const aT=document.getElementById("root");if(!aT)throw new Error("Could not find root element to mount to");const d5=ja.createRoot(aT);d5.render(m.jsx(Se.StrictMode,{children:m.jsx(c5,{})}));
